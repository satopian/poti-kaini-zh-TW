!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=r.parcelRequire94c2;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},r.parcelRequire94c2=o),o.register("2evKT",(function(t,r){var n,i;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var o={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)o[t[r]]=e[t[r]]},i=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("3kC7t",(function(t,r){function n(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function l(e){n(a,i,o,l,s,"next",e)}function s(e){n(a,i,o,l,s,"throw",e)}l(void 0)}))}}e(t.exports,"default",(function(){return i}))})),o.register("3Rl3W",(function(t,r){e(t.exports,"default",(function(){return i}));var n=o("7U0Ew");function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){(0,n.default)(e,t,r[t])}))}return e}})),o.register("7U0Ew",(function(t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e(t.exports,"default",(function(){return n}))})),o.register("a7ch7",(function(t,r){function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}e(t.exports,"default",(function(){return n}))})),o.register("2gUX3",(function(t,r){e(t.exports,"__generator",(function(){return n}));o("dfzUC");function n(e,t){var r,n,i,o,a=function(e){return function(t){return l([e,t])}},l=function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}},s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;Object.create})),o.register("dfzUC",(function(t,r){function n(e){return e&&e.constructor===Symbol?"symbol":typeof e}e(t.exports,"default",(function(){return n}))})),o.register("f6OTe",(function(t,r){var n;e(t.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var i={};function o(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=i[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),i[e]=t),t}})),o.register("1mH1z",(function(t,r){e(t.exports,"LS_LANGUAGE_KEY",(function(){return f})),e(t.exports,"languageStrings",(function(){return h})),e(t.exports,"LANG",(function(){return m})),e(t.exports,"initLANG",(function(){return b}));var n=o("3kC7t"),i=o("gFgFC"),a=o("kiQ5H"),l=o("7U0Ew"),s=o("3Rl3W"),c=o("2gUX3"),u=o("fgfvl"),f="klecks-language",d=function(){"use strict";function e(){(0,i.default)(this,e),(0,l.default)(this,"listeners",[]),this.data=(0,s.default)({},u.english),this.code="en"}return(0,a.default)(e,[{key:"setLanguage",value:function(e){var t=this;return(0,n.default)((function(){var r;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return"en"!==e?[3,1]:(t.data=(0,s.default)({},u.english),[3,3]);case 1:return r=[{},u.english],[4,(0,u.loadLanguage)(e)];case 2:t.data=s.default.apply(void 0,r.concat([n.sent()])),n.label=3;case 3:return t.code=e,document.documentElement.setAttribute("lang",e),t.listeners.forEach((function(e){e()})),[2]}}))}))()}},{key:"get",value:function(e){if(!(e in this.data))throw new Error("translation code doesn't exist: "+e);return this.data[e]}},{key:"getLanguage",value:function(){var e=this;return u.languages.find((function(t){return t.code===e.code}))}},{key:"getAutoLanguage",value:function(){var e=p(!1);return u.languages.find((function(t){return t.code===e}))}},{key:"getCode",value:function(){return this.code}},{key:"subscribe",value:function(e){this.listeners.includes(e)||this.listeners.push(e)}},{key:"unsubscribe",value:function(e){for(var t=0;t<this.listeners.length;t++)if(e===this.listeners[t])return void this.listeners.splice(t,1)}}]),e}();function p(e){var t=function(e){var t=n[e],i=u.languages.find((function(e){return e.code.toLowerCase()===t.toLowerCase()}));if(i)return r=i.code,"break"},r="en",n=[];if((navigator.languages?navigator.languages:[navigator.language]).forEach((function(e){var t=e.split("-");n.push(e),2===t.length&&n.push(t[0])})),e)try{localStorage.getItem(f)&&n.unshift(localStorage.getItem(f))}catch(e){}for(var i=0;i<n.length;i++){if("break"===t(i))break}return r}var g=p(!0),h=new d,m=function(e,t){if(t){var r=h.get(e);return Object.keys(t).forEach((function(e){r=r.replace("{".concat(e,"}"),t[e])})),r}return h.get(e)},b=function(){return h.setLanguage(g)}})),o.register("gFgFC",(function(t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e(t.exports,"default",(function(){return n}))})),o.register("kiQ5H",(function(t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e(t.exports,"default",(function(){return i}))})),o.register("fgfvl",(function(r,n){e(r.exports,"english",(function(){return s})),e(r.exports,"languages",(function(){return c})),e(r.exports,"loadLanguage",(function(){return u}));var i,a=o("3kC7t"),l=o("2gUX3"),s=t(o("iQKsR")),c=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français"},{code:"ja",name:"日本語"},{code:"zh-CN",name:"简体中文"},{code:"zh-TW",name:"繁體中文"}],u=(i=(0,a.default)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return"en"!==e?[3,1]:[2,s];case 1:return"de"!==e?[3,3]:[4,o("79ZVO")];case 2:case 4:case 6:case 8:case 10:return[2,t.sent()];case 3:return"fr"!==e?[3,5]:[4,o("jWq4n")];case 5:return"ja"!==e?[3,7]:[4,o("24FtO")];case 7:return"zh-CN"!==e?[3,9]:[4,o("jex1i")];case 9:return"zh-TW"!==e?[3,11]:[4,o("jLsx7")];case 11:throw new Error("unknown language code")}}))})),function(e){return i.apply(this,arguments)})})),o.register("iQKsR",(function(e,t){e.exports=JSON.parse('{"switch-ui-left-right":"Switch left/right UI","toggle-show-tools":"Show/Hide Tools","scroll":"Scroll","donate":"Donate","home":"Home","modal-new-tab":"Open in new tab","tab-edit":"Edit","tab-file":"File","tool-brush":"Brush","tool-paint-bucket":"Paint Bucket","tool-gradient":"Gradient","tool-shape":"Shape","tool-text":"Text","tool-hand":"Hand Tool","tool-zoom":"Zoom","undo":"Undo","redo":"Redo","brush-pen":"Pen","brush-blend":"Blend","brush-sketchy":"Sketchy","brush-pixel":"Pixel","brush-chemy":"Chemy","brush-smudge":"Smudge","brush-size":"Size","brush-blending":"Blending","brush-toggle-pressure":"Toggle Pressure Sensitivity","brush-pen-circle":"Circle","brush-pen-chalk":"Chalk","brush-pen-calligraphy":"Calligraphy","brush-pen-square":"Square","brush-sketchy-scale":"Scale","brush-pixel-dither":"Dither","brush-chemy-fill":"Fill","brush-chemy-stroke":"Stroke","brush-chemy-mirror-x":"Horizontal Symmetry","brush-chemy-mirror-y":"Vertical Symmetry","brush-chemy-gradient":"Gradient","brush-eraser-transparent-bg":"Transparent Background","stabilizer":"Stabilizer","stabilizer-title":"Stroke Stabilizer","eyedropper":"Eyedropper","secondary-color":"Secondary Color","manual-color-input":"Manual Color Input","mci-hex":"Hex","mci-copy":"Copy","modal-ok":"Ok","modal-cancel":"Cancel","modal-close":"Close","layers-active-layer":"Active Layer","layers-layer":"Layer","layers-copy":"copy","layers-blending":"Blending","layers-new":"New Layer","layers-remove":"Remove Layer","layers-duplicate":"Duplicate Layer","layers-merge":"Merge with layer below","layers-rename":"Rename","layers-blend-normal":"normal","layers-blend-darken":"darken","layers-blend-multiply":"multiply","layers-blend-color-burn":"color burn","layers-blend-lighten":"lighten","layers-blend-screen":"screen","layers-blend-color-dodge":"color dodge","layers-blend-overlay":"overlay","layers-blend-soft-light":"soft light","layers-blend-hard-light":"hard light","layers-blend-difference":"difference","layers-blend-exclusion":"exclusion","layers-blend-hue":"hue","layers-blend-saturation":"saturation","layers-blend-color":"color","layers-blend-luminosity":"luminosity","layers-rename-title":"Rename Layer","layers-rename-name":"Name","layers-rename-clear":"Clear Name","layers-rename-sketch":"Sketch","layers-rename-colors":"Colors","layers-rename-shading":"Shading","layers-rename-lines":"Lines","layers-rename-effects":"Effects","layers-rename-foreground":"Foreground","layers-merge-modal-title":"Merge/Mix Layers","layers-merge-description":"Merges the selected layer with the one underneath. Select the mix mode:","file-no-autosave":"No autosave, no cloud storage","file-new":"New","file-import":"Import","file-save":"Save","file-format":"File Format","file-copy":"Copy","file-copy-title":"Copy To Clipboard","file-share":"Share","file-storage":"Browser Storage","file-storage-thumb-title":"Restores when reopening page","file-storage-about":"About Browser Storage","file-storage-cant-access":"Can\'t access","file-storage-empty":"Empty","file-storage-store":"Store","file-storage-clear":"Clear","file-storage-storing":"Storing","file-storage-overwrite":"Overwrite","file-storage-min-ago":"{x}min ago","file-storage-hours-ago":"{x}h ago","file-storage-days-ago":"{x}d ago","file-storage-month-ago":"> 1month ago","file-storage-restored":"Restored from Browser Storage","file-storage-stored":"Stored to Browser Storage","file-storage-failed":"Failed to store to Browser Storage","file-storage-failed-1":"Failed to store. Possible causes:","file-storage-failed-2":"Out of disk space","file-storage-failed-3":"Storage disabled in incognito tab","file-storage-failed-4":"Browser doesn\'t support storage","file-storage-failed-clear":"Failed to clear.","file-upload":"Upload","cleared-layer":"Cleared layer","filled":"Filled","new-title":"New Image","new-current":"Current","new-fit":"Fit","new-oversize":"Oversize","new-square":"Square","new-landscape":"Landscape","new-portrait":"Portrait","new-screen":"Screen","new-video":"Video","new-din-paper":"DIN Paper","new-px":"px","new-ratio":"Ratio","upload-title":"Upload to Imgur","upload-link-notice":"Anyone with the link to your uploaded image will be able to view it.","upload-name":"Title","upload-title-untitled":"Untitled","upload-caption":"Caption","upload-submit":"Upload","upload-uploading":"Uploading...","upload-success":"Upload Successful","upload-failed":"Upload failed.","upload-delete":"To delete your image from Imgur visit:","cropcopy-title-copy":"Copy To Clipboard","cropcopy-title-crop":"Crop","cropcopy-click-hold":"Right-click or press hold to copy.","cropcopy-btn-copy":"To Clipboard","cropcopy-copied":"Copied.","cropcopy-btn-crop":"Apply Crop","crop-drag-to-crop":"Drag to crop","filter-crop-extend":"Crop/Extend","filter-flip":"Flip","filter-perspective":"Perspective","filter-resize":"Resize","filter-rotate":"Rotate","filter-transform":"Transform","filter-bright-contrast":"Bright/Contrast","filter-curves":"Curves","filter-hue-sat":"Hue/Saturation","filter-invert":"Invert","filter-tilt-shift":"Tilt Shift","filter-to-alpha":"To Alpha","filter-triangle-blur":"Triangle Blur","filter-unsharp-mask":"Unsharp Mask","filter-crop-title":"Crop / Extend","filter-crop-description":"Crop or extend the image.","filter-crop-left":"Left","filter-crop-right":"Right","filter-crop-top":"Top","filter-crop-bottom":"Bottom","filter-crop-rule-thirds":"Rule of Thirds","filter-crop-fill":"Fill","filter-flip-title":"Flip","filter-flip-description":"Flips layer or whole image.","filter-flip-horizontal":"Horizontal","filter-flip-vertical":"Vertical","filter-flip-image":"Flip Image","filter-flip-layer":"Flip Layer","filter-perspective-title":"Perspective","filter-perspective-description":"Transforms the selected layer.","filter-resize-title":"Resize","filter-resize-description":"Resizes the image.","filter-rotate-title":"Rotate","filter-rotate-description":"Rotates the image.","filter-transform-empty":"Layer is empty.","filter-transform-title":"Transform","filter-transform-description":"Transforms selected layer. Hold Shift for additional behavior.","filter-transform-rotation":"Rotation","filter-transform-flip":"Flip","filter-transform-center":"Center","filter-transform-constrain":"Constrain","filter-transform-snap":"Snap","filter-transform-snap-title":"Snap Rotation And Position","filter-bright-contrast-title":"Brightness / Contrast","filter-bright-contrast-description":"Change brightness and contrast for the selected layer.","filter-bright-contrast-brightness":"Brightness","filter-bright-contrast-contrast":"Contrast","filter-curves-title":"Curves","filter-curves-description":"Apply curves on the selected layer.","filter-curves-all":"All","filter-hue-sat-title":"Hue / Saturation","filter-hue-sat-description":"Change hue and saturation for the selected layer.","filter-hue-sat-hue":"Hue","filter-hue-sat-saturation":"Saturation","filter-applied":"applied","filter-tilt-shift-title":"Tilt Shift","filter-tilt-shift-description":"Applies tilt shift on the selected layer.","filter-tilt-shift-blur":"Blur Radius","filter-tilt-shift-gradient":"Gradient Radius","filter-to-alpha-title":"To Alpha","filter-to-alpha-description":"Generates alpha channel for selected layer from:","filter-to-alpha-inverted-lum":"Inverted Luminance","filter-to-alpha-lum":"Luminance","filter-to-alpha-replace":"Replace RGB","filter-triangle-blur-title":"Triangle Blur","filter-triangle-blur-description":"Applies triangle blur on the selected layer.","filter-unsharp-mask-title":"Unsharp Mask","filter-unsharp-mask-description":"Sharpens the selected layer by scaling pixels away from the average of their neighbors.","filter-unsharp-mask-strength":"Strength","filter-grid":"Grid","filter-grid-description":"Draws grid on selected layer.","filter-noise":"Noise","filter-noise-description":"Adds noise to selected layer.","filter-noise-scale":"Scale","filter-noise-alpha":"Alpha","filter-pattern":"Pattern","filter-pattern-description":"Generates pattern on selected layer. Drag the preview for further controls.","filter-distort":"Distort","filter-distort-description":"Distorts the selected layer.","filter-distort-phase":"Phase","filter-distort-stepsize":"Step Size","filter-distort-sync-xy":"Sync XY","filter-vanish-point":"Vanish Point","filter-vanish-point-title":"Vanishing Point","filter-vanish-point-description":"Adds vanishing point to selected layer. Drag preview to move.","filter-vanish-point-lines":"Lines","import-opening":"Opening file...","import-title":"Import Image","import-too-large":"Image too large, will be downscaled.","import-btn-as-layer":"As Layer","import-btn-as-image":"As Image","import-as-layer-title":"Import Image as New Layer","import-as-layer-description":"Adjust the position of the imported image.","import-as-layer-limit-reached":"Layer limit reached. Image will be placed on existing layer.","import-as-layer-fit":"Fit","import-flatten":"Flatten image","import-unsupported-file":"Unsupported file type. See Help for supported types.","import-broken-file":"Couldn\'t load image. File might be corrupted.","import-psd-unsupported":"Unsupported features. PSD had to be flattened.","import-psd-limited-support":"PSD support is limited. Flattened will more likely look correct.","import-psd-too-large":"Image exceeds maximum dimensions of {x} x {x} pixels. Unable to import.","import-psd-size":"Image size","hand-reset":"Reset","hand-fit":"Fit","bucket-tolerance":"Tolerance","bucket-sample":"Sample","bucket-sample-title":"Which layers to sample color from","bucket-sample-all":"All","bucket-sample-active":"Active","bucket-sample-above":"Above","bucket-grow":"Grow","bucket-grow-title":"Grow filled area (in pixels)","bucket-contiguous":"Contiguous","bucket-contiguous-title":"Only fill connected areas","gradient-linear":"Linear","gradient-linear-mirror":"Linear-Mirror","gradient-radial":"Radial","shape-stroke":"Stroke","shape-fill":"Fill","shape-rect":"Rectangle","shape-ellipse":"Ellipse","shape-line":"Line","shape-line-width":"Line Width","shape-outwards":"Outwards","shape-fixed":"Fixed 1:1","text-instruction":"Click canvas to place text","text-title":"Add Text","text-placeholder":"Your text (multiline Shift+Enter)","text-color":"Color","text-size":"Size","text-left":"Left","text-center":"Center","text-right":"Right","text-italic":"Italic","text-bold":"Bold","save-reminder-title":"Unsaved Work","save-reminder-text":"Image was not saved in {a} minutes{b}. Save now to prevent eventual loss.","save-reminder-save-psd":"Save As PSD","save-reminder-psd-layers":"PSD will remember all layers.","submit":"Submit","submit-title":"Submit Drawing","submit-prompt":"Submit drawing?","submit-submitting":"Submitting","embed-init-loading":"Loading app","embed-init-waiting":"Waiting for image","unsaved":"Unsaved","help":"Help","tab-settings":"Settings","settings-language":"Language","settings-language-reload":"Will update after reloading.","settings-theme":"Theme","theme-dark":"Dark","theme-light":"Light","terms-of-service":"Terms of Service","licenses":"Licenses","source-code":"Source Code","auto":"auto","zoom-in":"Zoom In","zoom-out":"Zoom Out","radius":"Radius","constrain-proportions":"Constrain Proportions","width":"Width","height":"Height","opacity":"Opacity","red":"Red","green":"Green","blue":"Blue","eraser":"Eraser","center":"Center","layers":"Layers","background":"Background","scaling-algorithm":"Scaling Algorithm","algorithm-smooth":"Smooth","algorithm-pixelated":"Pixelated","preview":"Preview","angle-snap":"Snap","angle-snap-title":"45° Angle Snapping","lock-alpha":"Lock Alpha","lock-alpha-title":"Locks layer\'s alpha channel","reverse":"Reverse","compare-before":"Before","compare-after":"After"}')})),o.register("79ZVO",(function(e,t){e.exports=o("ih7W4")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("5RGAp")).then((function(){return o("fz5vW")}))})),o.register("ih7W4",(function(e,t){"use strict";var r=o("5Y6Bl");e.exports=r((function(e){return new Promise((function(t,r){var n=document.getElementsByTagName("script");if([].concat(n).some((function(t){return t.src===e})))t();else{var i=document.createElement("link");i.href=e,i.rel="preload",i.as="script",document.head.appendChild(i);var o=document.createElement("script");o.async=!0,o.type="text/javascript",o.src=e,o.onerror=function(t){var n=new TypeError("Failed to fetch dynamically imported module: ".concat(e,". Error: ").concat(t.message));o.onerror=o.onload=null,o.remove(),r(n)},o.onload=function(){o.onerror=o.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(o)}}))}))})),o.register("5Y6Bl",(function(e,t){"use strict";var r={},n={},i={};e.exports=function(e,t){return function(o){var a=function(e){switch(e){case"preload":return n;case"prefetch":return i;default:return r}}(t);return a[o]?a[o]:a[o]=e.apply(null,arguments).catch((function(e){throw delete a[o],e}))}}})),o.register("jWq4n",(function(e,t){e.exports=o("ih7W4")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("2bKIP")).then((function(){return o("iGIhP")}))})),o.register("24FtO",(function(e,t){e.exports=o("ih7W4")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("y5edP")).then((function(){return o("7ZPTi")}))})),o.register("jex1i",(function(e,t){e.exports=o("ih7W4")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("dsJ3g")).then((function(){return o("blNy6")}))})),o.register("jLsx7",(function(e,t){e.exports=o("ih7W4")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("lF1Tu")).then((function(){return o("iRLcJ")}))})),o.register("1C8RU",(function(t,r){e(t.exports,"theme",(function(){return c}));var n=o("gFgFC"),i=o("kiQ5H"),a=o("7U0Ew"),l=o("7jh4K"),s="klecks-theme",c=new(function(){"use strict";function e(){var t=this;(0,n.default)(this,e),(0,a.default)(this,"mediaQueryTheme","light"),(0,a.default)(this,"theme","light"),(0,a.default)(this,"listeners",[]),this.mediaQueryTheme=(0,l.isDark)()?"dark":"light",(0,l.addIsDarkListener)((function(){t.mediaQueryTheme=(0,l.isDark)()?"dark":"light",t.updateTheme()})),this.storedTheme=this.readLocalStorage(),addEventListener("storage",(function(e){e.key===s&&(t.storedTheme=t.readLocalStorage(),t.updateTheme())})),this.updateTheme()}return(0,i.default)(e,[{key:"updateTheme",value:function(){var e=this.theme;this.theme=this.storedTheme||this.mediaQueryTheme,this.theme!==e&&(document.body.classList.toggle("kl-theme-dark","dark"===this.theme),this.listeners.forEach((function(e){return e()})))}},{key:"readLocalStorage",value:function(){var e=localStorage.getItem(s);return e&&("string"!=typeof e||["dark","light"].includes(e))||(e=void 0,localStorage.removeItem(s)),e}},{key:"isDark",value:function(){return"dark"===this.theme}},{key:"addIsDarkListener",value:function(e){this.listeners.includes(e)||this.listeners.push(e)}},{key:"removeIsDarkListener",value:function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e)return void this.listeners.splice(t,1)}},{key:"getMediaQueryTheme",value:function(){return this.mediaQueryTheme}},{key:"getStoredTheme",value:function(){return this.storedTheme}},{key:"setStoredTheme",value:function(e){e?localStorage.setItem(s,e):localStorage.removeItem(s),this.storedTheme=e,this.updateTheme()}}]),e}())})),o.register("7jh4K",(function(t,r){e(t.exports,"insertAfter",(function(){return i})),e(t.exports,"loadImage",(function(){return a})),e(t.exports,"css",(function(){return l})),e(t.exports,"setAttributes",(function(){return s})),e(t.exports,"append",(function(){return c})),e(t.exports,"fitInto",(function(){return u})),e(t.exports,"centerWithin",(function(){return f})),e(t.exports,"getDate",(function(){return d})),e(t.exports,"gcd",(function(){return p})),e(t.exports,"reduce",(function(){return g})),e(t.exports,"decToFraction",(function(){return h})),e(t.exports,"imageBlobToUrl",(function(){return m})),e(t.exports,"dateDayDifference",(function(){return b})),e(t.exports,"copyObj",(function(){return v})),e(t.exports,"shareCanvas",(function(){return y})),e(t.exports,"handleClick",(function(){return S})),e(t.exports,"createSvg",(function(){return H})),e(t.exports,"throwIfNull",(function(){return _})),e(t.exports,"isDark",(function(){return E})),e(t.exports,"addIsDarkListener",(function(){return k}));var n=o("4R9ai");function i(e,t){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)}function a(e,t){var r=0;!function n(){1e3!==r?e.complete?(r++,t()):setTimeout(n,1):alert("couldn't load")}()}function l(e,t){for(var r,n=Object.keys(t),i=e.style,o=0;o<n.length;o++)i[r=n[o]]=t[r],"userSelect"===r&&(i.webkitUserSelect=t[r])}function s(e,t){for(var r,n=Object.keys(t),i=0;i<n.length;i++)r=n[i],e.setAttribute(r,t[r])}function c(e,t){var r=document.createDocumentFragment();t.forEach((function(e){return e&&r.append(e)})),e.append(r)}function u(e,t,r,n,i){var o=e*r,a=t*r;return o>r&&(a*=r/o,o=r),a>n&&(o*=n/a,a=n),i&&(o=Math.max(i,o),a=Math.max(i,a)),{width:o,height:a}}function f(e,t,r,n){return{x:e/2-r/2,y:t/2-n/2}}function d(){var e=new Date;return e.getFullYear()+"_"+(e.getMonth()+1).toString().padStart(2,"0")+"_"+e.getDate().toString().padStart(2,"0")+"_"+(60*e.getHours()+e.getMinutes()).toString(36).padStart(3,"0")+"_"}function p(e,t){return t?p(t,e%t):e}function g(e,t){var r=p(e,t);return[e/r,t/r]}function h(e){var t=e.toString().length-2,r=Math.pow(10,t);return g(e*r,r)}function m(e){if(!e)throw new Error("blobObj is undefined or null");if(window.Blob&&e instanceof Blob)return URL.createObjectURL(e);if("Object"===e.constructor.name){var t=e;return"data:"+t.type+";"+t.encoding+","+t.data}throw new Error("unknown blob format")}function b(e,t){return e=new Date(e),t=new Date(t),e.setHours(0,0,0,0),t.setHours(0,0,0,0),(t.getTime()-e.getTime())/864e5}function v(e){return JSON.parse(JSON.stringify(e))}function y(e){var t="image/png",r=function(){return alert("sharing not supported")};e.canvas.toBlob((function(n){if(!n)return r(),void e.callback();try{var i=[new File([n],e.fileName,{type:t})];navigator.share({title:e.title,files:i}).then((function(){})).catch((function(){r()}))}catch(e){r()}e.callback()}),t)}function S(e){var t=e.target;return!!t&&(!(!["A","LABEL","INPUT"].includes(t.tagName)&&!t.allowClick)||(e.preventDefault(),!1))}function H(e){var t=document.createElementNS("http://www.w3.org/2000/svg",e.elementType);return Object.entries(e).forEach((function(e){var r=(0,n.default)(e,2),i=r[0],o=r[1];"childrenArr"===i?o.forEach((function(e){t.append(H(e))})):"elementType"!==i&&t.setAttribute(i,o)})),t}function _(e){if(null===e)throw new Error("value is null");return e}var w="matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)");function E(){return w&&w.matches}function k(e){w&&"addEventListener"in w&&w.addEventListener("change",e)}})),o.register("4R9ai",(function(t,r){e(t.exports,"default",(function(){return s}));var n=o("bzM49"),i=o("8XIsj"),a=o("ayP15"),l=o("jBmMa");function s(e,t){return(0,n.default)(e)||(0,i.default)(e,t)||(0,l.default)(e,t)||(0,a.default)()}})),o.register("bzM49",(function(t,r){function n(e){if(Array.isArray(e))return e}e(t.exports,"default",(function(){return n}))})),o.register("8XIsj",(function(t,r){function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e(t.exports,"default",(function(){return n}))})),o.register("ayP15",(function(t,r){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e(t.exports,"default",(function(){return n}))})),o.register("jBmMa",(function(t,r){e(t.exports,"default",(function(){return i}));var n=o("apgdg");function i(e,t){if(e){if("string"==typeof e)return(0,n.default)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.default)(e,t):void 0}}})),o.register("apgdg",(function(t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e(t.exports,"default",(function(){return n}))})),o.register("a8fvS",(function(e,t){e.exports=o("ih7W4")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("dafOa")).then((function(){return o("6NgYC")}))})),o.register("6t9OD",(function(e,t){e.exports=o("i5Beu")(o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("4GTbM"))})),o.register("i5Beu",(function(e,t){"use strict";var r=o("5Y6Bl");e.exports=r((function(e){return new Promise((function(t,r){var n=document.getElementsByTagName("link");if([].concat(n).some((function(t){return t.href===e&&t.rel.indexOf("stylesheet")>-1})))t();else{var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onerror=function(e){i.onerror=i.onload=null,i.remove(),r(e)},i.onload=function(){i.onerror=i.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(i)}}))}))})),o("2evKT").register(JSON.parse('{"dGDZJ":"embed.js","6Sfz2":"klecks-logo.77be0db3.png","5RGAp":"de.3d17e69d.js","2bKIP":"fr.a995e737.js","y5edP":"ja.6652c840.js","dsJ3g":"zh-CN.179c94c5.js","lF1Tu":"zh-TW.bc5b1d67.js","dafOa":"main-embed.6aa19314.js","hWwEP":"cancel.5edb67d5.svg","83Fnk":"check.42e17e77.svg","h8ubb":"brush-pressure.f4437531.svg","htADd":"copy.4adadd0c.svg","ffKNP":"tool-picker.d0e69c3a.svg","iqIgb":"angle.f0b557ac.svg","1twgF":"remove-layer.4e9b2b7d.svg","70WHw":"add-layer.ce1078bb.svg","3huo1":"duplicate-layer.3314e3c7.svg","1AvFX":"merge-layers.19da79a6.svg","ftA1L":"rename-layer.7c31d4f4.svg","ayl5b":"cursor-picker.db2f5b39.png","8Sx0P":"cursor-zoom-ew.fbb85406.png","ixtEz":"cursor-fill.8027a243.png","3iHbP":"cursor-text.dcaa5de5.png","fcdZI":"cursor-rotate.5b164044.png","eaJmh":"new-image.2d692480.svg","kV8IH":"import.7a68c844.svg","SROeX":"export.2deb9ff8.svg","lFrok":"share.454898d1.svg","cvYlU":"help.208e9032.svg","dW3eU":"tool-paint.f73a8943.svg","fnumN":"tool-fill.3358320a.svg","6J8A8":"tool-gradient.64486254.svg","da34V":"tool-text.1cbd0325.svg","eStsa":"tool-shape.3de78c3f.svg","eW5wL":"caret-down.68d4cd16.svg","b30IN":"tool-hand.e7fc81b9.svg","jYhj7":"tool-zoom-in.d413f042.svg","44EC1":"tool-zoom-out.299f4d1f.svg","1YnIA":"tool-undo.540bf765.svg","6ae9h":"inverted-border.3353c7f3.svg","8l03e":"edit-rotate.fd0e572a.svg","8K12o":"ui-collapse.2b5dfc6a.svg","2WSh2":"align-left.4876a845.svg","lHK8L":"align-center.6f56d4bd.svg","3kjmQ":"align-right.1521d61c.svg","g8nvA":"typo-italic.7ab32910.svg","axEKL":"typo-bold.5c790c89.svg","7tOPd":"edit-brightness-contrast.8430cb26.svg","fduLu":"edit-crop.16c534dd.svg","ijSd4":"edit-curves.bbdb97b2.svg","3lCpH":"edit-flip.00fd2c6b.svg","hhylW":"edit-hue-saturation.6e36cf05.svg","kV0ed":"edit-invert.fa435c66.png","dNk9L":"edit-perspective.e23100db.svg","aj5Gc":"edit-resize.56391e2b.svg","6D2tK":"edit-tilt-shift.dd20efff.png","7nesm":"edit-to-alpha.f7a2065a.svg","leHUT":"edit-transform.c8795430.svg","3lP2j":"edit-triangle-blur.9df2dbef.png","7G4sY":"edit-unsharp-mask.c58e988c.png","7n1Rt":"edit-grid.e900ce7b.svg","ijwf0":"edit-noise.51bd751c.svg","18gIG":"edit-pattern.1a06e094.svg","786LQ":"edit-vanish-point.fc5858e4.svg","kcnOE":"edit-distort.bdb643f2.svg","6218s":"brush-pen.49a7b91e.svg","50oCU":"brush-blend.3706e8a1.svg","jDYzC":"brush-sketchy.9e5d0120.png","j07R3":"brush-pixel.673f3e4c.svg","fvqmo":"brush-eraser.a9e10dce.svg","gNPk4":"brush-smudge.45852bcd.svg","371uF":"brush-chemy.a5a188f6.svg","gJzzT":"upload.5289e924.svg","c3ZSC":"loading.7ff8a2ac.gif","kNYzr":"dist.fd67ab5f.js","hTlU7":"bitbof-logo.bc5e3ed5.svg","hxlHN":"ui-swap-lr.7f474f51.svg","79hnx":"licenses.fa0a4b09.js","c92cL":"constrain.62f04e45.svg","kycpJ":"tab-settings.be84ac7c.svg","TzbtI":"tab-layers.c8a104e7.svg","4GTbM":"embed.016a06d0.css","9clYo":"error.abae1a5e.svg","bLSjr":"ok.398afd66.svg","8eSFI":"warning.7472a070.svg","d56Qw":"upload-large.bb0f452b.svg"}'));var a,l=o("3kC7t"),s=o("3Rl3W"),c=o("a7ch7"),u=o("2gUX3"),f={};function d(){if(a)return a;var e;try{throw new Error}catch(t){e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g)}var t,r=0;return e.forEach((function(e,t){-1!==e.indexOf("embed.js")&&(r=t)})),t=e[r],a=(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}f=o("f6OTe").getBundleURL("dGDZJ")+o("2evKT").resolve("6Sfz2");var p=o("1mH1z"),g=o("1C8RU"),h=!1;o("6t9OD"),Object.defineProperty(window,"Klecks",{value:function(e){if(h)throw new Error("Already created an embed");var r,n;h=!0,e=(0,c.default)((0,s.default)({},e),{embedUrl:e.embedUrl?e.embedUrl:d()});var i,a,m=[],b=this;(0,l.default)((function(){var a,l,s,c,d;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,(0,p.initLANG)()];case 1:for(u.sent(),a=document.createElement("div"),l=[["position","fixed"],["left","0"],["top","0"],["width","100vw"],["height","100vh"],["display","flex"],["alignItems","center"],["justifyContent","center"],["flexDirection","column"],["background",g.theme.isDark()?"rgb(33, 33, 33)":"rgb(158,158,158)"],["fontFamily","Arial, sans-serif"],["fontSize","30px"],["color","#e3e3e3"]],s=0;s<l.length;s++)a.style[l[s][0]]=l[s][1];return a.id="loading-screen",c=g.theme.isDark()&&!e.logoImg?' style="filter: invert(1)"':"",a.innerHTML='<img width="150" height="54"'+c+' src="'+(e.logoImg?e.logoImg:t(f))+'" alt="Logo"/>\n<div style="margin: 15px 0 0 0; display: flex; align-items: center">\n<div class="spinner"></div>\n<span id="loading-screen-text">'+(0,p.LANG)("embed-init-loading")+"</span></div>",document.body.appendChild(a),[4,o("a8fvS")];case 2:return d=u.sent(),i=new d.Embed(e),b.openProject=i.openProject,b.getPNG=i.getPNG,b.getPSD=i.getPSD,b.initError=i.initError,r&&i.openProject(r),n&&i.initError(n),m.length&&i.readPSDs(m),[2]}}))}))(),this.openProject=function(e){if(r)throw new Error("Already called openProject");r=e},this.initError=function(e){n=e},this.readPSD=(a=(0,l.default)((function(e){return(0,u.__generator)(this,(function(t){return[2,new Promise((function(t,r){var n={blob:e,callback:function(e){m.splice(m.indexOf(n),1),e?t(e):r()}};i?i.readPSDs([n]):m.push(n)}))]}))})),function(e){return a.apply(this,arguments)})}})}();
//# sourceMappingURL=embed.js.map

<% def(n) %>
<!--********** メインテンプレート **********
// このテンプレートは、以下のモード用テンプレートです
// ・レスモード
-->
<% /def %>
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8">
<% each(oya) %>
<!--SNS-->
<% def(sharebutton) %>
<meta name="Description" content="<% echo (oya/descriptioncom) %>">
<meta name="twitter:card" content="summary" />
<meta property="og:title" content="[<% echo (oya/no) %>] <% echo (oya/sub) %> by <% echo (oya/name) %> - <% echo (title) %>" />
<meta property="og:type" content="article" />
<meta property="og:url" content="<% echo (rooturl) %><% echo (self) %>?res=<% echo (oya/no) %>" />
<% def(oya/src) %>
<meta property="og:image" content="<% echo (rooturl) %><% echo (oya/imgsrc) %>" />
<% /def %>
<meta property="og:site_name"  content="" />
<meta property="og:description" content="<% echo (oya/descriptioncom) %>" />
<% /def %>
<!--/SNS-->
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="<% echo(skindir) %>pink.css">
<link rel="stylesheet" href="<% echo(skindir) %>icomoon/style.css">
<style>.input_disp_none{display: none;}span.canvas_size_wrap {display: inline-block;padding: 8px 0 0;}</style>
<style id="for_mobile"></style>
<title>[<% echo (oya/no) %>] <% echo (oya/sub) %> by <% echo (oya/name) %> - <% echo (title) %></title>
<% def(n) %>
<!--
// title…掲示板タイトル
// charset…文字コード
-->
<% /def %>
<% ========== クッキー読込み用JavaScript(必須) ========== %>
<script src="loadcookie.js"></script>
</head>
<body>
<div id="top"></div>
<div id="body">
<header>
<h1 id="bbs_title">[<% echo (oya/no) %>] <% echo (oya/sub) %> <span class="title_name_wrap">by <% echo (oya/name) %> 回覆</span></h1>
<% /each %>
<nav>
<div id="self2">
[<a href="<% echo (self2) %>"><% echo (title) %></a>]
<span class="menu_home_wrap">
[<a href="<% echo (home) %>" target="_top">HOME</a>]</span>
<a href="#bottom">▽</a>
	</div>
	</nav>
<% def(n) %>
	<!--
	// home…HOMEページURL
	// self…POTI-boardのスクリプト名
	// self2…入口(TOP)ページのURL
	// resno…レス時の親記事No
	-->
<% /def %>
	</header>
<% ========== 親記事グループ ========== %>
<% each(oya) %>

<article>
	<% ========== 親記事ヘッダここから ========== %>
	<h2 class="article_title">[<% echo (oya/no) %>] <% echo (oya/sub) %></h2>
	<div class="article_info">
	<span class="article_info_name"><a href="search.php?page=1&imgsearch=on&query=<% echo (oya/encoded_name) %>&radio=2" target="_blank" rel="noopener"><% echo (oya/name) %></a></span><% def(oya/url) %><span class="article_info_desc">[<a href="<% echo (oya/url) %>" target="_blank" rel="nofollow noopener noreferrer">URL</a>]</span> <% /def %>
	<% def(oya/id) %><span class="article_info_desc">ID:<% echo (oya/id) %></span> <% /def %>
	<span class="article_info_desc"><% echo (oya/now) %></span>
	<% def(oya/src) %><% def(oya/painttime) %><span class="article_info_painttime">繪圖時間:<% echo (oya/painttime) %></span><% /def %><% /def %>
	<% def(oya/updatemark) %><span class="article_info_desc"><% echo (oya/updatemark) %></span> <% /def %>
	</div>
	<% def(oya/src) %>
	<div class="article_img_info">
	<% def(oya/continue) %><span class="article_info_continue">☆<a href="<% echo (self) %>?mode=continue&no=<% echo (oya/continue) %>">續繪</a></span> <% /def %> <% def(oya/spch)><span class="for_pc"><% /def %><% def(oya/pch) %><% def(oya/continue) %>| <% /def %><span class="article_info_animation">☆<a href="<% echo (self) %>?mode=openpch&pch=<% echo (oya/pch) %>" target="_blank">過程</a></span><% /def %><% def(oya/spch)></span><% /def %>
	</div>
	<% /def %>
	<% ========== 親記事ヘッダここまで ========== %>
	<% def(n) %>
<!--
// oya…親記事配列
// oya/no…No
// oya/sub…題名
// oya/email…メールアドレス
// oya/name…名前
// oya/trip…トリップ
// oya/url…URL
// oya/now…投稿日
// oya/updatemark…編集マーク
// oya/id…ID
// oya/painttime…描画時間
// oya/src…画像URL
// oya/pch…動畫ファイル用引数(フラグ兼用)
// oya/continue…コンティニュー用引数(フラグ兼用)
// oya/thumb…サムネイルがあるとき true が入る
-->
<% /def %>
<% def(oya/src) %><div class="posted_image" <% if(oya/w,>=,750) %>style="margin-right:0;float:none;"<% /if %>><% def(oya/thumb) %><a href="<% echo (oya/src) %>" target="_blank" rel="noopener"><% /def %><img src="<% echo (oya/imgsrc) %>" width="<% echo (oya/w) %>" height="<% echo (oya/h) %>" alt="<% echo (oya/sub) %> by <% echo (oya/name) %> (<% echo (oya/size) %> B)" title="<% echo (oya/sub) %> by <% echo (oya/name) %> (<% echo (oya/size) %> B) <% def(oya/thumb) %>縮略圖顯示<% /def %>" loading="lazy"><% def(oya/thumb) %></a><% /def %>
</div>
  <% /def %><div class="comment"> <% echo (oya/com) %></div>
  <% def(n) %>
  <!--
// oya/tab…TAB順用連番
// oya/imgsrc…サムネイルがあるとき、サムネイルURL。サムネイルがないとき、画像URL
// oya/w…画像サイズ(横)
// oya/h…画像サイズ(縦)
// oya/srcname…画像ファイル名
// oya/size…画像ファイルサイズ
// oya/fontcolor…文字色
// oya/com…本文
-->
<% /def %>

<% def(oya/limit) %><hr><div class="article_limit">本留言串即將因達到儲存上限而刪除。</div><% /def %>
<% def(n) %>
<!--
// oya/limit…消える(ログ落ち)間近のとき true が入る
-->
<% /def %>

<% ========== レスがあれば・・・ ========== %>
<% def(oya/res) %>
<% ========== レス記事グループ ========== %>
<% each(oya/res) %>
<hr>
<div class="res_article_wrap">
	<% レス記事ヘッダここから %>
	<div class="res_article_title">[<% echo (oya/res/no) %>] <% echo (oya/res/sub) %></div>
	<div class="article_info">
	<span class="article_info_name"><a href="search.php?page=1&imgsearch=on&query=<% echo (oya/res/encoded_name) %>&radio=2" target="_blank" rel="noopener"><% echo (oya/res/name) %></a></span><% def(oya/res/url) %><span class="article_info_desc">[<a href="<% echo (oya/res/url) %>" target="_blank" rel="nofollow noopener noreferrer">URL</a>]</span> <% /def %>
	<% def(oya/res/id) %><span class="article_info_desc">ID:<% echo (oya/res/id) %></span> <% /def %>
	<span class="article_info_desc"><% echo (oya/res/now) %></span>
	<% def(oya/res/src) %><% def(oya/res/painttime) %><span class="article_info_painttime">繪圖時間:<% echo (oya/res/painttime) %></span><% /def %><% /def %>
	<% def(oya/res/updatemark) %><span class="article_info_desc"><% echo (oya/res/updatemark) %></span> <% /def %>
	</div>
	<% def(oya/res/src) %>
	<div class="article_img_info">
	<% def(oya/res/continue) %><span class="article_info_continue">☆<a href="<% echo (self) %>?mode=continue&no=<% echo (oya/res/continue) %>">續繪</a></span><% /def %> <% def(oya/res/spch)><span class="for_pc"><% /def %><% def(oya/res/pch) %><% def(oya/res/continue) %>| <% /def %><span class="article_info_animation">☆<a href="<% echo (self) %>?mode=openpch&pch=<% echo (oya/res/pch) %>" target="_blank">過程</a></span><% /def %><% def(oya/res/spch)></span><% /def %>
	</div>
	<% /def %>
	<% レス記事ヘッダここまで %>
	
<% def(n) %>
<!--
// oya/res…レス記事配列
// oya/res/no…No
// oya/res/sub…題名
// oya/res/email…メールアドレス
// oya/res/name…名前
// oya/res/trip…トリップ
// oya/res/url…URL
// oya/res/now…投稿日
// oya/res/updatemark…編集マーク
// oya/res/id…ID
// oya/res/painttime…描画時間
// oya/res/src…画像URL
// oya/res/pch…動畫ファイル用引数(フラグ兼用)
// oya/res/continue…コンティニュー用引数(フラグ兼用)
// oya/res/thumb…サムネイルがあるとき true が入る
-->
<% /def %>

<% def(oya/res/src) %><div class="posted_image"><% def(oya/res/thumb) %><a href="<% echo (oya/res/src) %>" target="_blank" rel="noopener"><% /def %><img src="<% echo (oya/res/imgsrc) %>" width="<% echo (oya/res/w) %>" height="<% echo (oya/res/h) %>" alt="<% echo (oya/res/sub) %>  by <% echo (oya/res/name) %> (<% echo (oya/res/size) %> B)" title="<% echo (oya/res/sub) %>  by <% echo (oya/res/name) %> (<% echo (oya/res/size) %> B) <% def(oya/res/thumb) %>縮圖顯示<% /def %>"><% def(oya/res/thumb) %></a><% /def %>
</div><% /def %>
<div class="comment"> <% echo (oya/res/com) %></div>
<% def(n) %>
<!--
// oya/res/imgsrc…サムネイルがあるとき、サムネイルURL。サムネイルがないとき、画像URL
// oya/res/w…画像サイズ(横)
// oya/res/h…画像サイズ(縦)
// oya/res/srcname…画像ファイル名
// oya/res/size…画像ファイルサイズ
// oya/res/fontcolor…文字色
// oya/res/com…本文
-->
<% /def %>
</div>
<% /each %>
<% ========== レス記事グループここまで ========== %>
<% /def %>

<div class="clear"></div>
<div class="margin_resbutton_res">
<div class="res_button_wrap">
	<% def(form) %>
	<% def(resname) %>
	<script>function add_to_com(){
		document.getElementById("p_input_com").value += "<% echo(resname) %><% def(_san)%><% echo(_san) %><% elsedef %>さん<% /def %>";
	}</script>
	
	<% コピーボタン %><button class="copy_button" onclick="add_to_com()">複製投稿者名稱</button>
	<% /def %>
	<% /def %>
	
<% def(sharebutton) %>
<span class="share_button">
	<a target="_blank" href="https://twitter.com/intent/tweet?text=%5B<% echo(oya/no|urlencode) %>%5D%20<% def(oya/share_sub)%><% echo(oya/share_sub) %><% else %><% echo(oya/sub|urlencode) %><% /def %>%20by%20<% def(oya/share_name)%><% echo(oya/share_name) %><% else %><% echo(oya/name|urlencode) %><% /def %>%20-%20<% echo(title|urlencode) %>&url=<% echo(rooturl|urlencode) %><% echo(self|urlencode) %>?res=<% echo(oya/no|urlencode) %>"><span class="icon-twitter"></span>tweet</a>
	<a target="_blank" class="fb btn" href="http://www.facebook.com/share.php?u=<% echo(rooturl|urlencode) %><% echo(self|urlencode) %>?res=<% echo(oya/no|urlencode) %>"><span class="icon-facebook2"></span>share</a>
</span>
<% /def %>
<span class="page_top"><a href="#top">△</a></span>
</div>
	</div>
<!-- /thread -->
</article>
<% /each %>
<% ========== 親記事グループここまで ========== %>
<div class="clear"></div>
<% ========== お絵かきフォーム欄 ========== %>
<% def(paintform) %>
<% ========== 実際のお絵かきフォーム ========== %>
<% def(paint) %>
<div id="res_paint_form">
<form action="<% echo (self) %>" method="post">
<% ========== お絵かきアプレット ========== %>
<script>
	function is_mobile() {
	if (navigator.maxTouchPoints && ( window.matchMedia && window.matchMedia('(max-width: 769px)').matches))  return true;
	return false;
	}
	if(is_mobile()){
		document.getElementById("for_mobile").textContent=".for_pc{display: none;}";
	}
	</script>
	
<% def(n) %>
<!--
//select_app ツールの選択メニューを出す時にtrueが入る
//use_shi_painter しぃペインターを使う設定の時にtrueが入る
//use_chickenpaint を使う設定の時にtrueが入る
-->
<% /def %>

<input type="submit" value="PAINT" class="paint_button">
<% def(select_app) %>
<span class="canvas_size">TOOL</span>
<select name="shi" class="select_applet">
	<option value="neo">PaintBBS NEO</option>
	<% def(use_shi_painter) %><option value="1" class="for_pc">Shi-Painter</option><% /def %>
	<% def(use_chickenpaint) %><option value="chicken">ChickenPaint</option><% /def %>
</select>
<% elsedef %>
<!-- 選択メニューを出さない時に起動するアプリ -->
<input type="hidden" name="shi" value="neo">
<% /def %>
<% ===キャンバスサイズ 設定はconfig.phpで === %>
<% def(n) %>
<!--
config.phpで設定した
//お絵描きデフォルトサイズ(最初に選択される数値)
PDEF_W //幅
PDEF_H// 高さ
//お絵描き最大サイズ
PMAX_W //幅
PMAX_H //高さ
が入ります。
-->
<% /def %>
<span class="canvas_size_wrap">
<span class="canvas_size">Size</span> <select name="picw" title="寬" class="canvas_select">
	<?php
	//幅 300から、PMAX_W で設定した最大値まで。
		for($i = 300; $i <=PMAX_W ; $i+=50){//50ずつ増える
		if(PDEF_W==$i){//デフォルトサイズ
		echo'<option value="'.$i.'" selected>'.$i.'</option>';
		}
		else{
		echo'<option value="'.$i.'">'.$i.'</option>';
		}
		}
	?>
	</select>
	x
	<select name="pich" title="高" class="canvas_select">
	<?php
	//高さ 300から、PMAX_H で設定した最大値まで。
		for($i = 300; $i <=PMAX_H ; $i+=50){//50ずつ増える
		if(PDEF_H==$i){//デフォルトサイズ
		echo'<option value="'.$i.'" selected>'.$i.'</option>';
		}
		else{
		echo'<option value="'.$i.'">'.$i.'</option>';
		}
		}
	?>
	</select>
</span>
	<% ===キャンバスサイズ ここまで === %>
	<% def(use_select_palettes) %>
	<span class="palette_type bold_gray">PALETTE</span> <select name="selected_palette_no" title="PALETTE" class="canvas_select palette_type"><% echo(palette_select_tags) %></select>
	<% /def %>
	
<!-- NEOを使う -->
<% def(anime) %><label class="checkbox use_animation"><input type="checkbox" value="true" name="anime"<% echo (animechk) %>>保存過程</label><% /def %>
<% def(n) %>
<!--
// anime…動畫記録機能を使用するとき true が入る
// animechk…動畫記録をデフォルトでチェックするとき ' checked' が入る
-->
<% /def %>
<input type="hidden" name="resto" value="<% echo (resno) %>">
<input type="hidden" name="mode" value="paint">
</form>
</div>

<% /def %>
<% ========== お絵かきフォーム欄のみ時に表示 ========== %>
<% def(n) %>
<!--
// pmaxw…お絵かき最大サイズ(横)
// pmaxh…お絵かき最大サイズ(縦)
// maxw…投稿サイズ(横)。レス時にはレス用の値が入る
// maxh…投稿サイズ(縦)。レス時にはレス用の値が入る
// addinfo…追加お知らせ
-->
<% /def %>

<% /def %>

<% ========== 投稿フォーム欄 ========== %>
<% def(form) %>
<form action="<% echo (self) %>" method="POST" enctype="multipart/form-data" id="post_form">
<input type="hidden" name="token" value="<% def(token) %><% echo(token) %><% /def %>">
<input type="hidden" name="mode" value="regist">
<input type="hidden" name="resto" value="<% echo (resno) %>">
<input type="hidden" name="MAX_FILE_SIZE" value="<% echo (maxbyte) %>">
<% def(n) %>
<!--
	// maxbyte…最大投稿サイズ(Byte)
-->
<% /def %>
<table id="post_table">
 <tr>
  <td class="post_table_title">名稱<% def(usename) %> (必需)<% /def %></td>
  <td><input type="text" name="name" class="post_input_text" autocomplete="username"></td>
 </tr>
 <tr>
  <td class="post_table_title">E-mail</td>
  <td><input type="text" name="email" class="post_input_text" autocomplete="email"></td>
 </tr>
 <tr>
  <td class="post_table_title">URL</td>
  <td><input type="url" name="url" class="post_input_text" autocomplete="url"></td>
 </tr>
 <tr>
  <td class="post_table_title">標題<% def(usesub) %> (必需)<% /def %></td>
  <td><input type="text" name="sub" value="<% echo (resub) %>" class="post_input_text" autocomplete="off"></td>
 </tr>
 <tr>
  <td class="post_table_title">內文<% def(usecom) %> (必需)<% /def %></td>
  <td><textarea name="com" class="post_input_com" id="p_input_com"></textarea></td>
 </tr>
 <% def(n) %>
 <!--
 // usename…名前が必須だと ' *' が入る
// usesub…題名が必須だと ' *' が入る
// usecom…本文が必須だと ' *' が入る
// resub…レス時の返信用題名(Re: ～)
-->
<% /def %>
<% ========== ファイルアップロード欄 ========== %>
<% def(upfile) %>

	 <tr>
  <td class="post_table_title">附加圖片</td>
  <td><input type="file" name="upfile" accept="image/*">
	<% def(hide_the_checkbox_for_nofile) %>
	<% elsedef %>
	<label class="checkbox textonly"> <input type="checkbox" name="textonly" value="on" checked>不附加圖片</label>
	<% /def %>
 </td>
 </tr>
<% /def %>
 <tr>
  <td class="post_table_title">密碼</td>
  <td><input type="password" name="pwd" value="" class="post_input_pass" autocomplete="current-password">
  <span class="howtoedit">(用於編輯和删除文章，請使用英數組合)</span>
</td>
 </tr>
 <tr><td colspan="2" style="text-align: center;" class="post_table_submit td_noborder"><input type="submit" value="送出" class="post_submit"></td></tr>
 <tr>
  <td colspan="2" class="td_noborder">
<% ========== ファイルアップロード時の説明 ========== %>
<% def(upfile) %>
	<ul class="howtowrite">
		<% def(hide_the_checkbox_for_nofile) %>
		<% elsedef %>
		<li>如果要附加圖片，請取消“不附加圖片”。</li>
		<% /def %>
	<li>圖片檔案大小限制為 <% echo (maxkb) %> KB。</li>
	<% echo (addinfo) %>
	</ul>
<% /def %>
</td></tr>
</table>
</form>
<% /def %>
<hr>

	<nav>
		<div class="pagelink pcdisp">
		<% def(res_prev) %><a href="<% echo (self) %>?res=<% echo (@res_prev/no) %>">≪<% echo (@res_prev/substr_sub) %></a><% /def %> 
		<div class="pagelink_top"><a href="<% echo (self2) %>">留言板頂部</a></div>
		<% def(res_next) %><a href="<% echo (self) %>?res=<% echo (@res_next/no) %>"><% echo (@res_next/substr_sub) %>≫</a><% /def %>
		</div>
		<div class="mobiledisp">
			<% def(res_prev) %>
			上一頁: <a href="<% echo (self) %>?res=<% echo (@res_prev/no) %>"><% echo (@res_prev/sub) %></a>
			<br>
			<% /def %>
			<% def(res_next) %>
			下一頁: <a href="<% echo (self) %>?res=<% echo (@res_next/no) %>"><% echo (@res_next/sub) %></a>
			<br>
			<% /def %>
		</div>
		<% def(view_other_works)%>
		<div class="view_other_works">
			<% each(view_other_works)%><div><a href="<% echo (self) %>?res=<%%(view_other_works/no)%%>"><img src="<%% (view_other_works/imgsrc)%%>" alt="<%% (view_other_works/sub)%%> by <%% (view_other_works/name)%%>" title="<%% (view_other_works/sub)%%> by <%% (view_other_works/name)%%>" width="<%% (view_other_works/w)%%>" height="<%% (view_other_works/h)%%>" loading="lazy"></a></div><% /each %>
		</div>
		<% /def %>	

	</nav>
	<footer>
	<% ========== メンテナンスフォーム欄 ========== %>
	<form action="<% echo (self) %>" method="post">
	<input type="hidden" name="thread_no" value="<% def(@oya/0/no) %><% echo(@oya/0/no) %><% /def %>">
	<div class="mente_wrap">
	<span class="nk">文章 No.<input type="number" min="1" name="del[]" autocomplete="off" class="edit_number"></span>
	<span class="input_disp_none"><input type="text" value="" autocomplete="username"></span>
	<span class="nk">密碼<input type="password" name="pwd" size="8" value="" autocomplete="current-password" class="edit_password"></span>
	<select name="mode">
	<option value="edit">編輯</option>
	<% def(userdel) %>
	<option value="usrdel">删除</option>
	<% /def %>
	<% def(n) %>
	<!--
	// userdel…ユーザー削除権限(0は削除不可)
	-->
	<% /def %>
	</select>
	<span class="nk"><label class="checkbox"><input type="checkbox" name="onlyimgdel" value="on">僅刪除圖片</label></span>
	<input type="submit" value="OK">
	</div>
	</form>
	<% ========== JavaScriptの実行(クッキーを読込み、フォームに値をセット) ========== %>
<script>
l(); //LoadCookie
</script>

<!--著作権表示 削除しないでください-->

<div class="copyright">
	<!-- GazouBBS v3.0 --><!-- ふたば改0.8 --><!-- POTI-board -->
	<a href="https://paintbbs.sakura.ne.jp/poti/" target="_blank" rel="noopener noreferrer" title="POTI-board EVO <% echo (verlot) %>"><b>POTI-board EVO <% echo (ver) %></b></a>
		<span class="webstyle_wrap">Web Style by <a href="https://draclaw.com/" target="_blank" rel="noopener noreferrer" title="Cool Solid (by ドラ☆クロウ！)"><b>Cool Solid</b></a> &amp; <a href="https://paintbbs.sakura.ne.jp/poti/" target="_blank" rel="noopener noreferrer" title="PINK <% echo (tver) %> (by さとぴあ)"><b>PINK</b></a></span><br>
		OriginalScript - <a href="http://www.punyu.net/" target="_blank" rel="noopener noreferrer" title="POTI-board v1.32 (by ぷにゅねっと)">POTI-board</a>
	<span title="futaba.php v0.8 lot.031015 (by ふたば)">futaba.php</span> <a href="http://php.loglog.jp/" target="_blank" rel="noopener noreferrer" title="gazou.php v3.0 (by レッツPHP!)">gazou.php</a><br>
	<% def(paint) %>
	OekakiApp - <a href="http://hp.vector.co.jp/authors/VA016309/" target="_blank" rel="noopener noreferrer" title="by しぃちゃん">Shi-Painter</a> , <a href="http://github.com/funige/neo/" target="_blank" rel="noopener noreferrer" title="by funige">PaintBBS NEO</a> , <a href="https://github.com/thenickdude/chickenpaint" target="_blank" rel="nofollow noopener noreferrer" title="by Nicholas Sherlock">ChickenPaint</a>
	<br>
	<% /def %>
	UseFunction - <span title="by WonderCatStudio">DynamicPalette</span>
	<!--http://wondercatstudio.com/-->
	，<a href="http://skinny.sx68.net/" target="_blank" rel="noopener noreferrer" title="Skinny">Skinny</a>
	</div>
	
</footer>

</div>
<div id="bottom"></div>
<script src="<% echo(skindir) %>jquery-3.5.1.min.js"></script>
<script>
	window.onpageshow = function(){
		var $btn = $('[type="submit"]');
		//disbledを解除
		$btn.prop("disabled", false);
		$btn.click(function(){//送信ボタン2度押し対策
			$(this).prop('disabled',true);
			$(this).closest('form').submit();
		});
	}
</script>
</body></html>

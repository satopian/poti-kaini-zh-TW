!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ChickenPaint=t()}}(function(){return function r(o,s,l){function u(e,t){if(!s[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[e]={exports:{}};o[e][0].call(i.exports,function(t){return u(o[e][1][t]||t)},i,i.exports,r,o,s,l)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=V,t("core-js/stable/symbol/index.js"),t("core-js/stable/promise/index.js"),t("core-js/stable/map/index.js"),t("core-js/stable/set/index.js"),t("core-js/stable/typed-array/slice.js"),t("core-js/stable/array/iterator.js"),t("core-js/stable/array/fill.js"),t("core-js/stable/string/ends-with.js");var O=i(t("jquery"));t("bootstrap"),t("../lib/raf.js");var S=i(t("./engine/CPBrushInfo.js")),L=i(t("./engine/CPArtwork.js")),M=i(t("./engine/CPResourceLoader.js")),A=i(t("./engine/CPResourceSaver.js")),R=i(t("./gui/CPSplashScreen.js")),B=i(t("./gui/CPMainGUI.js")),j=i(t("./gui/CPAboutDialog.js")),I=i(t("./gui/CPConfirmTransformDialog.js")),F=i(t("./gui/CPShortcutsDialog.js")),N=i(t("./gui/CPBoxBlurDialog.js")),D=i(t("./gui/CPTabletDialog.js")),H=i(t("./gui/CPGridDialog.js")),W=i(t("./gui/CPSendDialog.js")),U=t("./util/CPPolyfill.js"),Y=i(t("./util/CPColor.js")),q=i(t("./util/CPWacomTablet.js")),z=i(t("./util/CPRect.js")),a=i(t("wolfy87-eventemitter")),G=t("./languages/lang.js");function i(t){return t&&t.__esModule?t:{default:t}}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(n){(0,G.guessLanguage)(),n.language&&(0,G.setLanguage)(n.language);var a,i,t,e,r,o=this,s=n.uiElem,l=new Y.default(0),u=255,d=V.COLOR_MODE_RGB,c=V.T_PENCIL,f=V.M_DRAW,h=f,p=[4278190080,4294967295],m=!1,g=!1,v=((r=new Array(V.T_MAX))[V.T_PENCIL]=new S.default({toolNb:V.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AA,brushMode:S.default.BRUSH_MODE_PAINT,paintMode:S.default.PAINT_MODE_OPACITY}),r[V.T_ERASER]=new S.default({toolNb:V.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,tip:S.default.TIP_ROUND_AA,brushMode:S.default.BRUSH_MODE_ERASE,paintMode:S.default.PAINT_MODE_OPACITY}),r[V.T_PEN]=new S.default({toolNb:V.T_PEN,size:2,alpha:128,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:S.default.TIP_ROUND_AA,brushMode:S.default.BRUSH_MODE_PAINT,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:.5}),r[V.T_SOFTERASER]=new S.default({toolNb:V.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AIRBRUSH,brushMode:S.default.BRUSH_MODE_ERASE,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8}),r[V.T_AIRBRUSH]=new S.default({toolNb:V.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AIRBRUSH,brushMode:S.default.BRUSH_MODE_PAINT,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8}),r[V.T_DODGE]=new S.default({toolNb:V.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AIRBRUSH,brushMode:S.default.BRUSH_MODE_DODGE,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8}),r[V.T_BURN]=new S.default({toolNb:V.T_BURN,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AIRBRUSH,brushMode:S.default.BRUSH_MODE_BURN,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8}),r[V.T_WATER]=new S.default({toolNb:V.T_WATER,size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AA,brushMode:S.default.BRUSH_MODE_WATER,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8,resat:.3,bleed:.6}),r[V.T_BLUR]=new S.default({toolNb:V.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_PIXEL,brushMode:S.default.BRUSH_MODE_BLUR,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8}),r[V.T_SMUDGE]=new S.default({toolNb:V.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AIRBRUSH,brushMode:S.default.BRUSH_MODE_SMUDGE,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8,resat:0,bleed:1}),r[V.T_BLENDER]=new S.default({toolNb:V.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:S.default.TIP_ROUND_AIRBRUSH,brushMode:S.default.BRUSH_MODE_OIL,paintMode:S.default.PAINT_MODE_FLOW,alphaScale:1/8,resat:0,bleed:.07}),r),y={CPFullScreen:{action:function(){o.setFullScreen(!g)},isSupported:function(){return!("disable"===n.fullScreenMode||"force"===n.fullScreenMode||!1===n.allowFullScreen)},modifies:{gui:!0}},CPZoomIn:{action:function(){a.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){a.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){a.zoom100()},modifies:{gui:!0}},CPUndo:{action:function(){o.artwork.undo()},modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){o.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?")&&o.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new w(V.T_PENCIL),CPPen:new w(V.T_PEN),CPEraser:new w(V.T_ERASER),CPSoftEraser:new w(V.T_SOFTERASER),CPAirbrush:new w(V.T_AIRBRUSH),CPDodge:new w(V.T_DODGE),CPBurn:new w(V.T_BURN),CPWater:new w(V.T_WATER),CPBlur:new w(V.T_BLUR),CPSmudge:new w(V.T_SMUDGE),CPBlender:new w(V.T_BLENDER),CPFloodFill:new _(V.M_FLOODFILL),CPGradientFill:new _(V.M_GRADIENTFILL),CPRectSelection:new _(V.M_RECT_SELECTION),CPMoveTool:new _(V.M_MOVE_TOOL),CPRotateCanvas:new _(V.M_ROTATE_CANVAS),CPPanCanvas:new _(V.M_PAN_CANVAS),CPColorPicker:new _(V.M_COLOR_PICKER),CPTransform:{action:function(){var t=o.artwork.getActiveLayer();t.visible?0==t.alpha?o.showLayerNotification(t,"Whoops! This layer's opacity is currently 0%","opacity"):null==o.artwork.transformAffineBegin()?o.showLayerNotification(t,"Whoops! All of the selected pixels are transparent!","layer"):k(V.M_TRANSFORM):o.showLayerNotification(t,"Whoops! This layer is currently hidden","layer")},modifies:{mode:!0},allowed:function(){return 0!=o.artwork.getActiveLayer().getEffectiveAlpha()}},CPTransformAccept:{action:function(){f==V.M_TRANSFORM&&(o.artwork.transformAffineFinish(),k(h))},modifies:{mode:!0}},CPTransformReject:{action:function(){f==V.M_TRANSFORM&&(o.artwork.transformAffineAbort(),k(h))},modifies:{document:!0,mode:!0}},CPFreeHand:{action:function(){v[c].strokeMode=S.default.STROKE_MODE_FREEHAND,T()},modifies:{tool:!0}},CPLine:{action:function(){v[c].strokeMode=S.default.STROKE_MODE_LINE,T()},modifies:{tool:!0}},CPBezier:{action:function(){v[c].strokeMode=S.default.STROKE_MODE_BEZIER,T()},modifies:{tool:!0}},CPAbout:{action:function(){new j.default(s).show()},modifies:{}},CPShortcuts:{action:function(){new F.default(s).show()},modifies:{}},CPTabletSupport:{action:function(){new D.default(s).show()},modifies:{}},CPLayerDuplicate:{action:function(){o.artwork.duplicateLayer()},modifies:{document:!0}},CPLayerMergeDown:{action:function(){o.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},CPGroupMerge:{action:function(){o.artwork.mergeGroup()},modifies:{document:!0},allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){o.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(t){o.artwork.expandLayerGroup(t.group,t.expand)},modifies:{document:!0}},CPFill:{action:function(){o.artwork.fill(4278190080|o.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){o.artwork.clear()},modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){o.artwork.rectangleSelection(o.artwork.getBounds()),a.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){o.artwork.rectangleSelection(new z.default(0,0,0,0)),a.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){o.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){o.artwork.vFlip()},modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){o.artwork.monochromaticNoise()},modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){o.artwork.colorNoise()},modifies:{document:!0},allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){!function(){t||(t=new N.default(s,o));t.show()}()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){o.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){o.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){o.artwork.copySelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){o.artwork.copySelectionMerged()},modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){o.artwork.pasteClipboard()},modifies:{document:!0},allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(t){a.showGrid(t.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){!function(){e||(e=new H.default(s,a));e.show()}()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(t){a.setInterpolation(t.selected)},modifies:{gui:!0},isSupported:function(){return(0,U.isCanvasInterpolationSupported)()}},CPResetCanvasRotation:{action:function(){a.resetRotation()},modifies:{gui:!0}},CPAddLayer:{action:function(){o.artwork.addLayer("layer")},modifies:{document:!0}},CPAddGroup:{action:function(){o.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){o.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){o.artwork.applyLayerMask(!0)},modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){o.artwork.removeLayerMask(!1)},modifies:{document:!0},allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){o.artwork.removeLayer()||alert("Sorry, you can't remove the last remaining layer in the drawing.")},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){o.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},CPReleaseClippingMask:{action:function(){o.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(t){o.artwork.relocateLayer(t.layer,t.toGroup,t.toIndex)},modifies:{document:!0}},CPSetActiveLayer:{action:function(t){t.mask&&t.layer.mask&&!t.layer.maskVisible&&o.artwork.setLayerMaskVisible(t.layer,!0),o.artwork.setActiveLayer(t.layer,t.mask),o.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){var t=o.artwork.toggleMaskView();t&&o.emitEvent("maskViewOpened",[t])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(t){o.artwork.setLayerMaskVisible(t.layer,t.visible)},modifies:{layerProp:!0}},CPSetLayerVisibility:{action:function(t){o.artwork.setLayerVisibility(t.layer,t.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(t){o.artwork.setLayerName(t.layer,t.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(t){o.artwork.setLayerBlendMode(t.blendMode)},modifies:{layerProp:!0}},CPSetLayerAlpha:{action:function(t){o.artwork.setLayerAlpha(t.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(t){o.artwork.setLayerLockAlpha(t.lock)},modifies:{layerProp:!0}},CPPalColor:new b("color"),CPPalBrush:new b("brush"),CPPalLayers:new b("layers"),CPPalStroke:new b("stroke"),CPPalSwatches:new b("swatches"),CPPalTool:new b("tool"),CPPalMisc:new b("misc"),CPPalTextures:new b("textures"),CPTogglePalettes:{action:function(){i.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){i.arrangePalettes()},modifies:{gui:!0}},CPSave:{action:function(){var t;(t=new A.default({artwork:o.getArtwork(),rotation:a.getRotation90(),swatches:i.getSwatches()})).on("savingComplete",function(){o.artwork.setHasUnsavedChanges(!1)}),t.on("savingFailure",function(){alert((0,G._)("Sorry, your drawing could not be saved, please try again later."))}),t.save()},isSupported:function(){return!1!==n.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(!o.isActionSupported("CPContinue")&&!confirm((0,G._)("Are you sure you want to send your drawing to the server and finish drawing now?")))return;var t=new A.default({artwork:o.getArtwork(),rotation:a.getRotation90(),swatches:i.getSwatches(),url:n.saveUrl}),e=new W.default(o,s,t);t.on("savingComplete",function(){o.artwork.setHasUnsavedChanges(!1),!o.isActionSupported("CPContinue")&&o.isActionSupported("CPPost")&&o.actionPerformed({action:"CPPost"})}),t.on("savingFailure",function(){alert((0,G._)("Sorry, your drawing could not be saved, please try again later."))}),e.on("shown",function(){t.save()}),e.show()}()},isSupported:function(){return!!n.saveUrl},modifies:{document:!0}},CPPost:{action:function(){window.location=n.postUrl},isSupported:function(){return!!n.postUrl},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!n.allowMultipleSends}},CPExit:{action:function(){window.location=n.exitUrl},isSupported:function(){return!!n.exitUrl},modifies:{}}};function b(t){this.palName=t}function w(t){this.toolNum=t}function _(t){this.modeNum=t}function E(t){var e;switch(d=t==L.default.EDITING_MODE_IMAGE?V.COLOR_MODE_RGB:V.COLOR_MODE_GREYSCALE,o.emitEvent("colorModeChange",[t==L.default.EDITING_MODE_IMAGE?"rgb":"greyscale"]),d){case V.COLOR_MODE_RGB:e=l.clone();break;case V.COLOR_MODE_GREYSCALE:e=new Y.default(Y.default.greyToRGB(u))}o.artwork.setForegroundColor(e.getRgb()),o.emitEvent("colorChange",[e])}function T(){o.emitEvent("toolChange",[c,v[c]])}function k(t){f!=t&&(t==V.M_TRANSFORM&&(h=f),f=t,o.emitEvent("modeChange",[f]))}function P(t){k(V.M_DRAW),c=t,o.artwork.setBrush(v[t]),T()}function x(t,e){s&&(o.artwork.on("editModeChanged",E),i=new B.default(o,s),o.emitEvent("fullScreen",[g]),o.emitEvent("smallScreen",[m]),P(V.T_PEN),i.arrangePalettes(),t&&i.setSwatches(t),e&&i.setRotation90(e),q.default.getRef().detectTablet(),(0,U.isEventSupported)("onbeforeunload")?window.addEventListener("beforeunload",function(t){if(o.artwork.getHasUnsavedChanges()){var e="Your drawing has unsaved changes!";return t.returnValue=e}}):(0,O.default)("a").click(function(t){if("#"!=this.getAttribute("href")&&o.artwork.getHasUnsavedChanges())return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?")}))}switch(b.prototype.action=function(t){i.showPalette(this.palName,t.selected)},b.prototype.modifies={gui:!0},w.prototype.action=function(){P(this.toolNum)},w.prototype.modifies={mode:!0,tool:!0},w.prototype.requiresDrawable=!0,_.prototype.action=function(){k(this.modeNum)},_.prototype.modifies={mode:!0},this.callToolListeners=function(){T()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(t){a=t},this.setTransformInterpolation=function(t){this.artwork.setTransformInterpolation(t)},this.setCurColor=function(t){switch(d){case V.COLOR_MODE_RGB:l.isEqual(t)||(l.copyFrom(t),this.artwork.setForegroundColor(t.getRgb()),this.emitEvent("colorChange",[t]));break;case V.COLOR_MODE_GREYSCALE:var e=t.getValue();if(u!=e){var n=Y.default.greyToRGB(e);this.artwork.setForegroundColor(n),u=e,this.emitEvent("colorChange",[new Y.default(n)])}}},this.getCurColor=function(){switch(d){case V.COLOR_MODE_RGB:return l.clone();case V.COLOR_MODE_GREYSCALE:return new Y.default(Y.default.greyToRGB(u))}},this.setCurGradient=function(t){p=t.slice(0),this.emitEvent("gradientChange",[p])},this.getCurGradient=function(){return p.slice(0)},this.setBrushSize=function(t){v[c].size=Math.max(1,Math.min(200,t)),T()},this.getBrushSize=function(){return v[c].size},this.setAlpha=function(t){v[c].alpha=t,T()},this.getAlpha=function(){return v[c].alpha},this.getCurMode=function(){return f},this.getCurTool=function(){return c},this.getBrushInfo=function(){return v[c]},this.isActionSupported=function(t){if(y[t]){var e=X(y[t].isSupported);return"function"==e?y[t].isSupported():"undefined"==e||y[t].isSupported}return!1},this.isActionAllowed=function(t){var e=y[t];return!!e&&("function"==typeof e.allowed?e.allowed():"string"==typeof e.allowed?this.artwork[e.allowed]():!e.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(t,e,n){this.emitEvent("layerNotification",[t,e,n])},this.actionPerformed=function(t){if(null!=this.artwork&&null!=a){var e=y[t.action];if(e)if(f==V.M_TRANSFORM&&(e.modifies.document||e.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(t.action))if("CPUndo"==t.action)y.CPTransformReject.action();else if("CPTransform"==t.action);else{var n=new I.default(s,this);n.on("accept",this.actionPerformed.bind(this,t)),n.on("reject",this.actionPerformed.bind(this,t)),n.show()}else e.action(t)}},this.setSmallScreenMode=function(t){m!==t&&(m=t,(0,O.default)(s).toggleClass("chickenpaint-small-screen",m),o.emitEvent("smallScreen",[m]))},this.getSmallScreenMode=function(){return m},this.setFullScreen=function(t){g!==t&&(g=t,(0,O.default)("body").toggleClass("chickenpaint-full-screen",g),(0,O.default)(s).toggleClass("chickenpaint-full-screen",g),o.emitEvent("fullScreen",[g]))},this.getResourcesRoot=function(){return n.resourcesRoot},function(){if(!((0,U.isCanvasSupported)()&&"Uint8Array"in window))throw new V.UnsupportedBrowserException;var t=(-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 "),e=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(t&&e)throw new V.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.")}(),s&&((0,U.isFlexboxSupported)()||(s.className+=" no-flexbox"),s.className+=" chickenpaint chickenpaint-lang-"+(0,G.currentLanguage)()),n.resourcesRoot=n.resourcesRoot||"chickenpaint/",n.disableBootstrapAPI&&(0,O.default)(document).off(".data-api"),this.setSmallScreenMode((0,O.default)(window).width()<400||(0,O.default)(window).height()<768),n.fullScreenMode){case"force":this.setFullScreen(!0);break;case"auto":this.setFullScreen(m)}if(n.loadImageUrl||n.loadChibiFileUrl){var C=new M.default(n);new R.default(s,C,n.resourcesRoot),C.on("loadingComplete",function(t){o.artwork=t.layers||t.flat,x(t.swatches,n.rotation),n.onLoaded&&n.onLoaded(this)}),C.load()}else n.artwork?this.artwork=n.artwork:(this.artwork=new L.default(n.canvasWidth||800,n.canvasHeight||600),this.artwork.addBackgroundLayer()),x(),n.onLoaded&&n.onLoaded(this)}window.PointerEvent&&(window.hasNativePointerEvents=!0),t("pepjs"),(((V.prototype=Object.create(a.default.prototype)).constructor=V).UnsupportedBrowserException=function(t){this.message=t}).prototype.toString=function(){var t="Sorry, your web browser does not support ChickenPaint.";return this.message?t+=" "+this.message:t+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",t},V.M_DRAW=0,V.M_FLOODFILL=1,V.M_RECT_SELECTION=2,V.M_MOVE_TOOL=3,V.M_ROTATE_CANVAS=4,V.M_COLOR_PICKER=5,V.M_GRADIENTFILL=6,V.M_TRANSFORM=7,V.M_PAN_CANVAS=8,V.T_PENCIL=0,V.T_ERASER=1,V.T_PEN=2,V.T_SOFTERASER=3,V.T_AIRBRUSH=4,V.T_DODGE=5,V.T_BURN=6,V.T_WATER=7,V.T_BLUR=8,V.T_SMUDGE=9,V.T_BLENDER=10,V.T_MAX=11,V.COLOR_MODE_RGB=0,V.COLOR_MODE_GREYSCALE=1,e.exports=n.default},{"../lib/raf.js":68,"./engine/CPArtwork.js":3,"./engine/CPBrushInfo.js":8,"./engine/CPResourceLoader.js":20,"./engine/CPResourceSaver.js":21,"./gui/CPAboutDialog.js":23,"./gui/CPBoxBlurDialog.js":24,"./gui/CPConfirmTransformDialog.js":32,"./gui/CPGridDialog.js":34,"./gui/CPMainGUI.js":36,"./gui/CPSendDialog.js":42,"./gui/CPShortcutsDialog.js":43,"./gui/CPSplashScreen.js":45,"./gui/CPTabletDialog.js":48,"./languages/lang.js":53,"./util/CPColor.js":57,"./util/CPPolyfill.js":59,"./util/CPRect.js":62,"./util/CPWacomTablet.js":65,bootstrap:69,"core-js/stable/array/fill.js":220,"core-js/stable/array/iterator.js":221,"core-js/stable/map/index.js":222,"core-js/stable/promise/index.js":223,"core-js/stable/set/index.js":224,"core-js/stable/string/ends-with.js":225,"core-js/stable/symbol/index.js":226,"core-js/stable/typed-array/slice.js":227,jquery:229,pepjs:246,"wolfy87-eventemitter":248}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},n.createImageData=function(t,e){return document.createElement("canvas").getContext("2d").createImageData(t,e)}},{}],3:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=ee;i(t("./CPLayer.js"));var Ot=i(t("./CPImageLayer.js")),St=i(t("./CPLayerGroup.js")),Lt=i(t("./CPBlend.js"));t("./CPBlendAdditional.js");var Mt=i(t("./CPGreyBmp.js")),At=i(t("./CPBlendTree.js")),Rt=i(t("./CPMaskView.js")),Bt=i(t("./CPColorBmp.js")),jt=i(t("./CPBrushManager.js")),It=i(t("./CPBrushInfo.js")),Ft=i(t("./CPUndo.js")),Nt=i(t("./CPClip.js")),Dt=i(t("../util/CPColor.js")),Ht=i(t("../util/CPRect.js")),Wt=i(t("../util/CPRandom.js")),Ut=i(t("../util/CPTransform.js")),Yt=t("../util/CPPolyfill.js"),qt=t("../util/Canvas.js"),a=i(t("wolfy87-eventemitter")),zt=t("./CPBrushTool.js");function i(t){return t&&t.__esModule?t:{default:t}}function Gt(t,e,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Vt(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function Kt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zt(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=$t(r);if(o){var i=$t(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Jt(t,e){return t+e}function te(t){return t?t.width*t.height*4:0}function ee(t,e){t|=0,e|=0;var n=30,d=0,c=16777215,l=1e3,s=new St.default("Root",Lt.default.LM_NORMAL),u=new At.default(s,t,e,!0),f=new Bt.default(t,e),h=new Ht.default(0,0,t,e),p=new Mt.default(t,e,8),m=new Ht.default(0,0,t,e),a=new Mt.default(t,e,32),i=new Ht.default(0,0,0,0),g=new jt.default,v=this,y=[],b=s,w=!1,_=null,E=new Ht.default(0,0,0,0),r=!1,o=new Ht.default(0,0,0,0),T=null,k=new Wt.default,P=null,x=null,C=[],O=[],S=null,L=0,M=0,A=0,R=!1,B=!1,j=new Set,I=new Set,F=null,N=0,D="smooth";function H(){B=!0}function W(t){B=!1,(0<I.size||0<j.size)&&(t?G():F||setTimeout(G,l))}function U(){v.emitEvent("changeSelection",[])}function Y(t){v.emitEvent("updateRegion",[t])}function q(){v.emitEvent("changeStructure"),u.resetTree();var t=v.getBounds();h.set(t),Y(t)}function z(t,e,n){v.emitEvent("changeLayer",[t]),n||(u.layerPropertyChanged(t,e),Y(v.getBounds()))}function G(){var t,e=Qt(I);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.rebuildImageThumbnail(),v.emitEvent("changeLayerImageThumb",[n])}}catch(t){e.e(t)}finally{e.f()}var a,i=Qt(j);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.rebuildMaskThumbnail(),v.emitEvent("changeLayerMaskThumb",[r])}}catch(t){i.e(t)}finally{i.f()}I.clear(),F&&(clearTimeout(F),F=null)}function X(t,e,n,a){Array.isArray(t)||(t=[t]),t.forEach(function(t){return u.invalidateLayerRect(t,e)});var i=!1;if(n){h.union(e);var r,o=Qt(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;s instanceof Ot.default&&(I.add(s),i=!0)}}catch(t){o.e(t)}finally{o.f()}}a&&(m.union(e),t.forEach(function(t){j.add(t),_&&_.layer==t&&_.invalidateRect(e)}),i=!0),i&&(F&&(clearTimeout(F),F=null),B||(F=setTimeout(G,l))),Y(e)}function V(t,e){X(t,e,!w,w)}function K(){return w?b.mask:b.image}function Z(t,e){t.copyAlphaFrom(f,e)}function $(){if(!i.isEmpty()){if(w){var t=b.mask;S.brushMode==It.default.BRUSH_MODE_ERASE?y[It.default.BRUSH_MODE_PAINT].mergeOntoMask(t,p,4278190080):y[S.brushMode].mergeOntoMask(t,p,255&N)}else{var e=b.image,n=b.getLockAlpha();S.brushMode==It.default.BRUSH_MODE_ERASE&&n?y[It.default.BRUSH_MODE_PAINT].mergeOntoImage(e,f,c):y[S.brushMode].mergeOntoImage(e,f,N),n&&Z(e,i)}i.makeEmpty()}}function Q(){$(),u.buildTree()}function J(){b instanceof Ot.default&&!h.isEmpty()&&(f.copyBitmapRect(b.image,h.left,h.top,h),h.makeEmpty())}function tt(){b.mask&&!m.isEmpty()&&(p.copyBitmapRect(b.mask,m.left,m.top,m),m.makeEmpty())}function et(){w?tt():J()}function nt(t){r=!0,0<O.length&&(O=[]),0!==C.length&&C[C.length-1].merge(t)?C[C.length-1].noChange()&&C.pop():(C.length>=n&&C.shift(),v.compactUndo(),C.push(t))}function at(t,e){t||e||(t=!w,e=w);var n=E.clone(),a=t?f.copyRectXOR(b.image,n):null,i=e?p.copyRectXOR(b.mask,n):null;this.layer=b,E.makeEmpty(),this.undo=function(){a&&this.layer.image.setRectXOR(a,n),i&&this.layer.mask.setRectXOR(i,n),X(this.layer,n,null!=a,null!=i)},this.redo=this.undo,this.getMemoryUsed=function(t,e){return(a?a.length:0)+(i?i.length:0)}}function it(e){var t=e.maskLinked,n=e.maskVisible;this.undo=function(){e.setMask(null),e.maskLinked=t,e.maskVisible=n,q(),v.setActiveLayer(e,!1)},this.redo=function(){var t=new Mt.default(v.width,v.height,8);t.clearAll(255),e.maskLinked=!0,e.maskVisible=!0,e.setMask(t),q(),v.setActiveLayer(e,!0)},this.redo()}function rt(t,e){var n,a,i=t.mask;n=e&&t instanceof Ot.default?t.image.clone():null,a=b==t&&w,this.undo=function(){t.setMask(i),n&&(t.image.copyPixelsFrom(n),X(t,t.image.getBounds(),!0,!1)),a&&v.setActiveLayer(t,!0),q()},this.redo=function(){n&&(Lt.default.multiplyAlphaByMask(t.image,100,t.mask),X(t,v.getBounds(),!0,!1)),a&&v.setActiveLayer(t,!1),t.setMask(null),q()},this.redo()}function ot(e,n,a){var i=a instanceof Ot.default&&a.clip,r=e.layers[n],o=r instanceof Ot.default&&r.clip,s=w;this.undo=function(){e.removeLayer(a);var t=e.layers[n-1]||e.layers[0]||e;r instanceof Ot.default&&(r.clip=o),a instanceof Ot.default&&(a.clip=i),q(),v.setActiveLayer(t,s)},this.redo=function(){e.insertLayer(n,a),o&&(a instanceof Ot.default?a.clip=!0:r.clip=!1),q(),v.setActiveLayer(a,!1)},this.redo()}function st(e){var n=e.clone(),t=w;this.undo=function(){n.parent.removeLayer(n),q(),v.setActiveLayer(e,t)},this.redo=function(){var t=e.name;t.endsWith(" Copy")||(t+=" Copy"),n.name=t,e.parent.insertLayer(e.parent.indexOf(e)+1,n),q(),v.setActiveLayer(n,!1)},this.redo()}function lt(n){var a=n.parent,i=a.indexOf(n),e=w,r=0;if(n instanceof Ot.default&&!n.clip)for(var t=i+1;t<a.layers.length&&(a.layers[t]instanceof Ot.default&&a.layers[t].clip);t++)r++;this.undo=function(){a.insertLayer(i,n);for(var t=0;t<r;t++)a.layers[t+i+1].clip=!0;q(),v.setActiveLayer(n,e)},this.redo=function(){for(var t=0;t<r;t++)a.layers[t+i+1].clip=!1;var e;a.removeLayerAtIndex(i),e=0==a.layers.length?n.parent:a.layers[Math.max(i-1,0)],q(),v.setActiveLayer(e,!1)},this.getMemoryUsed=function(t,e){return t?0:n.getMemoryUsed()},this.redo()}function ut(n){var t=n.parent.indexOf(n),e=w,a=new Ot.default(v.width,v.height,"");this.undo=function(){n.parent.setLayerAtIndex(t,n),q(),v.setActiveLayer(n,e)},this.redo=function(){n.parent.setLayerAtIndex(t,a),q(),v.setActiveLayer(a,!1)},this.getMemoryUsed=function(t,e){return t?0:n.getMemoryUsed()};var i,r=new At.default(n,v.width,v.height,!1);r.buildTree(),i=r.blendTree(),a.name=n.name,a.alpha=i.alpha,a.image=i.image,a.blendMode=i.blendMode,a.mask=i.mask,a.blendMode==Lt.default.LM_PASSTHROUGH&&(a.blendMode=Lt.default.LM_NORMAL),this.redo()}function dt(n){var e=n.parent,a=e.layers[e.indexOf(n)-1],i=new Ot.default(v.width,v.height,""),r=w;this.undo=function(){var t=e.indexOf(i);e.removeLayerAtIndex(t),e.insertLayer(t,n),e.insertLayer(t,a),q(),v.setActiveLayer(n,r)},this.redo=function(){i.copyFrom(a),0<n.getEffectiveAlpha()&&(i.mask?(Lt.default.multiplyAlphaByMask(i.image,i.alpha,i.mask),i.mask=null):Lt.default.multiplyAlphaBy(i.image,i.alpha),i.alpha=100,Lt.default.fuseImageOntoImage(i.image,!0,n.image,n.alpha,n.blendMode,n.getBounds(),n.mask));var t=e.indexOf(a);e.removeLayerAtIndex(t),e.removeLayerAtIndex(t),e.insertLayer(t,i),q(),v.setActiveLayer(i,!1)},this.getMemoryUsed=function(t,e){return t?0:n.getMemoryUsed()+i.getMemoryUsed()},this.redo()}function ct(){var t=v.getActiveLayer(),n=s.layers.slice(0),e=new Ot.default(v.width,v.height,"");this.undo=function(){s.layers=n.slice(0),q(),v.setActiveLayer(t,!1)},this.redo=function(){var t=v.fusionLayers();e.copyImageFrom(t),s.clearLayers(),e.setName(v.getDefaultLayerName(!1)),s.addLayer(e),q(),v.setActiveLayer(e,!1)},this.getMemoryUsed=function(t,e){return n.map(function(t){return t.getMemoryUsed()}).reduce(Jt,0)},this.redo()}function ft(i,r,a){var o=i.parent,s=i.parent.indexOf(i),l=w,u=o.layers[o.indexOf(i)+1],d=r.layers[a],c=i instanceof Ot.default&&i.clip,f=!!c&&i.getClippingBase(),h=0,p=0;if(i instanceof Ot.default&&!i.clip)for(var t=s+1;t<o.layers.length&&(o.layers[t]instanceof Ot.default&&o.layers[t].clip);t++)h++;else if(i instanceof St.default)for(var e=a;e<r.layers.length&&(r.layers[e]instanceof Ot.default&&r.layers[e].clip);e++)p++;this.undo=function(){i.parent.removeLayer(i);var t=u?o.indexOf(u):o.layers.length;o.insertLayer(t,i),i instanceof Ot.default&&(i.clip=c);for(var e=0;e<h;e++)o.layers[e+s+1].clip=!0;for(var n=0;n<p;n++)r.layers[n+a].clip=!0;q(),v.setActiveLayer(i,l)},this.redo=function(){for(var t=0;t<h;t++)o.layers[t+s+1].clip=!1;i.parent.removeLayer(i);var e=d?r.indexOf(d):r.layers.length;r.insertLayer(e,i);for(var n=0;n<p;n++)r.layers[n+e+1].clip=!1;i instanceof Ot.default&&(i.clip&&i.getClippingBase()!=f&&(i.clip=!1),d instanceof Ot.default&&d.clip&&(i.clip=!0));for(var a=0;a<p;a++)r.layers[a+e+1].clip=!1;q(),v.setActiveLayer(i,!1)},this.redo()}function ht(a,i){var t,r=(t=a).substring(0,1).toUpperCase()+t.substring(1),e=function(t,e){Array.isArray(t)||(t=[t]),this.layers=t,this.from=this.layers.map(function(t){return t["get"+r]()}),this.to=e,this.redo()};return((e.prototype=Object.create(Ft.default.prototype)).constructor=e).prototype.undo=function(){var n=this;this.layers.forEach(function(t,e){return t["set"+r](n.from[e])}),this.layers.forEach(function(t){return z(t,a,!i)})},e.prototype.redo=function(){var e=this;this.layers.forEach(function(t){return t["set"+r](e.to)}),this.layers.forEach(function(t){return z(t,a,!i)})},e.prototype.merge=function(t){return!!(t instanceof e&&function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}(this.layers,t.layers))&&(this.to=t.to,!0)},e.prototype.noChange=function(){for(var t=0;t<this.from.length;t++)if(this.from[t]!=this.to)return!1;return!0},e}this.getLayersRoot=function(){return s},this.getSelectionAutoSelect=function(){return o.isEmpty()?this.getBounds():o.clone()},this.getSelection=function(){return o.clone()},this.setHasUnsavedChanges=function(t){r=t},this.getHasUnsavedChanges=function(){return r},this.isAddLayerMaskAllowed=function(){return!b.mask},this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&nt(new it(b))},this.isRemoveLayerMaskAllowed=function(){return null!==b.mask},this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&nt(new rt(b,!1))},this.isApplyLayerMaskAllowed=function(){return null!==b.mask&&b instanceof Ot.default},this.applyLayerMask=function(t){this.isApplyLayerMaskAllowed()&&nt(new rt(b,!0))},this.addLayer=function(t){var e,n,a;switch(n=b instanceof St.default&&b.expanded?(e=b).layers.length:(e=b.parent).layers.indexOf(b)+1,t){case"group":for(;e.layers[n]instanceof Ot.default&&e.layers[n].clip;)n++;a=new St.default(this.getDefaultLayerName(!0),Lt.default.LM_PASSTHROUGH);break;default:(a=new Ot.default(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(c)}return nt(new ot(e,n,a)),a},this.addLayerObject=function(t,e){t.addLayer(e),t==s&&1==s.layers.length&&(b=e),q()},this.addLayerGroupObject=function(t,e,n){for(var a=[],i=0;i<n;i++)a.unshift(t.layers.pop());a.forEach(function(t){return e.addLayer(t)}),this.addLayerObject(t,e)},this.isRemoveLayerAllowed=function(){return b instanceof Ot.default?s.getLinearizedLayerList(!1).some(function(t){return t instanceof Ot.default&&t!=b}):b instanceof St.default&&s.getLinearizedLayerList(!1).some(function(t){return t instanceof Ot.default&&!t.hasAncestor(b)})},this.removeLayer=function(){return!!this.isRemoveLayerAllowed()&&(nt(new lt(b)),!0)},this.duplicateLayer=function(){nt(new st(b))},this.isMergeDownAllowed=function(){var t=b.parent.indexOf(b);return 0<t&&b instanceof Ot.default&&b.parent.layers[t-1]instanceof Ot.default},this.mergeDown=function(){this.isMergeDownAllowed()&&nt(new dt(b))},this.isMergeGroupAllowed=function(){return b instanceof St.default&&0<b.getEffectiveAlpha()},this.mergeGroup=function(){this.isMergeGroupAllowed()&&nt(new ut(b))},this.isMergeAllLayersAllowed=function(){return 1<s.getLinearizedLayerList(!1).length},this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&nt(new ct)},this.relocateLayer=function(t,e,n){t&&e&&t!=e&&!e.hasAncestor(t)&&nt(new ft(t,e,n))},this.setLayerVisibility=function(t,e){var n=[];if(t.ancestorsAreVisible())t.visible!=e&&nt(new gt(t,e));else{for(var a=t;null!=a;a=a.parent)a.visible||n.push(a);nt(new gt(n,!0))}},this.expandLayerGroup=function(t,e){t.expanded!=e&&(!(t.expanded=e)&&b.hasAncestor(t)&&this.setActiveLayer(t,!1),z(t,"expanded",!0))},this.setLayerAlpha=function(t){b.getAlpha()!=t&&nt(new pt(b,t))},this.setLayerMaskLinked=function(t){b.maskLinked!=t&&nt(new _t(b,t))},this.setLayerMaskVisible=function(t,e){t.maskVisible!=e&&nt(new yt(t,e))},this.setLayerBlendMode=function(t){b.getBlendMode()!=t&&(t!=Lt.default.LM_PASSTHROUGH||b instanceof St.default)&&nt(new mt(b,t))},this.setLayerName=function(t,e){t.getName()!=e&&nt(new bt(t,e))},this.paintDab=function(t,e,n){S.applyPressure(n),0<S.scattering&&(t+=k.nextGaussian()*S.curScattering/4,e+=k.nextGaussian()*S.curScattering/4);var a=y[S.brushMode],i=g.getDab(t,e,S),r=new Ht.default(0,0,i.width,i.height),o=new Ht.default(0,0,i.width,i.height);if(o.translate(i.x,i.y),v.getBounds().clipSourceDest(r,o),!o.isEmpty()){E.union(o);var s=w?b.mask:b.image,l=R&&!w?T:s;a.paintDab(s,o,l,S,r,i,N),!w&&a.noMergePhase&&b.getLockAlpha()&&Z(s,o),a.wantsOutputAsInput&&($(),R&&!w&&v.fusionLayers()),V(b,o)}},this.getDefaultLayerName=function(t){for(var e=t?"Group ":"Layer ",n=t?/^Group [0-9]+$/:/^Layer [0-9]+$/,a=0,i=s.getLinearizedLayerList(!1),r=0;r<i.length;r++){var o=i[r];n.test(o.name)&&(a=Math.max(a,parseInt(o.name.substring(e.length),10)))}return e+(a+1)},this.addBackgroundLayer=function(){var t=new Ot.default(v.width,v.height,this.getDefaultLayerName(!1));t.image.clearAll(4294967295),this.addLayerObject(this.getLayersRoot(),t)},this.fusionLayers=function(){return Q(),T=u.blendTree().image},this.upgradeMultiplyLayers=function(t){for(var e=this.getLayersRoot().getLinearizedLayerList(!1,[]),n=-1,a=0;a<e.length;a++){var i=e[a];if(!(i instanceof Ot.default)||i.mask||i.blendMode>Lt.default.LM_LAST_CHIBIPAINT)throw new Error("Bad layer type during multiply upgrade");i.blendMode===Lt.default.LM_MULTIPLY&&(n=a)}if(-1!==n){var r=new Bt.default(this.width,this.height),o=!0,s=!0,l=this.getBounds();r.clearAll(l,16777215);for(var u=0;u<=n;u++){var d=e[u];if(s||(o=o&&r.hasAlphaInRect(l)),d.blendMode===Lt.default.LM_MULTIPLY)switch(t){case"bake":!o&&0<d.getEffectiveAlpha()&&(100===d.alpha?Lt.default.upgradeMultiplyOfOpaqueLayer(r,d.image,100,l):Lt.default.upgradeMultiplyOfTransparentLayer(r,d.image,d.alpha,l),d.setBlendMode(Lt.default.LM_MULTIPLY2));break;default:o&&d.setBlendMode(Lt.default.LM_MULTIPLY2)}0<d.getEffectiveAlpha()&&(s=!1,Lt.default.fuseImageOntoImage(r,o,d.image,d.alpha,d.blendMode,l,null))}}},this.isCreateClippingMaskAllowed=function(){var t=b.parent.indexOf(b),e=b.parent.layers[t-1];return b instanceof Ot.default&&!b.clip&&e instanceof Ot.default},this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&nt(new vt(b,!0))},this.isReleaseClippingMaskAllowed=function(){return b instanceof Ot.default&&b.clip},this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&nt(new vt(b,!1))},this.setActiveLayer=function(t,e){if(t){var n=(e=t.mask&&e)!=w;if(b!=t||n){var a=b;b=t,w=e,i=v.getBounds(),h.set(i),m.set(i),this.emitEvent("changeActiveLayer",[a,t,w]),n&&this.emitEvent("editModeChanged",[w?ee.EDITING_MODE_MASK:ee.EDITING_MODE_IMAGE]),_&&_.layer==a&&(e?_.setLayer(t):this.closeMaskView())}}var i},this.closeMaskView=function(){_.close(),_=null},this.toggleMaskView=function(){return null!=_&&_.isOpen()?this.closeMaskView():_=b.mask?new Rt.default(b,$):null,_},this.selectTopmostVisibleLayer=function(){for(var t=s.getLinearizedLayerList(!1),e=t.length-1;0<=e;e--)if(t[e]instanceof Ot.default&&0<t[e].getEffectiveAlpha())return void this.setActiveLayer(t[e],!1);for(var n=t.length-1;0<=n;n--)if(t[n]instanceof Ot.default)return void this.setActiveLayer(t[n],!1);this.setActiveLayer(t[t.length-1],!1)},this.getActiveLayer=function(){return b},this.isEditingMask=function(){return w},this.isActiveLayerDrawable=function(){return w&&b.mask||!w&&b instanceof Ot.default},this.getUndoMemoryUsed=function(){var t,e=0,n=Qt(O);try{for(n.s();!(t=n.n()).done;){e+=t.value.getMemoryUsed(!0,null)}}catch(t){n.e(t)}finally{n.f()}var a,i=Qt(C);try{for(i.s();!(a=i.n()).done;){e+=a.value.getMemoryUsed(!1,null)}}catch(t){i.e(t)}finally{i.f()}return e},this.isUndoAllowed=function(){return 0<C.length},this.isRedoAllowed=function(){return 0<O.length},this.undo=function(){if(this.isUndoAllowed()){r=!0;var t=C.pop();t.undo(),O.push(t)}},this.redo=function(){if(this.isRedoAllowed()){r=!0;var t=O.pop();t.redo(),C.push(t)}},this.performIdleTasks=function(){et(),Q()},this.compactUndo=function(){0<C.length&&C[C.length-1].compact()},this.clearHistory=function(){C=[],O=[]},this.colorPicker=function(t,e){return w&&b.mask?Dt.default.greyToRGB(b.mask.getPixel(~~t,~~e)):16777215&T.getPixel(~~t,~~e)},this.setSelection=function(t){o.set(t),o.roundNearest(),o.clipTo(this.getBounds())},this.emptySelection=function(){o.makeEmpty()},this.floodFill=function(t,e){var n=K();n&&(et(),E=this.getBounds(),n.floodFill(~~t,~~e,4278190080|N),nt(new at),V(b,this.getBounds()))},this.gradientFill=function(t,e,n,a,i){var r=this.getSelectionAutoSelect(),o=K();o&&(et(),E=r.clone(),o.gradient(r,t,e,n,a,i,!1),this.getLayerLockAlpha()&&o instanceof Bt.default&&Z(o,r),nt(new at),V(b,r))},this.fill=function(t){var e=this.getSelectionAutoSelect(),n=K();n&&(et(),E=e.clone(),n.clearRect(e,t),nt(new at),V(b,e))},this.clear=function(){w?this.fill(d):this.fill(c)},this.flip=function(t){var e=this.getSelection(),n=e.isEmpty(),a=n&&b instanceof Ot.default&&b.mask&&b.maskLinked,i=(!w||a)&&b instanceof Ot.default,r=(w||a)&&b.mask,o=t?"copyRegionHFlip":"copyRegionVFlip";(i||r)&&(n&&(e=this.getBounds()),E=e.clone(),i&&(J(),b.image[o](e,f)),r&&(tt(),b.mask[o](e,p)),nt(new at(i,r)),X(b,e,i,r))},this.hFlip=function(){this.flip(!0)},this.vFlip=function(){this.flip(!1)},this.monochromaticNoise=function(){var t=this.getSelectionAutoSelect(),e=K();e&&(et(),E=t.clone(),e.fillWithNoise(t),nt(new at),V(b,t))},this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()},this.colorNoise=function(){if(this.isColorNoiseAllowed()){var t=this.getSelectionAutoSelect();et(),E=t.clone(),b.image.fillWithColorNoise(t),nt(new at(!0,!1)),X(b,t,!0,!1)}},this.invert=function(){var t=this.getSelectionAutoSelect(),e=K();e&&(et(),E=t.clone(),e.invert(t),nt(new at),V(b,t))},this.boxBlur=function(t,e,n){var a=this.getSelectionAutoSelect(),i=K();if(i){et(),E=a.clone();for(var r=0;r<n;r++)i.boxBlur(a,t,e);nt(new at),V(b,a)}},this.rectangleSelection=function(t){var e=t.clone();e.clipTo(this.getBounds()),nt(new Et(this.getSelection(),e)),this.setSelection(e)},this.move=function(t,e,n){if(e|=0,0!=(t|=0)||0!=e){var a=0<C.length?C[C.length-1]:null;if(!n&&a instanceof Pt&&a.layer==this.getActiveLayer())a.amend(t,e),O=[],r=!0;else{var i=new Pt(t,e,n);nt(i),i.redo()}}},this.setTransformInterpolation=function(t){D=t,P instanceof kt&&P.setInterpolation(t)},this.transformAffineAbort=function(){P instanceof kt&&(P.undo(),W(!(P=null)))},this.transformAffineBegin=function(){if(P instanceof kt)return{transform:P.getTransform(),rect:P.getInitialTransformRect(),selection:P.getInitialSelectionRect()};var t,e=new Ut.default;return(t=new kt(e,D)).getInitialTransformRect().isEmpty()?null:(P=t,H(),{transform:e,rect:t.getInitialTransformRect(),selection:t.getInitialSelectionRect()})},this.transformAffineFinish=function(){P instanceof kt&&(nt(P),W(!(P=null)))},this.transformAffineAmend=function(t){P instanceof kt&&P.amend(t)},this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&null!==K()},this.isCopySelectionAllowed=this.isCutSelectionAllowed,this.cutSelection=function(){this.isCutSelectionAllowed()&&nt(new xt(b,w,this.getSelection()))},this.copySelection=function(){if(this.isCopySelectionAllowed()){var t=v.getSelection(),e=K();x=new Nt.default(e.cloneRect(t),t.left,t.top)}},this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()},this.copySelectionMerged=function(){if(this.isCopySelectionMergedAllowed()){var t=v.getSelection();x=new Nt.default(this.fusionLayers().cloneRect(t),t.left,t.top)}},this.isPasteClipboardAllowed=function(){return!this.isClipboardEmpty()},this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&nt(new Ct(x))},this.getClipboard=function(){return x},this.setClipboard=function(t){x=t},this.isClipboardEmpty=function(){return null==x},this.setSampleAllLayers=function(t){R=t},this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()},this.setLayerLockAlpha=function(t){b.getLockAlpha()!=t&&nt(new wt(b,t))},this.setForegroundColor=function(t){N=t},this.setBrush=function(t){S=t},this.setBrushTexture=function(t){g.setTexture(t)},this.beginStroke=function(t,e,n){return!(null===S||!this.isActiveLayerDrawable())&&(et(),E.makeEmpty(),a.clearAll(0),i.makeEmpty(),L=t,M=e,A=n,H(),y[S.brushMode].beginStroke(),this.paintDab(t,e,n),!0)},this.continueStroke=function(t,e,n){if(null!=S){var a=Math.sqrt((L-t)*(L-t)+(M-e)*(M-e)),i=Math.max(S.minSpacing,S.curSize*S.spacing);if(i<a){for(var r=L,o=M,s=A,l=(i-.001)/a,u=l;u<=1;u+=l)r=u*t+(1-u)*L,o=u*e+(1-u)*M,s=u*n+(1-u)*A,this.paintDab(r,o,s);L=r,M=o,A=s}}},this.endStroke=function(){null!=S&&($(),y[S.brushMode].endStroke(),E.clipTo(this.getBounds()),E.isEmpty()||(nt(new at),et()),W(!1))},this.hasAlpha=function(){return T.hasAlpha()},this.getFlatPNG=function(t){return this.fusionLayers(),T.getAsPNG(t)},this.getFlatPNGBuffer=function(t){return this.fusionLayers(),T.getAsPNGBuffer(t)},this.isSimpleDrawing=function(){return 1==s.layers.length&&s.layers[0]instanceof Ot.default&&!s.layers[0].mask&&100==s.layers[0].getEffectiveAlpha()},(at.prototype=Object.create(Ft.default.prototype)).constructor=at,(it.prototype=Object.create(Ft.default.prototype)).constructor=it,(rt.prototype=Object.create(Ft.default.prototype)).constructor=rt,(ot.prototype=Object.create(Ft.default.prototype)).constructor=ot,(st.prototype=Object.create(Ft.default.prototype)).constructor=st,(lt.prototype=Object.create(Ft.default.prototype)).constructor=lt,(ut.prototype=Object.create(Ft.default.prototype)).constructor=ut,(dt.prototype=Object.create(Ft.default.prototype)).constructor=dt,(ct.prototype=Object.create(Ft.default.prototype)).constructor=ct,(ft.prototype=Object.create(Ft.default.prototype)).constructor=ft;var pt=ht("alpha",!0),mt=ht("blendMode",!0),gt=ht("visible",!0),vt=ht("clip",!0),yt=ht("maskVisible",!0),bt=ht("name",!1),wt=ht("lockAlpha",!1),_t=ht("maskLinked",!1);function Et(t,e){t=t.clone(),e=e.clone(),this.undo=function(){v.setSelection(t),Y(v.getBounds())},this.redo=function(){v.setSelection(e),Y(v.getBounds())},this.noChange=function(){return t.equals(e)}}(Et.prototype=Object.create(Ft.default.prototype)).constructor=Et;var Tt=function(t){Kt(s,Ft.default);var o=Zt(s);function s(){var t;Xt(this,s),(t=o.call(this)).layer=b,t.fromSelection=v.getSelection(),t.fromMaskMode=w,t.movingWholeLayer=t.fromSelection.isEmpty(),t.movingImage=!w||t.movingWholeLayer&&t.layer.maskLinked,t.movingMask=w||t.movingWholeLayer&&t.layer.maskLinked,t.hasFullUndo=!1,t.erasesSourceRect=!1,t.dstRect=new Ht.default(0,0,0,0),t.movingLayers=[{layer:t.layer,moveImage:t.layer instanceof Ot.default&&t.movingImage,moveMask:null!==t.layer.mask&&t.movingMask,imageRect:new Map,maskRect:new Map}],t.layer instanceof St.default&&t.movingImage&&t.movingWholeLayer&&(t.movingLayers=t.movingLayers.concat(t.layer.getLinearizedLayerList(!1).map(function(t){return{layer:t,moveImage:t instanceof Ot.default,moveMask:null!==t.mask&&t.maskLinked,imageRect:new Map,maskRect:new Map}})));var e=new Ht.default(0,0,0,0);if(t.movingWholeLayer){t.srcRect=v.getBounds();for(var n=0;n<t.movingLayers.length&&!e.equals(t.srcRect);n++){var a=t.movingLayers[n];a.moveMask&&e.union(a.layer.mask.getValueBounds(t.srcRect,255)),a.moveImage&&e.union(a.layer.image.getNonTransparentBounds(t.srcRect))}}else{t.srcRect=t.fromSelection.clone();for(var i=0;i<t.movingLayers.length&&!e.equals(t.srcRect);i++){var r=t.movingLayers[i];r.moveMask&&e.union(r.layer.mask.getValueBounds(t.srcRect,0)),r.moveImage&&e.union(r.layer.image.getNonTransparentBounds(t.srcRect))}}return t.srcRect=e,t}return Vt(s,[{key:"undo",value:function(){var t=this,e=[];this.dstRect.isEmpty()||e.push(this.dstRect),this.erasesSourceRect&&(e.push(this.srcRect),e=Ht.default.union(e)),this.movingLayers.forEach(function(n){t.hasFullUndo?e.forEach(function(t){n.moveImage&&n.layer.image.copyBitmapRect(n.imageUndo,t.left,t.top,t),n.moveMask&&n.layer.mask.copyBitmapRect(n.maskUndo,t.left,t.top,t)}):(n.moveImage&&n.imageRect.forEach(function(t,e){n.layer.image.copyBitmapRect(t,e.left,e.top,t.getBounds())}),n.moveMask&&n.maskRect.forEach(function(t,e){n.layer.mask.copyBitmapRect(t,e.left,e.top,t.getBounds())}))}),X(this.movingLayers.map(function(t){return t.layer}),e.reduce(function(t,e){return t.getUnion(e)},new Ht.default(0,0,0,0)),!0,!0),this.dstRect.makeEmpty(),v.setSelection(this.fromSelection),v.setActiveLayer(this.layer,this.fromMaskMode),U()}},{key:"getMemoryUsed",value:function(t,e){return this.movingLayers.map(function(t){return[t.imageUndo,t.maskUndo,t.imageRect,t.maskRect].map(function(t){return t?t.getMemorySize():0}).reduce(Jt,0)}).reduce(Jt,0)}},{key:"buildFullUndo",value:function(){this.hasFullUndo||(this.movingLayers.forEach(function(t){t.moveImage&&(t.imageUndo=t.layer.image.clone()),t.moveMask&&(t.maskUndo=t.layer.mask.clone()),t.imageRect.clear(),t.maskRect.clear()}),this.hasFullUndo=!0)}},{key:"compact",value:function(){if(this.hasFullUndo){var t=[];this.dstRect.isEmpty()||t.push(this.dstRect),this.erasesSourceRect&&(t.push(this.srcRect),t=Ht.default.union(t)),this.movingLayers.forEach(function(e){e.imageRect.clear(),e.maskRect.clear(),t.forEach(function(t){e.moveImage&&e.imageRect.set(t,e.imageUndo.cloneRect(t)),e.moveMask&&e.maskRect.set(t,e.maskUndo.cloneRect(t))}),e.imageUndo=null,e.maskUndo=null}),this.hasFullUndo=!1}}}]),s}(),kt=function(t){Kt(i,Tt);var a=Zt(i);function i(t,e){var n;return Xt(this,i),(n=a.call(this)).erasesSourceRect=!0,n.affineTransform=t.clone(),n.interpolation=e||"smooth",n.composeCanvas=null,n.composeCanvasContext=null,n}return Vt(i,[{key:"buildFullUndo",value:function(){var a=this;this.hasFullUndo||(Gt($t(i.prototype),"buildFullUndo",this).call(this),this.movingLayers.forEach(function(t){if(t.moveImage){var e=(0,qt.createCanvas)(a.srcRect.getWidth(),a.srcRect.getHeight());e.getContext("2d").putImageData(t.layer.image.getImageData(),-a.srcRect.left,-a.srcRect.top,a.srcRect.left,a.srcRect.top,a.srcRect.getWidth(),a.srcRect.getHeight()),t.imageSourceCanvas=e}if(t.moveMask){var n=(0,qt.createCanvas)(a.srcRect.getWidth(),a.srcRect.getHeight());n.getContext("2d").putImageData(t.layer.mask.getImageData(a.srcRect.left,a.srcRect.top,a.srcRect.getWidth(),a.srcRect.getHeight()),0,0),t.maskSourceCanvas=n}}),this.composeCanvas=(0,qt.createCanvas)(v.width,v.height),this.composeCanvasContext=this.composeCanvas.getContext("2d"),(0,Yt.setCanvasInterpolation)(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,0,1,1))}},{key:"redo",value:function(){var a=this;this.buildFullUndo();var t=this.dstRect.clone(),e=this.srcRect.toPoints();this.affineTransform.transformPoints(e),this.dstRect.set(Ht.default.createBoundingBox(e).roundContain().clipTo(v.getBounds()));var i=Ht.default.subtract(this.dstRect,this.srcRect),r=Ht.default.subtract(t.isEmpty()?this.srcRect:this.srcRect.getIntersection(t),this.dstRect),o=this.srcRect.getIntersection(this.dstRect),s=Ht.default.subtract(t,[this.dstRect,this.srcRect]),n=this.srcRect.getUnion(this.dstRect).getUnion(t);if(this.movingLayers.forEach(function(e){if(r.forEach(function(t){e.moveImage&&e.layer.image.clearRect(t,c),e.moveMask&&(a.movingWholeLayer?e.layer.mask.clearRect(t,255):e.layer.mask.clearRect(t,d))}),!a.dstRect.isEmpty()){if(e.moveImage){var n=e.imageUndo.getImageData();i.forEach(function(t){a.composeCanvasContext.putImageData(n,0,0,t.left,t.top,t.getWidth(),t.getHeight())}),a.composeCanvasContext.clearRect(o.left,o.top,o.getWidth(),o.getHeight()),a.composeCanvasContext.save(),a.composeCanvasContext.setTransform(a.affineTransform.m[0],a.affineTransform.m[1],a.affineTransform.m[2],a.affineTransform.m[3],a.affineTransform.m[4],a.affineTransform.m[5]),a.composeCanvasContext.drawImage(e.imageSourceCanvas,a.srcRect.left,a.srcRect.top),a.composeCanvasContext.restore(),e.layer.image.copyBitmapRect(new Bt.default(a.composeCanvasContext.getImageData(a.dstRect.left,a.dstRect.top,a.dstRect.getWidth(),a.dstRect.getHeight())),a.dstRect.left,a.dstRect.top,new Ht.default(0,0,a.dstRect.getWidth(),a.dstRect.getHeight()))}e.moveMask&&(i.forEach(function(t){a.composeCanvasContext.putImageData(e.layer.mask.getImageData(t.left,t.top,t.getWidth(),t.getHeight()),t.left,t.top)}),a.movingWholeLayer?a.composeCanvasContext.fillStyle="#FFF":a.composeCanvasContext.fillStyle="#000",a.composeCanvasContext.fillRect(o.left,o.top,o.getWidth(),o.getHeight()),a.composeCanvasContext.save(),a.composeCanvasContext.setTransform(a.affineTransform.m[0],a.affineTransform.m[1],a.affineTransform.m[2],a.affineTransform.m[3],a.affineTransform.m[4],a.affineTransform.m[5]),a.composeCanvasContext.drawImage(e.maskSourceCanvas,a.srcRect.left,a.srcRect.top),a.composeCanvasContext.restore(),e.layer.mask.pasteImageData(a.composeCanvasContext.getImageData(a.dstRect.left,a.dstRect.top,a.dstRect.getWidth(),a.dstRect.getHeight()),a.dstRect.left,a.dstRect.top))}s.forEach(function(t){e.moveImage&&e.layer.image.copyBitmapRect(e.imageUndo,t.left,t.top,t),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,t)})}),X(this.movingLayers.map(function(t){return t.layer}),n,!0,!0),!this.fromSelection.isEmpty()){var l,u=this.fromSelection.toPoints();this.affineTransform.transformPoints(u),(l=Ht.default.createBoundingBox(u)).roundNearest(),v.setSelection(l),U()}v.setActiveLayer(this.layer,this.fromMaskMode)}},{key:"amend",value:function(t){this.hasFullUndo||this.undo(),this.affineTransform=t.clone(),this.redo()}},{key:"setInterpolation",value:function(t){t!=this.interpolation&&(this.interpolation=t,this.composeCanvasContext&&(0,Yt.setCanvasInterpolation)(this.composeCanvasContext,"smooth"==this.interpolation),this.undo(),this.redo())}},{key:"compact",value:function(){Gt($t(i.prototype),"compact",this).call(this),this.composeCanvas=null,this.composeCanvasContext=null,this.movingLayers.forEach(function(t){return t.imageSourceCanvas=null})}},{key:"getMemoryUsed",value:function(t,e){var n=Gt($t(i.prototype),"getMemoryUsed",this).call(this,t,e);return n+=te(this.composeCanvas),n+=this.movingLayers.map(function(t){return te(t.imageSourceCanvas)}).reduce(Jt,0)}},{key:"getTransform",value:function(){return this.affineTransform.clone()}},{key:"getInitialTransformRect",value:function(){return this.srcRect.clone()}},{key:"getInitialSelectionRect",value:function(){return this.fromSelection.clone()}}]),i}(),Pt=function(t){Kt(r,Tt);var i=Zt(r);function r(t,e,n){var a;return Xt(this,r),(a=i.call(this)).offsetX=t,a.offsetY=e,a.erasesSourceRect=!n,a}return Vt(r,[{key:"redo",value:function(){var t,n,a=this,e=this.dstRect.clone(),i=e.clone(),r=null;if(this.buildFullUndo(),this.dstRect.set(this.srcRect),this.dstRect.translate(this.offsetX,this.offsetY),t=this.dstRect.clone(),this.dstRect.clipTo(v.getBounds()),this.erasesSourceRect?(r=e.isEmpty()?this.srcRect:this.srcRect.getIntersection(e),i.union(r),n=e.subtract(this.srcRect)):n=[e],this.movingLayers.forEach(function(e){r&&(e.moveImage&&e.layer.image.clearRect(r,c),e.moveMask&&e.layer.mask.clearRect(r,a.movingWholeLayer?255:d)),n.forEach(function(t){e.moveImage&&e.layer.image.copyBitmapRect(e.imageUndo,t.left,t.top,t),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,t)}),e.moveImage&&Lt.default.normalFuseImageOntoImageAtPosition(e.layer.image,e.imageUndo,t.left,t.top,a.srcRect),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,a.srcRect)}),i.union(this.dstRect),X(this.movingLayers.map(function(t){return t.layer}),i,!0,!0),!this.fromSelection.isEmpty()){var o=this.fromSelection.clone();o.translate(this.offsetX,this.offsetY),v.setSelection(o),U()}}},{key:"amend",value:function(t,e){this.hasFullUndo||this.undo(),this.offsetX+=t,this.offsetY+=e,this.redo()}}]),r}();function xt(t,e,n){var a=e?t.mask:t.image,i=a.cloneRect(n);n=n.clone(),this.undo=function(){a.copyBitmapRect(i,n.left,n.top,i.getBounds()),v.setActiveLayer(t,e),v.setSelection(n),X(t,n,!e,e)},this.redo=function(){e?a.clearRect(n,d):a.clearRect(n,c),x=new Nt.default(i,n.left,n.top),v.setActiveLayer(t,e),v.emptySelection(),X(t,n,!e,e)},this.getMemoryUsed=function(t,e){return i==e?0:i.getMemorySize()},this.redo()}function Ct(r){var t=v.getSelection(),e=w,o=new Ot.default(v.width,v.height,v.getDefaultLayerName(!1)),s=b,l=s.parent;this.undo=function(){l.removeLayer(o),v.setSelection(t),q(),v.setActiveLayer(s,e)},this.redo=function(){var t,e,n=l.indexOf(s),a=r.bmp.getBounds();if(l.insertLayer(n+1,o),a.isInside(v.getBounds())?(t=r.x,e=r.y):(t=(v.width-r.bmp.width)/2|0,e=(v.height-r.bmp.height)/2|0),r.bmp instanceof Mt.default){var i=new Bt.default(r.bmp.width,r.bmp.height);i.copyPixelsFromGreyscale(r.bmp),o.image.copyBitmapRect(i,t,e,a)}else o.image.copyBitmapRect(r.bmp,t,e,a);v.emptySelection(),q(),v.setActiveLayer(o,!1)},this.getMemoryUsed=function(t,e){return r.bmp==e?0:r.bmp.getMemorySize()},this.redo()}(xt.prototype=Object.create(Ft.default.prototype)).constructor=xt,(Ct.prototype=Object.create(Ft.default.prototype)).constructor=Ct,y=[zt.CPBrushTool,zt.CPBrushToolEraser,zt.CPBrushToolDodge,zt.CPBrushToolBurn,zt.CPBrushToolWatercolor,zt.CPBrushToolBlur,zt.CPBrushToolSmudge,zt.CPBrushToolOil].map(function(t){return new t(a,i)}),this.width=t,this.height=e}((ee.prototype=Object.create(a.default.prototype)).constructor=ee).prototype.getBounds=function(){return new Ht.default(0,0,this.width,this.height)},ee.prototype.isPointWithin=function(t,e){return 0<=t&&0<=e&&t<this.width&&e<this.height},ee.EDITING_MODE_IMAGE=0,ee.EDITING_MODE_MASK=1,e.exports=n.default},{"../util/CPColor.js":57,"../util/CPPolyfill.js":59,"../util/CPRandom.js":61,"../util/CPRect.js":62,"../util/CPTransform.js":63,"../util/Canvas.js":2,"./CPBlend.js":5,"./CPBlendAdditional.js":6,"./CPBlendTree.js":7,"./CPBrushInfo.js":8,"./CPBrushManager.js":9,"./CPBrushTool.js":10,"./CPClip.js":12,"./CPColorBmp.js":13,"./CPGreyBmp.js":14,"./CPImageLayer.js":15,"./CPLayer.js":16,"./CPLayerGroup.js":17,"./CPMaskView.js":19,"./CPUndo.js":22,"wolfy87-eventemitter":248}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var a,i=(a=t("../util/CPRect.js"))&&a.__esModule?a:{default:a};function r(t,e){this.width=0|t,this.height=0|e}r.prototype.getBounds=function(){return new i.default(0,0,this.width,this.height)},r.prototype.isInside=function(t,e){return 0<=t&&0<=e&&t<this.width&&e<this.height},e.exports=n.default},{"../util/CPRect.js":62}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;a(t("./CPColorBmp.js")),a(t("./CPGreyBmp.js")),a(t("./CPLayer.js")),a(t("../util/CPRect.js"));function a(t){return t&&t.__esModule?t:{default:t}}function i(){}var _=new Array(256),E=new Array(256);i.multiplyOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;d&&(c=t.data[s],t.data[s]=c-((255^e.data[s])*c*d/65025|0),c=t.data[s+1],t.data[s+1]=c-((255^e.data[s+1])*c*d/65025|0),c=t.data[s+2],t.data[s+2]=c-((255^e.data[s+2])*c*d/65025|0))}},i.multiplyOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;d&&(c=t.data[s],t.data[s]=c-((255^e.data[s])*c*d/65025|0),c=t.data[s+1],t.data[s+1]=c-((255^e.data[s+1])*c*d/65025|0),c=t.data[s+2],t.data[s+2]=c-((255^e.data[s+2])*c*d/65025|0))}},i.multiplyOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiplyOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-((255^e.data[l])*p*h/65025|0),p=t.data[l+1],t.data[l+1]=p-((255^e.data[l+1])*p*h/65025|0),p=t.data[l+2],t.data[l+2]=p-((255^e.data[l+2])*p*h/65025|0))}},i.multiplyOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-((255^e.data[l])*p*h/65025|0),p=t.data[l+1],t.data[l+1]=p-((255^e.data[l+1])*p*h/65025|0),p=t.data[l+2],t.data[l+2]=p-((255^e.data[l+2])*p*h/65025|0))}},i.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.multiply2OntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;d&&(c=t.data[s],t.data[s]=c-Math.ceil((255^e.data[s])*c*d/65025),c=t.data[s+1],t.data[s+1]=c-Math.ceil((255^e.data[s+1])*c*d/65025),c=t.data[s+2],t.data[s+2]=c-Math.ceil((255^e.data[s+2])*c*d/65025))}},i.multiply2OntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;d&&(c=t.data[s],t.data[s]=c-Math.ceil((255^e.data[s])*c*d/65025),c=t.data[s+1],t.data[s+1]=c-Math.ceil((255^e.data[s+1])*c*d/65025),c=t.data[s+2],t.data[s+2]=c-Math.ceil((255^e.data[s+2])*c*d/65025))}},i.multiply2OntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiply2OntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-Math.ceil((255^e.data[l])*p*h/65025),p=t.data[l+1],t.data[l+1]=p-Math.ceil((255^e.data[l+1])*p*h/65025),p=t.data[l+2],t.data[l+2]=p-Math.ceil((255^e.data[l+2])*p*h/65025))}},i.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-Math.ceil((255^e.data[l])*p*h/65025),p=t.data[l+1],t.data[l+1]=p-Math.ceil((255^e.data[l+1])*p*h/65025),p=t.data[l+2],t.data[l+2]=p-Math.ceil((255^e.data[l+2])*p*h/65025))}},i.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.normalOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;if(d)if(255==d)t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2];else{var f=255-d;c=e.data[s],t.data[s]=(c*d+t.data[s]*f)/255|0,c=e.data[s+1],t.data[s+1]=(c*d+t.data[s+1]*f)/255|0,c=e.data[s+2],t.data[s+2]=(c*d+t.data[s+2]*f)/255|0}}},i.normalOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=255-d;c=e.data[s],t.data[s]=(c*d+t.data[s]*f)/255|0,c=e.data[s+1],t.data[s+1]=(c*d+t.data[s+1]*f)/255|0,c=e.data[s+2],t.data[s+2]=(c*d+t.data[s+2]*f)/255|0}}},i.normalOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=255*d/f|0,p=255-h;t.data[s]=(e.data[s]*h+t.data[s]*p)/255|0,t.data[s+1]=(e.data[s+1]*h+t.data[s+1]*p)/255|0,t.data[s+2]=(e.data[s+2]*h+t.data[s+2]*p)/255|0,t.data[s+3]=f}}},i.normalOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=255*d/f|0,p=255-h;t.data[s]=(e.data[s]*h+t.data[s]*p)/255|0,t.data[s+1]=(e.data[s+1]*h+t.data[s+1]*p)/255|0,t.data[s+2]=(e.data[s+2]*h+t.data[s+2]*p)/255|0,t.data[s+3]=f}}},i.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h)if(255==h)t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2];else{var m=255-h;p=e.data[l],t.data[l]=(p*h+t.data[l]*m)/255|0,p=e.data[l+1],t.data[l+1]=(p*h+t.data[l+1]*m)/255|0,p=e.data[l+2],t.data[l+2]=(p*h+t.data[l+2]*m)/255|0}}},i.normalOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=255-h;p=e.data[l],t.data[l]=(p*h+t.data[l]*m)/255|0,p=e.data[l+1],t.data[l+1]=(p*h+t.data[l+1]*m)/255|0,p=e.data[l+2],t.data[l+2]=(p*h+t.data[l+2]*m)/255|0}}},i.normalOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=255*h/m|0,v=255-g;t.data[l]=(e.data[l]*g+t.data[l]*v)/255|0,t.data[l+1]=(e.data[l+1]*g+t.data[l+1]*v)/255|0,t.data[l+2]=(e.data[l+2]*g+t.data[l+2]*v)/255|0,t.data[l+3]=m}}},i.normalOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=255*h/m|0,v=255-g;t.data[l]=(e.data[l]*g+t.data[l]*v)/255|0,t.data[l+1]=(e.data[l+1]*g+t.data[l+1]*v)/255|0,t.data[l+2]=(e.data[l+2]*g+t.data[l+2]*v)/255|0,t.data[l+3]=m}}},i.addOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3];d&&(t.data[s]=t.data[s]+d*e.data[s]/255|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255|0)}},i.addOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0;d&&(t.data[s]=t.data[s]+d*e.data[s]/255|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255|0)}},i.addOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0;t.data[s]=(c*t.data[s]+d*e.data[s])/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1])/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2])/f|0,t.data[s+3]=f}}},i.addOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0;t.data[s]=(c*t.data[s]+d*e.data[s])/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1])/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2])/f|0,t.data[s+3]=f}}},i.addOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255|0)}},i.addOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255|0)}},i.addOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0;t.data[l]=(p*t.data[l]+h*e.data[l])/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1])/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2])/m|0,t.data[l+3]=m}}},i.addOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0;t.data[l]=(p*t.data[l]+h*e.data[l])/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1])/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2])/m|0,t.data[l+3]=m}}},i.subtractOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3];d&&(t.data[s]=t.data[s]+d*e.data[s]/255-d|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255-d|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255-d|0)}},i.subtractOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0;d&&(t.data[s]=t.data[s]+d*e.data[s]/255-d|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255-d|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255-d|0)}},i.subtractOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=d*c;t.data[s]=(c*t.data[s]+d*e.data[s]-h)/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1]-h)/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2]-h)/f|0,t.data[s+3]=f}}},i.subtractOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=d*c;t.data[s]=(c*t.data[s]+d*e.data[s]-h)/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1]-h)/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2]-h)/f|0,t.data[s+3]=f}}},i.subtractOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255-h|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255-h|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255-h|0)}},i.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255-h|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255-h|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255-h|0)}},i.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=h*p;t.data[l]=(p*t.data[l]+h*e.data[l]-g)/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1]-g)/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2]-g)/m|0,t.data[l+3]=m}}},i.subtractOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=h*p;t.data[l]=(p*t.data[l]+h*e.data[l]-g)/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1]-g)/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2]-g)/m|0,t.data[l+3]=m}}},i.screenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=255^((255^c)*f+(255^e.data[s])*(255^c)*d/255)/255,c=t.data[s+1],t.data[s+1]=255^((255^c)*f+(255^e.data[s+1])*(255^c)*d/255)/255,c=t.data[s+2],t.data[s+2]=255^((255^c)*f+(255^e.data[s+2])*(255^c)*d/255)/255}}},i.screenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=255^((255^c)*f+(255^e.data[s])*(255^c)*d/255)/255,c=t.data[s+1],t.data[s+1]=255^((255^c)*f+(255^e.data[s+1])*(255^c)*d/255)/255,c=t.data[s+2],t.data[s+2]=255^((255^c)*f+(255^e.data[s+2])*(255^c)*d/255)/255}}},i.screenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,t.data[s+3]=p}}},i.screenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,t.data[s+3]=p}}},i.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=255^((255^p)*m+(255^e.data[l])*(255^p)*h/255)/255,p=t.data[l+1],t.data[l+1]=255^((255^p)*m+(255^e.data[l+1])*(255^p)*h/255)/255,p=t.data[l+2],t.data[l+2]=255^((255^p)*m+(255^e.data[l+2])*(255^p)*h/255)/255}}},i.screenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=255^((255^p)*m+(255^e.data[l])*(255^p)*h/255)/255,p=t.data[l+1],t.data[l+1]=255^((255^p)*m+(255^e.data[l+1])*(255^p)*h/255)/255,p=t.data[l+2],t.data[l+2]=255^((255^p)*m+(255^e.data[l+2])*(255^p)*h/255)/255}}},i.screenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=255^((255^m)*b+(255^g)*w+(255^m)*(255^g)*y/255)/v,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=255^((255^m)*b+(255^g)*w+(255^m)*(255^g)*y/255)/v,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=255^((255^m)*b+(255^g)*w+(255^m)*(255^g)*y/255)/v,t.data[l+3]=v}}},i.screenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=255^((255^m)*b+(255^g)*w+(255^m)*(255^g)*y/255)/v,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=255^((255^m)*b+(255^g)*w+(255^m)*(255^g)*y/255)/v,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=255^((255^m)*b+(255^g)*w+(255^m)*(255^g)*y/255)/v,t.data[l+3]=v}}},i.lightenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?f:(f*h+c*d)/255|0}}},i.lightenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?f:(f*h+c*d)/255|0}}},i.lightenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=c*(255^d)/p|0,g=255^m,v=d*(255^c)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?f*v+h*y:h*m+f*g)/255|0,t.data[s+3]=p}}},i.lightenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=c*(255^d)/p|0,g=255^m,v=d*(255^c)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?f*v+h*y:h*m+f*g)/255|0,t.data[s+3]=p}}},i.lightenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?m:(m*g+p*h)/255|0}}},i.lightenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?m:(m*g+p*h)/255|0}}},i.lightenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=p*(255^h)/v|0,b=255^y,w=h*(255^p)/v|0,_=255^w;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?m*w+g*_:g*y+m*b)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?m*w+g*_:g*y+m*b)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?m*w+g*_:g*y+m*b)/255|0,t.data[l+3]=v}}},i.lightenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=p*(255^h)/v|0,b=255^y,w=h*(255^p)/v|0,_=255^w;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?m*w+g*_:g*y+m*b)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?m*w+g*_:g*y+m*b)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?m*w+g*_:g*y+m*b)/255|0,t.data[l+3]=v}}},i.darkenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?(f*h+c*d)/255|0:f}}},i.darkenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?(f*h+c*d)/255|0:f}}},i.darkenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*(255^c)/p|0,g=255^m,v=c*(255^d)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?h*v+f*y:f*m+h*g)/255|0,t.data[s+3]=p}}},i.darkenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*(255^c)/p|0,g=255^m,v=c*(255^d)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?h*v+f*y:f*m+h*g)/255|0,t.data[s+3]=p}}},i.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?(m*g+p*h)/255|0:m}}},i.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?(m*g+p*h)/255|0:m}}},i.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*(255^p)/v|0,b=255^y,w=p*(255^h)/v|0,_=255^w;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?g*w+m*_:m*y+g*b)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?g*w+m*_:m*y+g*b)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?g*w+m*_:m*y+g*b)/255|0,t.data[l+3]=v}}},i.darkenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*(255^p)/v|0,b=255^y,w=p*(255^h)/v|0,_=255^w;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?g*w+m*_:m*y+g*b)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?g*w+m*_:m*y+g*b)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?g*w+m*_:m*y+g*b)/255|0,t.data[l+3]=v}}},i.dodgeOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0}}},i.dodgeOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0}}},i.dodgeOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,t.data[s+3]=p}}},i.dodgeOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,t.data[s+3]=p}}},i.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0}}},i.dodgeOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0}}},i.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,t.data[l+3]=v}}},i.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,t.data[l+3]=v}}},i.burnOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0}}},i.burnOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0}}},i.burnOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,t.data[s+3]=p}}},i.burnOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,t.data[s+3]=p}}},i.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0}}},i.burnOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0}}},i.burnOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,t.data[l+3]=v}}},i.burnOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*b+g*w+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*b+g*w+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*b+g*w+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,t.data[l+3]=v}}},i.overlayOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.overlayOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.overlayOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.overlayOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.overlayOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.overlayOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.hardLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.hardLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.hardLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.hardLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.hardLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.softLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(c<=127?((2*c-255)*_[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(c<=127?((2*c-255)*_[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(c<=127?((2*c-255)*_[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0}}},i.softLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(c<=127?((2*c-255)*_[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(c<=127?((2*c-255)*_[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(c<=127?((2*c-255)*_[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0}}},i.softLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(((2*f-255)*_[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(((2*f-255)*_[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(((2*f-255)*_[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,t.data[s+3]=p}}},i.softLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(((2*f-255)*_[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(((2*f-255)*_[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(((2*f-255)*_[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,t.data[s+3]=p}}},i.softLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(p<=127?((2*p-255)*_[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(p<=127?((2*p-255)*_[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(p<=127?((2*p-255)*_[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0}}},i.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(p<=127?((2*p-255)*_[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(p<=127?((2*p-255)*_[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(p<=127?((2*p-255)*_[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0}}},i.softLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(m<=127?y*(((2*m-255)*_[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(m<=127?y*(((2*m-255)*_[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(m<=127?y*(((2*m-255)*_[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,t.data[l+3]=v}}},i.softLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(m<=127?y*(((2*m-255)*_[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(m<=127?y*(((2*m-255)*_[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(m<=127?y*(((2*m-255)*_[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,t.data[l+3]=v}}},i.vividLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0}}},i.vividLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0}}},i.vividLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,t.data[s+3]=p}}},i.vividLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,t.data[s+3]=p}}},i.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0}}},i.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0}}},i.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,t.data[l+3]=v}}},i.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,t.data[l+3]=v}}},i.linearLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s]-255)))/255|0,c=t.data[s+1],t.data[s+1]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+1]-255)))/255|0,c=t.data[s+2],t.data[s+2]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+2]-255)))/255|0}}},i.linearLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s]-255)))/255|0,c=t.data[s+1],t.data[s+1]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+1]-255)))/255|0,c=t.data[s+2],t.data[s+2]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+2]-255)))/255|0}}},i.linearLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,t.data[s+3]=p}}},i.linearLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,t.data[s+3]=p}}},i.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l]-255)))/255|0,p=t.data[l+1],t.data[l+1]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+1]-255)))/255|0,p=t.data[l+2],t.data[l+2]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+2]-255)))/255|0}}},i.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l]-255)))/255|0,p=t.data[l+1],t.data[l+1]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+1]-255)))/255|0,p=t.data[l+2],t.data[l+2]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+2]-255)))/255|0}}},i.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,t.data[l+3]=v}}},i.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,t.data[l+3]=v}}},i.pinLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0}}},i.pinLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0}}},i.pinLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,t.data[s+3]=p}}},i.pinLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,t.data[s+3]=p}}},i.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0}}},i.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0}}},i.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,t.data[l+3]=v}}},i.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,b=h*(255^p)/255|0,w=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(b*m+w*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(b*m+w*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(b*m+w*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,t.data[l+3]=v}}},i.passthroughOntoOpaqueFusionWithOpaqueLayer=i.passthroughOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=n/100,f=1-c,h=d*c+255*f;t.data[s]=(e.data[s]*d*c+255*t.data[s]*f)/h|0,t.data[s+1]=(e.data[s+1]*d*c+255*t.data[s+1]*f)/h|0,t.data[s+2]=(e.data[s+2]*d*c+255*t.data[s+2]*f)/h|0,t.data[s+3]=h}},i.passthroughOntoTransparentFusionWithOpaqueLayer=i.passthroughOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=t.data[s+3],f=n/100,h=1-f,p=d*f+c*h;t.data[s]=(e.data[s]*d*f+t.data[s]*c*h)/p|0,t.data[s+1]=(e.data[s+1]*d*f+t.data[s+1]*c*h)/p|0,t.data[s+2]=(e.data[s+2]*d*f+t.data[s+2]*c*h)/p|0,t.data[s+3]=p}},i.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=i.passthroughOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3],p=i.data[d]*n/25500,m=1-p,g=h*p+255*m;t.data[l]=(e.data[l]*h*p+255*t.data[l]*m)/g|0,t.data[l+1]=(e.data[l+1]*h*p+255*t.data[l+1]*m)/g|0,t.data[l+2]=(e.data[l+2]*h*p+255*t.data[l+2]*m)/g|0,t.data[l+3]=g}},i.passthroughOntoTransparentFusionWithOpaqueLayerMasked=i.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3],p=t.data[l+3],m=i.data[d]*n/25500,g=1-m,v=h*m+p*g;t.data[l]=(e.data[l]*h*m+t.data[l]*p*g)/v|0,t.data[l+1]=(e.data[l+1]*h*m+t.data[l+1]*p*g)/v|0,t.data[l+2]=(e.data[l+2]*h*m+t.data[l+2]*p*g)/v|0,t.data[l+3]=v}},i.replaceOntoFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0;t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2],t.data[s+3]=d}},i.replaceOntoFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3];t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2],t.data[s+3]=d}},i.replaceOntoFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2],t.data[l+3]=h}},i.replaceOntoFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2],t.data[l+3]=h}},i.replaceAlphaOntoFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0;t.data[s+3]=d}},i.replaceAlphaOntoFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;t.data[l+3]=h}},i.replaceAlphaOntoFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3];t.data[s+3]=d}},i.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var r=0|a.getHeight(),o=0|a.getWidth(),s=4*(e.width-o)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-o|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<r;c++,l+=s,d+=u)for(var f=0;f<o;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;t.data[l+3]=h}},i.upgradeMultiplyOfOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;d&&(c=e.data[s],f=t.data[s],e.data[s]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+1],f=t.data[s+1],e.data[s+1]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+2],f=t.data[s+2],e.data[s+2]=c+Math.ceil((255-c)*f*d%65025/(f*d)))}},i.upgradeMultiplyOfTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),r=0|a.getWidth(),o=4*(e.width-r)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=o)for(var u=0;u<r;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;d&&(c=e.data[s],f=t.data[s],e.data[s]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+1],f=t.data[s+1],e.data[s+1]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+2],f=t.data[s+2],e.data[s+2]=c+Math.ceil((255-c)*f*d%65025/(f*d)))}},i._normalFuseImageOntoImageAtPosition=function(t,e,n,a,i,r){for(var o=0|a.getHeight(),s=0|a.getWidth(),l=4*(e.width-s)|0,u=0|e.offsetOfPixel(a.left,a.top),d=4*(t.width-s)|0,c=0|t.offsetOfPixel(i,r),f=0;f<o;f++,u+=l,c+=d)for(var h=0;h<s;h++,u+=4,c+=4){var p=e.data[u+3],m=void 0;if(p){var g=p+(m=t.data[c+3])-(p*m/255|0)|0,v=255*p/g|0,y=255-v;t.data[c]=(e.data[u]*v+t.data[c]*y)/255|0,t.data[c+1]=(e.data[u+1]*v+t.data[c+1]*y)/255|0,t.data[c+2]=(e.data[u+2]*v+t.data[c+2]*y)/255|0,t.data[c+3]=g}}},i.LM_NORMAL=0,i.LM_MULTIPLY=1,i.LM_ADD=2,i.LM_SCREEN=3,i.LM_LIGHTEN=4,i.LM_DARKEN=5,i.LM_SUBTRACT=6,i.LM_DODGE=7,i.LM_BURN=8,i.LM_OVERLAY=9,i.LM_HARDLIGHT=10,i.LM_SOFTLIGHT=11,i.LM_VIVIDLIGHT=12,i.LM_LINEARLIGHT=13,i.LM_PINLIGHT=14,i.LM_PASSTHROUGH=15,i.LM_MULTIPLY2=16,i.LM_FIRST=0,i.LM_LAST=16,i.LM_LAST_CHIBIPAINT=i.LM_PINLIGHT,i.BLEND_MODE_CODENAMES=["normal","multiply","add","screen","lighten","darken","subtract","dodge","burn","overlay","hardLight","softLight","vividLight","linearLight","pinLight","passthrough","multiply2"],i.BLEND_MODE_DISPLAY_NAMES=["Normal","Multiply","Add","Screen","Lighten","Darken","Subtract","Dodge","Burn","Overlay","Hard Light","Soft Light","Vivid Light","Linear Light","Pin Light","Passthrough","Multiply"],function(){for(var t=0;t<256;t++){var e=t/255;_[t]=255*(e-e*e)|0}for(var n=0;n<256;n++){var a=n/255;E[n]=255*(Math.sqrt(a)-a)|0}}(),e.exports=n.default},{"../util/CPRect.js":62,"./CPColorBmp.js":13,"./CPGreyBmp.js":14,"./CPLayer.js":16}],6:[function(t,e,n){"use strict";var l=a(t("./CPBlend.js")),s=a(t("../util/CPRect.js")),o=a(t("./CPColorBmp.js"));a(t("./CPGreyBmp.js"));function a(t){return t&&t.__esModule?t:{default:t}}l.default.blendFunctionNameForParameters=function(t,e,n,a){var i=l.default.BLEND_MODE_CODENAMES[n]+"Onto";return i+=t?"TransparentFusion":"OpaqueFusion",i+=100==e?"WithOpaqueLayer":"WithTransparentLayer",a&&(i+="Masked"),i},l.default.fuseImageOntoImage=function(t,e,n,a,i,r,o){if(!(a<=0)){var s=l.default.blendFunctionNameForParameters(e,a,i,null!=o);r=t.getBounds().clipTo(r),this[s](t,n,a,r,o)}},l.default.normalFuseImageOntoImageAtPosition=function(t,e,n,a,i){var r=i.clone(),o=new s.default(n,a,0,0);t.getBounds().clipSourceDest(r,o),this._normalFuseImageOntoImageAtPosition(t,e,100,r,o.left,o.top)},l.default.multiplyAlphaBy=function(t,e){if(e<100)if(0==e)t.clearAll(0);else for(var n=t.data,a=3;a<n.length;a+=4)n[a]=Math.round(n[a]*e/100)},l.default.multiplyAlphaByMask=function(t,e,n){for(var a=e/25500,i=o.default.ALPHA_BYTE_OFFSET,r=0;i<t.data.length;i+=o.default.BYTES_PER_PIXEL,r++)t.data[i]=Math.round(t.data[i]*n.data[r]*a)},l.default.copyAndMultiplyAlphaBy=function(t,e,n,a){if(100==n)t.copyBitmapRect(e,a.left,a.top,a);else if(0==n)t.clearRect(a,0);else for(var i=e.data,r=0;r<i.length;r+=4)i[r]=i[r],i[r+1]=i[r+1],i[r+2]=i[r+2],i[r+3]=Math.round(i[r+3]*n/100)}},{"../util/CPRect.js":62,"./CPBlend.js":5,"./CPColorBmp.js":13,"./CPGreyBmp.js":14}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,l,u,n){var a,c=!1,i=[],r=new Map;function o(){return 0<i.length?i.pop():new y.default(l,u)}function d(t){if(0==t.layers.length)return null;if(1!=t.layers.length||null!=t.mask&&null!=t.layers[0].mask)return t.blendMode==g.default.LM_PASSTHROUGH&&100==t.alpha&&null==t.mask?t.layers:(t.image=o(),t);var e=t.layers[0];return e.alpha=Math.round(t.alpha*e.alpha/100),t.blendMode!=g.default.LM_PASSTHROUGH&&(e.blendMode=t.blendMode),e.mask=t.mask||e.mask,t.layer&&r.set(t.layer,e),e}function f(t){var e=new E(l,u,t);return r.set(t,e),e}function s(t,e){t&&(t.dirtyRect.union(e),s(t.parent,e))}function h(t){if(t.isGroup){t.image&&i.push(t.image);var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}(t.layers);try{for(n.s();!(e=n.n()).done;){var a=e.value;h(a)}}catch(t){n.e(t)}finally{n.f()}}}function p(t,e,n,a,i){if(100!=n||i||a.getWidth()!=t.width||a.getHeight()!=t.height){var r="replaceOntoFusionWith";r+=100==n?"OpaqueLayer":"TransparentLayer",i&&(r+="Masked"),c&&console.log("CPBlend.".concat(r,"(dest, source, sourceAlpha = ").concat(n,", rect = ").concat(a,", mask = ").concat(i,");")),g.default[r](t,e,n,a,i)}else c&&console.log("CPColorBmp.copyDataFrom(source);"),t.copyPixelsFrom(e)}function m(t){if(!t||!t.isGroup)return t;var e,n,a,i=t.dirtyRect,r=!0,o=!0;if(t.blendMode==g.default.LM_PASSTHROUGH&&t.parent&&i.union(t.parent.dirtyRect),i.isEmpty())return t;t.blendMode==g.default.LM_PASSTHROUGH&&t.parent&&(r=!1,e=t.image,n=t.parent.image,(a=i).getWidth()==e.width&&a.getHeight()==e.height?(c&&console.log("CPColorBmp.copyDataFrom(source);"),e.copyPixelsFrom(n)):(c&&console.log("CPBlend.replaceOntoFusionWithOpaqueLayer(dest, source, 100, ".concat(a,");")),g.default.replaceOntoFusionWithOpaqueLayer(e,n,100,a)));for(var s=0;s<t.layers.length;s++){var l=t.layers[s],u=m(l);r?(p(t.image,u.image,u.alpha,i,u.mask),r=!1):(o=o&&t.image.hasAlphaInRect(i),c&&console.log("CPBlend.fuseImageOntoImage(treeNode.image, fusionHasTransparency == ".concat(o,", childNode.image, childNode.alpha == ").concat(u.alpha,", childNode.blendMode == ").concat(u.blendMode,", ").concat(i,", ").concat(u.mask,");")),g.default.fuseImageOntoImage(t.image,o,u.image,u.alpha,u.blendMode,i,u.mask))}if(t.clip){var d=t.layers[0];d.alpha<100?d.mask?(c&&console.log("CPBlend.replaceAlphaOntoFusionWithTransparentLayerMasked(treeNode.image, baseLayer.image, treeNode.layers[0].alpha == ".concat(t.layers[0].alpha,", ").concat(i,");")),g.default.replaceAlphaOntoFusionWithTransparentLayerMasked(t.image,d.image,d.alpha,i,d.mask)):(c&&console.log("CPBlend.replaceAlphaOntoFusionWithTransparentLayer(treeNode.image, baseLayer.image, treeNode.layers[0].alpha == ".concat(t.layers[0].alpha,", ").concat(i,");")),g.default.replaceAlphaOntoFusionWithTransparentLayer(t.image,d.image,d.alpha,i)):d.mask?(c&&console.log("CPBlend.replaceAlphaOntoFusionWithOpaqueLayerMasked(treeNode.image, baseLayer.image, 100, ".concat(i,");")),g.default.replaceAlphaOntoFusionWithOpaqueLayerMasked(t.image,d.image,100,i,d.mask)):(c&&console.log("CPBlend.replaceAlphaOntoFusionWithOpaqueLayer(treeNode.image, baseLayer.image, 100, ".concat(i,");")),g.default.replaceAlphaOntoFusionWithOpaqueLayer(t.image,d.image,100,i))}return t.dirtyRect.makeEmpty(),t}this.invalidateLayerRect=function(t,e){var n=r.get(t);s(n,e)},this.buildTree=function(){if(!a){if(a=function t(e){if(0==e.getEffectiveAlpha())return null;var n=f(e);for(var a=0;a<e.layers.length;a++){var i=e.layers[a],r=e.layers[a+1];if(i instanceof b.default&&r&&r.clip){var o=new E(l,u,null),s=void 0;for(o.blendMode=i.blendMode,o.alpha=100,o.clip=!0,o.addChildren(f(i)),s=a+1;s<e.layers.length&&e.layers[s].clip;s++)0<e.layers[s].getEffectiveAlpha()&&o.addChildren(f(e.layers[s]));0<i.getEffectiveAlpha()&&n.addChildren(d(o)),a=s-1}else i instanceof v.default?n.addChildren(t(i)):0<i.getEffectiveAlpha()&&n.addChildren(f(i))}return d(n)}(e)){if(Array.isArray(a)||n&&(a.alpha<100||a.mask)){var t=a;(a=new E(l,u)).blendMode=Array.isArray(t)?g.default.LM_NORMAL:t.blendMode,a.alpha=100,a.image=o(),a.addChildren(t)}}else(a=new E(l,u,{image:o(),blendMode:g.default.LM_NORMAL,alpha:100,getEffectiveMask:function(){return null},visible:!0})).image.clearAll(0);i=[]}},this.resetTree=function(){a&&(h(a),a=null,r.clear())},this.layerPropertyChanged=function(t,e){var n=r.get(t);n&&n.visible==t.visible&&n.alpha==t.alpha&&null==n.mask==(null==t.getEffectiveMask())&&n.blendMode==g.default.LM_PASSTHROUGH==(t.blendMode==g.default.LM_PASSTHROUGH)&&"clip"!==e?(n.blendMode=t.blendMode,s(n,new w.default(0,0,l,u))):this.resetTree()},this.blendTree=function(){return c&&console.log("Fusing layers..."),m(a)}};var g=a(t("./CPBlend.js"));t("./CPBlendAdditional.js");a(t("./CPLayer.js"));var v=a(t("./CPLayerGroup.js")),y=a(t("./CPColorBmp.js")),b=a(t("./CPImageLayer.js")),w=a(t("../util/CPRect.js"));function a(t){return t&&t.__esModule?t:{default:t}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function E(t,e,n){n?(this.isGroup=n instanceof v.default,this.image=n.image,this.mask=n.getEffectiveMask(),this.layer=n,this.blendMode=n.blendMode,this.alpha=n.alpha,this.visible=n.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=g.default.LM_PASSTHROUGH,this.alpha=100,this.visible=!0),this.dirtyRect=new w.default(0,0,t,e),this.layers=[],this.parent=null,this.clip=!1}E.prototype.addChildren=function(t){var e=this;if(null!=t)if(Array.isArray(t))t.forEach(function(t){return t.parent=e}),this.layers=this.layers.concat(t);else{var n=t;(n.parent=this).layers.push(n)}},e.exports=n.default},{"../util/CPRect.js":62,"./CPBlend.js":5,"./CPBlendAdditional.js":6,"./CPColorBmp.js":13,"./CPImageLayer.js":15,"./CPLayer.js":16,"./CPLayerGroup.js":17}],8:[function(t,e,n){"use strict";function a(t){var e;for(e in a.DEFAULTS)a.DEFAULTS.hasOwnProperty(e)&&(this[e]=a.DEFAULTS[e]);for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).STROKE_MODE_FREEHAND=0,a.STROKE_MODE_LINE=1,a.STROKE_MODE_BEZIER=2,a.TIP_ROUND_PIXEL=0,a.TIP_ROUND_AA=1,a.TIP_ROUND_AIRBRUSH=2,a.TIP_SQUARE_PIXEL=3,a.TIP_SQUARE_AA=4,a.BRUSH_MODE_PAINT=0,a.BRUSH_MODE_ERASE=1,a.BRUSH_MODE_DODGE=2,a.BRUSH_MODE_BURN=3,a.BRUSH_MODE_WATER=4,a.BRUSH_MODE_BLUR=5,a.BRUSH_MODE_SMUDGE=6,a.BRUSH_MODE_OIL=7,a.PAINT_MODE_OPACITY=0,a.PAINT_MODE_FLOW=1,a.DEFAULTS={isAA:!1,minSpacing:0,spacing:0,pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:a.TIP_ROUND_PIXEL,brushMode:a.BRUSH_MODE_PAINT,paintMode:a.PAINT_MODE_OPACITY,strokeMode:a.STROKE_MODE_FREEHAND,resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0},a.prototype.applyPressure=function(t){this.pressureSize&&this.brushMode!=a.BRUSH_MODE_SMUDGE&&this.brushMode!=a.BRUSH_MODE_OIL?this.curSize=Math.max(.1,this.size*t):this.curSize=Math.max(.1,this.size),16<this.curSize&&(this.curSize=Math.floor(this.curSize)),this.curSize=Math.min(this.curSize,400),this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*Math.min(t,1)):this.alpha,this.curSqueeze=this.squeeze,this.curAngle=this.angle,this.curScattering=this.scattering*this.curSize*(this.pressureScattering?t:1)},a.prototype.clone=function(){return new a(this)},e.exports=n.default},{}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,n,a,i,c=new Uint8Array(160801),b=new Uint8Array(161604),w=[new Float32Array(402),new Float32Array(402)],r=null,h=this;function _(t){if(null!=r&&t.curSize==e&&t.curSqueeze==n&&t.curAngle==a&&t.tip==i)return r;switch(t.tip){case f.default.TIP_ROUND_AIRBRUSH:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),r=1+e.curSqueeze*T,o=Math.cos(e.curAngle),s=Math.sin(e.curAngle),l=0,u=0;u<n;u++)for(var d=0;d<n;d++){var c=d+.5-a,f=u+.5-a,h=(c*o-f*s)*r,p=f*o+c*s,m=h*h+p*p;t[l++]=m<=i?~~(255*(1-m/i)):0}}(c,t);break;case f.default.TIP_ROUND_AA:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),r=(e.curSize-2)/2*((e.curSize-2)/2),o=(e.curSize+2)/2*((e.curSize+2)/2),s=1+e.curSqueeze*T,l=Math.cos(e.curAngle),u=Math.sin(e.curAngle),d=0,c=0;c<n;c++)for(var f=0;f<n;f++){var h=f+.5-a,p=c+.5-a,m=(h*l-p*u)*s,g=p*l+h*u,v=m*m+g*g;if(v<=r)t[d++]=255;else if(o<v)t[d++]=0;else{for(var y=0,b=0;b<4;b++)for(var w=0;w<4;w++)(v=(m=((h=f+.25*w-a)*l-(p=c+.25*b-a)*u)*s)*m+(g=p*l+h*u)*g)<=i&&(y+=1);t[d++]=Math.min(16*y,255)}}}(c,t);break;case f.default.TIP_ROUND_PIXEL:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),r=1+e.curSqueeze*T,o=Math.cos(e.curAngle),s=Math.sin(e.curAngle),l=0,u=0;u<n;u++)for(var d=0;d<n;d++){var c=d+.5-a,f=u+.5-a,h=(c*o-f*s)*r,p=f*o+c*s,m=h*h+p*p;t[l++]=m<=i?255:0}}(c,t);break;case f.default.TIP_SQUARE_AA:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize*Math.sin(Math.PI/4),r=i/2/(1+e.curSqueeze*T),o=i/2,s=r-1,l=o-1,u=r+1,d=o+1,c=Math.cos(e.curAngle),f=Math.sin(e.curAngle),h=0,p=0;p<n;p++)for(var m=0;m<n;m++){var g=m+.5-a,v=p+.5-a,y=Math.abs(g*c-v*f),b=Math.abs(v*c+g*f);if(y<=s&&b<=l)t[h++]=255;else if(u<y||d<b)t[h++]=0;else{for(var w=0,_=0;_<4;_++)for(var E=0;E<4;E++)g=m+.25*E-a,v=p+.25*_-a,y=Math.abs(g*c-v*f),b=Math.abs(v*c+g*f),y<=r&&b<=o&&w++;t[h++]=Math.min(16*w,255)}}}(c,t);break;case f.default.TIP_SQUARE_PIXEL:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize*Math.sin(Math.PI/4),r=i/2/(1+e.curSqueeze*T),o=i/2,s=Math.cos(e.curAngle),l=Math.sin(e.curAngle),u=0,d=0;d<n;d++)for(var c=0;c<n;c++){var f=c+.5-a,h=d+.5-a,p=Math.abs(f*s-h*l),m=Math.abs(h*s+f*l);t[u++]=p<=r&&m<=o?255:0}}(c,t)}return r=c,e=t.curSize,i=t.tip,n=t.curSqueeze,a=t.curAngle,c}this.getDab=function(t,e,n){var a={alpha:n.curAlpha,width:Math.ceil(n.curSize),height:Math.ceil(n.curSize)},i=n.isAA&&n.tip!=f.default.TIP_ROUND_PIXEL;i&&(a.width++,a.height++);var r=t-a.width/2+.5,o=e-a.height/2+.5,s=Math.floor(r),l=Math.floor(o);if(i){var u=r-s,d=o-l;a.brush=function(t,e,n){var a,i=_(t),r=Math.ceil(t.curSize),o=Math.ceil(t.curSize)+1,s=(1-e)*(1-n),l=e*(1-n),u=e*n,d=(1-e)*n,c=0,f=0,h=w[0],p=w[1];h.fill(0);for(var m=0;m<r;m++){var g=void 0;for(p[0]=0,g=0;g<r;g++,c++,f++){var v=i[c];b[f]=h[g]+v*s+.5|0,h[g+1]+=v*l,p[g]+=v*d,p[g+1]=v*u}b[f++]=h[g]+.5|0,a=h,h=p,p=a}for(var y=0;y<o;y++,f++)b[f]=h[y]+.5|0;return b}(n,u,d)}else a.brush=_(n);return a.x=s,a.y=l,0<n.texture&&null!=this.texture&&(a.brush==c&&(b.set(c),a.brush=b),function(t,e){var n,a,i=Math.floor(255*e),r=h.texture,o=t.x%r.width,s=t.y%r.height,l=0;o<0&&(o+=r.width);s<0&&(s+=r.height);for(var u=0;u<t.height;u++){n=s*r.width+o,a=s*r.width+r.width;for(var d=0;d<t.width;d++){var c=t.brush[l],f=r.data[n];t.brush[l]=~~(c*(f*i/255^255)/255),l++,++n==a&&(n-=r.width)}++s==r.height&&(s=0)}}(a,n.texture)),a},this.setTexture=function(t){this.texture=t}};var a,f=(a=t("./CPBrushInfo.js"))&&a.__esModule?a:{default:a};var T=10;e.exports=n.default},{"./CPBrushInfo.js":8}],10:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.CPBrushToolSmudge=n.CPBrushToolOil=n.CPBrushToolWatercolor=n.CPBrushToolBlur=n.CPBrushToolBurn=n.CPBrushToolDodge=n.CPBrushToolEraser=n.CPBrushTool=void 0;var T=a(t("./CPColorBmp.js")),v=a(t("./CPGreyBmp.js")),l=a(t("./CPBrushInfo.js")),y=a(t("../util/CPColorFloat.js"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=u(r);if(o){var i=u(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function b(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}function w(t){for(var e=new y.default(0,0,0),n=0;n<t.length;n++){var a=t[n];e.r+=a.r,e.g+=a.g,e.b+=a.b}return e.r/=t.length,e.g/=t.length,e.b/=t.length,e}function _(t,e,n){return t*(1-n)+e*n}var h=function(){function n(t,e){d(this,n),this._strokeBuffer=t,this._strokedRegion=e,this.wantsOutputAsInput=!0}return f(n,[{key:"paintDab",value:function(t,e,n,a,i,r,o){var s=Math.max(1,Math.ceil(r.alpha*a.alphaScale));switch(a.paintMode){case l.default.PAINT_MODE_FLOW:this._paintFlow(i,e,r.brush,r.width,s);break;case l.default.PAINT_MODE_OPACITY:this._paintOpacity(i,e,r.brush,r.width,s)}}},{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=n>>16&255,l=n>>8&255,u=255&n,d=0|i.getWidth(),c=0|i.getHeight(),f=this._strokeBuffer.offsetOfPixel(i.left,i.top),h=t.offsetOfPixel(i.left,i.top),p=this._strokeBuffer.width-d|0,m=(t.width-d)*T.default.BYTES_PER_PIXEL|0,g=0;g<c;g++,f+=p,h+=m)for(var v=0;v<d;v++,f++,h+=T.default.BYTES_PER_PIXEL){var y=a[f]/255+.5|0;if(0<y){var b=y+r[h+T.default.ALPHA_BYTE_OFFSET]*(255-y)/255|0,w=255*y/b|0,_=255-w;o[h]=(s*w+r[h]*_)/255&255,o[h+1]=(l*w+r[h+1]*_)/255&255,o[h+2]=(u*w+r[h+2]*_)/255&255,o[h+3]=b}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=0|i.getWidth(),l=0|i.getHeight(),u=t.offsetOfPixel(i.left,i.top),d=this._strokeBuffer.offsetOfPixel(i.left,i.top),c=this._strokeBuffer.width-s|0,f=t.width-s|0,h=0;h<l;h++,d+=c,u+=f)for(var p=0;p<s;p++,d++,u++){var m=a[d]/255|0;if(0<m){var g=255-m;o[u]=(n*m+r[u]*g)/255}}}},{key:"_paintFlow",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=t.left+t.top*a,s=this._strokeBuffer.offsetOfPixel(e.left,e.top),l=e.getHeight(),u=e.getWidth(),d=a-u,c=this._strokeBuffer.width-u;this._strokedRegion.union(e);for(var f=0;f<l;f++,o+=d,s+=c)for(var h=0;h<u;h++,o++,s++){var p=n[o]*i;0!=p&&(r[s]=Math.min(65025,r[s]+(255-r[s]/255)*p/255))}}},{key:"_paintOpacity",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=t.left+t.top*a,s=this._strokeBuffer.offsetOfPixel(e.left,e.top),l=e.getWidth(),u=a-l,d=this._strokeBuffer.width-l;i=Math.min(255,i),this._strokedRegion.union(e);for(var c=e.top;c<e.bottom;c++,o+=u,s+=d)for(var f=0;f<l;f++,o++,s++)r[s]=Math.max(n[o]*i,r[s])}},{key:"beginStroke",value:function(){}},{key:"endStroke",value:function(){}}]),n}();n.CPBrushTool=h;var p=function(t){r(n,h);var e=o(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=i.top;s<i.bottom;s++)for(var l=t.offsetOfPixel(i.left,s)+T.default.ALPHA_BYTE_OFFSET,u=this._strokeBuffer.offsetOfPixel(i.left,s),d=i.left;d<i.right;d++,l+=T.default.BYTES_PER_PIXEL){var c=a[u++]/255|0;if(0<c){var f=r[l];o[l]=f*(255-c)/255}}}}]),n}();n.CPBrushToolEraser=p;var m=function(t){r(n,h);var e=o(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=(t.width-r)*T.default.BYTES_PER_PIXEL,d=this._strokeBuffer.width-r,c=e.data,f=t.data,h=0;h<o;h++,l+=d,s+=u)for(var p=0;p<r;p++,l++,s+=T.default.BYTES_PER_PIXEL){var m=a[l]/255|0;if(0<m&&0!=c[s+T.default.ALPHA_BYTE_OFFSET]){var g=(m+255)/255;f[s+T.default.RED_BYTE_OFFSET]=c[s+T.default.RED_BYTE_OFFSET]*g,f[s+T.default.GREEN_BYTE_OFFSET]=c[s+T.default.GREEN_BYTE_OFFSET]*g,f[s+T.default.BLUE_BYTE_OFFSET]=c[s+T.default.BLUE_BYTE_OFFSET]*g}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=t.width-r,d=this._strokeBuffer.width-r,c=e.data,f=t.data,h=0;h<o;h++,l+=d,s+=u)for(var p=0;p<r;p++,l++,s++){var m=a[l]/255|0;if(0<m){var g=(m+255)/255;f[s]=Math.min(c[s]*g,255)}}}}]),n}();n.CPBrushToolDodge=m;var g=function(t){r(n,h);var e=o(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=(t.width-r)*T.default.BYTES_PER_PIXEL,d=this._strokeBuffer.width-r,c=e.data,f=t.data,h=0;h<o;h++,l+=d,s+=u)for(var p=0;p<r;p++,l++,s+=T.default.BYTES_PER_PIXEL){var m=a[l]/255|0;0<m&&0!=c[s+T.default.ALPHA_BYTE_OFFSET]&&(f[s+T.default.RED_BYTE_OFFSET]=c[s+T.default.RED_BYTE_OFFSET]-(260-c[s+T.default.RED_BYTE_OFFSET])*m/255|0,f[s+T.default.GREEN_BYTE_OFFSET]=c[s+T.default.GREEN_BYTE_OFFSET]-(260-c[s+T.default.GREEN_BYTE_OFFSET])*m/255|0,f[s+T.default.BLUE_BYTE_OFFSET]=c[s+T.default.BLUE_BYTE_OFFSET]-(260-c[s+T.default.BLUE_BYTE_OFFSET])*m/255|0)}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=i.getWidth(),o=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=t.width-r,d=this._strokeBuffer.width-r,c=e.data,f=t.data,h=0;h<o;h++,l+=d,s+=u)for(var p=0;p<r;p++,l++,s++){var m=a[l]/255|0;0<m&&(f[s]=Math.max(c[s]-(260-c[s])*m/255,0))}}}]),n}();n.CPBrushToolBurn=g;var E=function(t){r(n,h);var e=o(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a,i,r,o,s=this._strokeBuffer.data,l=this._strokedRegion,u=e.data,d=t.data,c=l.getWidth(),f=e.width*T.default.BYTES_PER_PIXEL,h=e.offsetOfPixel(l.left,l.top),p=this._strokeBuffer.offsetOfPixel(l.left,l.top),m=(e.width-c)*T.default.BYTES_PER_PIXEL,g=this._strokeBuffer.width-c,v=function(t){a+=u[t+T.default.RED_BYTE_OFFSET],i+=u[t+T.default.GREEN_BYTE_OFFSET],r+=u[t+T.default.BLUE_BYTE_OFFSET],o+=u[t+T.default.ALPHA_BYTE_OFFSET]},y=l.top;y<l.bottom;y++,h+=m,p+=g)for(var b=l.left;b<l.right;b++,h+=T.default.BYTES_PER_PIXEL,p++){var w=s[p]/255|0;if(0<w){var _=64+-63*w/255|0,E=_+4;a=_*u[h+T.default.RED_BYTE_OFFSET],i=_*u[h+T.default.GREEN_BYTE_OFFSET],r=_*u[h+T.default.BLUE_BYTE_OFFSET],o=_*u[h+T.default.ALPHA_BYTE_OFFSET],v(0<y?h-f:h),v(y<e.height-1?h+f:h),v(0<b?h-T.default.BYTES_PER_PIXEL:h),v(b<e.width-1?h+T.default.BYTES_PER_PIXEL:h),o/=E,a/=E,i/=E,r/=E,d[h+T.default.RED_BYTE_OFFSET]=0|a,d[h+T.default.GREEN_BYTE_OFFSET]=0|i,d[h+T.default.BLUE_BYTE_OFFSET]=0|r,d[h+T.default.ALPHA_BYTE_OFFSET]=0|o}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a,i=this._strokeBuffer.data,r=this._strokedRegion,o=e.data,s=t.data,l=r.getWidth(),u=e.width,d=e.offsetOfPixel(r.left,r.top),c=this._strokeBuffer.offsetOfPixel(r.left,r.top),f=e.width-l,h=this._strokeBuffer.width-l,p=r.top;p<r.bottom;p++,d+=f,c+=h)for(var m=r.left;m<r.right;m++,d++,c++){var g=i[c]/255|0;if(0<g){var v=64+-63*g/255|0,y=v+4;a=v*o[d],a+=o[0<p?d-u:d],a+=o[p<e.height-1?d+u:d],a+=o[0<m?d-1:d],a+=o[m<e.width-1?d+1:d],s[d]=a/y|0}}}}]),n}();n.CPBrushToolBlur=E;var k=function(t){r(n,h);var e=o(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=this._strokeBuffer.offsetOfPixel(i.left,i.top),l=t.offsetOfPixel(i.left,i.top),u=0|i.getWidth(),d=0|i.getHeight(),c=this._strokeBuffer.width-u|0,f=(t.width-u)*T.default.BYTES_PER_PIXEL|0,h=0;h<d;h++,s+=c,l+=f)for(var p=0;p<u;p++,s++,l+=T.default.BYTES_PER_PIXEL){var m=a[s],g=m>>>24;if(0<g){var v=r[l+T.default.ALPHA_BYTE_OFFSET],y=g+v-g*v/255|0,b=255*g/y|0,w=255-b;o[l]=((m>>16&255)*b+r[l]*w)/255|0,o[l+1]=((m>>8&255)*b+r[l+1]*w)/255|0,o[l+2]=((255&m)*b+r[l+2]*w)/255|0,o[l+3]=y}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,r=e.data,o=t.data,s=this._strokeBuffer.offsetOfPixel(i.left,i.top),l=t.offsetOfPixel(i.left,i.top),u=0|i.getWidth(),d=0|i.getHeight(),c=this._strokeBuffer.width-u|0,f=t.width-u|0,h=0;h<d;h++,s+=c,l+=f)for(var p=0;p<u;p++,s++,l++){var m=a[s],g=m>>8;if(0<g){var v=255-g;o[l]=((255&m)*g+r[l]*v)/255|0}}}}]),n}(),P=function(t){r(g,k);var a=o(g);function g(t,e){var n;return d(this,g),(n=a.call(this,t,e)).wantsOutputAsInput=!0,n}return f(g,[{key:"_paintToColorStrokeBuffer",value:function(t,e,n,a,i,r){var o=this._strokeBuffer.data,s=e.getWidth(),l=e.getHeight(),u=this._strokeBuffer.width-s,d=a-s,c=t.left+t.top*a,f=this._strokeBuffer.offsetOfPixel(e.left,e.top);this._strokedRegion.union(e);for(var h=0;h<l;h++,c+=d,f+=u)for(var p=0;p<s;p++,c++,f++){var m=n[c]*i/255|0;if(0<m){var g=o[f],v=g>>>24,y=m+v-m*v/255|0,b=255-(255*m/y|0);o[f]=y<<24|(r>>16&255)+((g>>16&255)*b-(r>>16&255)*b)/255<<16|(r>>8&255)+((g>>8&255)*b-(r>>8&255)*b)/255<<8|(255&r)+((255&g)*b-(255&r)*b)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(t,e,n,a,i,r){var o=this._strokeBuffer.data;this._strokedRegion.union(e);for(var s=e.top,l=t.top;s<e.bottom;s++,l++)for(var u=t.left+l*a,d=this._strokeBuffer.offsetOfPixel(e.left,s),c=e.left;c<e.right;c++,u++,d++){var f=n[u]*i/255|0;if(!(f<=0)){var h=o[d],p=h>>8,m=f+p-f*p/255|0;if(0<m){var g=255-(255*f/m|0);o[d]=m<<8|r+((255&h)*g-r*g)/255}}}}},{key:"beginStroke",value:function(){this._previousSamples=null}},{key:"paintDab",value:function(t,e,n,a,i,r,o){var s=Math.max(1,r.alpha/4),l=(e.left+e.right)/2,u=(e.top+e.bottom)/2,d=Math.max(1,Math.min(64,e.getWidth()*(2/6))),c=Math.max(1,Math.min(64,e.getHeight()*(2/6)));if(n instanceof v.default){null==this._previousSamples&&(this._previousSamples=new Array(50),this._previousSamples.fill(g._sampleGrey(n,l,u,d,c)));var f,h=b(this._previousSamples);h=_(f=h=_(h,255&o,a.resat*a.resat),g._sampleGrey(n,l,u,d,c),a.bleed),this._previousSamples.push(h),this._previousSamples.shift(),this._paintToGreyscaleStrokeBuffer(i,e,r.brush,r.width,s,Math.round(f))}else{null==this._previousSamples&&(this._previousSamples=new Array(50),this._previousSamples.fill(g._sampleRGB(n,l,u,d,c)));var p=w(this._previousSamples);p.mixWith(y.default.createFromInt(o),a.resat*a.resat);var m=p.toInt();p.mixWith(g._sampleRGB(n,l,u,d,c),a.bleed),this._previousSamples.push(p),this._previousSamples.shift(),this._paintToColorStrokeBuffer(i,e,r.brush,r.width,s,m)}}}],[{key:"_sampleGrey",value:function(e,t,n,a,i){for(var r=[{x:t|=0,y:n|=0}],o=.25;o<1.001;o+=.25)Array.prototype.push.apply(r,[{x:~~(t+o*a),y:n},{x:~~(t-o*a),y:n},{x:t,y:~~(n+o*i)},{x:t,y:~~(n-o*i)},{x:~~(t+.7*o*a),y:~~(n+.7*o*i)},{x:~~(t+.7*o*a),y:~~(n-.7*o*i)},{x:~~(t-.7*o*a),y:~~(n+.7*o*i)},{x:~~(t-.7*o*a),y:~~(n-.7*o*i)}]);return b(r.map(function(t){return e.getPixel(t.x,t.y)}))}},{key:"_sampleRGB",value:function(e,t,n,a,i){for(var r=[{x:t|=0,y:n|=0}],o=.25;o<1.001;o+=.25)Array.prototype.push.apply(r,[{x:~~(t+o*a),y:n},{x:~~(t-o*a),y:n},{x:t,y:~~(n+o*i)},{x:t,y:~~(n-o*i)},{x:~~(t+.7*o*a),y:~~(n+.7*o*i)},{x:~~(t+.7*o*a),y:~~(n-.7*o*i)},{x:~~(t-.7*o*a),y:~~(n+.7*o*i)},{x:~~(t-.7*o*a),y:~~(n-.7*o*i)}]);return w(r.map(function(t){return y.default.createFromInt(e.getPixel(t.x,t.y))}))}}]),g}();n.CPBrushToolWatercolor=P;var x=function(t){r(i,k);var a=o(i);function i(t,e){var n;return d(this,i),(n=a.call(this,t,e)).wantsOutputAsInput=!0,n}return f(i,[{key:"_accumulatePaintFromMask",value:function(t,e,n,a){var i=this._brushBuffer.data,r=t.data,o=n.getWidth(),s=n.getHeight(),l=e.left+e.top*this._brushBuffer.width,u=t.offsetOfPixel(n.left,n.top),d=this._brushBuffer.width-o,c=t.width-o;if(!(a<=0))for(var f=0;f<s;f++,l+=d,u+=c)for(var h=0;h<o;h++,l++,u++){var p=r[u],m=i[l],g=m>>8,v=a+g-a*g/255|0,y=255-(255*a/v|0);i[l]=v<<8|p+((255&m)*y-p*y)/255}}},{key:"_resaturateBrushWithGrey",value:function(t,e,n){if(!(e<=0))for(var a=this._brushBuffer.data,i=t.getWidth(),r=t.getHeight(),o=t.left+t.top*this._brushBuffer.width,s=this._brushBuffer.width-i,l=0;l<r;l++,o+=s)for(var u=0;u<i;u++,o++){var d=a[o],c=d>>8,f=e+c-e*c/255|0,h=255-(255*e/f|0);a[o]=f<<8|n+((255&d)*h-n*h)/255}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=this._brushBuffer.data,s=t.data;this._strokedRegion.union(n);for(var l=n.top,u=e.top;l<n.bottom;l++,u++)for(var d=this._brushBuffer.offsetOfPixel(e.left,u),c=this._strokeBuffer.offsetOfPixel(n.left,l),f=t.offsetOfPixel(n.left,l),h=n.left;h<n.right;h++,d++,f++,c++){var p=o[d],m=(p>>8)*a[d]*i/65025|0;if(0<m){var g=s[f],v=255-m;r[c]=65280|(255&p)+(g*v-(255&p)*v)/255}}}},{key:"_accumulatePaintFromImage",value:function(t,e,n,a){for(var i=this._brushBuffer.data,r=t.data,o=n.getWidth(),s=n.getHeight(),l=e.left+e.top*this._brushBuffer.width,u=t.offsetOfPixel(n.left,n.top),d=this._brushBuffer.width-o,c=(t.width-o)*T.default.BYTES_PER_PIXEL,f=0;f<s;f++,l+=d,u+=c)for(var h=0;h<o;h++,l++,u+=T.default.BYTES_PER_PIXEL){var p=r[u+T.default.ALPHA_BYTE_OFFSET]*a/255|0;if(0<p){var m=i[l],g=m>>>24,v=p+g-p*g/255|0,y=255-(255*p/v|0),b=r[u+T.default.RED_BYTE_OFFSET],w=r[u+T.default.GREEN_BYTE_OFFSET],_=r[u+T.default.BLUE_BYTE_OFFSET];i[l]=v<<24|b+((m>>16&255)*y-b*y)/255<<16|w+((m>>8&255)*y-w*y)/255<<8|_+((255&m)*y-_*y)/255}}}},{key:"_resaturateBrushWithColor",value:function(t,e,n){if(!(e<=0))for(var a=this._brushBuffer.data,i=t.getWidth(),r=t.getHeight(),o=t.left+t.top*this._brushBuffer.width,s=this._brushBuffer.width-i,l=0;l<r;l++,o+=s)for(var u=0;u<i;u++,o++){var d=a[o],c=d>>>24,f=e+c-e*c/255|0,h=255-(255*e/f|0);a[o]=f<<24|(n>>>16&255)+((d>>>16&255)*h-(n>>>16&255)*h)/255<<16|(n>>>8&255)+((d>>>8&255)*h-(n>>>8&255)*h)/255<<8|(255&n)+((255&d)*h-(255&n)*h)/255}}},{key:"_paintToColorStrokeBuffer",value:function(t,e,n,a,i){var r=this._strokeBuffer.data,o=this._brushBuffer.data,s=t.data;this._strokedRegion.union(n);for(var l=n.top,u=e.top;l<n.bottom;l++,u++)for(var d=this._brushBuffer.offsetOfPixel(e.left,u),c=this._strokeBuffer.offsetOfPixel(n.left,l),f=t.offsetOfPixel(n.left,l),h=n.left;h<n.right;h++,d++,f+=T.default.BYTES_PER_PIXEL,c++){var p=o[d],m=(p>>>24)*a[d]*i/65025|0;if(0<m){var g=s[f+T.default.ALPHA_BYTE_OFFSET],v=m+g-m*g/255|0,y=s[f+T.default.RED_BYTE_OFFSET],b=s[f+T.default.GREEN_BYTE_OFFSET],w=s[f+T.default.BLUE_BYTE_OFFSET],_=255-(255*m/v|0);r[c]=v<<24|(p>>16&255)+(y*_-(p>>16&255)*_)/255<<16|(p>>8&255)+(b*_-(p>>8&255)*_)/255<<8|(255&p)+(w*_-(255&p)*_)/255}}}},{key:"paintDab",value:function(t,e,n,a,i,r,o){t instanceof T.default?null==this._brushBuffer?(this._brushBuffer=new v.default(r.width,r.height,32),this._accumulatePaintFromImage(n,i,e,255)):(this._resaturateBrushWithColor(i,~~(a.resat<=0?0:Math.max(1,a.resat*a.resat*255)),16777215&o),this._paintToColorStrokeBuffer(t,i,e,r.brush,r.alpha),this._accumulatePaintFromImage(n,i,e,~~(255*a.bleed))):null==this._brushBuffer?(this._brushBuffer=new v.default(r.width,r.height,16),this._accumulatePaintFromMask(n,i,e,255)):(this._resaturateBrushWithGrey(i,~~(a.resat<=0?0:Math.max(1,a.resat*a.resat*255)),255&o),this._paintToGreyscaleStrokeBuffer(t,i,e,r.brush,r.alpha),this._accumulatePaintFromMask(n,i,e,~~(255*a.bleed)))}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),i}();function C(t,e){var n=t.data;if(0<e.left)for(var a=e.top;a<e.bottom;a++)for(var i=a*t.width,r=i,o=n[i+e.left],s=0;s<e.left;s++,r++)n[r]=o;if(e.right<t.width)for(var l=e.top;l<e.bottom;l++)for(var u=l*t.width+e.right,d=n[u-1],c=e.right;c<t.width;c++,u++)n[u]=d;for(var f=0,h=0;h<e.top;h++)for(var p=e.top*t.width,m=0;m<t.width;m++,p++,f++)n[f]=n[p];f=e.bottom*t.width;for(var g=e.bottom;g<t.width;g++)for(var v=(e.bottom-1)*t.width,y=0;y<t.width;y++,v++,f++)n[f]=n[v]}n.CPBrushToolOil=x;var O=function(t){r(i,k);var a=o(i);function i(t,e){var n;return d(this,i),(n=a.call(this,t,e))._brushBuffer=null,n.wantsOutputAsInput=!0,n.noMergePhase=!0,n}return f(i,[{key:"_sampleFromMask",value:function(t,e,n,a){var i=this._brushBuffer.data,r=e.getWidth(),o=e.getHeight(),s=this._brushBuffer.offsetOfPixel(e.left,e.top),l=t.offsetOfPixel(n.left,n.top),u=this._brushBuffer.width-r,d=t.width-r,c=255-a;if(255!=a){for(var f=0;f<o;f++,s+=u,l+=d)for(var h=0;h<r;h++,s++,l++){var p=t.data[l],m=i[s],g=(p*c+(255&m)*a)/255,v=(255*c+(m>>8)*a)/255<<8|g;v==m&&(g<p?v++:p<g&&v--),i[s]=v}C(this._brushBuffer,e)}}},{key:"_paintToMask",value:function(t,e,n,a){for(var i=e.getWidth(),r=e.getHeight(),o=this._brushBuffer.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(n.left,n.top),l=this._brushBuffer.width-i,u=t.width-i,d=t.data,c=this._brushBuffer.data,f=0;f<r;f++,s+=u,o+=l)for(var h=0;h<i;h++,o++,s++){var p=c[o],m=255&p;0<((p>>8)*a[o]/255|0)&&(d[s]=m)}}},{key:"_sampleFromImage",value:function(t,e,n,a){var i=this._brushBuffer.data,r=e.getWidth(),o=e.getHeight(),s=this._brushBuffer.offsetOfPixel(e.left,e.top),l=t.offsetOfPixel(n.left,n.top),u=this._brushBuffer.width-r,d=(t.width-r)*T.default.BYTES_PER_PIXEL,c=255-a;if(255!=a){for(var f=0;f<o;f++,s+=u,l+=d)for(var h=0;h<r;h++,s++,l+=T.default.BYTES_PER_PIXEL){var p=t.data[l+T.default.RED_BYTE_OFFSET],m=t.data[l+T.default.GREEN_BYTE_OFFSET],g=t.data[l+T.default.BLUE_BYTE_OFFSET],v=t.data[l+T.default.ALPHA_BYTE_OFFSET],y=i[s],b=(v*c+(y>>24&255)*a)/255<<24&4278190080|(p*c+(y>>16&255)*a)/255<<16&16711680|(m*c+(y>>8&255)*a)/255<<8&65280|(g*c+(255&y)*a)/255&255;if(b==y){var w=(16711680&b)>>16,_=(65280&b)>>8,E=255&b;w<p?b+=65536:p<w&&(b-=65536),_<m?b+=256:m<_&&(b-=256),E<g?b+=1:g<E&&(b-=1)}i[s]=b}C(this._brushBuffer,e)}}},{key:"_paintToImage",value:function(t,e,n,a){for(var i=e.getWidth(),r=e.getHeight(),o=this._brushBuffer.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(n.left,n.top),l=this._brushBuffer.width-i,u=(t.width-i)*T.default.BYTES_PER_PIXEL,d=t.data,c=this._brushBuffer.data,f=0;f<r;f++,s+=u,o+=l)for(var h=0;h<i;h++,o++,s+=T.default.BYTES_PER_PIXEL){var p=c[o];0<((p>>>24)*a[o]/255|0)&&(d[s+T.default.RED_BYTE_OFFSET]=p>>16&255,d[s+T.default.GREEN_BYTE_OFFSET]=p>>8&255,d[s+T.default.BLUE_BYTE_OFFSET]=255&p,d[s+T.default.ALPHA_BYTE_OFFSET]=p>>24&255)}}},{key:"paintDab",value:function(t,e,n,a,i,r,o){t instanceof T.default?null==this._brushBuffer?(this._brushBuffer=new v.default(r.width,r.height,32),this._sampleFromImage(n,i,e,0)):(this._sampleFromImage(n,i,e,r.alpha),this._paintToImage(t,i,e,r.brush)):null==this._brushBuffer?(this._brushBuffer=new v.default(r.width,r.height,16),this._sampleFromMask(n,i,e,0)):(this._sampleFromMask(n,i,e,r.alpha),this._paintToMask(t,i,e,r.brush))}},{key:"mergeOntoImage",value:function(t,e,n){}},{key:"mergeOntoMask",value:function(t,e,n){}},{key:"beginStroke",value:function(){this._brushBuffer=null}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),i}();n.CPBrushToolSmudge=O},{"../util/CPColorFloat.js":58,"./CPBrushInfo.js":8,"./CPColorBmp.js":13,"./CPGreyBmp.js":14}],11:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.save=function(g,v){return v=v||{},Promise.resolve().then(function(){var t,e,n,a,i,h=new E.default.Deflate({level:7}),u=[],r=new Uint8Array(x.length),o=g.getLayersRoot().getLinearizedLayerList(!1),s=v.forceOldVersion?G(0,0):function(t){var e,n=T(t.getLayersRoot().getLinearizedLayerList(!1));try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a instanceof w.default||a.mask||a.clip||a.blendMode>_.default.LM_LAST_CHIBIPAINT||a.blendMode===_.default.LM_MULTIPLY)return G(k,P)}}catch(t){n.e(t)}finally{n.f()}return G(0,0)}(g),d=0===(t=X(s)).major&&0===t.minor?"ChibiPaint v0.0":"ChickenPaint v"+t.major+"."+t.minor,l=Promise.resolve();h.onData=function(t){u.push(t)};for(var c=0;c<x.length;c++)r[c]=x.charCodeAt(c);u.push(r),h.push((e=g,n=s,a=o.length,(i=V(C,M.FIXED_HEADER_LENGTH)).writeU32BE(n),i.writeU32BE(e.width),i.writeU32BE(e.height),i.writeU32BE(a),i.getAsDataArray()),!1);var p,f=T(o);try{var m=function(){var f=p.value;l=l.then(function(){return new Promise(function(t){var e,n,a,i,r,o,s,l,u,d,c;h.push((r=(e=f)instanceof y.default,o=4*(r?5:6),s=e.name.length,l=o+s,u=(r?e.image.data.length:0)+(e.mask?e.mask.data.length:0),d=V(r?O:S,o+s+u),c=0,e.visible&&(c|=R),r&&e.clip&&(c|=B),e.mask&&(c|=j),e.maskLinked&&(c|=I),e.maskVisible&&(c|=F),e.lockAlpha&&(c|=D),!r&&e.expanded&&(c|=N),e.blendMode===_.default.LM_MULTIPLY2?(n=_.default.LM_MULTIPLY,c|=H):n=e.blendMode,d.writeU32BE(l),d.writeU32BE(n),d.writeU32BE(e.alpha),d.writeU32BE(c),d.writeU32BE(e.name.length),r||d.writeU32BE(e.layers.length),d.writeString(e.name),r&&function(t,e){for(var n=t.pos,a=t.data,i=e.data,r=0;r<i.length;r+=b.default.BYTES_PER_PIXEL)a[n++]=i[r+b.default.ALPHA_BYTE_OFFSET],a[n++]=i[r+b.default.RED_BYTE_OFFSET],a[n++]=i[r+b.default.GREEN_BYTE_OFFSET],a[n++]=i[r+b.default.BLUE_BYTE_OFFSET];t.pos=n}(d,e.image),e.mask&&(a=d,i=e.mask,a.data.set(i.data,a.pos),a.pos+=i.data.length),d.getAsDataArray()),!1),setTimeout(t,10)})})};for(f.s();!(p=f.n()).done;)m()}catch(t){f.e(t)}finally{f.f()}return l.then(function(){return new Promise(function(s,l){h.onEnd=function(t){if(0===t)if("undefined"!=typeof Blob)s({bytes:new Blob(u,{type:"application/octet-stream"}),version:d});else{var e,n=u.map(function(t){return t.byteLength}).reduce(function(t,e){return t+e},0),a=new Uint8Array(n),i=0,r=T(u);try{for(r.s();!(e=r.n()).done;){var o=e.value;a.set(o,i),i+=o.byteLength}}catch(t){r.e(t)}finally{r.f()}s({bytes:a,version:d})}else l(t)},h.push(V(L,0).getAsDataArray(),!0)})})})},n.load=function(n,i){i=i||{};var a,r=new E.default.Inflate({}),o=0,s=null,l=null,u=0,d=null,c=null,f=null;function h(t){var e;for(f=function(t,e){if(null===t||0===t.length)return e;if(null===e||0===e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}(f,t),t=null;f;){if(!(u<f.length)){u-=f.length,f=null;break}switch(f=f.subarray(u),u=0,o){case 0:if(f.length<A.HEADER_LENGTH)break;if(e=new m.default(f),c=new A(e),f=f.subarray(e.pos),d){if(c.chunkType!=L){if(c.chunkType==O){o=2,a=new U(c,d.width,d.height);continue}if(c.chunkType==S){o=3,a=new Y(c,d.width,d.height);continue}console.log("Unknown chunk type '"+c.chunkType+"', attempting to skip..."),u=c.chunkSize;continue}o=45}else{if(c.chunkType==C){o=1;continue}o=5}break;case 1:if(f.length<c.chunkSize)break;if(e=new m.default(f),X((d=new M(e)).version).major>v){o=5;break}s=new p.default(d.width,d.height),l=s.getLayersRoot(),u=c.chunkSize,o=0;continue;case 2:if(f=a.decode(f),a.done){s.addLayerObject(l,a.layer),o=0;continue}break;case 3:if(f=a.decode(f),a.done){s.addLayerGroupObject(l,a.layer,a.childLayers),o=0;continue}}break}}return new Promise(function(t){if(n instanceof ArrayBuffer)t(n);else{var e=new FileReader;e.onload=function(){t(this.result)},e.readAsArrayBuffer(n)}}).then(function(a){return new Promise(function(e,n){var t=new Uint8Array(a);!function(t){for(var e=0;e<x.length;e++)if(t[e]!=x.charCodeAt(e))return!1;return!0}(t)?n("This doesn't appear to be a ChibiPaint layers file, is it damaged?"):(t=t.subarray(x.length),r.onData=h,r.onEnd=function(t){0===t&&45==o?(!1!==i.upgradeMultiplyLayers&&d.version<G(k,P)&&s.upgradeMultiplyLayers(i.upgradeMultiplyLayers),s.selectTopmostVisibleLayer(),e(s)):n("Fatal error decoding ChibiFile: "+t)},r.push(t,!0))})})};var p=a(t("./CPArtwork.js")),y=a(t("./CPImageLayer.js")),b=a(t("./CPColorBmp.js")),m=a(t("../util/ArrayDataStream.js")),w=a(t("./CPLayerGroup.js")),i=a(t("./CPGreyBmp.js")),_=a(t("./CPBlend.js")),E=a(t("pako"));function a(t){return t&&t.__esModule?t:{default:t}}function T(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=c(r);if(o){var i=c(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function g(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var k=0,P=10,v=k,x="CHIBIOEK",C="HEAD",O="LAYR",S="GRUP",L="ZEND";function M(t){this.version=t.readU32BE(),this.width=t.readU32BE(),this.height=t.readU32BE(),this.layersNb=t.readU32BE()}function A(t){for(var e=new Array(4),n=0;n<e.length;n++)e[n]=String.fromCharCode(t.readByte());if(this.chunkType=e.join(""),this.chunkSize=t.readU32BE(),t.eof)throw"Truncated chunk"}M.FIXED_HEADER_LENGTH=16;var R=1,B=2,j=4,I=A.HEADER_LENGTH=8,F=16,N=32,D=64,H=128,W=function(){function a(t,e,n){f(this,a),this.chunkHeader=t,this.width=e,this.height=n,this.state=0,this.payloadOffset=0,this.skipBytes=0,this.nameLength=0,this.done=!1,this.colorDecoder=null,this.maskDecoder=null}return g(a,[{key:"readFixedHeader",value:function(t){this.payloadOffset=t.readU32BE(),this.blendMode=t.readU32BE(),this.alpha=t.readU32BE();var e=t.readU32BE();this.visible=0!=(e&R),this.clip=0!=(e&B),this.hasMask=0!=(e&j),this.maskLinked=0!=(e&I),this.maskVisible=0!=(e&F),this.expanded=0!=(e&N),this.lockAlpha=0!=(e&D),this.blendMode===_.default.LM_MULTIPLY&&0!=(e&H)&&(this.blendMode=_.default.LM_MULTIPLY2),this.nameLength=t.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return 20}},{key:"getVariableHeaderLen",value:function(){return this.nameLength}},{key:"readVariableSizeHeader",value:function(t){this.name=t.readString(this.nameLength)}},{key:"decode",value:function(t){for(var e;;){if(0<this.skipBytes){if(this.skipBytes>=t.length)return this.skipBytes-=t.length,null;t=t.subarray(this.skipBytes),this.skipBytes=0}switch(this.state){case 0:if(t.length<this.getFixedHeaderLen())break;e=new m.default(t),this.readFixedHeader(e),t=t.subarray(e.pos),this.state=1;continue;case 1:if(t.length<this.getVariableHeaderLen())break;e=new m.default(t),this.readVariableSizeHeader(e),this.layer=this.createLayer(),this.hasMask&&(this.layer.setMask(new i.default(this.width,this.height,8)),this.maskDecoder=new z(this.layer.mask)),this.layer instanceof y.default&&(this.colorDecoder=new q(this.layer.image)),this.skipBytes=this.payloadOffset-this.getFixedHeaderLen(),this.colorDecoder?this.state=3:this.maskDecoder?this.state=4:this.state=5;continue;case 3:if(t=this.colorDecoder.decode(t),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(t=this.maskDecoder.decode(t),this.maskDecoder.done){this.state=5;continue}break;case 5:var n=this.payloadOffset;this.colorDecoder&&(n+=this.colorDecoder.bytesTotal),this.maskDecoder&&(n+=this.maskDecoder.bytesTotal),this.state=6,this.skipBytes=this.chunkHeader.chunkSize-n;continue;case 6:this.done=!0}break}return t}}]),a}(),U=function(t){u(n,W);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return g(n,[{key:"createLayer",value:function(){var t=new y.default(this.width,this.height,this.name);return t.setBlendMode(this.blendMode),t.setAlpha(this.alpha),t.setVisible(this.visible),t.setClip(this.clip),t.setMaskLinked(this.maskLinked),t.setMaskVisible(this.maskVisible),t.setLockAlpha(this.lockAlpha),t}}]),n}(),Y=function(t){u(r,W);var i=d(r);function r(t,e,n){var a;return f(this,r),(a=i.call(this,t,e,n)).childLayers=0,a}return g(r,[{key:"readFixedHeader",value:function(t){o(c(r.prototype),"readFixedHeader",this).call(this,t),this.childLayers=t.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return o(c(r.prototype),"getFixedHeaderLen",this).call(this)+4}},{key:"createLayer",value:function(){var t=new w.default(this.name,this.blendMode);return t.setAlpha(this.alpha),t.setVisible(this.visible),t.setExpanded(this.expanded),t.setMaskLinked(this.maskLinked),t.setMaskVisible(this.maskVisible),t}}]),r}();var q=function(){function e(t){f(this,e),this.bytesRead=0,this.bytesTotal=t.width*t.height*b.default.BYTES_PER_PIXEL,this.output=t.data,this.done=!1}return g(e,[{key:"decode",value:function(t){if(null==t)return null;for(var e=this.bytesRead%b.default.BYTES_PER_PIXEL,n=this.bytesRead-e,a=0,i=[b.default.ALPHA_BYTE_OFFSET,b.default.RED_BYTE_OFFSET,b.default.GREEN_BYTE_OFFSET,b.default.BLUE_BYTE_OFFSET];e<b.default.BYTES_PER_PIXEL&&a<t.length;e++)this.output[n+i[e]]=t[a],a++;this.bytesRead+=a;for(var r=0|Math.min(t.length-a,this.bytesTotal-this.bytesRead),o=r/b.default.BYTES_PER_PIXEL|0,s=r%b.default.BYTES_PER_PIXEL,l=0;l<o;l++)this.output[this.bytesRead+b.default.ALPHA_BYTE_OFFSET]=t[a],this.output[this.bytesRead+b.default.RED_BYTE_OFFSET]=t[a+1],this.output[this.bytesRead+b.default.GREEN_BYTE_OFFSET]=t[a+2],this.output[this.bytesRead+b.default.BLUE_BYTE_OFFSET]=t[a+3],this.bytesRead+=b.default.BYTES_PER_PIXEL,a+=b.default.BYTES_PER_PIXEL;for(n=this.bytesRead,e=0;e<s;e++)this.output[n+i[e]]=t[a],a++;return this.bytesRead+=s,this.bytesRead>=this.bytesTotal&&(this.done=!0),a<t.length?t.subarray(a):null}}]),e}(),z=function(){function e(t){f(this,e),this.bytesRead=0,this.bytesTotal=t.width*t.height,this.output=t.data,this.done=!1}return g(e,[{key:"decode",value:function(t){if(null==t)return null;var e,n=0|Math.min(t.length,this.bytesTotal-this.bytesRead),a=this.bytesRead;for(e=0;e<n;e++,a++)this.output[a]=t[e];return this.bytesRead=a,this.bytesRead>=this.bytesTotal&&(this.done=!0),e<t.length?t.subarray(e):null}}]),e}();function G(t,e){return t<<16|e}function X(t){return{major:t>>16&65535,minor:65535&t}}function V(t,e){var n,a,i,r=new Uint8Array(A.HEADER_LENGTH+e),o=new m.default(r);return a=t,i=e,(n=o).writeString(a),n.writeU32BE(i),o}},{"../util/ArrayDataStream.js":55,"./CPArtwork.js":3,"./CPBlend.js":5,"./CPColorBmp.js":13,"./CPGreyBmp.js":14,"./CPImageLayer.js":15,"./CPLayerGroup.js":17,pako:230}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){this.bmp=t,this.x=e,this.y=n},e.exports=n.default},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=R,n.getRotatedCanvas=o;var a=r(t("./CPBitmap.js")),h=r(t("../util/CPRect.js")),i=t("../util/Canvas.js");function r(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if("number"==typeof t)a.default.call(this,t,e),this.imageData=(0,i.createImageData)(this.width,this.height);else{var n=t;a.default.call(this,n.width,n.height),this.imageData=n}this.data=this.imageData.data}function p(t,e){for(var n=0,a=0;a<e;a++){for(var i=t[n+R.ALPHA_BYTE_OFFSET],r=0;r<3;r++,n++)t[n]=Math.round(t[n]*i/255);n++}}function m(t,e){for(var n=0,a=0;a<e;a++){var i=t[n+R.ALPHA_BYTE_OFFSET];if(0!=i){for(var r=255/i,o=0;o<3;o++,n++)t[n]=Math.min(Math.round(t[n]*r),255);n++}else n+=R.BYTES_PER_PIXEL}}function g(t,e,n,a){for(var i,r,o=0,s=[0,0,0,0],l=i=0;l<a&&l<n;l++){for(var u=0;u<R.BYTES_PER_PIXEL;u++)s[u]+=t[i++];o++}for(var d=r=0;d<n;d++){if(d+a<n){i=(d+a)*R.BYTES_PER_PIXEL;for(var c=0;c<R.BYTES_PER_PIXEL;c++)s[c]+=t[i++];o++}for(var f=0;f<R.BYTES_PER_PIXEL;f++)e[r++]=Math.round(s[f]/o);if(0<=d-a){i=(d-a)*R.BYTES_PER_PIXEL;for(var h=0;h<R.BYTES_PER_PIXEL;h++)s[h]-=t[i++];o--}}}function o(t,e){if(0==(e%=4))return t;var n=(0,i.createCanvas)(0,0),a=n.getContext("2d");switch(e%2==0?(n.width=t.width,n.height=t.height):(n.width=t.height,n.height=t.width),e){case 1:a.rotate(Math.PI/2),a.drawImage(t,0,-t.height);break;case 2:a.rotate(Math.PI),a.drawImage(t,-t.width,-t.height);break;case 3:a.rotate(-Math.PI/2),a.drawImage(t,-t.width,0);break;case 0:default:return t}return n}((R.prototype=Object.create(a.default.prototype)).constructor=R).BYTES_PER_PIXEL=4,R.RED_BYTE_OFFSET=0,R.GREEN_BYTE_OFFSET=1,R.BLUE_BYTE_OFFSET=2,R.ALPHA_BYTE_OFFSET=3,R.prototype.clone=function(){return this.cloneRect(this.getBounds())},R.prototype.cloneRect=function(t){var e=new R(t.getWidth(),t.getHeight());return e.copyBitmapRect(this,0,0,t),e},R.prototype.getPixel=function(t,e){t=Math.max(0,Math.min(this.width-1,t)),e=Math.max(0,Math.min(this.height-1,e));var n=this.offsetOfPixel(t,e);return this.data[n+R.ALPHA_BYTE_OFFSET]<<24|this.data[n+R.RED_BYTE_OFFSET]<<16|this.data[n+R.GREEN_BYTE_OFFSET]<<8|this.data[n+R.BLUE_BYTE_OFFSET]},R.prototype.copyRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=new Uint8Array(n*a*R.BYTES_PER_PIXEL),r=0,o=this.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(e.left,e.top),l=(this.width-n)*R.BYTES_PER_PIXEL,u=(t.width-n)*R.BYTES_PER_PIXEL,d=n*R.BYTES_PER_PIXEL,c=e.top;c<e.bottom;c++,o+=l,s+=u)for(var f=0;f<d;f++,r++,o++,s++)i[r]=this.data[o]^t.data[s];return i},R.prototype.setRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=this.offsetOfPixel(e.left,e.top),r=0,o=(this.width-n)*R.BYTES_PER_PIXEL,s=n*R.BYTES_PER_PIXEL,l=0;l<a;l++){for(var u=0;u<s;u++)this.data[i++]^=t[r++];i+=o}},R.prototype.copyBitmapRect=function(t,e,n,a){var i=new h.default(e,n,0,0);a=a.clone(),this.getBounds().clipSourceDest(a,i);var r=0|i.getWidth(),o=0|i.getHeight();if(0==i.left&&0==i.top&&r==this.width&&o==this.height&&r==t.width&&o==t.height)this.copyPixelsFrom(t);else for(var s=this.offsetOfPixel(i.left,i.top),l=(this.width-r)*R.BYTES_PER_PIXEL,u=t.offsetOfPixel(a.left,a.top),d=(t.width-r)*R.BYTES_PER_PIXEL,c=0;c<o;c++,u+=d,s+=l)for(var f=0;f<r;f++,u+=R.BYTES_PER_PIXEL,s+=R.BYTES_PER_PIXEL)this.data[s]=t.data[u],this.data[s+1]=t.data[u+1],this.data[s+2]=t.data[u+2],this.data[s+3]=t.data[u+3]},R.prototype.copyAlphaFrom=function(t,e){for(var n=0|(e=this.getBounds().clipTo(e)).getWidth(),a=0|e.getHeight(),i=this.offsetOfPixel(e.left,e.top)+R.ALPHA_BYTE_OFFSET|0,r=(this.width-n)*R.BYTES_PER_PIXEL|0,o=0;o<a;o++,i+=r)for(var s=0;s<n;s++,i+=R.BYTES_PER_PIXEL)this.data[i]=t.data[i]},R.prototype.setToSize=function(t){t.width==this.width&&t.height==this.height||(this.width=t.width,this.height=t.height,this.imageData=(0,i.createImageData)(this.width,this.height),this.data=this.imageData.data)},R.prototype.copyPixelsFrom=function(t){if(this.setToSize(t),"set"in this.data)this.data.set(t.data);else for(var e=0;e<this.data.length;e++)this.data[e]=t.data[e]},R.prototype.copyPixelsFromGreyscale=function(t){var e,n=0,a=t.width*t.height;for(this.setToSize(t),e=0;e<a;e++,n+=R.BYTES_PER_PIXEL)this.data[n+R.RED_BYTE_OFFSET]=t.data[e],this.data[n+R.GREEN_BYTE_OFFSET]=t.data[e],this.data[n+R.BLUE_BYTE_OFFSET]=t.data[e],this.data[n+R.ALPHA_BYTE_OFFSET]=255},R.prototype.copyScaledNearestNeighbor=function(t){for(var e,n=0,a=t.width/this.width,i=t.height/this.height,r=0,o=0;r<this.height;r++,o+=i){e=t.offsetOfPixel(0,Math.round(o));for(var s=0,l=0;s<this.width;s++,n+=R.BYTES_PER_PIXEL,l+=a){var u=e+Math.round(l)*R.BYTES_PER_PIXEL;this.data[n]=t.data[u],this.data[n+1]=t.data[u+1],this.data[n+2]=t.data[u+2],this.data[n+R.ALPHA_BYTE_OFFSET]=t.data[u+R.ALPHA_BYTE_OFFSET]}}},R.prototype.createThumbnailFrom=function(t){var e=Math.min(Math.floor(t.width/this.width),3);if(e<2)this.copyScaledNearestNeighbor(t);else for(var n=new Uint16Array(5*this.width),a=t.width*R.BYTES_PER_PIXEL,i=Math.floor(t.width/this.width)*R.BYTES_PER_PIXEL,r=Math.floor(t.width/this.width/e)*R.BYTES_PER_PIXEL,o=i-r*e,s=Math.floor(t.height/this.height),l=Math.floor(t.height/this.height/e),u=l*a-i*this.width,d=(s-l*e)*a,c=0,f=0,h=0;h<this.height;h++,c+=d){var p=0;n.fill(0);for(var m=0;m<e;m++,c+=u)for(var g=p=0;g<this.width;g++,p+=5,c+=o)for(var v=0;v<e;v++,c+=r){var y=t.data[c+R.ALPHA_BYTE_OFFSET],b=y/255;n[p]+=t.data[c]*b,n[p+1]+=t.data[c+1]*b,n[p+2]+=t.data[c+2]*b,n[p+R.ALPHA_BYTE_OFFSET]+=y,n[p+4]=Math.max(n[p+4],y)}for(var w=p=0;w<this.width;w++,p+=5,f+=R.BYTES_PER_PIXEL){var _=n[p+4];if(0==_)this.data[f+R.ALPHA_BYTE_OFFSET]=0;else{var E=_/n[p+R.ALPHA_BYTE_OFFSET];this.data[f]=n[p]*E,this.data[f+1]=n[p+1]*E,this.data[f+2]=n[p+2]*E,this.data[f+R.ALPHA_BYTE_OFFSET]=_}}}},R.prototype.floodFill=function(t,e,n){if(this.isInside(t,e)){var a=this.getPixel(t,e),i=a>>24&255,r=a>>16&255,o=a>>8&255,s=255&a,l=n>>24&255,u=n>>16&255,d=n>>8&255,c=255&n,f=[],h=this.getBounds(),p=this.data;if(h.left*=R.BYTES_PER_PIXEL,h.right*=R.BYTES_PER_PIXEL,f.push({x1:t*R.BYTES_PER_PIXEL,x2:t*R.BYTES_PER_PIXEL,y:e,dy:-1}),f.push({x1:t*R.BYTES_PER_PIXEL,x2:t*R.BYTES_PER_PIXEL,y:e+1,dy:1}),0==i){if(0==l)return;for(;0<f.length;){var m=f.pop();if(!(m.y<h.top||m.y>=h.bottom)){for(var g=this.offsetOfPixel(0,m.y),v=m.x1,y=void 0;v>=h.left&&0==p[v+g+R.ALPHA_BYTE_OFFSET];)p[v+g+R.RED_BYTE_OFFSET]=u,p[v+g+R.GREEN_BYTE_OFFSET]=d,p[v+g+R.BLUE_BYTE_OFFSET]=c,p[v+g+R.ALPHA_BYTE_OFFSET]=l,v-=R.BYTES_PER_PIXEL;if(v>=m.x1){for(;v<=m.x2&&p[v+g+R.ALPHA_BYTE_OFFSET]!=i;)v+=R.BYTES_PER_PIXEL;if(y=v+R.BYTES_PER_PIXEL,v>m.x2)continue}else(v+=R.BYTES_PER_PIXEL)<m.x1&&f.push({x1:v,x2:m.x1-R.BYTES_PER_PIXEL,y:m.y-m.dy,dy:-m.dy}),y=m.x1+R.BYTES_PER_PIXEL;do{for(p[v+g+R.RED_BYTE_OFFSET]=u,p[v+g+R.GREEN_BYTE_OFFSET]=d,p[v+g+R.BLUE_BYTE_OFFSET]=c,p[v+g+R.ALPHA_BYTE_OFFSET]=l;y<h.right&&p[y+g+R.ALPHA_BYTE_OFFSET]==i;)p[y+g+R.RED_BYTE_OFFSET]=u,p[y+g+R.GREEN_BYTE_OFFSET]=d,p[y+g+R.BLUE_BYTE_OFFSET]=c,p[y+g+R.ALPHA_BYTE_OFFSET]=l,y+=R.BYTES_PER_PIXEL;for(f.push({x1:v,x2:y-R.BYTES_PER_PIXEL,y:m.y+m.dy,dy:m.dy}),y-R.BYTES_PER_PIXEL>m.x2&&f.push({x1:m.x2+R.BYTES_PER_PIXEL,x2:y-R.BYTES_PER_PIXEL,y:m.y-m.dy,dy:-m.dy}),v=y+R.BYTES_PER_PIXEL;v<=m.x2&&p[v+g+R.ALPHA_BYTE_OFFSET]!=i;)v+=R.BYTES_PER_PIXEL;y=v+R.BYTES_PER_PIXEL}while(v<=m.x2)}}}else{if(n==a)return;for(;0<f.length;){var b=f.pop();if(!(b.y<h.top||b.y>=h.bottom)){for(var w=this.offsetOfPixel(0,b.y),_=b.x1,E=void 0;_>=h.left&&p[_+w+R.RED_BYTE_OFFSET]==r&&p[_+w+R.GREEN_BYTE_OFFSET]==o&&p[_+w+R.BLUE_BYTE_OFFSET]==s&&p[_+w+R.ALPHA_BYTE_OFFSET]==i;)p[_+w+R.RED_BYTE_OFFSET]=u,p[_+w+R.GREEN_BYTE_OFFSET]=d,p[_+w+R.BLUE_BYTE_OFFSET]=c,p[_+w+R.ALPHA_BYTE_OFFSET]=l,_-=R.BYTES_PER_PIXEL;if(_>=b.x1){for(;_<=b.x2&&(p[_+w+R.RED_BYTE_OFFSET]!=r||p[_+w+R.GREEN_BYTE_OFFSET]!=o||p[_+w+R.BLUE_BYTE_OFFSET]!=s||p[_+w+R.ALPHA_BYTE_OFFSET]!=i);)_+=R.BYTES_PER_PIXEL;if(E=_+R.BYTES_PER_PIXEL,_>b.x2)continue}else(_+=R.BYTES_PER_PIXEL)<b.x1&&f.push({x1:_,x2:b.x1-R.BYTES_PER_PIXEL,y:b.y-b.dy,dy:-b.dy}),E=b.x1+R.BYTES_PER_PIXEL;do{for(p[_+w+R.RED_BYTE_OFFSET]=u,p[_+w+R.GREEN_BYTE_OFFSET]=d,p[_+w+R.BLUE_BYTE_OFFSET]=c,p[_+w+R.ALPHA_BYTE_OFFSET]=l;E<h.right&&p[E+w+R.RED_BYTE_OFFSET]==r&&p[E+w+R.GREEN_BYTE_OFFSET]==o&&p[E+w+R.BLUE_BYTE_OFFSET]==s&&p[E+w+R.ALPHA_BYTE_OFFSET]==i;)p[E+w+R.RED_BYTE_OFFSET]=u,p[E+w+R.GREEN_BYTE_OFFSET]=d,p[E+w+R.BLUE_BYTE_OFFSET]=c,p[E+w+R.ALPHA_BYTE_OFFSET]=l,E+=R.BYTES_PER_PIXEL;for(f.push({x1:_,x2:E-R.BYTES_PER_PIXEL,y:b.y+b.dy,dy:b.dy}),E-R.BYTES_PER_PIXEL>b.x2&&f.push({x1:b.x2+R.BYTES_PER_PIXEL,x2:E-R.BYTES_PER_PIXEL,y:b.y-b.dy,dy:-b.dy}),_=E+R.BYTES_PER_PIXEL;_<=b.x2&&(p[_+w+R.RED_BYTE_OFFSET]!=r||p[_+w+R.GREEN_BYTE_OFFSET]!=o||p[_+w+R.BLUE_BYTE_OFFSET]!=s||p[_+w+R.ALPHA_BYTE_OFFSET]!=i);)_+=R.BYTES_PER_PIXEL;E=_+R.BYTES_PER_PIXEL}while(_<=b.x2)}}}}},R.prototype.copyPixelColumnToArray=function(t,e,n,a){for(var i=(this.width-1)*R.BYTES_PER_PIXEL,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++){for(var l=0;l<R.BYTES_PER_PIXEL;l++)a[r++]=this.data[o++];o+=i}},R.prototype.copyArrayToPixelColumn=function(t,e,n,a){for(var i=(this.width-1)*R.BYTES_PER_PIXEL,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++){for(var l=0;l<R.BYTES_PER_PIXEL;l++)this.data[o++]=a[r++];o+=i}},R.prototype.boxBlur=function(t,e,n){for(var a=(t=this.getBounds().clipTo(t)).getWidth(),i=a*R.BYTES_PER_PIXEL,r=t.getHeight(),o=Math.max(a,r),s=new Uint8Array(o*R.BYTES_PER_PIXEL),l=new Uint8Array(o*R.BYTES_PER_PIXEL),u=t.top;u<t.bottom;u++){for(var d=this.offsetOfPixel(t.left,u),c=0;c<i;c++)s[c]=this.data[d++];p(s,a),g(s,l,a,e),d=this.offsetOfPixel(t.left,u);for(var f=0;f<i;f++)this.data[d++]=l[f]}for(var h=t.left;h<t.right;h++)this.copyPixelColumnToArray(h,t.top,r,s),g(s,l,r,n),m(l,r),this.copyArrayToPixelColumn(h,t.top,r,l)},R.prototype.offsetOfPixel=function(t,e){return 4*(e*this.width+t)|0},R.prototype.getMemorySize=function(){return this.data.length},R.prototype.getImageData=function(){return this.imageData},R.prototype.setImageData=function(t){this.width=t.width,this.height=t.height,this.imageData=t,this.data=t.data},R.prototype.clearAll=function(t){if(0==t&&"fill"in this.data)this.data.fill(0);else for(var e=t>>24&255,n=t>>16&255,a=t>>8&255,i=255&t,r=0;r<this.width*this.height*R.BYTES_PER_PIXEL;)this.data[r++]=n,this.data[r++]=a,this.data[r++]=i,this.data[r++]=e},R.prototype.clearRect=function(t,e){t=this.getBounds().clipTo(t);for(var n=e>>24&255,a=e>>16&255,i=e>>8&255,r=255&e,o=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=this.offsetOfPixel(t.left,t.top),l=t.top;l<t.bottom;l++,s+=o)for(var u=t.left;u<t.right;u++)this.data[s++]=a,this.data[s++]=i,this.data[s++]=r,this.data[s++]=n},R.prototype.copyRegionHFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).top;n<t.bottom;n++)for(var a=this.offsetOfPixel(t.left,n),i=e.offsetOfPixel(t.right-1,n),r=t.left;r<t.right;r++,i-=2*R.BYTES_PER_PIXEL)for(var o=0;o<R.BYTES_PER_PIXEL;o++)this.data[a++]=e.data[i++]},R.prototype.copyRegionVFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).getWidth()*R.BYTES_PER_PIXEL,a=t.top;a<t.bottom;a++)for(var i=this.offsetOfPixel(t.left,a),r=e.offsetOfPixel(t.left,t.bottom-1-(a-t.top)),o=0;o<n;o++)this.data[i++]=e.data[r++]},R.prototype.fillWithNoise=function(t){t=this.getBounds().clipTo(t);for(var e,n=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var r=t.left;r<t.right;r++,a+=R.BYTES_PER_PIXEL)e=256*Math.random()|0,this.data[a+R.RED_BYTE_OFFSET]=e,this.data[a+R.GREEN_BYTE_OFFSET]=e,this.data[a+R.BLUE_BYTE_OFFSET]=e,this.data[a+R.ALPHA_BYTE_OFFSET]=255},R.prototype.gradientHorzReplace=function(t,e,n,a){var i={r:a[0]>>16&255,g:a[0]>>8&255,b:255&a[0],a:a[0]>>24&255},r={r:a[1]>>16&255,g:a[1]>>8&255,b:255&a[1],a:a[1]>>24&255},o=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.bottom-t.top|0;if(n<e){var u=n;n=e,e=u,u=i,i=r,r=u}for(var d=n-e|0,c=(r.r-i.r)/d,f=(r.g-i.g)/d,h=(r.b-i.b)/d,p=(r.a-i.a)/d,m=Math.max(t.left-e,0),g=0;g<l;g++,s+=o){for(var v=t.left,y=0|Math.min(e,t.right);v<y;v++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=i.r,this.data[s+R.GREEN_BYTE_OFFSET]=i.g,this.data[s+R.BLUE_BYTE_OFFSET]=i.b,this.data[s+R.ALPHA_BYTE_OFFSET]=i.a;var b=i.r+c*m,w=i.g+f*m,_=i.b+h*m,E=i.a+p*m;for(y=0|Math.min(n,t.right);v<y;v++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=b,this.data[s+R.GREEN_BYTE_OFFSET]=w,this.data[s+R.BLUE_BYTE_OFFSET]=_,this.data[s+R.ALPHA_BYTE_OFFSET]=E,b+=c,w+=f,_+=h,E+=p;for(;v<t.right;v++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=r.r,this.data[s+R.GREEN_BYTE_OFFSET]=r.g,this.data[s+R.BLUE_BYTE_OFFSET]=r.b,this.data[s+R.ALPHA_BYTE_OFFSET]=r.a}},R.prototype.gradientVertReplace=function(t,e,n,a){var i={r:a[0]>>16&255,g:a[0]>>8&255,b:255&a[0],a:a[0]>>24&255},r={r:a[1]>>16&255,g:a[1]>>8&255,b:255&a[1],a:a[1]>>24&255},o=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0;if(n<e){var u=n;n=e,e=u,u=i,i=r,r=u}for(var d=t.top,c=0|Math.min(t.bottom,e);d<c;d++,s+=o)for(var f=0;f<l;f++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=i.r,this.data[s+R.GREEN_BYTE_OFFSET]=i.g,this.data[s+R.BLUE_BYTE_OFFSET]=i.b,this.data[s+R.ALPHA_BYTE_OFFSET]=i.a;for(var h=n-e|0,p=(r.r-i.r)/h,m=(r.g-i.g)/h,g=(r.b-i.b)/h,v=(r.a-i.a)/h,y=Math.max(d-e,0),b=i.r+p*y,w=i.g+m*y,_=i.b+g*y,E=i.a+v*y,T=0|Math.min(t.bottom,n);d<T;d++,s+=o){for(var k=0;k<l;k++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=b,this.data[s+R.GREEN_BYTE_OFFSET]=w,this.data[s+R.BLUE_BYTE_OFFSET]=_,this.data[s+R.ALPHA_BYTE_OFFSET]=E;b+=p,w+=m,_+=g,E+=v}for(;d<t.bottom;d++,s+=o)for(var P=0;P<l;P++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=r.r,this.data[s+R.GREEN_BYTE_OFFSET]=r.g,this.data[s+R.BLUE_BYTE_OFFSET]=r.b,this.data[s+R.ALPHA_BYTE_OFFSET]=r.a},R.prototype.gradientReplace=function(t,e,n,a,i,r){for(var o=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=r[0]>>16&255,d=r[0]>>8&255,c=255&r[0],f=r[0]>>24&255,h=r[1]>>16&255,p=r[1]>>8&255,m=255&r[1],g=r[1]>>24&255,v=i-n+(a-e)*(a-e)/(i-n),y=a-e+(i-n)*(i-n)/(a-e),b=1/y,w=t.top;w<t.bottom;w++,s+=o)for(var _=(t.left-e)/y+(w-n)/v,E=0;E<l;E++,s+=R.BYTES_PER_PIXEL){var T=Math.min(Math.max(_,0),1),k=1-T;this.data[s+R.RED_BYTE_OFFSET]=u*k+h*T,this.data[s+R.GREEN_BYTE_OFFSET]=d*k+p*T,this.data[s+R.BLUE_BYTE_OFFSET]=c*k+m*T,this.data[s+R.ALPHA_BYTE_OFFSET]=f*k+g*T,_+=b}},R.prototype.gradientAlpha=function(t,e,n,a,i,r){for(var o=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=r[0]>>16&255,d=r[0]>>8&255,c=255&r[0],f=r[0]>>24&255,h=r[1]>>16&255,p=r[1]>>8&255,m=255&r[1],g=r[1]>>24&255,v=i-n+(a-e)*(a-e)/(i-n),y=a-e+(i-n)*(i-n)/(a-e),b=1/y,w=t.top;w<t.bottom;w++,s+=o)for(var _=(t.left-e)/y+(w-n)/v,E=0;E<l;E++,s+=R.BYTES_PER_PIXEL){var T=Math.min(Math.max(_,0),1),k=1-T,P=u*k+h*T,x=d*k+p*T,C=c*k+m*T,O=f*k+g*T,S=this.data[s+R.ALPHA_BYTE_OFFSET],L=O+S-O*S/255|0;if(0<L){var M=255*O/L|0,A=255-M;this.data[s+R.RED_BYTE_OFFSET]=(P*M+this.data[s+R.RED_BYTE_OFFSET]*A)/255|0,this.data[s+R.GREEN_BYTE_OFFSET]=(x*M+this.data[s+R.GREEN_BYTE_OFFSET]*A)/255|0,this.data[s+R.BLUE_BYTE_OFFSET]=(C*M+this.data[s+R.BLUE_BYTE_OFFSET]*A)/255|0,this.data[s+R.ALPHA_BYTE_OFFSET]=L}_+=b}},R.prototype.gradient=function(t,e,n,a,i,r,o){t=this.getBounds().clipTo(t),e==a&&n==i||(o||r[0]>>>24==255&&r[1]>>>24==255?e==a?this.gradientVertReplace(t,n,i,r):n==i?this.gradientHorzReplace(t,e,a,r):this.gradientReplace(t,e,n,a,i,r):this.gradientAlpha(t,e,n,a,i,r))},R.prototype.fillWithColorNoise=function(t){t=this.getBounds().clipTo(t);for(var e,n=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var r=t.left;r<t.right;r++,a+=R.BYTES_PER_PIXEL)e=16777216*Math.random()|0,this.data[a+R.RED_BYTE_OFFSET]=e>>16&255,this.data[a+R.GREEN_BYTE_OFFSET]=e>>8&255,this.data[a+R.BLUE_BYTE_OFFSET]=255&e,this.data[a+R.ALPHA_BYTE_OFFSET]=255},R.prototype.invert=function(t){t=this.getBounds().clipTo(t);for(var e=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n+=R.BYTES_PER_PIXEL)this.data[n+R.RED_BYTE_OFFSET]^=255,this.data[n+R.GREEN_BYTE_OFFSET]^=255,this.data[n+R.BLUE_BYTE_OFFSET]^=255},R.prototype.getNonTransparentBounds=function(t){var e,n,a,i,r,o=t.clone();for(r=(this.width-o.getWidth())*R.BYTES_PER_PIXEL,e=this.offsetOfPixel(o.left,o.top)+R.ALPHA_BYTE_OFFSET,a=o.top;a<o.bottom;a++,e+=r){for(i=0,n=o.left;n<o.right;n++,e+=R.BYTES_PER_PIXEL)i|=this.data[e];if(0!=i)break}if(o.top=a,o.top==o.bottom)return o;for(e=this.offsetOfPixel(o.right-1,o.bottom-1)+R.ALPHA_BYTE_OFFSET,a=o.bottom-1;a>=o.top;a--,e-=r){for(i=0,n=o.right-1;n>=o.left;n--,e-=R.BYTES_PER_PIXEL)i|=this.data[e];if(0!=i)break}for(o.bottom=a+1,r=R.BYTES_PER_PIXEL*this.width,n=o.left;n<o.right;n++){for(e=this.offsetOfPixel(n,o.top)+R.ALPHA_BYTE_OFFSET,i=0,a=o.top;a<o.bottom;a++,e+=r)i|=this.data[e];if(0!=i)break}for(o.left=n,n=o.right-1;n>=o.left;n--){for(e=this.offsetOfPixel(n,o.top)+R.ALPHA_BYTE_OFFSET,i=0,a=o.top;a<o.bottom;a++,e+=r)i|=this.data[e];if(0!=i)break}return o.right=n+1,o},R.prototype.getAsCanvas=function(t){var e=(0,i.createCanvas)(this.imageData.width,this.imageData.height);return e.getContext("2d").putImageData(this.imageData,0,0),o(e,t||0)},R.prototype.getAsPNG=function(t){var e,n=this.getAsCanvas(t);return!("string"!=typeof(e=n.toDataURL("image/png"))||!e.match(/^data:image\/png;base64,/i))&&window.atob(e.substring("data:image/png;base64,".length))},R.prototype.getAsPNGBuffer=function(t){return this.getAsCanvas(t).toBuffer("image/png")},R.prototype.hasAlphaInRect=function(t){t=this.getBounds().clipTo(t);for(var e=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,n=this.offsetOfPixel(t.left,t.top)+R.ALPHA_BYTE_OFFSET,a=t.top;a<t.bottom;a++,n+=e){for(var i=255,r=t.left;r<t.right;r++,n+=R.BYTES_PER_PIXEL)i&=this.data[n];if(255!=i)return!0}return!1},R.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())},R.createFromImage=function(t){var e=(0,i.createCanvas)(t.width,t.height).getContext("2d");return e.globalCompositeOperation="copy",e.drawImage(t,0,0),new R(e.getImageData(0,0,t.width,t.height))},R.prototype.equals=function(t){if(this.width!=t.width||this.height!=t.height)return!1;for(var e=0;e<this.data.length;e+=R.BYTES_PER_PIXEL)if(!(0==this.data[e+R.ALPHA_BYTE_OFFSET]&&0==t.data[e+R.ALPHA_BYTE_OFFSET]||this.data[e]==t.data[e]&&this.data[e+1]==t.data[e+1]&&this.data[e+2]==t.data[e+2]&&this.data[e+3]==t.data[e+3]))return!1;return!0}},{"../util/CPRect.js":62,"../util/Canvas.js":2,"./CPBitmap.js":4}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var a=r(t("./CPBitmap.js")),h=r(t("../util/CPRect.js")),d=t("../util/Canvas.js"),i=t("./CPColorBmp.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){a.default.call(this,t,e),this.createBitmap(t,e,n)}function p(t,e,n,a){for(var i,r=0,o=0,s=0;s<a&&s<n;s++)o+=t[s],r++;for(var l=i=0;l<n;l++)l+a<n&&(o+=t[l+a],r++),e[i++]=Math.round(o/r),0<=l-a&&(o-=t[l-a],r--)}((o.prototype=Object.create(a.default.prototype)).constructor=o).prototype.createBitmap=function(t,e,n){switch(this.bitDepth=n){case 32:this.data=new Uint32Array(t*e);break;case 16:this.data=new Uint16Array(t*e);break;case 8:default:this.data=new Uint8Array(t*e)}},o.prototype.clone=function(){var t=new o(this.width,this.height,this.bitDepth);return t.copyPixelsFrom(this),t},o.prototype.cloneRect=function(t){var e=new o(t.getWidth(),t.getHeight(),this.bitDepth);return e.copyBitmapRect(this,0,0,t),e},o.prototype.getPixel=function(t,e){return t=Math.max(0,Math.min(this.width-1,t)),e=Math.max(0,Math.min(this.height-1,e)),this.data[this.offsetOfPixel(t,e)]},o.prototype.clearAll=function(t){this.data.fill(t)},o.prototype.clearRect=function(t,e){t=this.getBounds().clipTo(t);for(var n=this.width-t.getWidth(),a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var r=t.left;r<t.right;r++,a++)this.data[a]=e},o.prototype.copyScaledNearestNeighbor=function(t){for(var e,n=0,a=t.width/this.width,i=t.height/this.height,r=0,o=0;r<this.height;r++,o+=i){e=t.offsetOfPixel(0,Math.round(o));for(var s=0,l=0;s<this.width;s++,n++,l+=a){var u=e+Math.round(l);this.data[n]=t.data[u]}}},o.prototype.floodFill=function(t,e,n){if(this.isInside(t,e)){n&=255;var a=this.getPixel(t,e),i=[],r=this.getBounds(),o=this.data;if(i.push({x1:t,x2:t,y:e,dy:-1}),i.push({x1:t,x2:t,y:e+1,dy:1}),n!=a)for(;0<i.length;){var s=i.pop();if(!(s.y<r.top||s.y>=r.bottom)){for(var l=this.offsetOfPixel(0,s.y),u=s.x1,d=void 0;u>=r.left&&o[u+l]==a;)o[u+l]=n,u--;if(u>=s.x1){for(;u<=s.x2&&o[u+l]!=a;)u++;if(d=u+1,u>s.x2)continue}else++u<s.x1&&i.push({x1:u,x2:s.x1-1,y:s.y-s.dy,dy:-s.dy}),d=s.x1+1;do{for(o[u+l]=n;d<r.right&&o[d+l]==a;)o[d+l]=n,d++;for(i.push({x1:u,x2:d-1,y:s.y+s.dy,dy:s.dy}),d-1>s.x2&&i.push({x1:s.x2+1,x2:d-1,y:s.y-s.dy,dy:-s.dy}),u=d+1;u<=s.x2&&o[u+l]!=a;)u++;d=u+1}while(u<=s.x2)}}}},o.prototype.createThumbnailFrom=function(t){var e=Math.min(Math.floor(t.width/this.width),3);if(e<2)this.copyScaledNearestNeighbor(t);else for(var n=new Uint16Array(this.width),a=t.width,i=Math.floor(t.width/this.width),r=Math.floor(t.width/this.width/e),o=i-r*e,s=Math.floor(t.height/this.height),l=Math.floor(t.height/this.height/e),u=l*a-i*this.width,d=(s-l*e)*a,c=0,f=0,h=0;h<this.height;h++,c+=d){var p=0;n.fill(0);for(var m=0;m<e;m++,c+=u)for(var g=p=0;g<this.width;g++,p++,c+=o)for(var v=0;v<e;v++,c+=r)n[p]+=t.data[c];for(var y=p=0;y<this.width;y++,p++,f++)this.data[f]=n[p]/(e*e)}},o.prototype.mirrorHorizontally=function(){for(var t=this.width,e=this.height,n=new Uint8Array(t*e),a=0,i=t,r=0;r<e;r++,i+=t+t)for(var o=0;o<t;o++)n[a++]=this.data[--i];this.data=n},o.prototype.applyLUT=function(t){for(var e=0;e<this.data.length;e++)this.data[e]=t.table[this.data[e]]},o.prototype.getAsCanvas=function(t){var e=this.getImageData(0,0,this.width,this.height),n=(0,d.createCanvas)(this.width,this.height);return n.getContext("2d").putImageData(e,0,0),(0,i.getRotatedCanvas)(n,t||0)},o.prototype.getImageData=function(t,e,n,a){for(var i=(0,d.createImageData)(n,a),r=this.offsetOfPixel(t,e),o=0,s=this.width-n,l=0;l<a;l++,r+=s)for(var u=0;u<n;u++,r++)i.data[o++]=this.data[r],i.data[o++]=this.data[r],i.data[o++]=this.data[r],i.data[o++]=255;return i},o.prototype.pasteImageData=function(t,e,n){for(var a=0,i=this.offsetOfPixel(e,n),r=this.width-t.width,o=0;o<t.height;o++,i+=r)for(var s=0;s<t.width;s++,a+=4,i++)this.data[i]=t.data[a];return t},o.prototype.copyPixelsFrom=function(t){t.width!=this.width||t.height!=this.height||t.bitDepth!=this.bitDepth?(this.data=t.data.slice(0),this.width=t.width,this.height=t.height,this.bitDepth=t.bitDepth):this.data.set(t.data)},o.prototype.copyRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=new Uint8Array(n*a),r=0,o=this.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(e.left,e.top),l=this.width-n,u=t.width-n,d=e.top;d<e.bottom;d++,o+=l,s+=u)for(var c=0;c<n;c++,r++,o++,s++)i[r]=this.data[o]^t.data[s];return i},o.prototype.setRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=this.offsetOfPixel(e.left,e.top),r=0,o=this.width-n,s=0;s<a;s++){for(var l=0;l<n;l++)this.data[i++]^=t[r++];i+=o}},o.prototype.copyBitmapRect=function(t,e,n,a){var i=new h.default(e,n,0,0);a=a.clone(),this.getBounds().clipSourceDest(a,i);var r=0|i.getWidth(),o=0|i.getHeight();if(0==i.left&&0==i.top&&r==this.width&&o==this.height&&r==t.width&&o==t.height)this.copyPixelsFrom(t);else for(var s=this.offsetOfPixel(i.left,i.top),l=this.width-r,u=t.offsetOfPixel(a.left,a.top),d=t.width-r,c=0;c<o;c++,u+=d,s+=l)for(var f=0;f<r;f++,u++,s++)this.data[s]=t.data[u]},o.prototype.copyRegionHFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).top;n<t.bottom;n++)for(var a=this.offsetOfPixel(t.left,n),i=e.offsetOfPixel(t.right-1,n),r=t.left;r<t.right;r++,i-=2)this.data[a++]=e.data[i++]},o.prototype.copyRegionVFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).getWidth(),a=t.top;a<t.bottom;a++)for(var i=this.offsetOfPixel(t.left,a),r=e.offsetOfPixel(t.left,t.bottom-1-(a-t.top)),o=0;o<n;o++)this.data[i++]=e.data[r++]},o.prototype.copyPixelColumnToArray=function(t,e,n,a){for(var i=this.width,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++)a[r]=this.data[o],o+=i,r++},o.prototype.copyArrayToPixelColumn=function(t,e,n,a){for(var i=this.width,r=0,o=this.offsetOfPixel(t,e),s=0;s<n;s++)this.data[o]=a[r],o+=i,r++},o.prototype.boxBlur=function(t,e,n){for(var a=(t=this.getBounds().clipTo(t)).getWidth(),i=t.getHeight(),r=Math.max(a,i),o=new this.data.constructor(r),s=new this.data.constructor(r),l=t.top;l<t.bottom;l++){for(var u=this.offsetOfPixel(t.left,l),d=0;d<a;d++)o[d]=this.data[u++];p(o,s,a,e),u=this.offsetOfPixel(t.left,l);for(var c=0;c<a;c++)this.data[u++]=s[c]}for(var f=t.left;f<t.right;f++)this.copyPixelColumnToArray(f,t.top,i,o),p(o,s,i,n),this.copyArrayToPixelColumn(f,t.top,i,s)},o.prototype.offsetOfPixel=function(t,e){return e*this.width+t},o.prototype.fillWithNoise=function(t){t=this.getBounds().clipTo(t);for(var e=this.width-t.getWidth(),n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n++)this.data[n]=256*Math.random()|0},o.prototype.invert=function(t){t=this.getBounds().clipTo(t);for(var e=this.width-t.getWidth(),n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n++)this.data[n]=~this.data[n]},o.prototype.getValueBounds=function(t,e){var n,a,i,r,o,s=t.clone();for(r=this.width-s.getWidth(),n=this.offsetOfPixel(s.left,s.top),i=s.top;i<s.bottom;i++,n+=r){for(o=!1,a=s.left;a<s.right;a++,n++)if(this.data[n]!=e){o=!0;break}if(o)break}if(s.top=i,s.top==s.bottom)return s;for(n=this.offsetOfPixel(s.right-1,s.bottom-1),i=s.bottom-1;i>=s.top;i--,n-=r){for(o=!1,a=s.right-1;a>=s.left;a--,n--)if(this.data[n]!=e){o=!0;break}if(o)break}for(s.bottom=i+1,r=this.width,a=s.left;a<s.right;a++){for(n=this.offsetOfPixel(a,s.top),o=!1,i=s.top;i<s.bottom;i++,n+=r)if(this.data[n]!=e){o=!0;break}if(o)break}for(s.left=a,a=s.right-1;a>=s.left;a--){for(n=this.offsetOfPixel(a,s.top),o=!1,i=s.top;i<s.bottom;i++,n+=r)if(this.data[n]!=e){o=!0;break}if(o)break}return s.right=a+1,s},o.prototype.gradientHorzReplace=function(t,e,n,a){var i=255&a[0],r=255&a[1],o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.bottom-t.top|0;if(n<e){var u=n;n=e,e=u,u=i,i=r,r=u}for(var d=(r-i)/(n-e|0),c=Math.max(t.left-e,0),f=0;f<l;f++,s+=o){for(var h=t.left,p=0|Math.min(e,t.right);h<p;h++,s++)this.data[s]=i;var m=i+d*c;for(p=0|Math.min(n,t.right);h<p;h++,s++)this.data[s]=m,m+=d;for(;h<t.right;h++,s++)this.data[s]=r}},o.prototype.gradientVertReplace=function(t,e,n,a){var i=255&a[0],r=255&a[1],o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0;if(n<e){var u=n;n=e,e=u,u=i,i=r,r=u}for(var d=t.top,c=0|Math.min(t.bottom,e);d<c;d++,s+=o)for(var f=0;f<l;f++,s++)this.data[s]=i;for(var h=(r-i)/(n-e|0),p=i+h*Math.max(d-e,0),m=0|Math.min(t.bottom,n);d<m;d++,s+=o){for(var g=0;g<l;g++,s++)this.data[s]=p;p+=h}for(;d<t.bottom;d++,s+=o)for(var v=0;v<l;v++,s++)this.data[s]=r},o.prototype.gradientReplace=function(t,e,n,a,i,r){for(var o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=255&r[0],d=255&r[1],c=i-n+(a-e)*(a-e)/(i-n),f=a-e+(i-n)*(i-n)/(a-e),h=1/f,p=t.top;p<t.bottom;p++,s+=o)for(var m=(t.left-e)/f+(p-n)/c,g=0;g<l;g++,s++){var v=Math.min(Math.max(m,0),1),y=1-v;this.data[s]=u*y+d*v,m+=h}},o.prototype.gradientAlpha=function(t,e,n,a,i,r){for(var o=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=255&r[0],d=r[0]>>24&255,c=255&r[1],f=r[1]>>24&255,h=i-n+(a-e)*(a-e)/(i-n),p=a-e+(i-n)*(i-n)/(a-e),m=1/p,g=t.top;g<t.bottom;g++,s+=o)for(var v=(t.left-e)/p+(g-n)/h,y=0;y<l;y++,s++){var b=Math.min(Math.max(v,0),1),w=1-b,_=u*w+c*b,E=d*w+f*b,T=255-E;this.data[s]=(_*E+this.data[s]*T)/255|0,v+=m}},o.prototype.gradient=function(t,e,n,a,i,r,o){t=this.getBounds().clipTo(t),e==a&&n==i||(o||r[0]>>>24==255&&r[1]>>>24==255?e==a?this.gradientVertReplace(t,n,i,r):n==i?this.gradientHorzReplace(t,e,a,r):this.gradientReplace(t,e,n,a,i,r):this.gradientAlpha(t,e,n,a,i,r))},o.prototype.equals=function(t){if(this.width!=t.width||this.height!=t.height)return!1;for(var e=0;e<this.data.length;e++)if(this.data[e]!=t.data[e])return!1;return!0},e.exports=n.default},{"../util/CPRect.js":62,"../util/Canvas.js":2,"./CPBitmap.js":4,"./CPColorBmp.js":13}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var a=o(t("./CPColorBmp.js")),i=o(t("./CPLayer.js")),r=o(t("../util/CPRect.js"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){i.default.call(this,n),this.image=0<t&&0<e?new a.default(t,e):null,this.clip=!1,this.imageThumbnail=null}((s.prototype=Object.create(i.default.prototype)).constructor=s).createFromImage=function(t,e){var n=new s(0,0,e);return n.image=t,n},s.prototype.clone=function(){var t=new s(0,0,this.name);return t.copyFrom(this),t},s.prototype.copyFrom=function(t){i.default.prototype.copyFrom.call(this,t),this.clip=t.clip,this.image?this.image.copyPixelsFrom(t.image):this.image=t.image.clone()},s.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()},s.prototype.hasAlphaInRect=function(t){return 100!=this.alpha||this.image.hasAlphaInRect(t)},s.prototype.copyImageFrom=function(t){this.image.copyPixelsFrom(t)},s.prototype.getClippingBase=function(){if(this.clip&&this.parent)for(var t=this.parent.indexOf(this)-1;0<=t&&this.parent.layers[t]instanceof s;t--)if(!this.parent.layers[t].clip)return this.parent.layers[t];return null},s.prototype.getClip=function(){return this.clip},s.prototype.setClip=function(t){this.clip=t},s.prototype.getNonTransparentBounds=function(t){return this.image.getNonTransparentBounds(t)},s.prototype.getBounds=function(){return new r.default(0,0,this.image.width,this.image.height)},s.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0},s.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var t=Math.ceil(Math.max(this.image.width/i.default.LAYER_THUMBNAIL_WIDTH,this.image.height/i.default.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new a.default(Math.floor(this.image.width/t),Math.floor(this.image.height/t))}this.imageThumbnail.createThumbnailFrom(this.image)},s.prototype.getImageThumbnail=function(){return this.imageThumbnail||this.rebuildImageThumbnail(),this.imageThumbnail},e.exports=n.default},{"../util/CPRect.js":62,"./CPColorBmp.js":13,"./CPLayer.js":16}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;o(t("./CPLayerGroup.js"));var a=o(t("./CPBlend.js")),i=o(t("./CPGreyBmp.js")),r=o(t("../util/CPRect.js"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){this.name=t||"",this.parent=null,this.lockAlpha=!1,this.alpha=100,this.visible=!0,this.blendMode=a.default.LM_NORMAL,this.mask=null,this.maskLinked=!0,this.maskVisible=!0,this.maskThumbnail=null,this.useLegacyMultiply=!1}s.prototype.copyFrom=function(t){this.name=t.name,this.blendMode=t.blendMode,this.useLegacyMultiply=t.useLegacyMultiply,this.alpha=t.alpha,this.visible=t.visible,this.parent=t.parent,this.lockAlpha=t.lockAlpha,t.mask?this.mask?this.mask.copyPixelsFrom(t.mask):this.mask=t.mask.clone():this.mask=null,this.maskLinked=t.maskLinked,this.maskVisible=t.maskVisible,t.maskThumbnail?this.maskThumbnail?this.maskThumbnail.copyPixelsFrom(t.maskThumbnail):this.maskThumbnail=t.maskThumbnail.clone():this.maskThumbnail=null},s.prototype.setMask=function(t){(this.mask=t)||(this.maskThumbnail=null)},s.prototype.setAlpha=function(t){this.alpha=t},s.prototype.getAlpha=function(){return this.alpha},s.prototype.getEffectiveAlpha=function(){return this.visible?this.alpha:0},s.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null},s.prototype.setName=function(t){this.name=t},s.prototype.getName=function(){return this.name},s.prototype.setBlendMode=function(t){(this.blendMode=t)===a.default.LM_MULTIPLY?this.useLegacyMultiply=!0:t===a.default.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)},s.prototype.getBlendMode=function(){return this.blendMode},s.prototype.getLockAlpha=function(){return this.lockAlpha},s.prototype.setLockAlpha=function(t){this.lockAlpha=t},s.prototype.setVisible=function(t){this.visible=t},s.prototype.isVisible=s.prototype.getVisible=function(){return this.visible},s.prototype.setMaskLinked=function(t){this.maskLinked=t},s.prototype.getMaskLinked=function(){return this.maskLinked},s.prototype.setMaskVisible=function(t){this.maskVisible=t},s.prototype.getMaskVisible=function(){return this.maskVisible},s.prototype.getMemoryUsed=function(){return 0},s.prototype.getDepth=function(){return null==this.parent?0:this.parent.getDepth()+1},s.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()},s.prototype.hasAncestor=function(t){return this.parent==t||this.parent&&this.parent.hasAncestor(t)},s.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call"},s.prototype.getNonTransparentBounds=function(t){return new r.default(0,0,0,0)},s.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var t=Math.ceil(Math.max(this.mask.width/s.LAYER_THUMBNAIL_WIDTH,this.mask.height/s.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new i.default(Math.floor(this.mask.width/t),Math.floor(this.mask.height/t),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null},s.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail},s.LAYER_THUMBNAIL_WIDTH=80,s.LAYER_THUMBNAIL_HEIGHT=50,e.exports=n.default},{"../util/CPRect.js":62,"./CPBlend.js":5,"./CPGreyBmp.js":14,"./CPLayerGroup.js":17}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var a=r(t("./CPLayer.js")),i=r(t("../util/CPRect.js"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){a.default.call(this,t),this.layers=[],this.expanded=!0,this.blendMode=e}function u(t,e){return t+e}((s.prototype=Object.create(a.default.prototype)).constructor=s).prototype.getLinearizedLayerList=function(t,e){e=e||[];var n,a=o(this.layers);try{for(a.s();!(n=a.n()).done;){var i=n.value;i instanceof s&&(i.expanded||!t)&&i.getLinearizedLayerList(t,e),e.push(i)}}catch(t){a.e(t)}finally{a.f()}return e},s.prototype.clearLayers=function(){this.layers=[]},s.prototype.addLayer=function(t){(t.parent=this).layers.push(t)},s.prototype.insertLayer=function(t,e){(e.parent=this).layers.splice(t,0,e)},s.prototype.removeLayer=function(t){var e=this.layers.indexOf(t);-1<e&&this.layers.splice(e,1)},s.prototype.removeLayerAtIndex=function(t){var e=this.layers[t];return e&&this.layers.splice(t,1),e},s.prototype.setLayerAtIndex=function(t,e){var n=this.layers[t];return(e.parent=this).layers[t]=e,n},s.prototype.setExpanded=function(t){this.expanded=t},s.prototype.getExpanded=function(){return this.expanded},s.prototype.indexOf=function(t){return this.layers.indexOf(t)},s.prototype.getMemoryUsed=function(){return this.layers.map(function(t){return t.getMemoryUsed()}).reduce(u,0)},s.prototype.clone=function(){var e=new s(this.name,this.blendMode);return a.default.prototype.copyFrom.call(e,this),e.expanded=this.expanded,e.layers=this.layers.map(function(t){return t.clone()}),e.layers.forEach(function(t){return t.parent=e}),e},s.prototype.getNonTransparentBounds=function(e){var n=new i.default(0,0,0,0);return this.layers.forEach(function(t){return n.union(t.getNonTransparentBounds(e))}),n},e.exports=n.default},{"../util/CPRect.js":62,"./CPLayer.js":16}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){this.table=new Uint8Array(256),this.loadIdentity=function(){for(var t=0;t<256;t++)this.table[t]=t},this.loadBrightnessContrast=function(t,e){for(var n=0<e?1/(1.0001-e):1+e,a=.5-.5*n+t,i=0;i<256;i++){var r=i/255,o=r*n+a;this.table[i]=Math.min(255,Math.max(~~(255*o),0))}},this.invert=function(){for(var t=0;t<256;t++)this.table[t]=255-this.table[t]}},e.exports=n.default},{}],19:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(t("../util/CPRect.js")),c=a(t("./CPColorBmp.js")),l=(a(t("./CPGreyBmp.js")),a(t("wolfy87-eventemitter")));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=h(r);if(o){var i=h(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(r,l.default);var e,n,a,i=f(r);function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=i.call(this)).layer=t,n.buffer=t.mask.getImageData(0,0,t.mask.width,t.mask.height),n.invalidRect=new o.default(0,0,0,0),n.prepareMask=e,n}return e=r,(n=[{key:"close",value:function(){this.buffer=null,this.layer=null,this.emitEvent("changeLayer")}},{key:"setLayer",value:function(t){this.layer=t,this.invalidRect=t.getBounds(),this.emitEvent("changeLayer")}},{key:"isOpen",value:function(){return null!=this.layer}},{key:"invalidateRect",value:function(t){this.invalidRect.union(t)}},{key:"getImageData",value:function(){return this.prepareMask(),!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask&&(!function(t,e,n){for(var a=n.top*e.width+n.left,i=a*c.default.BYTES_PER_PIXEL,r=n.getWidth(),o=n.getHeight(),s=e.width-r,l=s*c.default.BYTES_PER_PIXEL,u=0;u<o;u++,a+=s,i+=l)for(var d=0;d<r;d++,a++,i+=c.default.BYTES_PER_PIXEL)t.data[i+c.default.RED_BYTE_OFFSET]=e.data[a],t.data[i+c.default.GREEN_BYTE_OFFSET]=e.data[a],t.data[i+c.default.BLUE_BYTE_OFFSET]=e.data[a],t.data[i+c.default.ALPHA_BYTE_OFFSET]=255}(this.buffer,this.layer.mask,this.invalidRect),this.invalidRect.makeEmpty()),this.buffer}}])&&u(e.prototype,n),a&&u(e,a),r}();n.default=i,e.exports=n.default},{"../util/CPRect.js":62,"./CPColorBmp.js":13,"./CPGreyBmp.js":14,"wolfy87-eventemitter":248}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var s=t("../../js/engine/CPChibiFile.js"),l=i(t("./CPArtwork.js")),u=i(t("./CPColorBmp.js")),d=i(t("./CPImageLayer.js")),c=i(t("../util/AdobeColorTable.js")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=[],i={},r=this;function o(t,e){null===e?r.emitEvent("loadingProgress",[1,"Loading your "+t.friendly+"..."]):r.emitEvent("loadingProgress",[e,"Loading your "+t.friendly+" ("+Math.round(100*e)+"%)..."])}t.loadChibiFileUrl&&0<(""+t.loadChibiFileUrl).length?e.push({url:t.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):t.loadImageUrl&&0<(""+t.loadImageUrl).length&&e.push({url:t.loadImageUrl,friendly:"drawing",name:"flat",required:!0}),t.loadSwatchesUrl&&e.push({url:t.loadSwatchesUrl,friendly:"color swatches",name:"swatches",required:!1,noProgress:!0}),this.load=function(){if(0!=e.length){var n=e.shift(),t=new XMLHttpRequest;t.addEventListener("progress",function(t){var e;e=t.lengthComputable&&!n.noProgress?t.loaded/t.total:null,o(n,e)},!1),t.addEventListener("load",function(t){if(200==this.status){var e=this.response;r.emitEvent("loadingProgress",[1,"Starting ChickenPaint..."]),setTimeout(function(){(function(t,r){switch(t.name){case"flat":return new Promise(function(n,t){var e=new Blob([r],{type:"image/png"}),a=window.URL.createObjectURL(e);if(a){var i=new Image;i.onload=function(){var t=new l.default(this.width,this.height),e=new d.default(0,0,"Layer 1");e.image=u.default.createFromImage(i),t.addLayerObject(t.getLayersRoot(),e),i=null,window.URL.revokeObjectURL(a),n(t)},i.src=a}else t(null)});case"swatches":var e=(new c.default).read(r);return e?Promise.resolve(e):Promise.reject(null);case"layers":return(0,s.load)(r);default:return Promise.reject("Unexpected resource type '"+t.name+"'")}})(n,e).then(function(t){i[n.name]=t,r.load()},function(){r.emitEvent("loadingFailure",["Failed to read your "+n.friendly])})},0)}else a()},!1),t.addEventListener("error",a),o(n,n.noProgress?null:0),t.open("GET",n.url,!0),t.responseType="arraybuffer",t.send()}else r.emitEvent("loadingComplete",[i]);function a(){n.required?r.emitEvent("loadingFailure",["Failed to load your "+n.friendly+", please try again later."]):r.load()}}}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"../../js/engine/CPChibiFile.js":11,"../util/AdobeColorTable.js":54,"./CPArtwork.js":3,"./CPColorBmp.js":13,"./CPImageLayer.js":15,"wolfy87-eventemitter":248}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.binaryStringToByteArray=m,n.default=s;var a=t("../../js/engine/CPChibiFile.js"),h=o(t("../util/AdobeColorTable.js")),i=o(t("wolfy87-eventemitter")),p=o(t("file-saver")),r=t("../languages/lang.js");function o(t){return t&&t.__esModule?t:{default:t}}function m(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function s(l){var u=this,d=!1;function c(t){null===t?u.emitEvent("savingProgress",[1,(0,r._)("Saving drawing...")]):u.emitEvent("savingProgress",[t,(0,r._)("Saving drawing...")+" ("+Math.round(100*t)+"%)"])}function f(t){u.emitEvent("savingFailure",[t])}l.rotation=l.rotation||0,this.save=function(){var t,o,s;t=m(l.artwork.getFlatPNG(l.rotation)),o=new Blob([t],{type:"image/png"}),t=null,(l.artwork.isSimpleDrawing()?Promise.resolve(null):(0,a.save)(l.artwork)).then(function(t){if(d)u.emitEvent("savingFailure");else{if(l.swatches){var e=new h.default;s=new Blob([e.write(l.swatches)],{type:"application/octet-stream"})}else s=null;if(l.url){var n="This marker ensures the upload wasn't truncated",a=new FormData;a.append("beginMarker",n),a.append("painter","ChickenPaint v2.0"),a.append("picture",o),o=null,t?(a.append("chibifileFormat",t.version),a.append("chibifile",t.bytes),t=null,a.append("rotation",""+l.rotation)):a.append("rotation","0"),s&&(a.append("swatches",s),s=null),a.append("endMarker",n),i=a,(r=new XMLHttpRequest).upload.addEventListener("progress",function(t){c(t.lengthComputable?t.loaded/t.total:null)},!1),r.addEventListener("load",function(t){c(1),200==this.status&&/^CHIBIOK/.test(this.response)?u.emitEvent("savingComplete"):f(this.response)},!1),r.addEventListener("error",function(){f(this.response)},!1),c(0),r.open("POST",l.url,!0),r.responseType="text",r.send(i)}else p.default.saveAs(o,"oekaki.png"),t&&p.default.saveAs(t.bytes,"oekaki.chi"),s&&p.default.saveAs(s,"oekaki.aco");var i,r}}).catch(function(t){u.emitEvent("savingFailure")})},this.cancel=function(){d=!0}}(s.prototype=Object.create(i.default.prototype)).constructor=s},{"../../js/engine/CPChibiFile.js":11,"../languages/lang.js":53,"../util/AdobeColorTable.js":54,"file-saver":228,"wolfy87-eventemitter":248}],22:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"merge",value:function(t){return!1}},{key:"noChange",value:function(){return!1}},{key:"getMemoryUsed",value:function(t,e){return 0}},{key:"compact",value:function(){}}])&&i(e.prototype,n),a&&i(e,a),t}();n.default=a,e.exports=n.default},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,i.default)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint v2</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint"><span class="fab fa-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="https://github.com/thenickdude/chibipaint" target="_blank">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="https://www.gnu.org/licenses/">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Includes icons from the <a href="https://tango.freedesktop.org/" target="_blank">Tango Desktop Project</a>\n\nIncludes icons from the <a target="_blank" href="https://extensions.libreoffice.org/en/extensions/show/tango-icon-theme-for-libreoffice">Tango Icon Theme for LibreOffice</a>:\n    All artwork is licensed under the Creative Commons Attribution-Share Alike 3.0\n    United States License. To view a copy of this licence, visit\n    https://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative\n    Commons, 171 Second Street, Suite 300, San Francisco, California 94105, USA.\n    \n    Credit for icons imported from git://git.gnome.org/gnome-icon-theme or derivatives\n    of these goes to the GNOME project (https://www.gnome.org)\n    Derivatives and new icons were created by Alexander Wilms &lt;f.alexander.wilms@gmail.com> \n    and Miroslav Mazel &lt;mazelm@gmail.com>\n\nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js">FileSaver.js library</a>\n    FileSaver.js Copyright © 2015 <a target="_blank" href="https://eligrey.com/">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://github.com/stefanpenner/es6-promise">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target="_blank" href="https://benalman.com/projects/jquery-throttle-debounce-plugin/">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://www.jquery.com/" target="_blank">jQuery library</a> \nCopyright <a href="https://jquery.org/" target="_blank">jQuery Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://github.com/jquery/PEP/" target="_blank">jQuery PEP library</a>\nCopyright jQuery Foundation and other contributors, https://jquery.org/\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/PEP\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation \n    files (the "Software"), to deal in the Software without \n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or \n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following \n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND \n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR \n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes Font Awesome by Dave Gandy - <a href="https://fontawesome.io" target="_blank">https://fontawesome.io</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');e.on("hidden.bs.modal",function(t){e.remove()}),e.modal({show:!1}),e.data("bs.modal").$body=(0,i.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var a,i=(a=t("jquery"))&&a.__esModule?a:{default:a};e.exports=n.default},{jquery:229}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,a){var e=(0,o.default)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat((0,s._)("Box blur"),'</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat((0,s._)("Blur amount (pixels)"),'</label>\n                                    <input type="text" class="form-control chickenpaint-blur-amount" value="3">\n                                </div>\n                                <div class="form-group">\n                                    <label>').concat((0,s._)("Iterations (1-8, larger gives smoother blur)"),'</label>\n                                    <input type="text" class="form-control chickenpaint-blur-iterations" value="1">\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-dismiss="modal">').concat((0,s._)("Cancel"),'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-dismiss="modal">').concat((0,s._)("Ok"),"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),i=(0,o.default)(".chickenpaint-blur-amount",e),r=(0,o.default)(".chickenpaint-blur-iterations",e),n=(0,o.default)(".chickenpaint-apply-box-blur",e);this.show=function(){e.modal("show")},n.click(function(t){var e=Math.max(parseInt(i.val(),10),1),n=Math.min(Math.max(parseInt(r.val(),10),1),8);a.getArtwork().boxBlur(e,e,n)}),e.modal({show:!1}).on("shown.bs.modal",function(){i.focus()}).on("keypress",function(t){13==t.keyCode&&n.click()}),e.data("bs.modal").$body=(0,o.default)(t),t.appendChild(e[0])};var a,o=(a=t("jquery"))&&a.__esModule?a:{default:a},s=t("../languages/lang.js");e.exports=n.default},{"../languages/lang.js":53,jquery:229}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=_;var r=a(t("../ChickenPaint.js")),o=a(t("./CPPalette.js")),m=a(t("./CPCheckbox.js")),u=a(t("./CPColorSwatch.js")),g=a(t("./CPSlider.js")),c=t("./CPGUIUtils.js"),f=a(t("../engine/CPColorBmp.js")),d=a(t("../util/CPColor.js")),l=t("../util/CPPolyfill.js"),h=a(t("jquery")),v=a(t("../../lib/keymaster.js")),y=t("../languages/lang");function a(t){return t&&t.__esModule?t:{default:t}}function b(t,e){var n=document.createElement("div");return n.className="chickenpaint-checkbox-slider-group",n.appendChild(t.getElement()),n.appendChild(e.getElement()),n}function w(t,e){for(var n in e)if(e.hasOwnProperty(n)){var a=document.createElement("option");a.appendChild(document.createTextNode((0,y._)(e[n]))),a.value=n,t.appendChild(a)}}function p(t){var e=150,n=32,a=document.createElement("canvas"),i=a.getContext("2d"),r=(0,c.createCheckerboardPattern)(i),o=new f.default(e,n),s=document.createElement("canvas"),l=s.getContext("2d"),u=t.getCurGradient();function d(){o.gradient(o.getBounds(),0,0,o.width,0,u,!0),l.putImageData(o.imageData,0,0,0,0,e,n),i.fillRect(0,0,a.width,a.height),i.drawImage(s,0,0)}this.getElement=function(){return a},t.on("gradientChange",function(t){u=t,d()}),a.width=s.width=e,a.height=s.height=n,a.className="chickenpaint-gradient-preview",i.fillStyle=r,d()}function _(t){o.default.call(this,t,"brush","Tool options");var e=new s(t),n=new E(t),a=new T(t),i=this.getBodyElement();i.appendChild(e.getElement()),i.appendChild(n.getElement()),i.appendChild(a.getElement()),t.on("modeChange",function(t){switch(e.getElement().style.display="none",n.getElement().style.display="none",a.getElement().style.display="none",t){case r.default.M_GRADIENTFILL:n.getElement().style.display="block";break;case r.default.M_TRANSFORM:a.getElement().style.display="block";break;default:e.getElement().style.display="block"}})}function s(a){var n=[1,2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],t=document.createElement("div"),i=document.createElement("select"),r=new m.default(!1,(0,y._)("Control brush opacity with pen pressure")),o=new g.default(1,255),s=new m.default(!0,(0,y._)("Control brush size with pen pressure")),l=new g.default(1,200,!1,!0),u=new m.default(!1,(0,y._)("Control brush scattering with pen pressure")),d=new g.default(0,1e3,!1,!0),c=new g.default(0,100,!1,!0),f=new g.default(0,100,!1,!0),h=new g.default(0,100,!1,!0),p=new g.default(0,100,!1,!0),e=new _.CPBrushPreview(a);this.getElement=function(){return t},o.title=function(t){return(0,y._)("Opacity")+": "+t},o.on("valueChange",function(t){a.setAlpha(t)}),l.title=function(t){return(0,y._)("Brush size")+": "+t},l.on("valueChange",function(t){a.setBrushSize(t)}),c.title=function(t){return(0,y._)("Color")+": "+t+"%"},c.on("valueChange",function(t){a.getBrushInfo().resat=t/100,a.callToolListeners()}),f.title=function(t){return(0,y._)("Blend")+": "+t+"%"},f.on("valueChange",function(t){a.getBrushInfo().bleed=t/100,a.callToolListeners()}),h.title=function(t){return(0,y._)("Spacing")+": "+t+"%"},h.on("valueChange",function(t){a.getBrushInfo().spacing=t/100,a.callToolListeners()}),d.title=function(t){return(0,y._)("Scattering")+": "+t+"%"},d.on("valueChange",function(t){a.getBrushInfo().scattering=t/100,a.callToolListeners()}),p.title=function(t){return(0,y._)("Smoothing")+": "+t+"%"},p.on("valueChange",function(t){a.getBrushInfo().smoothing=t/100,a.callToolListeners()}),u.on("valueChange",function(t){a.getBrushInfo().pressureScattering=t,a.callToolListeners()}),r.on("valueChange",function(t){a.getBrushInfo().pressureAlpha=t,a.callToolListeners()}),s.on("valueChange",function(t){a.getBrushInfo().pressureSize=t,a.callToolListeners()}),i.addEventListener("change",function(t){a.getBrushInfo().tip=parseInt(i.value,10)}),i.className="form-control form-control-sm",w(i,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]),t.appendChild(i),t.appendChild(e.getElement()),t.appendChild(b(s,l)),t.appendChild(b(r,o)),t.appendChild(c.getElement()),t.appendChild(f.getElement()),t.appendChild(h.getElement()),t.appendChild(b(u,d)),t.appendChild(p.getElement()),r.setValue(a.getBrushInfo().pressureAlpha),o.setValue(a.getAlpha()),s.setValue(a.getBrushInfo().pressureSize),l.setValue(a.getBrushSize()),u.setValue(a.getBrushInfo().pressureScattering),d.setValue(~~(100*a.getBrushInfo().scattering)),i.value=a.getBrushInfo().tip,c.setValue(~~(100*a.getBrushInfo().resat)),f.setValue(~~(100*a.getBrushInfo().bleed)),h.setValue(~~(100*a.getBrushInfo().spacing)),p.setValue(~~(100*a.getBrushInfo().smoothing)),a.on("toolChange",function(t,e){o.setValue(e.alpha),l.setValue(e.size),s.setValue(e.pressureSize),r.setValue(e.pressureAlpha),i.value=e.tip,u.setValue(e.pressureScattering),~~(100*e.resat)!=c.value&&c.setValue(~~(100*e.resat)),~~(100*e.bleed)!=f.value&&f.setValue(~~(100*e.bleed)),~~(100*e.spacing)!=h.value&&h.setValue(~~(100*e.spacing)),~~(100*e.scattering)!=d.value&&d.setValue(~~(100*e.scattering)),~~(100*e.smoothing)!=p.value&&p.setValue(~~(100*e.smoothing))}),(0,v.default)("1,2,3,4,5,6,7,8,9,0",function(t,e){var n=parseInt(e.shortcut,10);0==n&&(n=10),a.setAlpha(Math.round(n/10*255))}),(0,v.default)("{,[",function(){for(var t=a.getBrushSize(),e=n.length-1;0<=e;e--)if(n[e]<t){a.setBrushSize(n[e]);break}}),(0,v.default)("},]",function(){for(var t=a.getBrushSize(),e=0;e<n.length;e++)if(t<n[e]){a.setBrushSize(n[e]);break}})}function E(e){var t,n,a,i=document.createElement("div"),r=new p(e),o=new u.default(new d.default(16777215&e.getCurGradient()[0]),e.getCurGradient()[0]>>>24,i),s=new u.default(new d.default(16777215&e.getCurGradient()[1]),e.getCurGradient()[1]>>>24,i);function l(){var t=[o.getAlpha()<<24|o.getColorRgb(),s.getAlpha()<<24|s.getColorRgb()];e.setCurGradient(t)}this.getElement=function(){return i},i.className="chickenpaint-gradient-panel",i.style.display="none",o.on("colorChange",l),o.on("alphaChange",l),s.on("colorChange",l),s.on("alphaChange",l),(t=document.createElement("p")).innerHTML="Gradient",i.appendChild(t),i.appendChild(r.getElement()),(n=document.createElement("div")).className="chickenpaint-gradient-colors",(a=document.createElement("div")).className="chickenpaint-gradient-start-color",a.appendChild(o.getElement()),n.appendChild(a),(a=document.createElement("div")).className="chickenpaint-gradient-end-color",a.appendChild(s.getElement()),n.appendChild(a),i.appendChild(n)}function T(e){var t=document.createElement("div"),n=document.createElement("button"),a=document.createElement("button"),i=document.createElement("select");if(this.getElement=function(){return t},t.className="chickenpaint-transform-panel",t.style.display="none",n.type="button",a.type="button",n.className="btn btn-primary btn-block",a.className="btn btn-light btn-block",n.innerHTML="Apply transform",a.innerHTML="Cancel",i.addEventListener("change",function(t){e.setTransformInterpolation(this.value)}),i.className="form-control chickenpaint-transform-interpolation",w(i,{smooth:"Smooth",sharp:"Sharp"}),(0,l.isCanvasInterpolationSupported)()){var r=document.createElement("div"),o=document.createElement("label");o.innerHTML="Transform style",r.className="form-group",r.appendChild(o),r.appendChild(i),t.appendChild(r)}var s=document.createElement("div");s.appendChild(n),s.appendChild(a),s.className="form-group",t.appendChild(s),n.addEventListener("click",function(t){e.actionPerformed({action:"CPTransformAccept"}),t.preventDefault()}),a.addEventListener("click",function(t){e.actionPerformed({action:"CPTransformReject"}),t.preventDefault()})}((_.prototype=Object.create(o.default.prototype)).constructor=_).CPBrushPreview=function(s){var l=16,u=document.createElement("canvas"),t=u.getContext("2d"),e=!1;function d(){t.clearRect(0,0,u.width,u.height),t.beginPath(),t.arc(u.width/2,u.height/2,l/2*window.devicePixelRatio,0,2*Math.PI),t.stroke()}function n(t){var e=(0,h.default)(u).offset(),n=t.pageX-e.left,a=t.pageY-e.top,i=n-(0,h.default)(u).width()/2,r=a-(0,h.default)(u).height()/2,o=Math.round(2*Math.sqrt(i*i+r*r));l=Math.max(1,Math.min(200,o)),d(),s.setBrushSize(l)}function a(t){e&&(e=!1,window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",n))}this.getElement=function(){return u},u.addEventListener("mousedown",function(t){e||(e=!0,window.addEventListener("mouseup",a),window.addEventListener("mousemove",n),n(t))}),s.on("toolChange",function(t,e){e.size!=l&&(l=e.size,d())}),u.width=64,u.height=64,1<window.devicePixelRatio&&(u.style.width=u.width+"px",u.style.height=u.height+"px",u.width=u.width*window.devicePixelRatio,u.height=u.height*window.devicePixelRatio),u.className="chickenpaint-brush-preview",t.strokeStyle="black",t.lineWidth=1*window.devicePixelRatio,d()},e.exports=n.default},{"../../lib/keymaster.js":67,"../ChickenPaint.js":1,"../engine/CPColorBmp.js":13,"../languages/lang":53,"../util/CPColor.js":57,"../util/CPPolyfill.js":59,"./CPCheckbox.js":27,"./CPColorSwatch.js":31,"./CPGUIUtils.js":33,"./CPPalette.js":39,"./CPSlider.js":44,jquery:229}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;var a=i(t("wolfy87-eventemitter")),Dt=i(t("jquery")),Ht=i(t("../../lib/keymaster.js")),Wt=i(t("../util/CPRect.js")),Ut=i(t("../util/CPTransform.js")),Yt=i(t("../util/CPWacomTablet.js")),qt=i(t("../util/CPBezier.js")),zt=t("../util/throttle-debounce"),Gt=i(t("../util/CPPolygon.js")),Xt=t("../util/CPPolyfill.js"),Vt=i(t("../util/CPVector.js")),Kt=i(t("../ChickenPaint.js")),Zt=i(t("../engine/CPBrushInfo.js")),$t=i(t("../engine/CPLayerGroup.js")),Qt=(i(t("../engine/CPMaskView.js")),t("./CPGUIUtils.js")),Jt=i(t("./CPScrollbar.js")),te=i(t("../util/CPColor.js"));function i(t){return t&&t.__esModule?t:{default:t}}function ee(){this.modes=[]}ee.MODE_INDEX_DEFAULT=0,ee.MODE_INDEX_USER=1,ee.prototype.setMode=function(t,e){var n=this.modes[t];n!=e&&(n&&n.leave(),(this.modes[t]=e).enter())},ee.prototype.setDefaultMode=function(t){t.transient=!1,t.capture=!1,this.setMode(ee.MODE_INDEX_DEFAULT,t)},ee.prototype.setUserMode=function(t){for(var e=this.modes.length-1;ee.MODE_INDEX_USER<e;e--)this.modes[e].leave(),this.modes.splice(e,1);t.transient=!1,t.capture=!1,this.setMode(ee.MODE_INDEX_USER,t)},ee.prototype.deliverEvent=function(t,e){for(var n=this.modes.length-1;0<=n;n--){var a=this.modes[n];if(a[t].apply(a,e)||a.capture&&"paint"!=t)return!0}return!1};for(var r=function(){var a=s[o];ee.prototype[a]=function(t,e,n){this.deliverEvent(a,[t,e,n])}},o=0,s=["mouseDown","mouseUp"];o<s.length;o++)r();for(var l=function(){var n=d[u];ee.prototype[n]=function(t,e){this.deliverEvent(n,[t,e])}},u=0,d=["mouseDrag","mouseMove"];u<d.length;u++)l();for(var c=function(){var e=h[f];ee.prototype[e]=function(t){this.deliverEvent(e,[t])&&t.preventDefault()}},f=0,h=["keyDown","keyUp"];f<h.length;f++)c();function p(r){var u,t,i,o,s,n,a,l,d,c,f,g=0,h=1,p=2,m=.1,v=16,y="default",e="grab",b="grabbing",w="crosshair",_="move",E="nesw-resize",T="nwse-resize",k="ns-resize",P="ew-resize",U=this,x=document.createElement("div"),C=document.createElement("div"),O=document.createElement("div"),S=document.createElement("canvas"),L=S.getContext("2d"),M=document.createElement("canvas"),A=M.getContext("2d"),R=(0,Qt.createCheckerboardPattern)(L),Y=r.getArtwork(),B=1,j=0,I=0,F=0,q=new Ut.default,N=!1,D=!1,H=32,z=0,G=0,W=!1,X=[!1,!1,!1],V=!1,K=Y.getBounds(),Z=new Wt.default(0,0,0,0),$=!1,Q=[],J=new ee,tt=new Jt.default(!1),et=new Jt.default(!0),nt=Yt.default.getRef();function at(){}function it(){}function rt(){this.shouldPaintBrushPreview=!1,this.oldPreviewRect=null}function ot(){rt.call(this),this.smoothMouse={x:0,y:0}}function st(){var r,o;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")&&bt())return this.capture=!0,r=o={x:z+.5,y:G+.5},this.eraseBrushPreview(),!0},this.mouseDrag=function(t){if(this.capture){var e=new Wt.default(Math.min(r.x,o.x)-1-1,Math.min(r.y,o.y)-1-1,Math.max(r.x,o.x)+1+1+1,Math.max(r.y,o.y)+1+1+1);if(o={x:z+.5,y:G+.5},t.shiftKey){var n=Math.PI/4,a=Math.round(Math.atan2(o.y-r.y,o.x-r.x)/n);switch(a){case 0:case 4:o.y=r.y;break;case 2:case 6:o.x=r.x;break;default:a*=n;var i=Math.sqrt((o.y-r.y)*(o.y-r.y)+(o.x-r.x)*(o.x-r.x));o.x=r.x+i*Math.cos(a),o.y=r.y+i*Math.sin(a)}}return e.union(new Wt.default(Math.min(r.x,o.x)-1-1,Math.min(r.y,o.y)-1-1,Math.max(r.x,o.x)+1+1+1,Math.max(r.y,o.y)+1+1+1)),It(e),!0}this.mouseMove.call(this,t)},this.mouseUp=function(t,e,n){if(this.capture&&e==g){var a=Et(r),i=Et(o);return this.capture=!1,this.drawLine(a,i),It(new Wt.default(Math.min(r.x,o.x)-1-1,Math.min(r.y,o.y)-1-1,Math.max(r.x,o.x)+1+1+1,Math.max(r.y,o.y)+1+1+1)),!0}},this.paint=function(){this.capture?(L.lineWidth=1,L.beginPath(),L.moveTo(r.x,r.y),L.lineTo(o.x,o.y),L.stroke()):rt.prototype.paint.call(this)},rt.call(this)}function lt(){var c,f,h,p,m=0;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")&&bt()){var a=Et({x:z,y:G});return m=0,c=f=h=p=a,this.capture=!0,this.eraseBrushPreview(),!0}},this.mouseDrag=function(t){if(this.capture&&0===m){var e=Et({x:z,y:G});return h=p=e,U.repaintAll(),!0}this.mouseMove.call(this,t)},this.mouseUp=function(t,e,n){if(this.capture&&e==g){switch(m){case 0:m=1;break;case 1:m=2;break;case 2:this.capture=!1;var a=c,i=f,r=h,o=p,s=new qt.default;s.x0=a.x,s.y0=a.y,s.x1=i.x,s.y1=i.y,s.x2=r.x,s.y2=r.y,s.x3=o.x,s.y3=o.y;var l=new Array(500),u=new Array(500);s.compute(l,u,500),Y.beginStroke(l[0],u[0],1);for(var d=1;d<500;d++)Y.continueStroke(l[d],u[d],1);Y.endStroke(),U.repaintAll()}return!0}},this.mouseMove=function(t,e){if(this.capture){var n=Et({x:z,y:G});return 1==m?f=n:2==m&&(h=n),U.repaintAll(),!0}rt.prototype.mouseMove.call(this,t,e)},this.paint=function(){if(this.capture){var t=new qt.default,e=kt(c),n=kt(f),a=kt(h),i=kt(p);t.x0=e.x,t.y0=e.y,t.x1=n.x,t.y1=n.y,t.x2=a.x,t.y2=a.y,t.x3=i.x,t.y3=i.y;var r=new Array(100),o=new Array(100);t.compute(r,o,100),L.beginPath(),L.moveTo(r[0],o[0]);for(var s=1;s<100;s++)L.lineTo(r[s],o[s]);L.moveTo(~~e.x,~~e.y),L.lineTo(~~n.x,~~n.y),L.moveTo(~~a.x,~~a.y),L.lineTo(~~i.x,~~i.y),L.stroke()}else rt.prototype.paint.call(this)},rt.call(this)}function ut(){var a;this.mouseDown=function(t,e,n){return!!this.capture||(Ht.default.isPressed("space")||(e!=g||this.transient&&!t.altKey)&&e!=p?void(this.transient&&J.pop()):(a=e,this.capture=!0,vt(w),this.mouseDrag(t),!0))},this.mouseDrag=function(t){if(this.capture){var e=Et({x:z,y:G});return Y.isPointWithin(e.x,e.y)&&r.setCurColor(new te.default(Y.colorPicker(e.x,e.y))),!0}},this.mouseUp=function(t,e,n){if(this.capture&&e==a)return a=-1,this.capture=!1,vt(y),this.transient&&J.pop(),!0},this.enter=function(){at.prototype.enter.call(this),a=-1}}function dt(){var a,i,r,o;this.keyDown=function(t){if(32==t.keyCode)return this.capture||vt(e),!0},this.keyUp=function(t){if(this.transient&&o!=h&&32==t.keyCode)return vt(y),J.pop(),!0},this.mouseDown=function(t,e,n){return!!this.capture||(e==h||Ht.default.isPressed("space")&&e==g||!this.transient&&e==g?(this.capture=!0,o=e,a=t.pageX,i=t.pageY,r=U.getOffset(),vt(b),!0):void(this.transient&&J.pop()))},this.mouseDrag=function(t){if(this.capture)return U.setOffset(r.x+t.pageX-a,r.y+t.pageY-i),!0},this.mouseUp=function(t,e,n){if(this.capture&&e==o)return o=-1,this.capture=!1,this.transient&&!Ht.default.isPressed("space")&&(vt(y),J.pop()),!0},this.enter=function(){vt(e)}}function ct(){}function ft(){var i,r=new Wt.default(0,0,0,0),o=-1;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")){var a=Tt({x:z,y:G});return o=e,r.makeEmpty(),i=a,U.repaintAll(),this.capture=!0}},this.mouseDrag=function(t){if(!this.capture)return!1;var e=Tt({x:z,y:G}),n=t.shiftKey,a=~~Math.max(Math.abs(e.x-i.x),Math.abs(e.y-i.y));return e.x>=i.x?(r.left=i.x,r.right=(n?i.x+a:e.x)+1):(r.left=n?i.x-a:e.x,r.right=i.x+1),e.y>=i.y?(r.top=i.y,r.bottom=(n?i.y+a:e.y)+1):(r.top=n?i.y-a:e.y,r.bottom=i.y+1),U.repaintAll(),!0},this.mouseUp=function(t,e,n){if(this.capture&&e==o)return Y.rectangleSelection(r),r.makeEmpty(),U.repaintAll(),this.capture=!1,o=-1,!0},this.paint=function(){r.isEmpty()||(L.lineWidth=1,Ct(L,r))}}function ht(){var r,o,s=!1;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!Ht.default.isPressed("space")&&yt())return r=Et({x:z,y:G}),o=t.altKey,s=!0,this.capture=!0},this.mouseDrag=(0,zt.throttle)(25,function(t){if(this.capture){var e=Et({x:z,y:G}),n=e.x-r.x,a=e.y-r.y,i={x:~~n,y:~~a};return 0==i.x&&0==i.y||(Y.move(i.x,i.y,o&&s),s=!1),r.x=e.x-(n-i.x),r.y=e.y-(a-i.y),!0}}),this.mouseUp=function(t,e,n){if(this.capture&&e==g)return this.capture=!1,this.transient&&J.pop(),!0}}function pt(){var M,A,R,B,j,I,F=-2,N=-3,D=-1;function l(){return R.getTransformed(q)}function H(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function W(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function u(t,e){for(var n=0;n<t.points.length;n++)if((e.x-t.points[n].x)*(e.x-t.points[n].x)+(e.y-t.points[n].y)*(e.y-t.points[n].y)<=49)return 2*n;for(var a=0;a<t.points.length;a++){var i=t.points[a],r=t.points[(a+1)%t.points.length],o=new Vt.default(r.x-i.x,r.y-i.y),s=new Vt.default(e.x-i.x,e.y-i.y),l=o.getLength(),u=o.getScaled(1/l),d=s.getScaled(1/l),c=u.getDotProduct(d);if(0<=c&&c<=1&&(o.scale(c),(o.x-s.x)*(o.x-s.x)+(o.y-s.y)*(o.y-s.y)<=49))return 2*a+1}return t.containsPoint(e)?N:F}function i(){var t=l(),e=u(t,{x:z,y:G});switch(e){case 0:case 2:case 4:case 6:var n=~~(e/2),a=t.points[(n+3)%4],i=t.points[n],r=t.points[(n+1)%4];d(Vt.default.subtractPoints(a,i).normalize().add(Vt.default.subtractPoints(r,i).normalize()));break;case 1:case 3:case 5:case 7:var o=t.points[~~(e/2)],s=t.points[(1+~~(e/2))%4];d(Vt.default.subtractPoints(s,o).getPerpendicular());break;case N:vt(_);break;case F:vt(y);break;default:vt(y)}}function d(t){var e,n=Math.atan2(-t.y,t.x),a=Math.floor(n/(Math.PI/4)+.5);switch(a<0&&(a+=4),a){case 0:default:e=P;break;case 1:e=E;break;case 2:e=k;break;case 3:e=T}vt(e)}this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")){var a=l();return D=u(a,{x:z,y:G}),j=Et(B={x:z,y:G}),this.capture=!0,i(),!0}},this.mouseDrag=(0,zt.throttle)(40,function(t){if(this.capture){var e={x:z,y:G};switch(D){case N:var n=W(Et(e)),a=Vt.default.subtractPoints(n,j),i=a.getTruncated(),r=a.subtract(i),o=new Ut.default;o.translate(i.x,i.y),M.preMultiply(o),j=Vt.default.subtractPoints(n,r);break;case F:var s,l=Math.PI/4,u=R.getCenter(),d=kt(u),c=Math.atan2(B.y-d.y,B.x-d.x),f=Math.atan2(e.y-d.y,e.x-d.x)-c,h=new Ut.default;I+=f,s=t.shiftKey?-M.decompose().rotate+Math.round(I/l)*l:f,h.rotateAroundPoint(s,u.x,u.y),M.preMultiply(h),B=e;break;case 0:case 2:case 4:case 6:var p=~~(D/2),m=A.points[p],g=M.getInverted().getTransformedPoint(W(Et(e))),v=A.points[(p+2)%4],y=(g.x-v.x)/(m.x-v.x),b=(g.y-v.y)/(m.y-v.y);if(Math.abs(y)<.001||Math.abs(b)<.001||isNaN(y)||isNaN(b))return!0;if(t.shiftKey){var w=Math.max(y,b);b=y=w}M.scaleAroundPoint(y,b,v.x,v.y);break;case 1:case 5:case 3:case 7:var _,E,T=~~(D/2),k=H(A.points[T],A.points[(T+1)%4]),P=M.getInverted().getTransformedPoint(W(Et(e))),x=H(A.points[(T+2)%4],A.points[(T+3)%4]),C=Vt.default.subtractPoints(k,x),O=Vt.default.subtractPoints(P,x),S=C.getLength(),L=C.getDotProduct(O)/S/S;if(Math.abs(L)<.001||isNaN(L))return!0;1==D||5==D?(_=1,E=L):(_=L,E=1),M.scaleAroundPoint(_,E,x.x,x.y)}return R=A.getTransformed(M),Y.transformAffineAmend(M),U.repaintAll(),!0}}),this.mouseUp=function(t,e,n){if(this.capture&&e==g)return this.capture=!1,D=-1,!0},this.mouseMove=function(){this.capture||i()},this.paint=function(){for(var t=l().points,e=new Array(2*t.length),n=0;n<t.length;n++)e[n]=t[n];for(var a=0;a<t.length;a++){var i=t[a],r=t[(a+1)%t.length],o={x:(i.x+r.x)/2,y:(i.y+r.y)/2};e[a+t.length]=o}(0,Qt.setContrastingDrawStyle)(L,"fill");for(var s=0;s<e.length;s++)L.fillRect(e[s].x-3,e[s].y-3,7,7);xt(L,t)},this.keyDown=function(t){return 13==t.keyCode?(r.actionPerformed({action:"CPTransformAccept"}),!0):27==t.keyCode?(r.actionPerformed({action:"CPTransformReject"}),!0):void 0},this.enter=function(){at.prototype.enter.call(this);var t,e=Y.transformAffineBegin();M=e.transform,e.rect,(t=e.selection).isEmpty()&&(t=e.rect.clone()),A=new Gt.default(t.toPoints()),R=A.getTransformed(M),D=-1,I=0,U.repaintAll()},this.leave=function(){at.prototype.leave.call(this),U.repaintAll()}}function mt(){var l,u,d=0,c=!1,a=-1;this.mouseDown=function(t,e,n){return!!this.capture||(!this.transient&&e==g&&!t.altKey&&!Ht.default.isPressed("space")||t.altKey&&(e==h||e==g&&Ht.default.isPressed("space"))?(l={x:z,y:G},d=U.getRotation(),u=q.clone(),c=!1,this.capture=!0,a=e,!0):void(this.transient&&J.pop()))},this.mouseDrag=function(t){if(this.capture){var e=z,n=G,a=(0,Dt.default)(S).width()/2,i=(0,Dt.default)(S).height()/2,r={x:S.width/2,y:S.height/2},o=Math.atan2(n-i,e-a)-Math.atan2(l.y-i,l.x-a),s=new Ut.default;return s.rotateAroundPoint(o,r.x,r.y),s.multiply(u),U.setRotation(d+o),U.setOffset(~~s.getTranslateX(),~~s.getTranslateY()),c=!0}},this.mouseUp=function(t,e,n){if(this.capture&&e==a)return c?function(){var t=Math.round(F/(Math.PI/2))*Math.PI/2;if(Math.abs(F-t)<5/180*Math.PI){var e=t-d,n={x:S.width/2,y:S.height/2},a=new Ut.default;a.rotateAroundPoint(e,n.x,n.y),a.multiply(u),U.setRotation(d+e),U.setOffset(~~a.getTranslateX(),~~a.getTranslateY()),U.repaintAll()}U.emitEvent("canvasRotated90",[U.getRotation90()])}():U.resetRotation(),this.capture=!1,!this.transient||Ht.default.isPressed("space")&&Ht.default.alt||J.pop(),!0},this.keyUp=function(t){if(this.transient&&a!=h&&32==t.keyCode)return vt(y),J.pop(),!0},this.keyDown=function(t){if(32==t.keyCode&&t.altKey)return!0}}function gt(){st.call(this)}function vt(t){S.getAttribute("data-cursor")!=t&&S.setAttribute("data-cursor",t)}function yt(){var t=Y.getActiveLayer();return t.visible&&t.ancestorsAreVisible()?0!=t.alpha||(r.showLayerNotification(t,"Whoops! This layer's opacity is currently 0%","opacity"),!1):(r.showLayerNotification(t,"Whoops! This layer is currently hidden","layer"),!1)}function bt(){var t=Y.getActiveLayer();return t instanceof $t.default&&!Y.isEditingMask()?(r.showLayerNotification(t,"Whoops! You can't draw on a group","layer"),!1):yt()}function wt(t,e,n,a,i){var r=e-a-i+n/4,o=e+n-i-n/4;t.setValues(-i,a,r,o),t.setBlockIncrement(Math.max(1,~~(.66*a))),t.setUnitIncrement(Math.max(1,~~(.05*a)))}function _t(){q.setToIdentity(),q.translate(j,I),q.scale(B,B),q.rotate(F),function(){if(null!=tt&&null!=et&&!tt.getValueIsAdjusting()&&!et.getValueIsAdjusting()){var t=Ot(new Wt.default(0,0,M.width,M.height));wt(tt,t.left,t.getWidth(),(0,Dt.default)(S).width(),U.getOffset().x),wt(et,t.top,t.getHeight(),(0,Dt.default)(S).height(),U.getOffset().y)}}(),U.repaintAll()}function Et(t){return q.getInverted().getTransformedPoint(t)}function Tt(t){var e=Et(t);return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e}function kt(t){return q.getTransformedPoint(t)}function Pt(t){var e=kt(t);return e.x=Math.round(e.x),e.y=Math.round(e.y),e}function xt(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y),t.stroke()}function Ct(t,e){xt(t,function(t){for(var e=kt({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}),n=t.toPoints(),a=0;a<n.length;a++)n[a]=Pt(n[a]),n[a].x+=.5*Math.sign(e.x-n[a].x),n[a].y+=.5*Math.sign(e.y-n[a].y);return n}(e))}function Ot(t){var e=Pt({x:t.left-1,y:t.top-1}),n=Pt({x:t.left-1,y:t.bottom}),a=Pt({x:t.right,y:t.top-1}),i=Pt({x:t.right,y:t.bottom}),r=new Wt.default(Math.min(Math.min(e.x,n.x),Math.min(a.x,i.x)),Math.min(Math.min(e.y,n.y),Math.min(a.y,i.y)),Math.max(Math.max(e.x,n.x),Math.max(a.x,i.x))+1,Math.max(Math.max(e.y,n.y),Math.max(a.y,i.y))+1);return r.grow(2,2),r}function St(){var t=S.width,e=S.height,n=kt({x:Y.width/2,y:Y.height/2});U.setOffset(Math.round(j+t/2-n.x),Math.round(I+e/2-n.y))}function Lt(t,e,n){if(t=Math.max(m,Math.min(v,t)),U.getZoom()!=t){var a=U.getOffset();U.setOffset(a.x+~~((e-a.x)*(1-t/U.getZoom())),a.y+~~((n-a.y)*(1-t/U.getZoom()))),U.setZoom(t),U.repaintAll()}}function Mt(t){Lt(t,(0,Dt.default)(S).width()/2,(0,Dt.default)(S).height()/2)}function At(t){return V?nt.getPressure():2*t.pressure}Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1},at.prototype.transient=!1,at.prototype.capture=!1,at.prototype.enter=function(){vt(y)},at.prototype.leave=function(){this.capture=!1},at.prototype.mouseMove=at.prototype.paint=at.prototype.mouseDown=at.prototype.mouseDrag=at.prototype.mouseUp=at.prototype.keyDown=at.prototype.suspend=at.prototype.resume=at.prototype.keyUp=function(){},((it.prototype=Object.create(at.prototype)).constructor=it).prototype.mouseDown=function(t,e,n){var a=Ht.default.isPressed("space");!a&&(e==p||e==g&&t.altKey)?(J.push(i,!0),J.peek().mouseDown(t,e,n)):(e==h||a&&e==g)&&(t.altKey?J.push(s,!0):J.push(o,!0),J.peek().mouseDown(t,e,n))},it.prototype.keyDown=function(t){if(32==t.keyCode)return t.altKey?J.push(s,!0):J.push(o,!0),J.peek().keyDown(t),!0},((rt.prototype=Object.create(at.prototype)).constructor=rt).prototype.getBrushPreviewOval=function(){var t=r.getBrushSize()*B;return new Wt.default(z-t/2,G-t/2,z+t/2,G+t/2)},rt.prototype.queueBrushPreview=function(){if(J.peek()==this){this.shouldPaintBrushPreview=!0;var t=this.getBrushPreviewOval();t.grow(2,2),null!=this.oldPreviewRect&&(t.union(this.oldPreviewRect),this.oldPreviewRect=null),It(t)}},rt.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1,null!=this.oldPreviewRect&&(It(this.oldPreviewRect),this.oldPreviewRect=null)},rt.prototype.mouseMove=function(t,e){this.queueBrushPreview()},rt.prototype.enter=function(){at.prototype.enter.call(this),W&&this.queueBrushPreview()},rt.prototype.suspend=rt.prototype.leave=function(){at.prototype.leave.call(this),this.eraseBrushPreview()},rt.prototype.resume=rt.prototype.enter,rt.prototype.paint=function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var t=this.getBrushPreviewOval();L.beginPath(),L.arc((t.left+t.right)/2,(t.top+t.bottom)/2,t.getWidth()/2,0,2*Math.PI),L.stroke(),t.grow(2,2),null==this.oldPreviewRect?this.oldPreviewRect=t:this.oldPreviewRect.union(t)}},((ot.prototype=Object.create(rt.prototype)).constructor=ot).prototype.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")&&bt()){var a=Et({x:z,y:G});if(this.eraseBrushPreview(),Y.beginStroke(a.x,a.y,n))return this.capture=!0,this.smoothMouse=a,!0}},ot.prototype.mouseDrag=function(t,e){if(this.capture){var n=Et({x:z,y:G}),a=Math.min(.999,Math.pow(r.getBrushInfo().smoothing,.3));return this.smoothMouse.x=(1-a)*n.x+a*this.smoothMouse.x,this.smoothMouse.y=(1-a)*n.y+a*this.smoothMouse.y,Y.continueStroke(this.smoothMouse.x,this.smoothMouse.y,e),!0}this.mouseMove(t)},ot.prototype.mouseUp=function(t,e,n){if(this.capture)return e==g&&(this.capture=!1,Y.endStroke()),!0},((st.prototype=Object.create(rt.prototype)).constructor=st).prototype.drawLine=function(t,e){Y.beginStroke(t.x,t.y,1),Y.continueStroke(e.x,e.y,1),Y.endStroke()},(lt.prototype=Object.create(rt.prototype)).constructor=lt,(ut.prototype=Object.create(at.prototype)).constructor=ut,(dt.prototype=Object.create(at.prototype)).constructor=dt,((ct.prototype=Object.create(at.prototype)).constructor=ct).prototype.mouseDown=function(t,e,n){if(e==g&&!t.altKey&&!Ht.default.isPressed("space")&&bt()){var a=Et({x:z,y:G});return Y.isPointWithin(a.x,a.y)&&(Y.floodFill(a.x,a.y),U.repaintAll()),!0}},(ft.prototype=Object.create(at.prototype)).constructor=ft,((ht.prototype=Object.create(at.prototype)).constructor=ht).prototype.mouseMove=function(t){if(!Ht.default.isPressed("space")&&!t.altKey)return vt(_),!0},ht.prototype.enter=function(){vt(_)},(pt.prototype=Object.create(at.prototype)).constructor=pt,(mt.prototype=Object.create(at.prototype)).constructor=mt,((gt.prototype=Object.create(st.prototype)).constructor=gt).prototype.drawLine=function(t,e){Y.gradientFill(Math.round(t.x),Math.round(t.y),Math.round(e.x),Math.round(e.y),r.getCurGradient())},gt.prototype.queueBrushPreview=function(){},this.setZoom=function(t){B=t,_t()},this.getZoom=function(){return B},this.setGridSize=function(t){H=Math.max(Math.round(t),1),this.repaintAll()},this.getGridSize=function(){return H},this.setOffset=function(t,e){isNaN(t)||isNaN(e)?console.log("Bad offset"):(j=t,I=e,_t())},this.getOffset=function(){return{x:j,y:I}},this.setInterpolation=function(t){N=t,(0,Xt.setCanvasInterpolation)(L,t),this.repaintAll()},this.setRotation=function(t){F=t%(2*Math.PI),_t()},this.getRotation=function(){return F},this.getRotation90=function(){var t=Math.round(this.getRotation()/Math.PI*2);return(t%=4)<0&&(t+=4),t},this.zoomIn=function(){Mt(2*this.getZoom())},this.zoomOut=function(){Mt(.5*this.getZoom())},this.zoom100=function(){Mt(1),St()};var Rt,Bt=!(this.resetRotation=function(){var t={x:S.width/2,y:S.height/2},e=new Ut.default;e.rotateAroundPoint(-this.getRotation(),t.x,t.y),e.multiply(q),this.setOffset(~~e.getTranslateX(),~~e.getTranslateY()),this.setRotation(0),U.emitEvent("canvasRotated90",[0])});function jt(){$||($=!0,window.requestAnimationFrame(function(){U.paint()}))}function It(t){Z.union(t),jt()}function Ft(){K=Y.getBounds(),U.repaintAll()}this.getElement=function(){return x},this.repaintAll=function(){Z.left=0,Z.top=0,Z.right=S.width,Z.bottom=S.height,jt()},this.paint=function(){var t,e=!1;($=!1,Z.isEmpty()||(L.save(),L.clipTo&&(L.beginPath(),Z.left=0|Z.left,Z.top=0|Z.top,L.rect(Z.left,Z.top,Math.ceil(Z.getWidth()),Math.ceil(Z.getHeight())),L.clip()),e=!0),K.isEmpty())||(t=u&&u.isOpen()?u.getImageData():Y.fusionLayers().getImageData(),A.putImageData(t,0,0,K.left,K.top,K.getWidth(),K.getHeight()),K.makeEmpty());if(L.fillStyle="#606060",L.fillRect(0,0,S.width,S.height),L.save(),L.setTransform(q.m[0],q.m[1],q.m[2],q.m[3],q.m[4],q.m[5]),L.fillStyle=R,L.fillRect(0,0,Y.width,Y.height),L.drawImage(M,0,0,M.width,M.height),L.restore(),(0,Qt.setContrastingDrawStyle)(L,"stroke"),L.lineWidth=1,Y.getSelection().isEmpty()||J.peek()instanceof ft&&J.peek().capture||(L.setLineDash([3,2]),Ct(L,Y.getSelection()),L.setLineDash([])),D){var n=Y.getBounds();if(2<B*H){L.beginPath();for(var a=H-1;a<n.right;a+=H){var i=kt({x:a,y:n.top}),r=kt({x:a,y:n.bottom});L.moveTo(i.x+.5,i.y+.5),L.lineTo(r.x+.5,r.y+.5)}for(var o=H-1;o<n.bottom;o+=H){var s=kt({x:0,y:o}),l=kt({x:n.right,y:o});L.moveTo(s.x+.5,s.y+.5),L.lineTo(l.x+.5,l.y+.5)}L.stroke()}}J.paint(L),L.globalCompositeOperation="source-over",e&&(Z.makeEmpty(),L.restore())},this.showGrid=function(t){D=t,this.repaintAll()},this.resize=function(t,e){t-=(0,Dt.default)(O).outerHeight(),(0,Dt.default)(S).css("height",t+"px"),S.width=(0,Dt.default)(S).width(),S.height=t,Rt=null,e||St(),this.setInterpolation(N),this.repaintAll()},r.on("toolChange",function(t,e){for(var n=Q[e.strokeMode],a=0;a<J.modes.length;a++)if(J.modes[a]instanceof rt){J.modes[a].leave(),J.modes[a]=n,J.modes[a].enter();break}f=n}),r.on("modeChange",function(t){var e;switch(t){case Kt.default.M_DRAW:e=f;break;case Kt.default.M_FLOODFILL:e=n;break;case Kt.default.M_GRADIENTFILL:e=a;break;case Kt.default.M_RECT_SELECTION:e=l;break;case Kt.default.M_MOVE_TOOL:e=d;break;case Kt.default.M_ROTATE_CANVAS:e=s;break;case Kt.default.M_PAN_CANVAS:e=o;break;case Kt.default.M_COLOR_PICKER:e=i;break;case Kt.default.M_TRANSFORM:e=c}J.setUserMode(e)}),r.on("maskViewOpened",function(t){u&&u.off("changeLayer",Ft),(u=t).on("changeLayer",Ft),Ft()}),t=new it,i=new ut,o=new dt,s=new mt,n=new ct,a=new gt,l=new ft,d=new ht,c=new pt,Q=[new ot,new st,new lt],f=Q[Zt.default.STROKE_MODE_FREEHAND],J.setDefaultMode(t),J.setUserMode(f),M.width=Y.width,M.height=Y.height,S.width=800,S.height=900,S.className="chickenpaint-canvas",S.setAttribute("touch-action","none"),L.setLineDash||(L.setLineDash=function(){}),S.addEventListener("contextmenu",function(t){t.preventDefault()}),S.addEventListener("mouseenter",function(){W=!0}),S.addEventListener("mouseleave",function(){W=!1,X[g]||X[p]||X[h]||U.repaintAll()}),S.addEventListener("pointerdown",function(t){S.setPointerCapture(t.pointerId),Rt=S.getBoundingClientRect(),z=t.clientX-Rt.left,G=t.clientY-Rt.top,V=nt.isPen(),X[g]=!1,X[p]=!1,X[h]=!1,X[t.button]=!0,J.mouseDown(t,t.button,At(t))}),S.addEventListener("pointermove",function(t){Rt||(Rt=S.getBoundingClientRect()),z=t.clientX-Rt.left,G=t.clientY-Rt.top;var e=0!=t.buttons,n=At(t);if(0!=(1&t.buttons)!=X[g]){if(.5===t.mozPressure)return;X[g]=!X[g],X[g]?J.mouseDown(t,g,n):J.mouseUp(t,g,n)}0!=(2&t.buttons)!=X[p]&&(X[p]=!X[p],X[p]?J.mouseDown(t,p,n):J.mouseUp(t,p,n)),0!=(4&t.buttons)!=X[h]&&(X[h]=!X[h],X[h]?J.mouseDown(t,h,n):J.mouseUp(t,h,n)),e?J.mouseDrag(t,n):J.mouseMove(t,n)}),S.addEventListener("pointerup",function(t){X[g]=!1,X[p]=!1,X[h]=!1,V=!1,J.mouseUp(t,t.button,0),S.releasePointerCapture(t.pointerId)}),S.addEventListener("wheel",function(t){if(0!=t.deltaY){if(!Bt||20<Math.abs(t.deltaY)){var e;e=0<t.deltaY?1/1.15:1.15;var n=(i={x:t.pageX,y:t.pageY},r=S.getBoundingClientRect(),{x:i.x-r.left-window.pageXOffset,y:i.y-r.top-window.pageYOffset}),a=Et(n);Y.isPointWithin(a.x,a.y)?Lt(U.getZoom()*e,n.x,n.y):Lt(U.getZoom()*e,j+~~(Y.width*B/2),I+~~(Y.height*B/2)),Bt=Bt||setTimeout(function(){Bt=!1},50)}t.preventDefault()}var i,r}),document.addEventListener("keydown",function(t){J.keyDown(t)}),document.addEventListener("keyup",function(t){J.keyUp(t)}),document.addEventListener("visibilitychange",function(){var t=S.height+(0,Dt.default)(O).outerHeight();S.width=1,S.height=1,U.resize(t,!0)},!1),window.addEventListener("scroll",function(){Rt=null}),S.addEventListener("mousedown",function(t){t.button==h&&t.preventDefault()}),Y.on("changeSelection",function(){U.repaintAll()}),Y.on("updateRegion",function(t){K.union(t),It(Ot(K))}),tt.on("valueChanged",function(t){var e=U.getOffset();U.setOffset(-t,e.y)}),et.on("valueChanged",function(t){var e=U.getOffset();U.setOffset(e.x,-t)}),this.setInterpolation(!1);var Nt=document.createElement("div");Nt.className="chickenpaint-canvas-container-wrapper",Nt.appendChild(S),C.className="chickenpaint-canvas-container-top",C.appendChild(Nt),C.appendChild(et.getElement()),O.className="chickenpaint-canvas-container-bottom",O.appendChild(tt.getElement()),x.appendChild(C),x.appendChild(O),r.setCanvas(this)}ee.prototype.paint=function(t){this.deliverEvent("paint",[t])},ee.prototype.push=function(t,e){var n=this.peek();n&&n.suspend(),t.transient=e,t.capture=!1,t.enter(),this.modes.push(t)},ee.prototype.peek=function(){return 0<this.modes.length?this.modes[this.modes.length-1]:null},ee.prototype.pop=function(){var t=this.modes.pop(),e=this.peek();return t&&t.leave(),e&&e.resume(),e},(p.prototype=Object.create(a.default.prototype)).constructor=p,e.exports=n.default},{"../../lib/keymaster.js":67,"../ChickenPaint.js":1,"../engine/CPBrushInfo.js":8,"../engine/CPLayerGroup.js":17,"../engine/CPMaskView.js":19,"../util/CPBezier.js":56,"../util/CPColor.js":57,"../util/CPPolyfill.js":59,"../util/CPPolygon.js":60,"../util/CPRect.js":62,"../util/CPTransform.js":63,"../util/CPVector.js":64,"../util/CPWacomTablet.js":65,"../util/throttle-debounce":66,"./CPGUIUtils.js":33,"./CPScrollbar.js":41,jquery:229,"wolfy87-eventemitter":248}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var a,i=(a=t("wolfy87-eventemitter"))&&a.__esModule?a:{default:a};function r(t,e){var n=document.createElement("canvas"),a=n.getContext("2d"),i=this;function r(){var t=n.width,e=n.height;a.clearRect(0,0,t,e),a.beginPath(),a.arc(t/2+1,t/2+1,Math.max(t/2,1)-2,0,2*Math.PI),i.state?a.fill():a.stroke()}this.state=t||!1,this.setValue=function(t){this.state!=t&&(this.state=t,this.emitEvent("valueChange",[t]),r())},this.getElement=function(){return n},n.addEventListener("mousedown",function(t){i.setValue(!i.state)}),n.title=e||"",n.className="chickenpaint-checkbox",n.width=20,n.height=20,n.fillStyle="black",n.strokeStyle="black",r()}(r.prototype=Object.create(i.default.prototype)).constructor=r,e.exports=n.default},{"wolfy87-eventemitter":248}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var o=a(t("./CPPalette.js")),s=a(t("./CPColorSelect.js")),l=a(t("./CPColorSlider.js")),u=a(t("../util/CPColor.js")),d=t("../languages/lang");function a(t){return t&&t.__esModule?t:{default:t}}function i(t){o.default.call(this,t,"color","Color (picker)");var e=new s.default(t),n=new l.default(t,e),a=new c(t),i=this.getBodyElement(),r=document.createElement("div");r.className="chickenpaint-colorpicker-top",r.appendChild(e.getElement()),r.appendChild(n.getElement()),i.appendChild(r),i.appendChild(a.getElement())}function c(a){var i=0,t=document.createElement("div");function r(t,e,n){for(;t.length<n;)t=e+t;return t}function e(){t.style.backgroundColor="#"+r(Number(i).toString(16),"0",6)}this.getElement=function(){return t},a.on("colorChange",function(t){i=t.getRgb(),e()}),t.className="chickenpaint-colorpicker-show",t.addEventListener("click",function(t){t.preventDefault();var e="#"+r(Number(i).toString(16),"0",6);if(null!=(e=window.prompt((0,d._)("Please enter a color in hex format"),e)))try{(e.match(/^#/)||e.match(/^$/))&&(e=e.substring(1));var n=parseInt(e,16);a.setCurColor(new u.default(n))}catch(t){}}),e()}(i.prototype=Object.create(o.default.prototype)).constructor=i,e.exports=n.default},{"../languages/lang":53,"../util/CPColor.js":57,"./CPColorSelect.js":29,"./CPColorSlider.js":30,"./CPPalette.js":39}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r,t){var o=128,s=128,n=window.devicePixelRatio||1,l=Math.round(o*n),u=Math.round(s*n),d=document.createElement("canvas"),a=d.getContext("2d"),i=a.createImageData(l,u),c=i.data,f=new w.default(0),h=!0,e=!1,p=!1;function m(){h&&function(){var t=0;if(p)for(var e=0;e<u;e++)for(var n=255-Math.round(e/(u-1)*255),a=0;a<l;a++)c[t+_.default.RED_BYTE_OFFSET]=n,c[t+_.default.GREEN_BYTE_OFFSET]=n,c[t+_.default.BLUE_BYTE_OFFSET]=n,c[t+_.default.ALPHA_BYTE_OFFSET]=255,t+=_.default.BYTES_PER_PIXEL;else for(var i=f.clone(),r=0;r<u;r++){i.setValue(255-~~(r/(u-1)*255));for(var o=0;o<l;o++)i.setSaturation(Math.round(o/(l-1)*255)),c[t+_.default.RED_BYTE_OFFSET]=i.rgb>>16&255,c[t+_.default.GREEN_BYTE_OFFSET]=i.rgb>>8&255,c[t+_.default.BLUE_BYTE_OFFSET]=255&i.rgb,c[t+_.default.ALPHA_BYTE_OFFSET]=255,t+=_.default.BYTES_PER_PIXEL}h=!1}(),a.putImageData(i,0,0,0,0,l,u);var t=f.getSaturation()/255*(l-1),e=(255-f.getValue())/255*(u-1);(0,E.setContrastingDrawStyle)(a,"stroke"),a.lineWidth=1.5*n,a.beginPath(),p?(a.moveTo(0,e),a.lineTo(l,e)):a.arc(t,e,5*n,0,2*Math.PI),a.stroke(),a.globalCompositeOperation="source-over"}function g(t){var e=t.pageX-(0,b.default)(d).offset().left,n=t.pageY-(0,b.default)(d).offset().top,a=Math.max(Math.min(255-~~(255*n/(s-1)),255),0);if(p)f.setGreyscale(a);else{var i=Math.max(Math.min(~~(255*e/(o-1)),255),0);f.setHsv(f.getHue(),i,a)}m(),r.setCurColor(f)}function v(t){g(t)}function y(t){d.releasePointerCapture(t.pointerId),e=!1,d.removeEventListener("pointerup",y),d.removeEventListener("pointermove",v)}this.setHue=function(t){f.getHue()!=t&&(f.setHue(t),r.setCurColor(f))},this.getElement=function(){return d},r.on("colorChange",function(t){f.copyFrom(t),h=!0,m()}),r.on("colorModeChange",function(t){p="greyscale"==t,h=!0,m()}),d.addEventListener("pointerdown",function(t){e||(e=!0,d.setPointerCapture(t.pointerId),d.addEventListener("pointerup",y),d.addEventListener("pointermove",v)),g(t)}),d.className="chickenpaint-colorpicker-select",d.setAttribute("touch-action","none"),d.width=l,d.height=u,d.style.width=o+"px",d.style.height=s+"px",t&&f.copyFrom(t);m()};var b=a(t("jquery")),w=a(t("../util/CPColor.js")),_=a(t("../engine/CPColorBmp.js")),E=t("./CPGUIUtils.js");function a(t){return t&&t.__esModule?t:{default:t}}e.exports=n.default},{"../engine/CPColorBmp.js":13,"../util/CPColor.js":57,"./CPGUIUtils.js":33,jquery:229}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,a,e){var i=24,r=128,n=this,o=document.createElement("canvas"),s=o.getContext("2d"),l=s.createImageData(i,r),u=l.data,d=!1,c=e||0;function f(){s.putImageData(l,0,0,0,0,i,r);var t=c*r/360;s.globalCompositeOperation="exclusion",s.strokeStyle="white",s.lineWidth=1.5,s.beginPath(),s.moveTo(0,t),s.lineTo(i,t),s.stroke(),s.globalCompositeOperation="source-over"}function h(t){var e=t.pageY-(0,g.default)(o).offset().top,n=~~(360*e/r);c=Math.max(0,Math.min(359,n)),f(),null!=a&&a.setHue(c)}function p(t){h(t)}function m(t){o.releasePointerCapture(t.pointerId),d=!1,o.removeEventListener("pointerup",m),o.removeEventListener("pointermove",p)}this.getElement=function(){return o},this.setHue=function(t){c=t,f()},t.on("colorChange",function(t){n.setHue(t.getHue())}),t.on("colorModeChange",function(t){o.style.display="greyscale"==t?"none":"block"}),o.setAttribute("touch-action","none"),o.addEventListener("pointerdown",function(t){d||(d=!0,o.setPointerCapture(t.pointerId),o.addEventListener("pointerup",m),o.addEventListener("pointermove",p));h(t)}),o.width=i,o.height=r,o.className="chickenpaint-colorpicker-slider",function(){for(var t=new v.default(65535),e=0,n=0;n<r;n++){t.setHue(359*n/r);for(var a=0;a<i;a++)u[e+y.default.RED_BYTE_OFFSET]=t.rgb>>16&255,u[e+y.default.GREEN_BYTE_OFFSET]=t.rgb>>8&255,u[e+y.default.BLUE_BYTE_OFFSET]=255&t.rgb,u[e+y.default.ALPHA_BYTE_OFFSET]=255,e+=y.default.BYTES_PER_PIXEL}}(),f()};var g=a(t("jquery")),v=a(t("../util/CPColor.js")),y=a(t("../engine/CPColorBmp.js"));function a(t){return t&&t.__esModule?t:{default:t}}e.exports=n.default},{"../engine/CPColorBmp.js":13,"../util/CPColor.js":57,jquery:229}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var u=i(t("jquery")),d=i(t("../util/CPColor.js")),c=i(t("./CPSlider.js")),f=i(t("./CPColorSelect.js")),h=i(t("./CPColorSlider.js")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var r=this,o=new d.default(0),s=255,a=document.createElement("div");function i(){a.style.backgroundColor="#"+function(t,e,n){for(;t.length<n;)t=e+t;return t}(Number(o.getRgb()).toString(16),"0",6)}this.getElement=function(){return a},this.setColor=function(t){o.isEqual(t)||(o.copyFrom(t),i(),this.emitEvent("colorChange",[o]))},this.setAlpha=function(t){t!=s&&(s=t,i(),this.emitEvent("alphaChange",[s]))},this.getColorRgb=function(){return o.getRgb()},this.getAlpha=function(){return s},this.setCurColor=this.setColor,a.className="chickenpaint-color-pick-swatch",t&&o.copyFrom(t),e&&(s=e);var l=function(t){0==(0,u.default)(t.target).closest(".popover").length&&(0,u.default)(t.target).closest(".chickenpaint-color-pick-swatch")[0]!=a&&(0,u.default)(a).popover("hide")};(0,u.default)(a).popover({html:!0,content:function(){return window.addEventListener("mousedown",l),t=document.createElement("div"),e=document.createElement("div"),n=new f.default(r,o),a=new h.default(r,n,o.getHue()),i=new c.default(0,255),t.className="chickenpaint-color-pick-panel",e.className="chickenpaint-colorpicker-top",e.appendChild(n.getElement()),e.appendChild(a.getElement()),t.appendChild(e),i.value=s,i.title=function(t){return"Opacity: "+t},i.on("valueChange",function(t){r.setAlpha(t)}),t.appendChild(i.getElement()),setTimeout(function(){i.resize()},0),t;var t,e,n,a,i},trigger:"manual",placement:"bottom",container:n||!1}).on("click",function(t){t.preventDefault(),(0,u.default)(this).popover("toggle")}).on("hidden.bs.popover",function(){window.removeEventListener("mousedown",l)}),i()}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"../util/CPColor.js":57,"./CPColorSelect.js":29,"./CPColorSlider.js":30,"./CPSlider.js":44,jquery:229,"wolfy87-eventemitter":248}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var a=i(t("wolfy87-eventemitter")),o=i(t("jquery")),s=t("../languages/lang.js");function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=(0,o.default)('<div class="modal fade" tabindex="-1" role="dialog">\n\t            <div class="modal-dialog">\n\t                <div class="modal-content">\n\t                    <div class="modal-header">\n\t                        <h5 class="modal-title">Complete transform</h5>\n\t                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n\t                            <span aria-hidden="true">&times;</span>\n\t                        </button>\n\t                    </div>\n\t                    <div class="modal-body">\n\t                        <p>\n\t                            You need to finish transforming this layer before you can do that. What would you like to do with the transform?\n\t\t\t\t\t\t\t</p>\n\t                    </div>\n\t                    <div class="modal-footer">\n\t                        <button type="button" class="btn btn-light" data-dismiss="modal">'.concat((0,s._)("Cancel"),'</button>\n\t                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-dismiss="modal">Undo transform</button>\n\t                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-dismiss="modal">Apply transform</button>\n\t                    </div>\n\t                </div>\n\t            </div>\n\t        </div>\n\t    ')),a=this,i=(0,o.default)(".chickenpaint-accept-transform",n),r=(0,o.default)(".chickenpaint-reject-transform",n);i.click(function(t){e.actionPerformed({action:"CPTransformAccept"}),a.emitEvent("accept")}),r.click(function(t){e.actionPerformed({action:"CPTransformReject"}),a.emitEvent("reject")}),n.modal({show:!1}).on("shown.bs.modal",function(){i.focus()}).on("hidden.bs.modal",function(t){n.remove()}).on("keypress",function(t){13==t.keyCode&&i.click()}),n.data("bs.modal").$body=(0,o.default)(t),t.appendChild(n[0]),this.show=function(){n.modal("show")}}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"../languages/lang.js":53,jquery:229,"wolfy87-eventemitter":248}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCheckerboardPattern=function(t){for(var e=document.createElement("canvas"),n=e.getContext("2d"),a=n.createImageData(64,64),i=a.data,r=0,o=0;o<64;o++)for(var s=0;s<64;s++)0!=(8&s)^0!=(8&o)?(i[r++]=255,i[r++]=255,i[r++]=255):(i[r++]=204,i[r++]=204,i[r++]=204),i[r++]=255;return e.width=64,e.height=64,n.putImageData(a,0,0),t.createPattern(e,"repeat")},n.setContrastingDrawStyle=function(t,e){e+="Style",(t.globalCompositeOperation="exclusion")==t.globalCompositeOperation?t[e]="white":(t.globalCompositeOperation="difference",t[e]="#888","difference"!=t.globalCompositeOperation&&(t[e]="black"))}},{}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){var e=(0,r.default)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat((0,o._)("Grid options"),'</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>').concat((0,o._)("Grid size"),'</label>\n                                    <input type="text" class="form-control chickenpaint-grid-size" value="" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-dismiss="modal">').concat((0,o._)("Cancel"),'</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-dismiss="modal">').concat((0,o._)("Ok"),"</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),a=(0,r.default)(".chickenpaint-grid-size",e),i=(0,r.default)(".chickenpaint-apply-grid-settings",e);a.val(n.getGridSize()),(0,r.default)(".chickenpaint-apply-grid-settings",e).click(function(t){var e=parseInt(a.val(),10);n.setGridSize(e)}),e.modal({show:!1}).on("shown.bs.modal",function(){a.focus()}).on("keypress",function(t){13==t.keyCode&&i.click()}),e.data("bs.modal").$body=(0,r.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var a,r=(a=t("jquery"))&&a.__esModule?a:{default:a},o=t("../languages/lang.js");e.exports=n.default},{"../languages/lang.js":53,jquery:229}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var tt=a(t("jquery")),p=a(t("./CPPalette.js")),et=a(t("../engine/CPBlend.js")),m=a(t("./CPSlider.js")),nt=a(t("../engine/CPLayerGroup.js")),at=(a(t("../engine/CPLayer.js")),a(t("../engine/CPImageLayer.js"))),it=t("../languages/lang.js");function a(t){return t&&t.__esModule?t:{default:t}}function rt(t){t.preventDefault(),t.stopPropagation()}function ot(t){var e=document.createElement("span");return e.className="fa "+t,e}function st(t){var e=document.createElement("span");return e.className="chickenpaint-icon chickenpaint-icon-"+t,e}function g(t,e){var n=document.createElement("div"),a=document.createElement("label");return n.className="form-check",t.className="form-check-input",a.className="form-check-label",a.setAttribute("for",t.id),a.appendChild(t),a.appendChild(document.createTextNode(e)),n.appendChild(t),n.appendChild(a),n}function lt(t){return{"image-layer":t instanceof at.default,"layer-group":t instanceof nt.default,"clipping-mask":t instanceof at.default&&t.clip,"no-clipping-mask":t instanceof at.default&&!t.clip,"no-clipping-mask-or-is-group":!(t instanceof at.default&&t.clip),mask:t&&null!==t.mask,"no-mask":t&&null===t.mask,"mask-enabled":t&&null!==t.mask&&t.maskVisible,"mask-disabled":t&&null!==t.mask&&!t.maskVisible}}function i(Y){var r=this;p.default.call(this,Y,"layers","Layers",{resizeHorz:!0,resizeVert:!0});var i,q=0,z=2,G=this,X=Y.getArtwork(),V=null,t=this.getBodyElement(),K=this.getElement(),Z=K,o=new function(){var n=5,c=16,f="active",h="chickenpaint-layer-visible",p="chickenpaint-layer-hidden",m="chickenpaint-layer-group-expanded",g="chickenpaint-layer-group-collapsed",o="chickenpaint-layer-group-toggle",a="chickenpaint-layer-image-thumbnail",s="chickenpaint-layer-mask-thumbnail",r="chickenpaint-layer-thumbnail",e=0,l=1,d=2,u=3,i=4,v=800,y={state:e,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},t=document.createElement("div"),b=document.createElement("div"),w=b,_=function(){var t=document.createElement("div");t.className="dropdown-menu";for(var e=0,n=[{title:"Rename...",action:"CPRenameLayer"},{require:["image-layer"],title:"Delete layer",action:"CPRemoveLayer"},{require:["layer-group"],title:"Delete group",action:"CPRemoveLayer"},{require:["image-layer","no-clipping-mask"],title:"Clip to the layer below",action:"CPCreateClippingMask"},{require:["image-layer","clipping-mask"],title:"Unclip from the layer below",action:"CPReleaseClippingMask"},{require:["no-mask"],title:"Add mask",action:"CPAddLayerMask"},{require:["mask"],title:"Delete mask",action:"CPRemoveLayerMask"},{require:["mask"],title:"Apply mask",action:"CPApplyLayerMask"},{require:["layer-group"],title:"Merge group",action:"CPGroupMerge"},{require:["mask-enabled"],title:"Disable mask",action:"CPSetMaskVisible",actionData:{visible:"false"}},{require:["mask-disabled"],title:"Enable mask",action:"CPSetMaskVisible",actionData:{visible:"true"}}];e<n.length;e++){var a=n[e],i=document.createElement("a");if(i.className="dropdown-item",a.require&&(i.className=i.className+" "+a.require.map(function(t){return"chickenpaint-action-require-"+t}).join(" ")),i.href="#",i.innerHTML=(0,it._)(a.title),i.setAttribute("data-action",a.action),a.actionData)for(var r in a.actionData)a.actionData.hasOwnProperty(r)&&i.setAttribute("data-action-"+r,a.actionData[r]);t.appendChild(i)}return t}(),E={x:0,y:0},T=0,k=null,P=!1,x=null;function C(t){"button"in t&&t.button!==q||(D(),(0,tt.default)(this).off("click",C))}function O(t){var e=(0,tt.default)(".chickenpaint-layer",b);return e.get(e.length-1-t)}function S(t){var e=(0,tt.default)(t).closest(".chickenpaint-layer");if(e.length){var n=(0,tt.default)(".chickenpaint-layer",b);return n.length-1-n.index(e)}return-1}function L(){if(y.state===d){var t=K.getBoundingClientRect(),e=!0,n=!0;if(y.dropTarget=function(t,e){for(var n=(0,tt.default)(".chickenpaint-layer",b),a={layer:V[V.length-1],displayIndex:V.length-1,direction:"over"},i=0;i<n.length;i++){var r=n[n.length-1-i],o=r.getBoundingClientRect();if(0===i&&e>o.bottom){var s=X.getLayersRoot().layers[0];a={layer:s,displayIndex:J(s),direction:"under"};break}if(e>=o.top){var l=Q(i),u=o.bottom-o.top;a={layer:l,displayIndex:i},l instanceof nt.default?e>=o.top+.75*u?l.expanded&&0<l.layers.length?(a.layer=l.layers[l.layers.length-1],a.displayIndex--,a.direction="over"):a.direction="under":e>=o.top+.25*u?l.expanded&&0<l.layers.length?(a.layer=l.layers[l.layers.length-1],a.displayIndex--,a.direction="over"):a.direction="inside":a.direction="over":e>=o.top+.5*u?a.direction="under":a.direction="over";break}}if(a.layer.parent==y.layer.parent&&("over"==a.direction||"under"==a.direction)){var d=a.layer.parent,c=d.indexOf(a.layer);if("over"==a.direction&&d.layers[c+1]==y.layer||"under"==a.direction&&d.layers[c-1]==y.layer||a.layer==y.layer)return null}if(y.layer instanceof nt.default&&(a.layer==y.layer&&"inside"==a.direction||a.layer.hasAncestor(y.layer)))return null;return a}(y.dragX,y.dragY),y.dropTarget){var a=O(y.dropTarget.displayIndex);switch(y.dropTarget.direction){case"over":case"under":b.appendChild(y.dropBetweenMarkerElem);var i,r,o,s=y.dropTarget.layer.getDepth()-1;if(i=a.getBoundingClientRect(),"under"==y.dropTarget.direction&&y.dropTarget.layer instanceof nt.default&&y.dropTarget.layer.expanded){var l;for(l=y.dropTarget.displayIndex-1;0<=l&&V[l].hasAncestor(y.dropTarget.layer);l--);o=O(l+1).getBoundingClientRect().bottom}else o=i.bottom;r=i.left-t.left+(0<s?26+c*s:0),y.dropBetweenMarkerElem.style.left=r+"px",y.dropBetweenMarkerElem.style.width=i.right-t.left-r+"px",y.dropBetweenMarkerElem.style.top=("over"==y.dropTarget.direction?i.top-1:o+1)-t.top+"px",(0,tt.default)(".chickenpaint-layer-drop-target",b).removeClass("chickenpaint-layer-drop-target"),e=!1;break;case"inside":var u=(0,tt.default)(".chickenpaint-layer",b);u.each(function(t){(0,tt.default)(this).toggleClass("chickenpaint-layer-drop-target",u.length-1-t==y.dropTarget.displayIndex)}),n=!1}}n&&(0,tt.default)(".chickenpaint-layer-drop-target",b).removeClass("chickenpaint-layer-drop-target"),e&&(0,tt.default)(y.dropBetweenMarkerElem).remove(),y.frameElem.style.top=y.dragY-t.top-parseInt(y.frameElem.style.height,10)/2+"px"}else(0,tt.default)(y.dropBetweenMarkerElem).remove(),(0,tt.default)(y.frameElem).remove()}function M(t){var e=t.getImageThumbnail(),n=e.getAsCanvas(T);return n.title=(0,it._)("Image"),n.className=r+" "+a,n.style.maxWidth=n.width/n.height*25+"px",t!=X.getActiveLayer()||X.isEditingMask()||(n.className+=" active"),n}function A(t){var e,n,a=t.getMaskThumbnail(),i=a.getAsCanvas(T);return i.title=(0,it._)("Layer mask"),i.className=r+" "+s,i.style.maxWidth=i.width/i.height*25+"px",t==X.getActiveLayer()&&X.isEditingMask()&&(i.className+=" active"),t.maskVisible||(i.className+=" disabled",(n=(e=i).getContext("2d")).strokeStyle="red",n.lineWidth=3,n.moveTo(5,5),n.lineTo(e.width-5,e.height-5),n.moveTo(e.width-5,5),n.lineTo(5,e.height-5),n.stroke()),i}function R(t,e){var n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");if(n.className="chickenpaint-layer list-group-item",e==X.getActiveLayer()&&(n.className+=" "+f),a.className="chickenpaint-layer-eye",e.ancestorsAreVisible()||(a.className+=" chickenpaint-layer-eye-hidden-ancestors"),a.style.marginRight=2+c*(e.getDepth()-1)+"px",e.visible?(n.className+=" "+h,a.appendChild(ot("fa-eye"))):(n.className+=" "+p,a.appendChild(ot("fa-eye-slash"))),n.appendChild(a),i.className="chickenpaint-layer-description",e instanceof at.default){if(e.clip&&(n.className+=" chickenpaint-layer-clipped",r.appendChild(ot("fa-level-down-alt fa-flip-horizontal"))),e.lockAlpha){var u=st("lock-alpha");u.title=(0,it._)("Transparency locked"),s.appendChild(u)}}else e instanceof nt.default&&(n.className+=" chickenpaint-layer-group",e.expanded?(n.className+=" "+m,r.appendChild(ot("fa-folder-open chickenpaint-layer-group-toggle"))):(n.className+=" "+g,r.appendChild(ot("fa-folder chickenpaint-layer-group-toggle"))));r.childNodes.length&&(r.className="chickenpaint-layer-icons",n.appendChild(r));try{e instanceof at.default&&n.appendChild(M(e)),e.mask&&n.appendChild(A(e))}catch(t){console.log("Failed to create layer thumb")}var d=e.name&&0<e.name.length?e.name:"(unnamed "+(e instanceof nt.default?"group":"layer")+")";return o.innerText=d,o.setAttribute("title",d),o.className="chickenpaint-layer-name",l.innerText=(0,it._)(et.default.BLEND_MODE_DISPLAY_NAMES[e.blendMode])+": "+e.alpha+"%",l.className="chickenpaint-layer-blend",i.appendChild(o),i.appendChild(l),n.appendChild(i),s.className="chickenpaint-layer-status",n.appendChild(s),n.setAttribute("data-display-index",""+t),n.setAttribute("data-toggle","dropdown"),n.setAttribute("data-target","#chickenpaint-layer-pop"),n}function B(t){if(-1<t){var e=Q(t),n=O(t);e&&n&&$.show(e,n)}}function j(t){switch(y.state){case d:(0,tt.default)(y.layerElem).removeClass("chickenpaint-layer-dragging"),y.dropTarget&&("inside"==y.dropTarget.direction?Y.actionPerformed({action:"CPRelocateLayer",layer:y.layer,toGroup:y.dropTarget.layer,toIndex:y.dropTarget.layer.layers.length}):Y.actionPerformed({action:"CPRelocateLayer",layer:y.layer,toGroup:y.dropTarget.layer.parent,toIndex:y.dropTarget.layer.parent.indexOf(y.dropTarget.layer)+("over"==y.dropTarget.direction?1:0)})),y.dropTarget=null,y.state=e,L();break;default:y.state=e}x&&(clearTimeout(x),x=null),b.releasePointerCapture(t.pointerId),b.removeEventListener("pointermove",F),b.removeEventListener("pointerup",j)}function I(){y.state=d,y.frameElem=document.createElement("div"),y.frameElem.className="chickenpaint-layer-drag-frame",y.frameElem.style.width=(0,tt.default)(y.layerElem).outerWidth(!1)+"px",y.frameElem.style.height=(0,tt.default)(y.layerElem).outerHeight(!1)+"px",y.dropBetweenMarkerElem=document.createElement("div"),y.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark",y.layerElem.className+=" chickenpaint-layer-dragging",b.appendChild(y.frameElem)}function F(t){var e=t.clientY;switch(y.state){case u:if(!(Math.abs(e-y.dragY)>n))break;y.state=i;case i:w.scrollTop=y.initialScrollTop+y.dragY-e;break;case l:if(!(Math.abs(e-y.dragY)>n))break;I();case d:y.dragY=e,L()}}function N(t,e,n){try{n?(0,tt.default)("."+s,t).replaceWith(A(e)):(0,tt.default)("."+a,t).replaceWith(M(e))}catch(t){}}function D(){(0,tt.default)(Z).hasClass("show")&&(0,tt.default)(Z).dropdown("toggle").off("click.bs.dropdown")}this.buildLayers=function(){var t=(V=X.getLayersRoot().getLinearizedLayerList(!0)).map(function(t,e){return R(e,t)}),e=document.createDocumentFragment();(0,tt.default)(b).empty();for(var n=t.length-1;0<=n;n--)e.appendChild(t[n]);b.appendChild(e),L()},this.layerChanged=function(t){var e=J(t),n=(0,tt.default)(O(e));0===n.length||t instanceof nt.default&&(t.expanded!=(0,tt.default)(n).hasClass(m)||t.visible!=(0,tt.default)(n).hasClass(h))?this.buildLayers():n.replaceWith(R(e,t))},this.setRotation90=function(t){if(T!=t){T=t;for(var e=0;e<V.length;e++){var n=V[e],a=(0,tt.default)(O(e));0<a.length&&(N(a,n,!1),n.mask&&N(a,n,!0))}}},this.layerImageThumbChanged=function(t){var e=J(t),n=(0,tt.default)(O(e));0<n.length&&N(n,t,!1)},this.layerMaskThumbChanged=function(t){var e=J(t),n=(0,tt.default)(O(e));0<n.length&&(t.mask?N(n,t,!0):(0,tt.default)("."+s,n).remove())},this.activeLayerChanged=function(t,e){(0,tt.default)("."+f,b).removeClass(f);var n=(0,tt.default)(O(J(t)));n.addClass(f),(0,tt.default)("."+a,n).toggleClass("active",!e),(0,tt.default)("."+s,n).toggleClass("active",e)},this.resize=function(){G.dismissNotification(),this.buildLayers()},this.getElement=function(){return t},this.revealLayer=function(t){var e=O(t),n=e.getBoundingClientRect(),a=b.getBoundingClientRect();return w.scrollTop=Math.max(Math.min(Math.max(w.scrollTop,w.scrollTop+n.bottom-a.bottom),w.scrollTop+n.top-a.top),0),e},Z.id="chickenpaint-layer-pop",t.className="chickenpaint-layers-widget well",t.addEventListener("contextmenu",function(t){return t.preventDefault()},!0),_.addEventListener("click",function(t){var e=t.target.getAttribute("data-action");if(!e)return;t.preventDefault(),D(),Y.actionPerformed({action:"CPSetActiveLayer",layer:k,mask:X.isEditingMask()});for(var n={action:e,layer:k},a=t.target.attributes,i=0;i<a.length;i++){var r=a[i].name.match(/^data-action-(.+)/);r&&(n[r[1]]=JSON.parse(a[i].value))}"CPRenameLayer"===e?B(J(k)):Y.actionPerformed(n)}),b.className="list-group",b.addEventListener("dblclick",function(t){t.button===q&&0<(0,tt.default)(t.target).closest(".chickenpaint-layer-description").length&&0===(0,tt.default)(t.target).closest("input").length&&(B(S(t.target)),t.preventDefault())}),b.addEventListener("pointerdown",function(t){var e=S((0,tt.default)(t.target).closest(".chickenpaint-layer")[0]);if(-1!=e){var n=Q(e);if(t.button==q&&(0,tt.default)(t.target).closest(".chickenpaint-layer-eye").length)Y.actionPerformed({action:"CPSetLayerVisibility",layer:n,visible:!n.visible});else if(t.button==q&&n instanceof nt.default&&(0,tt.default)(t.target).closest("."+o).length)Y.actionPerformed({action:"CPExpandLayerGroup",group:n,expand:!n.expanded});else{var a,i,r=X.getActiveLayer()!=n;if(P=0<(0,tt.default)(t.target).closest("."+s).length||n instanceof nt.default&&null!==n.mask&&r,t.button==q&&t.shiftKey&&P)Y.actionPerformed({action:"CPSetMaskVisible",layer:n,visible:!n.maskVisible});else a=t.button==q||r?P:X.isEditingMask(),i=X.isEditingMask()!=a,(r||i)&&Y.actionPerformed({action:"CPSetActiveLayer",layer:n,mask:a}),a&&t.altKey?Y.actionPerformed({action:"CPToggleMaskView"}):t.button==q?("pen"===t.pointerType||"touch"===t.pointerType?(y.state=u,y.initialScrollTop=w.scrollTop,x&&clearTimeout(x),x=setTimeout(function(){y.state===u&&(I(),y.dragY=t.clientY,L())},v)):y.state=l,y.dropTarget=null,y.layer=n,y.layerElem=O(e),y.dragX=t.clientX,y.dragY=t.clientY,b.setPointerCapture(t.pointerId),b.addEventListener("pointermove",F),b.addEventListener("pointerup",j)):t.button==z&&(t.preventDefault(),function(t){var e=S(t.target);if(-1!=e){var n=X.getActiveLayer(),a=lt(n);k=n,E={x:t.clientX,y:t.clientY};for(var i=0,r=["image-layer","layer-group","clipping-mask","no-clipping-mask","no-mask"];i<r.length;i++){var o=r[i];(0,tt.default)(".chickenpaint-action-require-"+o,_).toggle(a[o])}for(var s=0,l=["mask","mask-enabled","mask-disabled"];s<l.length;s++){var u=l[s];(0,tt.default)(".chickenpaint-action-require-"+u,_).toggle(P&&a[u])}(0,tt.default)("[data-action]",_).each(function(){var t=this.getAttribute("data-action");(0,tt.default)(this).parent().toggleClass("disabled","CPRenameLayer"!==t&&!Y.isActionAllowed(t))}),(0,tt.default)(O(e)).dropdown("toggle").off("click.bs.dropdown"),(0,tt.default)(document).off("click.bs.dropdown.data-api")}}(t))}}}),b.setAttribute("touch-action","none");for(var H=0,W=["ontouchstart","ontouchmove","ontouchend","ontouchcancel"];H<W.length;H++){var U=W[H];b.addEventListener(U,rt)}t.appendChild(b),t.appendChild(_),(0,tt.default)(Z).on("show.bs.dropdown",function(t){var e=(0,tt.default)(t.relatedTarget)[0],n=(0,tt.default)(Z).find(".dropdown-menu"),a=e.getBoundingClientRect(),i=Z.getBoundingClientRect();n.css({left:E.x-n.outerWidth(!0)-i.left+1+"px",top:a.top-n.outerHeight(!0)/2-i.top+"px"}),(0,tt.default)(document).on("click",C)})},s=new m.default(0,100),a=document.createElement("select"),$=new function(){var n=null,a="",i=document.createElement("input"),e=this;this.hide=function(){n=null;var t=(0,tt.default)(i).parent();t&&((0,tt.default)(i).remove(),t.text(a))},this.renameAndHide=function(){n&&n.name!=i.value&&Y.actionPerformed({action:"CPSetLayerName",layer:n,name:i.value}),this.hide()},this.show=function(t,e){a=(n=t).name,i.value=a,(0,tt.default)(".chickenpaint-layer-name",e).empty().append(i),i.select()},i.type="text",i.className="chickenpaint-layer-rename form-control input-sm",i.addEventListener("keydown",function(t){t.stopPropagation()}),i.addEventListener("keypress",function(t){13==t.keyCode&&e.renameAndHide(),t.stopPropagation()}),i.addEventListener("keyup",function(t){27==t.keyCode&&e.hide(),t.stopPropagation()}),i.addEventListener("blur",function(t){n&&e.renameAndHide()})},e=document.createElement("input"),n=document.createElement("input"),l=!1;function Q(t){return V[t]}function J(t){return V.indexOf(t)}function u(){var t=X.getActiveLayer();t.getAlpha()!=s.value&&s.setValue(t.getAlpha()),function(){for(var t=X.getActiveLayer();a.lastChild;)a.removeChild(a.lastChild);for(var e=et.default.LM_FIRST;e<=et.default.LM_LAST;e++)if(e!=et.default.LM_MULTIPLY2&&(e==t.blendMode||e===et.default.LM_PASSTHROUGH&&t instanceof nt.default||e<=et.default.LM_LAST_CHIBIPAINT)){var n=document.createElement("option");n.appendChild(document.createTextNode((0,it._)(et.default.BLEND_MODE_DISPLAY_NAMES[e]))),e!==et.default.LM_MULTIPLY||t.blendMode===e||t.useLegacyMultiply?n.value=e:n.value=et.default.LM_MULTIPLY2,a.appendChild(n)}}(),t.getBlendMode()!=parseInt(a.value,10)&&(a.value=t.getBlendMode()),t.getLockAlpha()!=n.checked&&(n.checked=t.getLockAlpha()),function(){for(var t=lt(X.getActiveLayer()),e=0,n=["clipping-mask","no-clipping-mask-or-is-group"];e<n.length;e++){var a=n[e];(0,tt.default)(".chickenpaint-action-require-"+a,i).css("display",t[a]?"inline-block":"none")}(0,tt.default)("[data-action]",i).each(function(){var t=this.getAttribute("data-action");(0,tt.default)(this).toggleClass("disabled",!Y.isActionAllowed(t))})}()}function d(){X=this,o.resize(),u()}var c=this.setSize,f=this.setWidth,h=this.setHeight;this.setSize=function(t,e){c.call(this,t,e),this.dismissNotification(),s.resize()},this.setWidth=function(t){f.call(this,t),s.resize(),o.resize()},this.setHeight=function(t){h.call(this,t),o.resize()},this.setRotation90=function(t){o.setRotation90(t)},this.dismissNotification=function(){(0,tt.default)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",t).each(function(t,e){(e=(0,tt.default)(e)).data("bs.popover")&&e.popover("dispose")}),l&&(clearTimeout(l),l=!1)},this.showNotification=function(t,e,n){var a,i=J(t);a=X.getActiveLayer()==t&&"opacity"==n?s.getElement():o.revealLayer(i),r.dismissNotification(),(0,tt.default)(a).popover({html:!1,content:e,placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:G.getElement()}).popover("show"),l=setTimeout(function(){l=!1,r.dismissNotification()},Math.max(Math.round(70*e.length),3e3))},a.className="form-control form-control-sm",a.title=(0,it._)("Layer blending mode"),a.addEventListener("change",function(t){Y.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(a.value,10)})}),t.appendChild(a),s.title=function(t){return(0,it._)("Opacity")+": "+t+"%"},s.on("valueChange",function(t){Y.actionPerformed({action:"CPSetLayerAlpha",alpha:t})}),t.appendChild(s.getElement()),e.id="chickenpaint-chk-sample-all-layers",e.type="checkbox",e.addEventListener("click",function(t){X.setSampleAllLayers(e.checked)}),t.appendChild(g(e,(0,it._)("Sample all layers"))),n.id="chickenpaint-chk-lock-alpha",n.type="checkbox",n.addEventListener("click",function(t){Y.actionPerformed({action:"CPSetLayerLockAlpha",lock:n.checked})}),t.appendChild(g(n,(0,it._)("Lock transparency"))),t.appendChild(o.getElement()),i=function(){var t=[{title:"Add layer",icon:ot("fa-file"),action:"CPAddLayer"},{title:"Add group",icon:ot("fa-folder"),action:"CPAddGroup"},{title:"Add layer mask",icon:st("mask"),action:"CPAddLayerMask"},{title:"Clip to the layer below",icon:ot("fa-level-down-alt fa-flip-horizontal"),action:"CPCreateClippingMask",require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:ot("fa-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Delete layer",icon:ot("fa-trash"),action:"CPRemoveLayer"}],n=document.createElement("ul");n.className="chickenpaint-layer-buttons list-unstyled";for(var e=function(){var t=i[a],e=document.createElement("li");e.setAttribute("data-action",t.action),e.className="chickenpaint-small-toolbar-button "+(t.require?"chickenpaint-action-require-"+t.require:""),e.title=(0,it._)(t.title),e.appendChild(t.icon),e.addEventListener("click",function(){Y.actionPerformed({action:t.action})}),n.appendChild(e)},a=0,i=t;a<i.length;a++)e();return n}(),t.appendChild(i),X.on("changeActiveLayer",function(t,e,n){o.activeLayerChanged(e,n),u()}),X.on("changeLayer",function(t){X=this,G.dismissNotification(),o.layerChanged(t),u()}),X.on("changeStructure",d),X.on("changeLayerMaskThumb",function(t){X=this,o.layerMaskThumbChanged(t)}),X.on("changeLayerImageThumb",function(t){X=this,o.layerImageThumbChanged(t)}),Y.on("layerNotification",this.showNotification.bind(this)),d.call(X)}(i.prototype=Object.create(p.default.prototype)).constructor=i,e.exports=n.default},{"../engine/CPBlend.js":5,"../engine/CPImageLayer.js":15,"../engine/CPLayer.js":16,"../engine/CPLayerGroup.js":17,"../languages/lang.js":53,"./CPPalette.js":39,"./CPSlider.js":44,jquery:229}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var u=i(t("jquery")),d=i(t("./CPCanvas.js")),c=i(t("./CPPaletteManager.js")),f=i(t("./CPMainMenu.js")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var a,n=this,i=document.createElement("div"),r=new d.default(t),o=new c.default(t),s=!1,l=this;this.togglePalettes=function(){o.togglePalettes()},this.arrangePalettes=function(){setTimeout(o.arrangePalettes.bind(o),0)},this.constrainPalettes=function(){o.constrainPalettes()},this.showPalette=function(t,e){o.showPaletteByName(t,e)},this.getSwatches=function(){return o.palettes.swatches.getSwatches()},this.setSwatches=function(t){o.palettes.swatches.setSwatches(t)},this.getPaletteManager=function(){return o},this.setRotation90=function(t){r.setRotation(t*Math.PI/2),o.palettes.layers.setRotation90(t)},this.setFullScreenMode=function(t){s!==t&&(s=t,l.resize(),l.arrangePalettes())},this.resize=function(){var t,e=(0,u.default)(window).height(),n=(0,u.default)(a.getElement()).outerHeight();t=s?e-n:Math.min(Math.max(e-n-65,500),850),r.resize(t,!1),l.constrainPalettes()},a=new f.default(t,this),e.appendChild(a.getElement()),i.className="chickenpaint-main-section",i.appendChild(r.getElement()),i.appendChild(o.getElement()),e.appendChild(i),r.on("canvasRotated90",function(t){o.palettes.layers.setRotation90(t)}),window.addEventListener("resize",this.resize.bind(this)),t.on("fullScreen",function(t){return n.setFullScreenMode(t)}),setTimeout(this.resize.bind(this),0)}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"./CPCanvas.js":26,"./CPMainMenu.js":37,"./CPPaletteManager.js":40,jquery:229,"wolfy87-eventemitter":248}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r,t){var n=(0,u.default)('<nav class="navbar navbar-expand-md navbar-light bg-light"><a class="navbar-brand" href="#">ChickenPaint</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><ul class="navbar-nav mr-auto"></ul></div><div class="widget-nav" id="chickenpaint-palette-toggler-content"/></nav>'),o=/^Mac/i.test(navigator.platform);function s(t){var e,n=t.data("action"),a=t.data("checkbox");r.isActionAllowed(n)&&(a?(t.toggleClass("selected"),e=t.hasClass("selected")):e=!1,r.actionPerformed({action:n,checkbox:a,selected:e}))}this.getElement=function(){return n[0]},i=(0,u.default)(".navbar-nav",n),l=f,i.append(l.map(function(t){var e=(0,u.default)('<li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">'+(0,c._)(t.name)+'</a><div class="dropdown-menu"></div></li>');return(0,u.default)(".dropdown-toggle",e).dropdown(),e.on("show.bs.dropdown",function(){!function(t){(0,u.default)("[data-action]",t).each(function(){var t=(0,u.default)(this),e=this.getAttribute("data-action"),n=r.isActionAllowed(e);t.toggleClass("disabled",!n).toggleClass("hidden",!n&&!0===t.data("hideIfNotAvailable"))}),(0,u.default)(".dropdown-divider",t).removeClass("hidden");for(var e=(0,u.default)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",t),n=null,a=0;a<e.length;a++){var i=(0,u.default)(e[a]);i.hasClass("dropdown-divider")?0===a||n?i.addClass("hidden"):n=i:n=null}n&&n.addClass("hidden")}(e),(0,u.default)(document).one("click",function(){e.hasClass("show")&&(0,u.default)(".dropdown-toggle",e).dropdown("toggle")})}),(0,u.default)(".dropdown-menu",e).append(t.children.map(function(t){if(!t.action||r.isActionSupported(t.action)){var e;if("CPSend"!=t.action||r.isActionSupported("CPContinue")||(t.name=(0,c._)("Post Oekaki"),t.shortcut="ctrl+p"),"-"==t.name?e=(0,u.default)('<div class="dropdown-divider"></div>'):(e=(0,u.default)('<a class="dropdown-item" href="#" data-action="'+t.action+'"><span>'+(0,c._)(t.name)+"</span></a>"),t.checkbox&&(0,u.default)(e).data("checkbox",!0).toggleClass("selected",!!t.checked),t.hideIfNotAvailable&&e.data("hideIfNotAvailable",!0)),t.title&&e.attr("title",(0,c._)(t.title)),t.shortcut){var n=e,a=document.createElement("small");o&&(t.shortcut=t.shortcut.replace(/SHIFT/im,"⇧"),t.shortcut=t.shortcut.replace(/ALT/im,"⌥"),t.shortcut=t.shortcut.replace(/CTRL/im,"⌘")),a.className="chickenpaint-shortcut",a.innerHTML=(i=(i=(i=(i=(i=t.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("ctrl+=","ctrl++")).replace("⌘+=","⌘++"),i=o?i.replace(/([^+])\+/g,"$1"):i.replace(/([^+])\+/g,"$1 ")),n.append(a),(0,d.default)(t.shortcut,function(t){return s(n),t.preventDefault(),t.stopPropagation(),!1})}return e}var i})),e})),e=(0,u.default)(".widget-nav",n),a=f[5].children,e.append(a.filter(function(t){return!!t.mnemonic&&r.isActionSupported(t.action)}).map(function(t){var e=(0,u.default)('<button class="widget-toggler selected" type="button" data-action="'.concat(t.action,'" data-checkbox="true" data-selected="').concat(!t.checked,'">')+"<span>"+t.mnemonic+"</span></button>");return e.click(function(t){s(e),t.preventDefault()}),e})),(0,u.default)(n).on("click","a:not(.dropdown-toggle)",function(t){s((0,u.default)(this)),t.preventDefault()}),(0,u.default)(".navbar-toggler",n).click(function(t){(0,u.default)(".collapse",n).collapse("toggle"),t.preventDefault()}),t.getPaletteManager().on("paletteVisChange",function(t,e){(0,u.default)('[data-action="CPPal'+t.substring(0,1).toUpperCase()+t.substring(1)+'"]',n).toggleClass("selected",e)});var e,a;var i,l};var u=a(t("jquery")),d=a(t("../../lib/keymaster.js")),c=t("../languages/lang.js");function a(t){return t&&t.__esModule?t:{default:t}}var f=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",shortcut:"ctrl+s"},{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z",title:"Undoes the most recent action"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"shift+ctrl+z",title:"Redoes a previously undone action"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:"Removes all undo/redo information to regain memory"},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},{name:"Copy merged",action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+y"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d",title:"Creates a copy of the currently selected layer"},{name:"-"},{name:"Merge down",action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e",title:"Merges the currently selected layer with the one directly below it"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",title:"Merges the contents of the selected group"},{name:"Merge all layers",action:"CPLayerMergeAll",mnemonic:"A",title:"Merges all the layers"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask"},{name:"-"},{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace",title:"Clears the selected area"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f",title:"Fills the selected area with the current color"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",title:"Flips the current selected area horizontally"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V",title:"Flips the current selected area vertically"},{name:"Invert",action:"CPFXInvert",mnemonic:"I",title:"Invert the image colors"},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B",title:"Blur effect"},{name:"-"},{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:"Fills the selection with noise"},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:"Fills the selection with colored noise"}]},{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",mnemonic:"I",shortcut:"ctrl+=",title:"Zooms in"},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"ctrl+-",title:"Zooms out"},{name:"Zoom 100%",action:"CPZoom100",mnemonic:"1",shortcut:"ctrl+0",title:"Resets the zoom factor to 100%"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:"Linear interpolation is used to give a smoothed looked to the picture when zoomed in",checkbox:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",title:"Displays a grid over the image",checkbox:!0,checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D",title:"Shows the grid options dialog box"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",title:"Rearrange the palette windows"},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:"Hides or shows all palettes"},{name:"-"},{name:"Show tools",action:"CPPalTool",mnemonic:"T",checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show stroke",action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show layers",action:"CPPalLayers",mnemonic:"L",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",mnemonic:"T",action:"CPTabletSupport",title:"Help with getting a drawing tablet working"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts",title:"List of keyboard and mouse shortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout",title:"Displays some information about ChickenPaint"}]}];e.exports=n.default},{"../../lib/keymaster.js":67,"../languages/lang.js":53,jquery:229}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var u=i(t("jquery")),a=i(t("./CPPalette.js")),d=t("../languages/lang.js");function i(t){return t&&t.__esModule?t:{default:t}}function r(o){a.default.call(this,o,"misc","Misc");var s=this,l=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-undo",command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",command:"CPSend",toolTip:"Save Oekaki"}];!function(){var t=s.getBodyElement(),e=document.createElement("ul");for(var n in e.className="chickenpaint-misc-tools list-unstyled",l){var a=l[n],i=document.createElement("li"),r=document.createElement("div");"CPSend"!=a.command||o.isActionSupported("CPContinue")||(a.toolTip="Post Oekaki",a.className="chickenpaint-tool-send-and-end"),i.className="chickenpaint-toolbar-button "+a.className,i.setAttribute("data-buttonIndex",n),i.setAttribute("title",(0,d._)(a.toolTip)),r.className="chickenpaint-toolbar-button-icon",i.appendChild(r),e.appendChild(i)}(0,u.default)(e).on("mousedown","li",function(t){(0,u.default)(this).addClass("selected")}).on("mouseup","li",function(t){(0,u.default)(this).removeClass("selected")}).on("click","li",function(t){var e=l[parseInt(this.getAttribute("data-buttonIndex"),10)];o.actionPerformed({action:e.command})}),t.appendChild(e)}()}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"../languages/lang.js":53,"./CPPalette.js":39,jquery:229}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var T=i(t("jquery")),a=i(t("wolfy87-eventemitter")),k=t("../languages/lang");function i(t){return t&&t.__esModule?t:{default:t}}var P=5;function r(e,t,n,o){e.getSmallScreenMode()&&(0,k._)(n+" (shorter)")!==n+" (shorter)"?this.title=(0,k._)(n+" (shorter)"):this.title=(0,k._)(n),o=o||{},this.name=t,this.resizeVert=o.resizeVert||!1,this.resizeHorz=o.resizeHorz||!1;var s,l,u,d=document.createElement("div"),a=document.createElement("div"),c=document.createElement("i"),i=document.createElement("button"),r=document.createElement("div"),f=null,h=null,p=this;function m(t){"vertResize"==l&&p.setHeight(t.pageY-(0,T.default)(d).offset().top)}function g(t){f.releasePointerCapture(t.pointerId),l=!1}function v(t){l="vertResize",f.setPointerCapture(t.pointerId)}function y(t){"horzResize"==l&&p.setWidth(t.pageX-(0,T.default)(d).offset().left)}function b(t){h.releasePointerCapture(t.pointerId),l=!1}function w(t){l="horzResize",h.setPointerCapture(t.pointerId)}this.getElement=function(){return d},this.getBodyElement=function(){return r},this.getWidth=function(){return(0,T.default)(d).outerWidth()},this.getHeight=function(){return(0,T.default)(d).outerHeight()},this.getX=function(){return parseInt(d.style.left,10)||0},this.getY=function(){return parseInt(d.style.top,10)||0},this.setLocation=function(t,e){d.style.left=t+"px",d.style.top=e+"px"},this.setWidth=function(t){d.style.width=t+"px"},this.setHeight=function(t){d.style.height=t+"px"},this.setSize=function(t,e){this.setWidth(t),this.setHeight(e)},this.setCollapseDownwards=function(t){o.collapseDownwards=t},this.toggleCollapse=function(t){var e=(0,T.default)(d);if(void 0===t)t=!e.hasClass("collapsed");else if(e.hasClass("collapsed")==t)return;var n=e.parents(".chickenpaint").find(".chickenpaint-canvas").height(),a=this.getHeight(),i=this.getY()+a;if(e.toggleClass("collapsed",t),(0,T.default)(c).toggleClass("fa-angle-down",!t).toggleClass("fa-angle-up",t),t)o.collapseDownwards&&this.setLocation(this.getX(),Math.min(i,n)-this.getHeight());else{var r=this.getHeight();o.collapseDownwards?this.setLocation(this.getX(),Math.max(i-r,0)):this.getY()+r>n&&this.setLocation(this.getX(),Math.max(n-r,0))}},this.userIsDoneWithUs=function(){e.getSmallScreenMode()&&this.toggleCollapse(!0)},c.className="collapse-icon fas fa-angle-down",i.type="button",i.className="close",i.innerHTML="&times;",d.className="chickenpaint-palette chickenpaint-palette-"+t,a.className="chickenpaint-palette-head",a.setAttribute("touch-action","none");var _=document.createElement("div"),E=document.createElement("h5");_.className="modal-header",E.className="modal-title",E.appendChild(document.createTextNode(this.title)),E.appendChild(c),_.appendChild(E),_.appendChild(i),a.appendChild(_),r.className="chickenpaint-palette-body",d.appendChild(a),d.appendChild(r),this.resizeVert&&((f=document.createElement("div")).className="chickenpaint-resize-handle-vert",f.addEventListener("pointerdown",v),f.addEventListener("pointermove",m),f.addEventListener("pointerup",g),d.appendChild(f)),this.resizeHorz&&((h=document.createElement("div")).className="chickenpaint-resize-handle-horz",h.addEventListener("pointerdown",w),h.addEventListener("pointermove",y),h.addEventListener("pointerup",b),d.appendChild(h)),a.addEventListener("pointerdown",function(t){0==t.button&&(t.stopPropagation(),t.preventDefault(),"BUTTON"==t.target.nodeName?p.emitEvent("paletteVisChange",[p,!1]):(a.setPointerCapture(t.pointerId),s={x:parseInt(d.style.left,10)||0,y:parseInt(d.style.top,10)||0},u={x:t.pageX-(0,T.default)(d).position().left,y:t.pageY-(0,T.default)(d).position().top},l=e.getSmallScreenMode()?"dragStart":"dragging"))}),a.addEventListener("pointermove",function(t){if(0!=t.buttons){var e=t.pageX-u.x,n=t.pageY-u.y;"dragStart"==l&&(r=P)*r<((a={x:e,y:n}).x-(i=s).x)*(a.x-i.x)+(a.y-i.y)*(a.y-i.y)&&(l="dragging"),"dragging"==l&&p.setLocation(e,n)}var a,i,r}),a.addEventListener("pointerup",function(t){if("dragging"===l||"dragStart"===l){"dragStart"===l&&(t.stopPropagation(),t.preventDefault(),setTimeout(function(){p.setLocation(s.x,s.y),p.toggleCollapse()},100)),l=!1;try{a.releasePointerCapture(t.pointerId)}catch(t){}}})}(r.prototype=Object.create(a.default.prototype)).constructor=a.default,e.exports=n.default},{"../languages/lang":53,jquery:229,"wolfy87-eventemitter":248}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var m=i(t("jquery")),a=i(t("wolfy87-eventemitter")),g=i(t("./CPToolPalette.js")),v=i(t("./CPMiscPalette.js")),y=i(t("./CPStrokePalette.js")),b=i(t("./CPColorPalette.js")),w=i(t("./CPBrushPalette.js")),_=i(t("./CPLayersPalette.js")),E=i(t("./CPTexturePalette.js")),T=i(t("./CPSwatchesPalette.js"));function i(t){return t&&t.__esModule?t:{default:t}}function r(i){var r={tool:new g.default(i),misc:new v.default(i),stroke:new y.default(i),color:new b.default(i),brush:new w.default(i),layers:new _.default(i),textures:new E.default(i),swatches:new T.default(i)},n={tool:!1,color:!1,misc:!1},t={color:!0,textures:!0,layers:!0},a=document.createElement("div"),o=this,e=[],s=[];function l(){var t=(0,m.default)(a).parents(".chickenpaint").find(".chickenpaint-canvas");return{width:t.width(),height:t.height()}}function u(t,e){var n=t.getElement();e?a.appendChild(n):a.removeChild(n),o.emitEvent("paletteVisChange",[t.name,e])}for(var d in this.palettes=r,this.showPaletteByName=function(t,e){var n=r[t];n&&u(n,e)},this.togglePalettes=function(){if(0==s.length)(0,m.default)("> .chickenpaint-palette",a).each(function(){o.showPaletteByName(this.getAttribute("data-paletteName"),!1),s.push(this)});else{for(var t=0;t<s.length;t++){var e=s[t];o.showPaletteByName(e.getAttribute("data-paletteName"),!0)}s=[]}},this.constrainPalettes=function(){var t=l();for(var e in r){var n=r[e];n.getX()+n.getWidth()/2>t.width&&n.setLocation(t.width-n.getWidth(),n.getY()),n.getY()+n.getHeight()/2>t.height&&n.setLocation(n.getX(),t.height-n.getHeight())}var a=0<t.width-r.tool.getWidth()-r.misc.getWidth()-r.stroke.getWidth()-r.color.getWidth()-r.brush.getWidth()-15;r.swatches.getX()+r.swatches.getWidth()==r.brush.getX()+r.brush.getWidth()&&Math.abs(r.swatches.getY()-r.brush.getY())<20&&r.swatches.setLocation(r.brush.getX()-r.swatches.getWidth()-(a?5:1),0),r.layers.getY()+r.layers.getHeight()>t.height&&r.layers.setHeight(Math.max(t.height-r.layers.getY(),200))},this.arrangePalettes=function(){var t,e=l();if(i.getSmallScreenMode()){r.tool.setLocation(0,0),r.misc.setLocation(r.tool.getX()+r.tool.getWidth()+1,0),r.brush.setLocation(e.width-r.brush.getWidth()-15,r.misc.getY()+r.misc.getHeight()+1);r.textures.setWidth(e.width-r.textures.getX()),r.layers.setLocation(r.brush.getX()+r.brush.getWidth()-r.layers.getWidth(),r.textures.getY()-r.layers.getHeight()),r.layers.setHeight(r.textures.getY()-330-1),r.stroke.setLocation(r.misc.getX(),r.misc.getY()+r.misc.getHeight()+1),r.swatches.setLocation(r.stroke.getX(),r.stroke.getY()+r.stroke.getHeight()+1)}else{t=0<e.width-r.tool.getWidth()-r.misc.getWidth()-r.stroke.getWidth()-r.color.getWidth()-r.brush.getWidth()-15,r.brush.setLocation(e.width-r.brush.getWidth()-15,0);var n=r.brush.getY()+r.brush.getHeight(),a=300<e.height-n?n+2:n;r.layers.setSize(r.brush.getWidth()+(t?30:0),e.height-a),r.layers.setLocation(r.brush.getX()+r.brush.getWidth()-r.layers.getWidth(),a),r.tool.setLocation(0,0),r.misc.setLocation(r.tool.getX()+r.tool.getWidth()+(t?5:1),0),t?r.stroke.setLocation(r.misc.getX()+r.misc.getWidth()+(t?5:1),0):r.stroke.setLocation(r.misc.getX(),r.misc.getY()+r.misc.getHeight()+1),r.swatches.setLocation(Math.max(r.brush.getX()-r.swatches.getWidth()-(t?5:1),r.tool.getX()+r.tool.getWidth()),0),r.textures.setWidth(Math.min(r.layers.getX()-r.textures.getX(),490))}r.textures.setLocation(r.color.getX()+r.color.getWidth()+4,e.height-r.textures.getHeight()),r.color.setLocation(0,Math.max(r.tool.getY()+r.tool.getHeight(),e.height-r.color.getHeight()))},i.on("smallScreen",function(t){if(t)for(var e in r){r[e].toggleCollapse(t&&(!(e in n)||n[e]))}}),this.getElement=function(){return a},a.className="chickenpaint-palettes",r){var c=r[d],f=c.getElement();c.on("paletteVisChange",function(){u(this,!1)}),d in t&&c.setCollapseDownwards(!0),f.setAttribute("data-paletteName",d),e.push(f)}for(var h in r){var p=r[h].getElement();a.appendChild(p)}}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"./CPBrushPalette.js":25,"./CPColorPalette.js":28,"./CPLayersPalette.js":35,"./CPMiscPalette.js":38,"./CPStrokePalette.js":46,"./CPSwatchesPalette.js":47,"./CPTexturePalette.js":49,"./CPToolPalette.js":50,jquery:229,"wolfy87-eventemitter":248}],41:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var g=i(t("jquery")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function r(a){var i,r=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),s=0,l=1,u=0,d=1,e=10,c=!1,f=1,h=!1,p=this;function m(){var t=a?(0,g.default)(r).height():(0,g.default)(r).width(),e=(u-s)/(l-s)*(t-(f=d/(l-s)*t));o.style[a?"height":"width"]=f+"px",n.style[a?"height":"width"]=f+"px",n.style[a?"top":"left"]=e+"px"}this.setValues=function(t,e,n,a){u=t,d=e,s=n,l=a,m()},this.setBlockIncrement=function(t){e=t},this.setUnitIncrement=function(t){t},this.getElement=function(){return r},this.getValueIsAdjusting=function(){return c},r.className="chickenpaint-scrollbar "+(a?"chickenpaint-scrollbar-vertical":"chickenpaint-scrollbar-horizontal"),n.className="chickenpaint-scrollbar-handle",n.setAttribute("touch-action","none"),o.className="chickenpaint-scrollbar-handle-inner",n.appendChild(o),r.appendChild(n),n.addEventListener("pointerdown",function(t){t.stopPropagation(),i=a?t.pageY-(0,g.default)(r).offset().top:t.pageX-(0,g.default)(r).offset().left,n.setPointerCapture(t.pointerId),(0,g.default)(n).addClass("dragging"),h=!0}),n.addEventListener("pointermove",function(t){if(h){c=!0;var e=a?(0,g.default)(r).height():(0,g.default)(r).width(),n=a?t.pageY-(0,g.default)(r).offset().top:t.pageX-(0,g.default)(r).offset().left;u+=(n-i)*(l-s)/(e-f),u=Math.min(Math.max(u,s),l),i=n,p.emitEvent("valueChanged",[u]),m(),c=!1}}),n.addEventListener("pointerup",function(t){if(t.stopPropagation(),h){try{n.releasePointerCapture(t.pointerId)}catch(t){}(0,g.default)(n).removeClass("dragging"),h=!1}}),n.addEventListener("click",function(t){t.stopPropagation()}),r.addEventListener("click",function(t){this==r&&((a?t.pageY-(0,g.default)(r).offset().top:t.pageX-(0,g.default)(r).offset().left)<parseInt(n.style[a?"top":"left"],10)?u-=e:u+=e,p.emitEvent("valueChanged",[u]),m())})}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{jquery:229,"wolfy87-eventemitter":248}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var l=i(t("jquery")),a=i(t("wolfy87-eventemitter")),u=t("../languages/lang.js");function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var a=(0,l.default)('<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content" data-stage="saving">\n                        <div class="modal-header">\n                            <h5 class="modal-title">'.concat((0,u._)("Saving drawing..."),'</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-saving-progress-message">').concat((0,u._)("Preparing your drawing to be saved, please wait..."),'</p>\n                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>\n                            <div class="progress">\n                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-dismiss="modal">').concat((0,u._)("Cancel"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">').concat((0,u._)("Drawing saved!"),'</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat((0,u._)("Your drawing has been saved, would you like to post it to the forum now?"),'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-dismiss="modal">').concat((0,u._)("Yes, post it now"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-dismiss="modal">').concat((0,u._)("No, keep drawing"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-exit" data-dismiss="modal">').concat((0,u._)("No, quit and I'll finish it later"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-already-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat((0,u._)("Your drawing has been saved, would you like to view it on the forum now?"),'</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-dismiss="modal">').concat((0,u._)("Yes, view the post"),'</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-dismiss="modal">').concat((0,u._)("No, keep drawing"),'</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-redirect" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>').concat((0,u._)("Your drawing has been saved, redirecting you to view your new post now..."),"</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")),i=(0,l.default)(".chickenpaint-saving-progress-message",a),r=(0,l.default)(".chickenpaint-saving-error-message",a),o=(0,l.default)(".progress-bar",a),s=this;n.on("savingProgress",function(t,e){t*=100,i.text(e),(0,l.default)(o).attr("aria-valuenow",t).css("width",t+"%")}),n.on("savingComplete",function(){(0,l.default)(".modal-content[data-stage='saving']",a).hide(),t.isActionSupported("CPContinue")?t.isActionSupported("CPExit")?(0,l.default)(".modal-content[data-stage='success-not-previously-posted']",a).show():(0,l.default)(".modal-content[data-stage='success-already-posted']",a).show():(0,l.default)(".modal-content[data-stage='success-redirect']",a).show()}),n.on("savingFailure",function(t){o.addClass("progress-bar-danger");var e=(0,u._)("Sorry, your drawing could not be saved, please try again later.");t&&(0<(t=t.replace(/^CHIBIERROR\s*/,"")).length&&(e+="<br><br>The error returned from the server was:",r.text(t).show()),i.html(e))}),(0,l.default)(".chickenpaint-post-drawing",a).click(function(){t.actionPerformed({action:"CPPost"})}),(0,l.default)(".chickenpaint-exit",a).toggle(t.isActionSupported("CPExit")).click(function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing."),t.actionPerformed({action:"CPExit"})}),(0,l.default)(".chickenpaint-send-cancel",a).click(function(){n.cancel()}),a.on("hidden.bs.modal",function(t){a.remove()}),a.modal({show:!1}),a.on("shown.bs.modal",function(){s.emitEvent("shown")}),a.data("bs.modal").$body=(0,l.default)(e),e.appendChild(a[0]),this.show=function(){a.modal("show")}}(r.prototype=Object.create(a.default.prototype)).contructor=r,e.exports=n.default},{"../languages/lang.js":53,jquery:229,"wolfy87-eventemitter":248}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,i.default)('<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Shortcuts</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>\n                                Many of the menu options and painting tools have keyboard shortcuts which are\n                                written next to them or appear when you hover.\n                            </p>\n                            <p>\n                                Here are some other shortcuts which are not as obvious!\n                            </p>\n                            <div class="chickenpaint-shortcuts-sections">\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Color swatches palette</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Use as the drawing color\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Right</span>\n                                                </dt>\n                                                <dd>\n                                                    Remove or replace a color swatch\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Line drawing mode</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Snap line to nearest 45 degrees\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Painting tools</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush opacity\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush size\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Brush palette</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Right drag</span>\n                                                </dt>\n                                                <dd>\n                                                    Adjust brush sliders more precisely\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Drawing canvas</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Middle</span> <span class="chickenpaint-shortcut-alternate">or</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Move the canvas around\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa fa-mouse-pointer"></span> Middle</span> <span class="chickenpaint-shortcut-alternate">or</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="chickenpaint-shortcut-key">Space</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Rotate the canvas\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Right</span> <span class="chickenpaint-shortcut-alternate">or</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Sample the color under the cursor\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Layers palette</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Double click</span>\n                                                </dt>\n                                                <dd>\n                                                    Rename layer\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ');e.on("hidden.bs.modal",function(t){e.remove()}),e.modal({show:!1}),e.data("bs.modal").$body=(0,i.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var a,i=(a=t("jquery"))&&a.__esModule?a:{default:a};e.exports=n.default},{jquery:229}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var w=i(t("jquery")),a=i(t("wolfy87-eventemitter")),_=t("../languages/lang");function i(t){return t&&t.__esModule?t:{default:t}}function r(s,e,l,u){var i,r=4,d=1.5,n=0,o=1,c=2,f=document.createElement("canvas"),h=f.getContext("2d"),p=e-s,m=n,a=!1,g=this;function v(){var t=f.width,e=f.height,n="string"==typeof g.title?(0,_._)(g.title):g.title(g.value),a=3*window.devicePixelRatio,i=.75*f.height;if(l)h.save(),h.fillStyle="white",h.fillRect(0,0,t,e),h.fillStyle="black",h.fillText(n,a,i),h.beginPath(),g.value>=p/2?h.rect(t/2,0,(g.value-p/2)*t/p,e):h.rect(g.value*t/p,0,(p/2-g.value)*t/p,e),h.fill(),h.clip(),h.fillStyle="white",h.fillText(n,a,i),h.restore();else{var r,o=(g.value-s)/p;u&&(o=Math.pow(o,1/d)),r=o*t,h.save(),h.save(),h.fillStyle="black",h.beginPath(),h.rect(0,0,r,e),h.fill(),h.clip(),h.fillStyle="white",h.fillText(n,a,i),h.restore(),h.fillStyle="white",h.beginPath(),h.rect(r,0,t,e),h.fill(),h.clip(),h.fillStyle="black",h.fillText(n,a,i),h.restore()}}function y(t){var e=(0,w.default)(f).width(),n=(0,w.default)(f).offset().left,a=(t.pageX-n)/e;u&&(a=Math.pow(Math.max(a,0),d)),g.setValue(a*p+s)}function b(t){switch(m){case o:y(t);break;case c:var e=(t.pageX-i)/r;if(0!==e){var n=g.value+e,a=0|n;g.setValue(a),i=t.pageX-(n-a)*r}}}this.value=void 0,this.title="",l=l||!1,this.setValue=function(t){t=~~Math.max(s,Math.min(e,t)),this.value!=t&&(this.value=t,this.emitEvent("valueChange",[this.value]),a?v():(a=!0,this.resize()))},this.getElement=function(){return f},this.resize=function(){f.width=(0,w.default)(f).width()||150,f.height=(0,w.default)(f).height()||20,1<window.devicePixelRatio&&(f.style.height=f.height+"px",f.width=f.width*window.devicePixelRatio,f.height=f.height*window.devicePixelRatio),h.font=.47*f.height+"pt sans-serif",v()},f.addEventListener("pointerdown",function(t){if(m===n){switch(t.button){case 0:m=o,y(t);break;case 2:m=c,i=t.pageX;break;default:return}f.setPointerCapture(t.pointerId),f.addEventListener("pointermove",b)}}),f.addEventListener("pointerup",function(t){if(m!==n){switch(m){case o:0===t.button&&(m=n);break;case c:2==t.button&&(m=n);break;default:return}m===n&&(f.releasePointerCapture(t.pointerId),f.removeEventListener("pointermove",b))}}),f.addEventListener("contextmenu",function(t){t.preventDefault()}),f.setAttribute("touch-action","none"),f.className="chickenpaint-slider","devicePixelRatio"in window||(window.devicePixelRatio=1)}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"../languages/lang":53,jquery:229,"wolfy87-eventemitter":248}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){for(var d,a,i,r,o=170,c=document.createElement("canvas"),f=c.getContext("2d"),s=new Image,l=new Image,h=new Image,p=new Image,u=new Image,m=new Image,g=new Image,v=[s,l,h,p,u,m,g],y=0,b=0,w="",_=14,E=n+"splash/",T=0;T<v.length;T++)v[T].onload=function(){++y==v.length&&P()};function k(t,e,n){return d||((d=document.createElement("canvas")).width=t,d.height=e,i=d.getContext("2d")),i.globalCompositeOperation="copy",i.drawImage(s,0,0),function(t,e,n){a||((a=document.createElement("canvas")).width=t,a.height=e,r=a.getContext("2d"));r.globalCompositeOperation="copy",r.drawImage(g,0,0),r.globalCompositeOperation="source-in",r.drawImage(g,0,Math.round(n*o))}(t,e,n),i.globalCompositeOperation="source-over",i.drawImage(a,0,0),i.drawImage(l,0,0),i.globalCompositeOperation="screen",i.drawImage(m,0,0),i.globalCompositeOperation="multiply",i.drawImage(u,0,0),d}function P(){var t=c.width/2,e=c.height/2;if(f.fillStyle="white",f.fillRect(0,0,c.width,c.height),y==v.length){var n=p.width,a=p.height,i=Math.round(t-n/2),r=Math.round(e-a/2);f.drawImage(p,i,r),k(n,a,b),f.globalAlpha=.88,f.drawImage(d,i,r),f.globalAlpha=1,f.drawImage(h,i,r),e=Math.round(e+a/2+2)}if(""!=w){f.fillStyle="black";for(var o=w.split("\n"),s=0;s<o.length;s++){var l=o[s],u=f.measureText(l).width;e+=2*_,f.fillText(l,t-u/2,e)}}}function x(){c.width=c.clientWidth,c.height=c.clientHeight,f.font=_+"pt sans-serif",P()}s.src=E+"cup.png",m.src=E+"highlights.png",l.src=E+"lid.png",h.src=E+"lines.png",u.src=E+"shading.png",g.src=E+"smoothie.png",p.src=E+"text.png",e.on("loadingProgress",function(t,e){b=t,w=e,P()}),e.on("loadingFailure",function(t){b=0,w=t,P()}),e.on("loadingComplete",function(){window.removeEventListener("resize",x),t.removeChild(c)}),window.addEventListener("resize",x),c.className="chickenpaint-splash-screen",t.appendChild(c),x()},e.exports=n.default},{}],46:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var u=r(t("jquery")),a=r(t("./CPPalette.js")),i=r(t("../engine/CPBrushInfo.js")),d=t("../languages/lang");function r(t){return t&&t.__esModule?t:{default:t}}function o(r){a.default.call(this,r,"stroke","Stroke");var o=this,s=[{className:"chickenpaint-tool-freehand",command:"CPFreeHand",toolTip:(0,d._)("Free-hand"),selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:(0,d._)("Straight line")},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:(0,d._)("Bezier curve")}],l=o.getBodyElement();!function(){var n=document.createElement("ul");for(var t in n.className="chickenpaint-stroke-tools list-unstyled",s){var e=s[t],a=document.createElement("li"),i=document.createElement("div");a.className="chickenpaint-toolbar-button "+e.className,a.setAttribute("data-buttonIndex",t),a.setAttribute("title",e.toolTip),e.selected&&(a.className=a.className+" selected"),i.className="chickenpaint-toolbar-button-icon",a.appendChild(i),n.appendChild(a)}(0,u.default)(n).on("click","li",function(t){var e=s[parseInt(this.getAttribute("data-buttonIndex"),10)];(0,u.default)("li",n).removeClass("selected"),(0,u.default)(this).addClass("selected"),r.actionPerformed({action:e.command}),o.userIsDoneWithUs()}),l.appendChild(n)}(),r.on("toolChange",function(t,e){(0,u.default)(".chickenpaint-tool-freehand",l).toggleClass("selected",e.strokeMode==i.default.STROKE_MODE_FREEHAND),(0,u.default)(".chickenpaint-tool-line",l).toggleClass("selected",e.strokeMode==i.default.STROKE_MODE_LINE),(0,u.default)(".chickenpaint-tool-bezier",l).toggleClass("selected",e.strokeMode==i.default.STROKE_MODE_BEZIER)})}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{"../engine/CPBrushInfo.js":8,"../languages/lang":53,"./CPPalette.js":39,jquery:229}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var p=a(t("jquery")),m=a(t("file-saver")),i=a(t("./CPPalette.js")),r=a(t("../util/CPColor.js")),g=a(t("../util/AdobeColorTable.js")),v=t("../languages/lang");function a(t){return t&&t.__esModule?t:{default:t}}function o(s){i.default.call(this,s,"swatches","Color swatches");var l,e=[16777215,0,16711680,65280,255,16776960],u=!1,a=document.createElement("ul"),d=document.createElement("div"),c=this;function n(t){var e=document.createElement("div"),n=document.createElement("a"),a=document.createElement("ul"),i=document.createElement("a"),r=document.createElement("a"),o=this;this.getElement=function(){return e},this.setColor=function(t){n.setAttribute("data-color",t),n.style.backgroundColor="#"+function(t,e,n){for(;t.length<n;)t=e+t;return t}(""+Number(t).toString(16),"0",6)},this.setColor(t),n.href="#",n.className="chickenpaint-color-swatch dropdown-toggle",n.setAttribute("data-toggle","dropdown"),i.className="dropdown-item",i.href="#",i.innerHTML=(0,v._)("Remove"),i.addEventListener("click",function(t){t.preventDefault(),(0,p.default)(e).remove(),u=!0}),r.className="dropdown-item",r.href="#",r.innerHTML=(0,v._)("Replace with current color"),r.addEventListener("click",function(t){t.preventDefault(),o.setColor(s.getCurColor().getRgb()),u=!0}),a.className="dropdown-menu",a.appendChild(i),a.appendChild(r),e.className="chickenpaint-color-swatch-wrapper",e.appendChild(n),e.appendChild(a),(0,p.default)(e).on("show.bs.dropdown",function(){var t=(0,p.default)(this).find(".dropdown-toggle");(0,p.default)(this).find(".dropdown-menu").css({top:t.position().top+t.outerHeight(!0)+"px",left:t.position().left+"px"})})}function f(t){var e=new n(t);a.appendChild(e.getElement())}function h(t){var e=document.createElement("span");return e.className="fa fa-"+t,e}this.getSwatches=function(){for(var t=(0,p.default)(".chickenpaint-color-swatch",a),e=new Array(t.length),n=0;n<t.length;n++)e[n]=parseInt(t.get(n).getAttribute("data-color"),10);return e},this.setSwatches=function(t){!function(){for(;a.lastChild;)a.removeChild(a.lastChild)}();for(var e=0;e<t.length;e++)f(t[e]);u=!0},this.isModified=function(){return u},function(){a.className="chickenpaint-color-swatches list-unstyled";for(var t=0;t<e.length;t++)a.appendChild(new n(e[t]).getElement());a.addEventListener("click",function(t){var e=t.target;/chickenpaint-color-swatch/.test(e.className)&&0==t.button&&void 0!==e.getAttribute("data-color")&&(s.setCurColor(new r.default(parseInt(e.getAttribute("data-color"),10))),t.stopPropagation(),t.preventDefault(),c.userIsDoneWithUs())}),a.addEventListener("contextmenu",function(t){var n=t.target;/chickenpaint-color-swatch/.test(n.className)&&(t.preventDefault(),(0,p.default)(n).dropdown("toggle").off("click.bs.dropdown"),(0,p.default)(document).on("click",function t(e){"button"in e&&0!==e.button||((0,p.default)(n).closest(".chickenpaint-color-swatch-wrapper").hasClass("show")&&(0,p.default)(n).closest(".dropdown-toggle").dropdown("toggle"),(0,p.default)(this).off("click",t))}))})}(),this.getBodyElement().appendChild(a),function(){var n=document.createElement("button"),t=document.createElement("button"),e=document.createElement("div"),a=document.createElement("a"),i=document.createElement("a");t.type="button",t.title=(0,v._)("Add the current brush color as a new swatch"),t.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add",t.appendChild(h("plus")),n.type="button",n.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings",n.setAttribute("data-toggle","dropdown"),n.appendChild(h("cog")),a.className="dropdown-item",a.href="#",a.innerHTML=(0,v._)("Save swatches to your computer..."),a.addEventListener("click",function(t){var e,n;t.preventDefault(),e=(new g.default).write(c.getSwatches()),n=new Blob([e],{type:"application/octet-stream"}),m.default.saveAs(n,"oekakiswatches.aco")}),i.className="dropdown-item",i.href="#",i.innerHTML=(0,v._)("Load swatches from your computer..."),i.addEventListener("click",function(t){t.preventDefault(),l.onchange=function(){var t=this.files;if(!(t.length<1)){var e=t[0],n=new FileReader;n.onload=function(){var t=(new g.default).read(this.result);null!=t&&0<t.length?c.setSwatches(t):alert((0,v._)("The swatches could not be read, did you select an .aco file?"))},n.readAsArrayBuffer(e)}},l.click()}),e.className="dropdown-menu",e.appendChild(a),e.appendChild(i);var r=document.createElement("div");r.className="btn-group dropright",r.appendChild(n),r.appendChild(e),(0,p.default)(n).dropdown();var o=function t(e){"button"in e&&0!==e.button||((0,p.default)(r).hasClass("show")&&(0,p.default)(n).dropdown("toggle"),(0,p.default)(this).off("click",t))};(0,p.default)(r).on("show.bs.dropdown",function(){(0,p.default)(document).on("click",o)}),t.addEventListener("click",function(t){f(s.getCurColor().getRgb()),u=!0}),d.className="chickenpaint-color-swatches-buttons",window.File&&window.FileReader&&window.FileList&&window.Blob&&((l=document.createElement("input")).type="file",l.multiple=!1,l.style.display="none",d.appendChild(r),d.appendChild(l)),d.appendChild(t)}(),this.getBodyElement().appendChild(d)}(o.prototype=Object.create(i.default.prototype)).constructor=o,e.exports=n.default},{"../languages/lang":53,"../util/AdobeColorTable.js":54,"../util/CPColor.js":57,"./CPPalette.js":39,"file-saver":228,jquery:229}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,s.default)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-internet-explorer"></span>\n                                        IE 10, 11\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 8 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-internet-explorer"></span>\n                                        IE (Windows 8)\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-firefox"></span>\n                                        Firefox (<a href="https://github.com/thenickdude/chickenpaint/blob/master/help/Firefox pressure support.md" target="_blank">help <i class="fa fa-external-link-alt"></i></a>)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-chrome"></span>\n                                        Chrome\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),n=(0,s.default)(".chickenpaint-wacom-support",e),a=(0,s.default)(".chickenpaint-pointerevents-support",e),i=(0,s.default)(".chickenpaint-tablet-there-are-two-options",e),r=l.default.getRef().isTabletPresent(),o=!!window.hasNativePointerEvents;n.toggleClass("supported",r),r?(a.hide(),i.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&n.addClass("not-supported"),o&&(n.hide(),i.hide()));a.toggleClass("supported",o),a.toggleClass("not-supported",!o),e.modal({show:!1}),e.data("bs.modal").$body=(0,s.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var s=a(t("jquery")),l=a(t("../util/CPWacomTablet.js"));function a(t){return t&&t.__esModule?t:{default:t}}e.exports=n.default},{"../util/CPWacomTablet.js":65,jquery:229}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var O=a(t("jquery")),S=a(t("wolfy87-eventemitter")),L=a(t("../engine/CPGreyBmp.js")),M=a(t("../engine/CPLookUpTable.js")),A=a(t("./CPPalette.js")),R=a(t("./CPSlider.js")),B=t("../languages/lang");function a(t){return t&&t.__esModule?t:{default:t}}function j(t,e){var n=document.createElement("div"),a=document.createElement("label");return n.className="form-check",t.className="form-check-input",a.className="form-check-label",a.setAttribute("for",t.id),a.appendChild(t),a.appendChild(document.createTextNode(e)),n.appendChild(t),n.appendChild(a),n}function i(e){A.default.call(this,e,"textures","Textures");var a,u,n,t,i,r,o,s,l,d,c,f,h=64,p=32,m=!1,g=!1,v=0,y=0,b=document.createElement("div"),w=this.getBodyElement();function _(t){for(var e=0;e<t.length;e++){var n=new C(t[e],p,p);n.on("click",function(){a=this.texture,x()}),b.appendChild(n.getElement())}}function E(t){for(var e=new L.default(t,t,8),n=1;n<t*t;n++)e.data[n]=255;return e}function T(t){for(var e=2*t,n=new L.default(e,e,8),a=0;a<e;a++)for(var i=0;i<e;i++)n.data[a+i*e]=(~~(a/t)+~~(i/t))%2==0?0:255;return n}function k(t,e){for(var n=new L.default(e,e,8),a=0;a<e*e;a++)t<=~~(a%e)&&(n.data[a]=255);return n}function P(t,e){for(var n=new L.default(e,e,8),a=0;a<e*e;a++)t<=a/e&&(n.data[a]=255);return n}function x(){if(null!=a){u=a.clone(),m&&u.mirrorHorizontally();var t=new M.default;t.loadBrightnessContrast(v,y),g&&t.invert(),u.applyLUT(t)}else u=null;e.getArtwork().setBrushTexture(u),null!=n&&n.updateTexture()}function C(t,e,n){var a=document.createElement("canvas"),i=a.getContext("2d"),r=this;this.setTexture=function(t){this.texture=t,this.paint()},this.getElement=function(){return a},this.paint=function(){null!=this.texture?i.fillStyle=i.createPattern(this.texture.getAsCanvas(),"repeat"):i.fillStyle="white",i.fillRect(0,0,a.width,a.height)},a.addEventListener("click",function(){r.emit("click")}),a.width=e,a.height=n,this.setTexture(t)}(C.prototype=Object.create(S.default.prototype)).constructor=C,n=new function(){var t,e=document.createElement("div"),a=document.createElement("input"),i=document.createElement("input"),r=new R.default(0,200,!0),o=new R.default(0,200,!0),n=new C(null,h,h),s=document.createElement("button");function l(){a.checked=g,i.checked=m,r.setValue(100*v+100),o.setValue(100*y+100)}this.updateTexture=function(){s.disabled=null==u,n.setTexture(u)},this.getElement=function(){return e},e.className="chickenpaint-texture-options",e.appendChild(n.getElement()),s.type="button",s.className="btn btn-light btn-sm",s.innerHTML=(0,B._)("Customize"),t=function(){var t=document.createElement("div");t.className="chickenpaint-texture-controls",a.id="chickenpaint-chk-texture-invert",a.type="checkbox",a.addEventListener("click",function(t){g=this.checked,x()}),t.appendChild(j(a,(0,B._)("Inverse"))),i.id="chickenpaint-chk-texture-mirror",i.type="checkbox",i.addEventListener("click",function(t){m=this.checked,x()}),t.appendChild(j(i,(0,B._)("Mirror"))),r.title=function(t){return(0,B._)("Brightness")+": "+(t-100)+"%"},r.on("valueChange",function(t){v=(t-100)/100,x()}),t.appendChild(r.getElement()),o.title=function(t){return(0,B._)("Contrast")+": "+(t-100)+"%"},o.on("valueChange",function(t){y=(t-100)/100,x()}),t.appendChild(o.getElement());var e=document.createElement("button"),n=document.createElement("button");return e.innerHTML="Ok",e.className="btn btn-primary btn-sm",e.type="button",e.addEventListener("click",function(t){(0,O.default)(s).popover("hide")}),t.appendChild(e),t.appendChild(document.createTextNode(" ")),n.innerHTML="Reset",n.className="btn btn-secondary btn-sm",n.type="button",n.addEventListener("click",function(t){y=v=0,g=m=!1,l(),x()}),t.appendChild(n),l(),t}(),(0,O.default)(s).popover({html:!0,content:function(){return t},trigger:"manual",container:w}).on("click",function(){(0,O.default)(this).popover("toggle")}),e.appendChild(s),this.updateTexture()},w.appendChild(n.getElement()),b.className="chickenpaint-texture-swatches",w.appendChild(b),_((t=[null],(i=new L.default(2,2,8)).data[0]=255,i.data[3]=255,t.push(i),t.push(E(2)),t.push(E(3)),t.push(E(4)),t.push(E(6)),t.push(E(8)),t.push(k(1,2)),t.push(k(2,4)),t.push(P(1,2)),t.push(P(2,4)),t.push(T(2)),t.push(T(4)),t.push(T(8)),t.push(T(16)),t)),r=e.getResourcesRoot()+"gfx/textures32.png",s=o=32,l=2,d=function(t){_(t)},c=new Image,f=[],c.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=c.width,t.height=c.height;for(var n=0;n<l;n++){e.drawImage(c,0,n*s,o,s,0,0,o,s);try{for(var a=e.getImageData(0,0,o,s),i=new L.default(o,s,8),r=0;r<o*s;r++)i.data[r]=a.data[4*r];f.push(i)}catch(t){console.log(t)}}d(f)},c.src=r}(i.prototype=Object.create(A.default.prototype)).constructor=i,e.exports=n.default},{"../engine/CPGreyBmp.js":14,"../engine/CPLookUpTable.js":18,"../languages/lang":53,"./CPPalette.js":39,"./CPSlider.js":44,jquery:229,"wolfy87-eventemitter":248}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var s=a(t("jquery")),l=a(t("../../lib/keymaster.js")),u=a(t("./CPPalette.js")),d=a(t("../ChickenPaint.js")),c=t("../languages/lang");function a(t){return t&&t.__esModule?t:{default:t}}function i(n){u.default.call(this,n,"tool","Tools");var a=this,i=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:d.default.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:d.default.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",shortcut:"f",mode:d.default.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",mode:d.default.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:d.default.M_COLOR_PICKER},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",mode:d.default.M_DRAW,tool:d.default.T_BLUR},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",mode:d.default.M_DRAW,tool:d.default.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",selected:!0,mode:d.default.M_DRAW,tool:d.default.T_PEN},{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",mode:d.default.M_DRAW,tool:d.default.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",mode:d.default.M_DRAW,tool:d.default.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:d.default.M_DRAW,tool:d.default.T_ERASER},{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",mode:d.default.M_DRAW,tool:d.default.T_SOFTERASER},{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",mode:d.default.M_DRAW,tool:d.default.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",mode:d.default.M_DRAW,tool:d.default.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge (tool)",shortcut:"o",mode:d.default.M_DRAW,tool:d.default.T_DODGE},{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn (tool)",shortcut:"p",mode:d.default.M_DRAW,tool:d.default.T_BURN},{className:"chickenpaint-tool-rotate-canvas",command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:d.default.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pan-canvas",command:"CPPanCanvas",toolTip:"Grab canvas",mode:d.default.M_PAN_CANVAS}],r=document.createElement("ul");function o(t){if("LI"==this.nodeName){var e=i[parseInt(this.getAttribute("data-buttonIndex"),10)];n.actionPerformed({action:e.command}),a.userIsDoneWithUs()}}n.on("modeChange",function(t){var e=a.getBodyElement();(0,s.default)("li",e).removeClass("selected"),t==d.default.M_DRAW?(0,s.default)("li[data-tool="+n.getCurTool()+"]",e).addClass("selected"):(0,s.default)("li[data-mode="+t+"]",e).addClass("selected")}),n.on("toolChange",function(t){var e=a.getBodyElement();n.getCurMode()==d.default.M_DRAW&&((0,s.default)("li",e).removeClass("selected"),(0,s.default)("li[data-tool="+t+"]",e).addClass("selected"))}),function(){var t=a.getBodyElement();for(var e in r.className="chickenpaint-tools list-unstyled",i)!function(t){var e=i[t],n=document.createElement("li"),a=document.createElement("div");n.className="chickenpaint-toolbar-button "+e.className,n.setAttribute("data-buttonIndex",t),n.setAttribute("data-mode",e.mode),void 0!==e.tool&&n.setAttribute("data-tool",e.tool),n.title=(0,c._)(e.toolTip),e.shortcut&&(n.title+=" ("+e.shortcut.toUpperCase()+")",(0,l.default)(e.shortcut,function(){return o.call(n),!1})),e.selected&&(n.className=n.className+" selected"),a.className="chickenpaint-toolbar-button-icon",n.appendChild(a),r.appendChild(n)}(e);(0,s.default)(r).on("click","li",o).on("dblclick","li",function(t){var e=i[parseInt(this.getAttribute("data-buttonIndex"),10)];e.commandDoubleClick&&n.actionPerformed({action:e.commandDoubleClick})}),t.appendChild(r)}()}(i.prototype=Object.create(u.default.prototype)).constructor=i,e.exports=n.default},{"../../lib/keymaster.js":67,"../ChickenPaint.js":1,"../languages/lang":53,"./CPPalette.js":39,jquery:229}],51:[function(t,e,n){e.exports={"Dodge (tool)":"Dodge","Burn (tool)":"Burn","Color (picker)":"Color","Color swatches (shorter)":"Swatches"}},{}],52:[function(t,e,n){e.exports={File:"ファイル","Save to my computer":"PCに保存","Post Oekaki":"お絵かきを投稿",Edit:"編集",Undo:"取り消し",Redo:"やり直し",Cut:"切り取り",Copy:"コピー","Clear history":"履歴削除","Copy merged":"結合コピー",Paste:"貼り付け","Select all":"すべて選択",Deselect:"選択解除",Transform:"変形",Layers:"レイヤー",Duplicate:"複製","Merge down":"下のレイヤーと結合","Merge group":"グループ結合","Merge all layers":"全レイヤー結合","Add layer mask":"レイヤーマスク追加","Delete mask":"レイヤーマスク削除","Delete layer mask":"レイヤーマスク削除","Apply mask":"レイヤーマスク適用","Apply layer mask":"レイヤーマスク適用","Disable mask":"レイヤーマスク無効化","Enable mask":"レイヤーマスク有効化","Clip to the layer below":"下のレイヤーでクリッピング","Unclip from the layer below":"クリッピング解除",Effects:"効果",Clear:"消去",Fill:"塗り潰し","Flip horizontal":"左右反転","Flip vertical":"上下反転",Invert:"ネガポジ反転","Box blur...":"ぼかし","Blur amount (pixels)":"ぼかし量(ピクセル単位)","Iterations (1-8, larger gives smoother blur)":"反復(1-8,大きいほどぼかしが滑らか)","Monochromatic noise":"単色ノイズ","Color noise":"カラーノイズ",View:"表示","Full-screen mode":"フルスクリーンモード","Zoom in":"拡大","Zoom out":"縮小","Zoom 100%":"100%","Smooth-out zoomed canvas":"ズームをなめらかに表示する","Show grid":"グリッドを表示","Grid options...":"グリッドの設定",Palettes:"パレット",Rearrange:"初期化","Toggle palettes":"表示非表示切り替え","Show tool options":"ツールオプション","Show color":"カラー","Show layers":"レイヤー","Show misc":"操作","Show stroke":"ストローク","Show swatches":"カラーセット","Show textures":"テクスチャ","Show tools":"ツール",Help:"ヘルプ","Tablet support":"タブレットサポート",Shortcuts:"ショートカット",About:"ChickenPaintについて",Misc:"操作","Round Pixelated":"円ピクセル","Round Hard Edge":"円ハードエッジ","Round Soft":"円ソフト","Square Pixelated":"角ピクセル","Square Hard Edge":"角ハードエッジ","Color (picker)":"カラー","Tool options":"ツールオプション","Brush size":"ブラシサイズ",Opacity:"不透明度",Color:"色補充",Blend:"混色",Spacing:"間隔",Scattering:"散乱",Smoothing:"手ぶれ補正","Color swatches":"カラーセット","Color swatches (shorter)":"カラーセット",Remove:"削除","Replace with current color":"選択中の色に置き換え","Save swatches to your computer...":"カラーセットをPCに保存","Load swatches from your computer...":"カラーセットをPCから読み込み","Add the current brush color as a new swatch":"選択中の色を追加","Sample all layers":"全レイヤー参照","Lock transparency":"透明部分を保護",Textures:"テクスチャ",Customize:"カスタマイズ",Inverse:"ネガポジ反転",Mirror:"左右反転",Brightness:"輝度",Contrast:"コントラスト",Reset:"リセット","Blending mode":"合成モード",Normal:"通常",Multiply:"乗算",Add:"加算",Screen:"スクリーン",Lighten:"比較(明)",Darken:"比較(暗)",Subtract:"減算",Dodge:"覆い焼き",Burn:"焼き込み",Overlay:"オーバーレイ","Hard Light":"ハードライト","Soft Light":"ソフトライト","Vivid Light":"ビビッドライト","Linear Light":"リニアライト","Pin Light":"ピンライト",Passthrough:"通過",Stroke:"ストローク","Free-hand":"フリーハンド","Straight line":"直線","Bezier curve":"Bz（ベジェ）曲線",Tools:"ツール",Marquee:"選択範囲","Move tool":"移動","Flood fill":"塗り潰し","Gradient fill":"グラデーション","Color picker":"スポイト","Rotate canvas":"キャンバスの回転","Grab canvas":"キャンバスの位置",Pencil:"鉛筆",Pen:"ペン",Airbrush:"エアブラシ",Waterpaint:"水彩",Eraser:"消しゴム","Soft eraser":"薄消し",Smudge:"指先",Blender:"混色","Dodge (tool)":"覆い焼き","Burn (tool)":"焼き込み",Blur:"ぼかし","Grid options":"グリッドの設定","Grid size":"グリッドサイズ","Rename...":"名前を変更","Add layer":"新規レイヤー","Delete layer":"レイヤー削除","Add group":"新規グループ","Delete group":"グループ削除","Add mask":"レイヤーマスク追加",Gradient:"グラデーション作成","Please enter a color in hex format":"16進形式で色を入力してください（#xxxxxxの形）",Cancel:"キャンセル",Ok:"OK",Okay:"OK",OK:"OK","Are you sure you want to send your drawing to the server and finish drawing now?":"お絵かきをサーバーに送信します。終了してもよろしいですか？","Your drawing has unsaved changes! Are you sure to want to navigate away?":"お絵かきに未保存の変更があります。終了してもよろしいですか？","Save Oekaki":"保存","Saving drawing...":"お絵かきを保存中…","Preparing your drawing to be saved, please wait...":"お絵かきを保存する準備をしています。しばらくお待ちください…","Drawing saved!":"お絵かきを保存しました！","Your drawing has been saved, would you like to post it to the forum now?":"お絵かきが保存されました。フォーラムへ投稿しますか？","Yes, post it now":"はい、投稿します","No, keep drawing":"まだ描きます","No, quit and I'll finish it later":"アプリを終了し続きを後で描く","Your drawing has been saved, would you like to view it on the forum now?":"お絵かきが保存されました。フォーラムへ投稿しますか？","Yes, view the post":"はい、投稿します。","Your drawing has been saved, redirecting you to view your new post now...":"お絵かきが保存されました。投稿先に移動します。","Sorry, your drawing could not be saved, please try again later.":"お絵かきが保存できませんでした。再度投稿してみてください。"}},{}],53:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.setLanguage=c,n.currentLanguage=function(){return d},n.guessLanguage=function(){try{if("undefined"!=typeof navigator){var t=navigator.languages;Array.isArray(t)||(t=[t]);var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}(t);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=/^(..)([-_].+)?$/.exec(a);if(i){if(i[1]=i[1].toLowerCase(),i[1]in r)return void c(a);if("en"===i[1])return void c("en")}}}catch(t){n.e(t)}finally{n.f()}}}catch(t){console.error(t)}},n._=function(t){if(t in o)return o[t];return t};var a=i(t("./en.json"));function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function i(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var o=i?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=t[r]}return a.default=t,n&&n.set(t,a),a}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var r={ja:i(t("./ja.json")),en:a},o=a,d="en";function c(t){(t=t.replace(/[-_].+$/,"").toLowerCase())in r?(o=r[t],d=t):(o=a,d="en")}},{"./en.json":51,"./ja.json":52}],54:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var a,l=(a=t("./ArrayDataStream.js"))&&a.__esModule?a:{default:a};function i(){}i.prototype.read=function(t){if(null==t)return null;var e,n=new l.default(new Uint8Array(t)),a=[];if(1!=n.readU16BE())return null;e=n.readU16BE();for(var i=0;i<e;i++){if(0==n.readU16BE()){var r=255*n.readU16BE()/65535,o=255*n.readU16BE()/65535,s=255*n.readU16BE()/65535;n.readU16BE(),a.push(r<<16|o<<8|s)}}return a},i.prototype.write=function(t){var e=new Uint8Array(4+10*t.length),n=new l.default(e);n.writeU16BE(1),n.writeU16BE(t.length);for(var a=0;a<t.length;a++){var i=t[a];n.writeU16BE(0),n.writeU16BE(257*(i>>16&255)),n.writeU16BE(257*(i>>8&255)),n.writeU16BE(257*(255&i)),n.writeU16BE(0)}return n.getAsDataArray()},e.exports=n.default},{"./ArrayDataStream.js":55}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=a;function a(t,e,n){this.data=t,this.eof=!1,this.start=void 0===e?0:e,this.end=void 0===n?t.length:n,this.pos=this.start}a.prototype.readChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos++]):(this.eof=!0,-1)},a.prototype.readU8=a.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)},a.prototype.readS8=function(){return 128&(t=this.readByte())?4294967040|t:t;var t},a.prototype.unreadChar=function(t){this.pos--},a.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)},a.prototype.readString=function(t){var e,n=new Array(t);for(e=0;e<t;e++)n[e]=this.readChar();return n.join("")},a.prototype.readS16=function(){var t,e=this.readByte(),n=this.readByte();return 32768&(t=e<<8|n)?4294901760|t:t},a.prototype.readU16BE=function(){return this.readByte()<<8|this.readByte()},a.prototype.readU16LE=function(){var t=this.readByte();return this.readByte()<<8|t},a.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0},a.prototype.readU32LE=function(){var t=this.readByte(),e=this.readByte(),n=this.readByte();return(this.readByte()<<24|n<<16|e<<8|t)>>>0},a.prototype.readBytes=function(t){var e=this.data.subarray(this.pos,this.pos+t);return this.pos+=t,this.pos>this.end&&(this.eof=!0),e},a.prototype.skip=function(t){this.pos+=t,this.pos>this.end&&(this.eof=!0)},a.prototype.seek=function(t){this.pos=t},a.prototype.writeBytes=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t[e]},a.prototype.writeU8=a.prototype.writeByte=function(t){this.data[this.pos++]=t},a.prototype.writeU16LE=function(t){this.data[this.pos++]=t,this.data[this.pos++]=t>>8},a.prototype.writeU16BE=function(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t},a.prototype.writeU32BE=function(t){this.data[this.pos++]=t>>24,this.data[this.pos++]=t>>16,this.data[this.pos++]=t>>8,this.data[this.pos++]=t},a.prototype.writeU32LE=function(t){this.data[this.pos++]=t,this.data[this.pos++]=t>>8,this.data[this.pos++]=t>>16,this.data[this.pos++]=t>>24},a.prototype.writeDoubleBE=function(t){for(var e=new Uint8Array(new Float64Array([t]).buffer),n=e.length-1;0<=n;n--)this.writeByte(e[n])},a.prototype.writeFloatBE=function(t){for(var e=new Uint8Array(new Float32Array([t]).buffer),n=e.length-1;0<=n;n--)this.writeByte(e[n])},a.prototype.writeString=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t.charCodeAt(e)},a.prototype.writeUnsignedIntBE=function(t,e){switch(void 0===e&&(e=this.measureUnsignedInt(t)),e){case 5:this.writeU8(Math.floor(t/4294967296));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw"Bad UINT size "+e}},a.prototype.measureUnsignedInt=function(t){return t<256?1:t<65536?2:t<1<<24?3:t<4294967296?4:5},a.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer"},a.prototype.EOF=-1,e.exports=n.default},{}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var p,m,g,v,y,b,w,_,E=this;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;this.compute=function(t,e,n){var a,i,r,o,s,l,u,d,c,f;s=2*(r=(i=3*(a=1/n))*a),l=6*(o=a*a*a),u=E.x0-2*E.x1+E.x2,d=E.y0-2*E.y1+E.y2,c=3*(E.x1-E.x2)-E.x0+E.x3,f=3*(E.y1-E.y2)-E.y0+E.y3,p=E.x0,y=E.y0,m=(E.x1-E.x0)*i+u*r+c*o,b=(E.y1-E.y0)*i+d*r+f*o,g=u*s+c*l,w=d*s+f*l,v=c*l,_=f*l,t[0]=p,e[0]=y;for(var h=1;h<n;h++)p+=m,y+=b,m+=g,b+=w,g+=v,w+=_,t[h]=p,e[h]=y}},e.exports=n.default},{}],57:[function(t,e,n){"use strict";function a(t){if(0==t.saturation)return t.value<<16|t.value<<8|t.value;var e=t.hue/60;e-=Math.floor(e);var n=t.saturation/255,a=~~(t.value*(1-n)),i=~~(t.value*(1-n*e)),r=~~(t.value*(1-n*(1-e)));switch(~~(t.hue/60)){case 0:return t.value<<16|r<<8|a;case 1:return i<<16|t.value<<8|a;case 2:return a<<16|t.value<<8|r;case 3:return a<<16|i<<8|t.value;case 4:return r<<16|a<<8|t.value;case 5:return t.value<<16|a<<8|i;default:return 0}}function i(t){this.rgb=0,this.hue=0,this.saturation=0,this.value=0,this.setRgb(t||0)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype.getRgb=function(){return this.rgb},i.prototype.getSaturation=function(){return this.saturation},i.prototype.getHue=function(){return this.hue},i.prototype.getValue=function(){return this.value},i.prototype.setRgbComponents=function(t,e,n){this.setRgb(t<<16|e<<8|n)},i.prototype.setRgb=function(t){!function(t,e){var n=t>>16&255,a=t>>8&255,i=255&t;e.value=Math.max(n,Math.max(a,i));var r=Math.min(n,Math.min(a,i));if(0==e.value?e.saturation=0:e.saturation=~~((e.value-r)/e.value*255),0==e.saturation)e.hue=0;else{var o=(e.value-n)/(e.value-r),s=(e.value-a)/(e.value-r),l=(e.value-i)/(e.value-r),u=0;e.value==n&&(u=l-s),e.value==a&&(u=2+o-l),e.value==i&&(u=4+s-o),(u*=60)<0&&(u+=360),e.hue=~~u}}(this.rgb=t,this)},i.prototype.setHsv=function(t,e,n){this.hue=t,this.saturation=e,this.value=n,this.rgb=a(this)},i.prototype.setHue=function(t){this.hue=t,this.rgb=a(this)},i.prototype.setSaturation=function(t){this.saturation=t,this.rgb=a(this)},i.prototype.setValue=function(t){this.value=t,this.rgb=a(this)},i.prototype.setGreyscale=function(t){this.rgb=i.greyToRGB(t),this.hue=0,this.saturation=0,this.value=t},i.prototype.clone=function(){var t=new i(0);return t.copyFrom(this),t},i.prototype.copyFrom=function(t){this.rgb=t.rgb,this.hue=t.hue,this.saturation=t.saturation,this.value=t.value},i.prototype.isEqual=function(t){return this.rgb==t.rgb&&this.hue==t.hue&&this.saturation==t.saturation&&this.value==t.value},i.greyToRGB=function(t){return t|t<<8|t<<16},e.exports=n.default},{}],58:[function(t,e,n){"use strict";function a(t,e,n){this.r=t,this.g=e,this.b=n}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))},a.prototype.mixWith=function(t,e){this.r=this.r*(1-e)+t.r*e,this.g=this.g*(1-e)+t.g*e,this.b=this.b*(1-e)+t.b*e},a.prototype.clone=function(){return new a(this.r,this.g,this.b)},a.createFromInt=function(t){return new a((t>>>16&255)/255,(t>>>8&255)/255,(255&t)/255)},e.exports=n.default},{}],59:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isCanvasInterpolationSupported=function(){return!!i((0,a.createCanvas)(0,0).getContext("2d"))},n.setCanvasInterpolation=function(t,e){var n=i(t);n&&(t[n]=e)},n.isEventSupported=function(t){var e=t in window;if(!e){var n=document.createElement("div");n.setAttribute(t,"return;"),e="function"==typeof n[t]}return e},n.isCanvasSupported=function(){var t=(0,a.createCanvas)(0,0);return!(!t.getContext||!t.getContext("2d"))},n.isFlexboxSupported=function(){return("string"==typeof document.body.style.flexBasis||"string"==typeof document.body.style.msFlexDirection)&&!/Presto/.test(navigator.userAgent)};var a=t("./Canvas.js");function i(t){for(var e=["imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled"],n=0;n<e.length;n++)if(e[n]in t)return e[n];return null}},{"./Canvas.js":2}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var a;(a=t("./CPTransform.js"))&&a.__esModule;function i(t){this.points=t||[]}i.prototype.clone=function(){for(var t=new i(new Array(this.points.length)),e=0;e<this.points.length;e++)t.points[e]={x:this.points[e].x,y:this.points[e].y};return t},i.prototype.getTransformed=function(t){for(var e=new i(new Array(this.points.length)),n=0;n<this.points.length;n++)e.points[n]=t.getTransformedPoint(this.points[n]);return e},i.prototype.getCenter=function(){for(var t=this.points[0].x,e=this.points[0].y,n=1;n<this.points.length;n++)t+=this.points[n].x,e+=this.points[n].y;return{x:t/this.points.length,y:e/this.points.length}},i.prototype.containsPoint=function(t){var e,n,a=!1;for(e=0,n=this.points.length-1;e<this.points.length;n=e++)this.points[e].y>t.y!=this.points[n].y>t.y&&t.x<(this.points[n].x-this.points[e].x)*(t.y-this.points[e].y)/(this.points[n].y-this.points[e].y)+this.points[e].x&&(a=!a);return a},e.exports=n.default},{"./CPTransform.js":63}],61:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var i,r=!1;this.nextGaussian=function(){if(r)return r=!1,i;for(var t,e,n;t=2*Math.random()-1,e=2*Math.random()-1,1<=(n=t*t+e*e)||0==n;);var a=Math.sqrt(-2*Math.log(n)/n);return i=e*a,r=!0,t*a}},e.exports=n.default},{}],62:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,a){this.left=t,this.top=e,this.right=n,this.bottom=a}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=c).prototype.makeEmpty=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},c.prototype.union=function(t){this.isEmpty()?this.set(t):t.isEmpty()||(this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.right=Math.max(this.right,t.right),this.bottom=Math.max(this.bottom,t.bottom))},c.prototype.getUnion=function(t){var e=this.clone();return e.union(t),e},c.prototype.getIntersection=function(t){return new c(Math.max(this.left,t.left),Math.max(this.top,t.top),Math.min(this.right,t.right),Math.min(this.bottom,t.bottom))},c.prototype.clipTo=function(t){return this.isEmpty()||(t.isEmpty()?this.makeEmpty():(this.left=Math.min(Math.max(this.left,t.left),t.right),this.top=Math.min(Math.max(this.top,t.top),t.bottom),this.right=Math.max(Math.min(this.right,t.right),t.left),this.bottom=Math.max(Math.min(this.bottom,t.bottom),t.top))),this},c.prototype.containsPoint=function(t){return!(t.x<this.left||t.y<this.top||t.x>=this.right||t.y>=this.bottom)},c.prototype.isInside=function(t){return this.left>=t.left&&this.top>=t.top&&this.right<=t.right&&this.bottom<=t.bottom},c.prototype.clipSourceDest=function(t,e){e.right=e.left+t.getWidth(),e.bottom=e.top+t.getHeight(),this.isEmpty()||e.left>=this.right||e.top>=this.bottom||e.right<=this.left||e.bottom<=this.top?(t.makeEmpty(),e.makeEmpty()):(e.right>this.right&&(t.right-=e.right-this.right,e.right=this.right),e.bottom>this.bottom&&(t.bottom-=e.bottom-this.bottom,e.bottom=this.bottom),e.left<this.left&&(t.left+=this.left-e.left,e.left=this.left),e.top<this.top&&(t.top+=this.top-e.top,e.top=this.top))},c.prototype.getWidth=function(){return this.right-this.left},c.prototype.getHeight=function(){return this.bottom-this.top},c.prototype.getArea=function(){return this.getWidth()*this.getHeight()},c.prototype.isEmpty=function(){return this.right<=this.left||this.bottom<=this.top},c.prototype.set=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},c.prototype.clone=function(){return new c(this.left,this.top,this.right,this.bottom)},c.prototype.translate=function(t,e){return this.left+=t,this.right+=t,this.top+=e,this.bottom+=e,this},c.prototype.getTranslated=function(t,e){var n=this.clone();return n.translate(t,e),n},c.prototype.moveTo=function(t,e){this.translate(t-this.left,e-this.top)},c.prototype.equals=function(t){return this.left==t.left&&this.right==t.right&&this.top==t.top&&this.bottom==t.bottom},c.prototype.grow=function(t,e){this.left-=t,this.right+=t,this.top-=e,this.bottom+=e},c.prototype.toString=function(){return"("+this.left+","+this.top+","+this.right+","+this.bottom+")"},c.prototype.toPoints=function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]},c.prototype.roundNearest=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this},c.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this},c.createBoundingBox=function(t){if(0===t.length)return new c(0,0,0,0);for(var e=new c(t[0].x,t[0].y,t[0].x,t[0].y),n=1;n<t.length;n++)e.left=Math.min(e.left,t[n].x),e.top=Math.min(e.top,t[n].y),e.right=Math.max(e.right,t[n].x),e.bottom=Math.max(e.bottom,t[n].y);return e},c.prototype.subtract=function(t){return c.subtract(this,t)},c.subtract=function(t,e){t instanceof c&&(t=[t]),e instanceof c&&(e=[e]);for(var n=t.slice(0),a=0;a<e.length;a++)for(var i=e[a],r=n.length,o=0;o<r;o++){var s=n[o];if(s){var l=s.getIntersection(i);if(!l.isEmpty()){var u=[];if(s.top<i.top&&u.push(new c(s.left,s.top,s.right,l.top)),s.bottom>i.bottom&&u.push(new c(s.left,l.bottom,s.right,s.bottom)),s.left<i.left&&u.push(new c(s.left,l.top,l.left,l.bottom)),s.right>i.right&&u.push(new c(l.right,l.top,s.right,l.bottom)),0<(u=u.filter(function(t){return!t.isEmpty()})).length){n[o]=u[0];for(var d=1;d<u.length;d++)n.push(u[d])}else n[o]=null}}}return n.filter(function(t){return null!=t})},c.union=function(t){var e;if(t instanceof c)e=[t];else{e=t.slice(0);for(var n=0;n<e.length;n++){var a=e[n],i=e.length;if(a)for(var r=n+1;r<i;r++){var o=e[r];if(o)if(!a.getIntersection(o).isEmpty()){var s=c.subtract(o,a);e[r]=s[0];for(var l=1;l<s.length;l++)e.push(s[l])}}}}return e.filter(function(t){return t&&!t.isEmpty()})},"object"==("undefined"==typeof window?"undefined":a(window))&&(window.cpRectGarbage=new c(1.5,2.5,3.5,4.5)),e.exports=n.default},{}],63:[function(t,e,n){"use strict";function a(){this.setToIdentity()}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]},a.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=r,this.m[5]=o},a.prototype.preMultiply=function(t){var e=t.m[0]*this.m[0]+t.m[2]*this.m[1],n=t.m[1]*this.m[0]+t.m[3]*this.m[1],a=t.m[0]*this.m[2]+t.m[2]*this.m[3],i=t.m[1]*this.m[2]+t.m[3]*this.m[3],r=t.m[0]*this.m[4]+t.m[2]*this.m[5]+t.m[4],o=t.m[1]*this.m[4]+t.m[3]*this.m[5]+t.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=r,this.m[5]=o},a.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,a=-this.m[2]*t,i=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=r,this.m[5]=o},a.prototype.getInverted=function(){var t=new a;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t.invert(),t},a.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),a=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,r=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;this.m[0]=a,this.m[1]=i,this.m[2]=r,this.m[3]=o},a.prototype.rotateAroundPoint=function(t,e,n){this.translate(e,n),this.rotate(t),this.translate(-e,-n)},a.prototype.translate=function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},a.prototype.scale=function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},a.prototype.scaleAroundPoint=function(t,e,n,a){this.translate(n,a),this.scale(t,e),this.translate(-n,-a)},a.prototype.shear=function(t,e){var n=this.m[0]+this.m[2]*e,a=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;this.m[0]=n,this.m[1]=a,this.m[2]=i,this.m[3]=r},a.prototype.getTransformedPoint=function(t){return{x:t.x*this.m[0]+t.y*this.m[2]+this.m[4],y:t.x*this.m[1]+t.y*this.m[3]+this.m[5]}},a.prototype.transformPoints=function(t){for(var e=0;e<t.length;e++)t[e]=this.getTransformedPoint(t[e])},a.prototype.getTranslateX=function(){return this.m[4]},a.prototype.getTranslateY=function(){return this.m[5]},a.prototype.clone=function(){var t=new a;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t},a.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},a.prototype.decompose=function(){var t=this.getDeterminant(),e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/e),scale:{x:e,y:t/e},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(e*e)),y:0}}},a.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"},Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1},e.exports=n.default},{}],64:[function(t,e,n){"use strict";function a(t,e){this.x=t,this.y=e}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.normalize=function(){var t=this.getLength();return this.x/=t,this.y/=t,this},a.prototype.getDotProduct=function(t){return this.x*t.x+this.y*t.y},a.prototype.scale=function(t){return this.x*=t,this.y*=t,this},a.prototype.getScaled=function(t){var e=new a(this.x,this.y);return e.scale(t),e},a.prototype.getRounded=function(){return new a(Math.round(this.x),Math.round(this.y))},a.prototype.getTruncated=function(){return new a(~~this.x,~~this.y)},a.prototype.getPerpendicular=function(){return new a(-this.y,this.x)},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},a.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},a.prototype.getSum=function(t){return new a(this.x+t.x,this.y+t.y)},a.subtractPoints=function(t,e){return new a(t.x-e.x,t.y-e.y)},e.exports=n.default},{}],65:[function(t,e,n){"use strict";function a(){var e,n=null,a=this;this.isPen=function(){var t;return!!n&&(1==(t=n.pointerType)||3==t)},this.getPressure=function(){return n?n.pressure:1},this.pluginLoaded=function(){console.log("Wacom tablet support loaded!"),n=e.penAPI},this.isTabletPresent=function(){return!!n},this.detectTablet=function(){if(!/Chrome/i.test(navigator.userAgent)||/OPR/.test(navigator.userAgent)){if(console.log("Attempting to load Wacom tablet support..."),"classid"in(e=document.createElement("object")))e.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var t=document.createElement("param");t.name="onload",t.value="onWacomPluginLoaded",e.appendChild(t),e.type="application/x-wacomtabletplugin"}e.style.position="absolute",e.style.visibility="hidden",e.onload="onWacomPluginLoaded",document.body.appendChild(e),setTimeout(function(){a.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},5e3)}else console.log("Not attempting to load Wacom tablet plugin, since this is Chrome")}}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).getRef=function(){return null==a.instance&&(a.instance=new a),a.instance},window.onWacomPluginLoaded=function(){a.getRef().pluginLoaded()},e.exports=n.default},{}],66:[function(t,e,n){"use strict";function a(i,r,o,s){var l,u=0;return"boolean"!=typeof r&&(s=o,o=r,r=void 0),function(){var t=this,e=+new Date-u,n=arguments;function a(){u=+new Date,o.apply(t,n)}s&&!l&&a(),l&&clearTimeout(l),void 0===s&&i<e?a():!0!==r&&(l=setTimeout(s?function(){l=void 0}:a,void 0===s?i-e:i))}}Object.defineProperty(n,"__esModule",{value:!0}),n.throttle=a,n.debounce=function(t,e,n){return void 0===n?a(t,e,!1):a(t,n,!1!==e)}},{}],67:[function(t,w,e){"use strict";!function(e){var s,l={},u={16:!1,18:!1,17:!1,91:!1},n="all",d={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":function(){return"firefox"==t()?173:189},"=":function(){return"firefox"==t()?61:187},";":186,"'":222,"[":219,"]":221,"\\":220},c=function(t){var e=a[t]||t.toUpperCase().charCodeAt(0);return"function"==typeof e?e():e},f=[];for(s=1;s<20;s++)a["f"+s]=111+s;function h(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function p(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function t(){if(0<navigator.userAgent.toLowerCase().indexOf("firefox"))return"firefox"}var m={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function i(t){var e,n,a,i,r,o;if(e=t.keyCode,-1==h(f,e)&&f.push(e),93!=e&&224!=e||(e=91),e in u)for(a in u[e]=!0,d)d[a]==e&&(g[a]=!0);else if(function(t){for(s in u)u[s]=t[m[s]]}(t),g.filter.call(this,t)&&e in l)for(o=v(),i=0;i<l[e].length;i++)if((n=l[e][i]).scope==o||"all"==n.scope){for(a in r=0<n.mods.length,u)(!u[a]&&-1<h(n.mods,+a)||u[a]&&-1==h(n.mods,+a))&&(r=!1);(0!=n.mods.length||u[16]||u[18]||u[17]||u[91])&&!r||!1===n.method(t,n)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function g(t,e,n){var a,i;a=y(t),void 0===n&&(n=e,e="all");for(var r=0;r<a.length;r++)i=[],1<(t=a[r].split("+")).length&&(i=b(t),t=[t[t.length-1]]),t=t[0],(t=c(t))in l||(l[t]=[]),l[t].push({shortcut:a[r],scope:e,method:n,key:a[r],mods:i})}for(s in d)g[s]=!1;function v(){return n||"all"}function y(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function b(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=d[e[n]];return e}function r(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}r(document,"keydown",function(t){i(t)}),r(document,"keyup",function(t){var e,n=t.keyCode,a=h(f,n);if(0<=a&&f.splice(a,1),93!=n&&224!=n||(n=91),n in u)for(e in u[n]=!1,d)d[e]==n&&(g[e]=!1)}),r(window,"focus",function(){for(s in u)u[s]=!1;for(s in d)g[s]=!1});var o=e.key;e.key=g,e.key.setScope=function(t){n=t||"all"},e.key.getScope=v,e.key.deleteScope=function(t){var e,n,a;for(e in l)for(n=l[e],a=0;a<n.length;)n[a].scope===t?n.splice(a,1):a++},e.key.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},e.key.isPressed=function(t){return"string"==typeof t&&(t=c(t)),-1!=h(f,t)},e.key.getPressedKeyCodes=function(){return f.slice(0)},e.key.noConflict=function(){var t=e.key;return e.key=o,t},e.key.unbind=function(t,e){var n,a,i,r,o,s=[];for(n=y(t),r=0;r<n.length;r++){if(1<(a=n[r].split("+")).length&&(s=b(a)),t=a[a.length-1],t=c(t),void 0===e&&(e=v()),!l[t])return;for(i=0;i<l[t].length;i++)(o=l[t][i]).scope===e&&p(o.mods,s)&&(l[t][i]={})}},void 0!==w&&(w.exports=g)}({})},{}],68:[function(t,e,n){"use strict";!function(){for(var r=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),a=Math.max(0,16-(n-r)),i=window.setTimeout(function(){t(n+a)},a);return r=n+a,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},{}],69:[function(t,e,n){var a,i;a=this,i=function(t,e,n){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=a(e),c=a(n);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var r="transitionend";function s(t){var e=this,n=!1;return h.default(this).one(p.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||p.triggerTransitionEnd(e)},t),this}var p={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=h.default(t).css("transition-duration"),n=h.default(t).css("transition-delay"),a=parseFloat(e),i=parseFloat(n);return a||i?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){h.default(t).trigger(r)},supportsTransitionEnd:function(){return Boolean(r)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var i=n[a],r=e[a],o=r&&p.isElement(r)?"element":null==(s=r)?""+s:{}.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(o))throw new Error(t.toUpperCase()+': Option "'+a+'" provided type "'+o+'" but expected type "'+i+'".')}var s},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?p.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null},jQueryDetection:function(){if(void 0===h.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=h.default.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};p.jQueryDetection(),h.default.fn.emulateTransitionEnd=s,h.default.event.special[p.TRANSITION_END]={bindType:r,delegateType:r,handle:function(t){if(h.default(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var u="alert",d="bs.alert",f=h.default.fn[u],m=function(){function a(t){this._element=t}var t=a.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){h.default.removeData(this._element,d),this._element=null},t._getRootElement=function(t){var e=p.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=h.default(t).closest(".alert")[0]),n},t._triggerCloseEvent=function(t){var e=h.default.Event("close.bs.alert");return h.default(t).trigger(e),e},t._removeElement=function(e){var n=this;if(h.default(e).removeClass("show"),h.default(e).hasClass("fade")){var t=p.getTransitionDurationFromElement(e);h.default(e).one(p.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){h.default(t).detach().trigger("closed.bs.alert").remove()},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this),e=t.data(d);e||(e=new a(this),t.data(d,e)),"close"===n&&e[n](this)})},a._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},o(a,null,[{key:"VERSION",get:function(){return"4.6.0"}}]),a}();h.default(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',m._handleDismiss(new m)),h.default.fn[u]=m._jQueryInterface,h.default.fn[u].Constructor=m,h.default.fn[u].noConflict=function(){return h.default.fn[u]=f,m._jQueryInterface};var g="button",v="bs.button",y=h.default.fn[g],b="active",w='[data-toggle^="button"]',_='input:not([type="hidden"])',E=function(){function i(t){this._element=t,this.shouldAvoidTriggerChange=!1}var t=i.prototype;return t.toggle=function(){var t=!0,e=!0,n=h.default(this._element).closest('[data-toggle="buttons"]')[0];if(n){var a=this._element.querySelector(_);if(a){if("radio"===a.type)if(a.checked&&this._element.classList.contains(b))t=!1;else{var i=n.querySelector(".active");i&&h.default(i).removeClass(b)}t&&("checkbox"!==a.type&&"radio"!==a.type||(a.checked=!this._element.classList.contains(b)),this.shouldAvoidTriggerChange||h.default(a).trigger("change")),a.focus(),e=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(b)),t&&h.default(this._element).toggleClass(b))},t.dispose=function(){h.default.removeData(this._element,v),this._element=null},i._jQueryInterface=function(n,a){return this.each(function(){var t=h.default(this),e=t.data(v);e||(e=new i(this),t.data(v,e)),e.shouldAvoidTriggerChange=a,"toggle"===n&&e[n]()})},o(i,null,[{key:"VERSION",get:function(){return"4.6.0"}}]),i}();h.default(document).on("click.bs.button.data-api",w,function(t){var e=t.target,n=e;if(h.default(e).hasClass("btn")||(e=h.default(e).closest(".btn")[0]),!e||e.hasAttribute("disabled")||e.classList.contains("disabled"))t.preventDefault();else{var a=e.querySelector(_);if(a&&(a.hasAttribute("disabled")||a.classList.contains("disabled")))return void t.preventDefault();"INPUT"!==n.tagName&&"LABEL"===e.tagName||E._jQueryInterface.call(h.default(e),"toggle","INPUT"===n.tagName)}}).on("focus.bs.button.data-api blur.bs.button.data-api",w,function(t){var e=h.default(t.target).closest(".btn")[0];h.default(e).toggleClass("focus",/^focus(in)?$/.test(t.type))}),h.default(window).on("load.bs.button.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),e=0,n=t.length;e<n;e++){var a=t[e],i=a.querySelector(_);i.checked||i.hasAttribute("checked")?a.classList.add(b):a.classList.remove(b)}for(var r=0,o=(t=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;r<o;r++){var s=t[r];"true"===s.getAttribute("aria-pressed")?s.classList.add(b):s.classList.remove(b)}}),h.default.fn[g]=E._jQueryInterface,h.default.fn[g].Constructor=E,h.default.fn[g].noConflict=function(){return h.default.fn[g]=y,E._jQueryInterface};var T="carousel",k="bs.carousel",P="."+k,x=h.default.fn[T],C={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},O={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},S="next",L="prev",M="slid"+P,A="active",R=".active.carousel-item",B={TOUCH:"touch",PEN:"pen"},j=function(){function r(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=r.prototype;return t.next=function(){this._isSliding||this._slide(S)},t.nextWhenVisible=function(){var t=h.default(this._element);!document.hidden&&t.is(":visible")&&"hidden"!==t.css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(L)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(p.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(R);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)h.default(this._element).one(M,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var a=n<t?S:L;this._slide(a,this._items[t])}},t.dispose=function(){h.default(this._element).off(P),h.default.removeData(this._element,k),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},C,t),p.typeCheckConfig(T,t,O),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;(this.touchDeltaX=0)<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&h.default(this._element).on("keydown.bs.carousel",function(t){return e._keydown(t)}),"hover"===this._config.pause&&h.default(this._element).on("mouseenter.bs.carousel",function(t){return e.pause(t)}).on("mouseleave.bs.carousel",function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var n=this;if(this._touchSupported){var e=function(t){n._pointerEvent&&B[t.originalEvent.pointerType.toUpperCase()]?n.touchStartX=t.originalEvent.clientX:n._pointerEvent||(n.touchStartX=t.originalEvent.touches[0].clientX)},a=function(t){n._pointerEvent&&B[t.originalEvent.pointerType.toUpperCase()]&&(n.touchDeltaX=t.originalEvent.clientX-n.touchStartX),n._handleSwipe(),"hover"===n._config.pause&&(n.pause(),n.touchTimeout&&clearTimeout(n.touchTimeout),n.touchTimeout=setTimeout(function(t){return n.cycle(t)},500+n._config.interval))};h.default(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",function(t){return t.preventDefault()}),this._pointerEvent?(h.default(this._element).on("pointerdown.bs.carousel",function(t){return e(t)}),h.default(this._element).on("pointerup.bs.carousel",function(t){return a(t)}),this._element.classList.add("pointer-event")):(h.default(this._element).on("touchstart.bs.carousel",function(t){return e(t)}),h.default(this._element).on("touchmove.bs.carousel",function(t){var e;(e=t).originalEvent.touches&&1<e.originalEvent.touches.length?n.touchDeltaX=0:n.touchDeltaX=e.originalEvent.touches[0].clientX-n.touchStartX}),h.default(this._element).on("touchend.bs.carousel",function(t){return a(t)}))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===S,a=t===L,i=this._getItemIndex(e),r=this._items.length-1;if((a&&0===i||n&&i===r)&&!this._config.wrap)return e;var o=(i+(t===L?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),a=this._getItemIndex(this._element.querySelector(R)),i=h.default.Event("slide.bs.carousel",{relatedTarget:t,direction:e,from:a,to:n});return h.default(this._element).trigger(i),i},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));h.default(e).removeClass(A);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&h.default(n).addClass(A)}},t._updateInterval=function(){var t=this._activeElement||this._element.querySelector(R);if(t){var e=parseInt(t.getAttribute("data-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}},t._slide=function(t,e){var n,a,i,r=this,o=this._element.querySelector(R),s=this._getItemIndex(o),l=e||o&&this._getItemByDirection(t,o),u=this._getItemIndex(l),d=Boolean(this._interval);if(t===S?(n="carousel-item-left",a="carousel-item-next",i="left"):(n="carousel-item-right",a="carousel-item-prev",i="right"),l&&h.default(l).hasClass(A))this._isSliding=!1;else if(!this._triggerSlideEvent(l,i).isDefaultPrevented()&&o&&l){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(l),this._activeElement=l;var c=h.default.Event(M,{relatedTarget:l,direction:i,from:s,to:u});if(h.default(this._element).hasClass("slide")){h.default(l).addClass(a),p.reflow(l),h.default(o).addClass(n),h.default(l).addClass(n);var f=p.getTransitionDurationFromElement(o);h.default(o).one(p.TRANSITION_END,function(){h.default(l).removeClass(n+" "+a).addClass(A),h.default(o).removeClass(A+" "+a+" "+n),r._isSliding=!1,setTimeout(function(){return h.default(r._element).trigger(c)},0)}).emulateTransitionEnd(f)}else h.default(o).removeClass(A),h.default(l).addClass(A),this._isSliding=!1,h.default(this._element).trigger(c);d&&this.cycle()}},r._jQueryInterface=function(a){return this.each(function(){var t=h.default(this).data(k),e=l({},C,h.default(this).data());"object"==typeof a&&(e=l({},e,a));var n="string"==typeof a?a:e.slide;if(t||(t=new r(this,e),h.default(this).data(k,t)),"number"==typeof a)t.to(a);else if("string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())})},r._dataApiClickHandler=function(t){var e=p.getSelectorFromElement(this);if(e){var n=h.default(e)[0];if(n&&h.default(n).hasClass("carousel")){var a=l({},h.default(n).data(),h.default(this).data()),i=this.getAttribute("data-slide-to");i&&(a.interval=!1),r._jQueryInterface.call(h.default(n),a),i&&h.default(n).data(k).to(i),t.preventDefault()}}},o(r,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return C}}]),r}();h.default(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",j._dataApiClickHandler),h.default(window).on("load.bs.carousel.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),e=0,n=t.length;e<n;e++){var a=h.default(t[e]);j._jQueryInterface.call(a,a.data())}}),h.default.fn[T]=j._jQueryInterface,h.default.fn[T].Constructor=j,h.default.fn[T].noConflict=function(){return h.default.fn[T]=x,j._jQueryInterface};var I="collapse",F="bs.collapse",N=h.default.fn[I],D={toggle:!0,parent:""},H={toggle:"boolean",parent:"(string|element)"},W="show",U="collapse",Y="collapsing",q="collapsed",z='[data-toggle="collapse"]',G=function(){function s(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(z)),a=0,i=n.length;a<i;a++){var r=n[a],o=p.getSelectorFromElement(r),s=[].slice.call(document.querySelectorAll(o)).filter(function(t){return t===e});null!==o&&0<s.length&&(this._selector=o,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=s.prototype;return t.toggle=function(){h.default(this._element).hasClass(W)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!h.default(this._element).hasClass(W)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(U)})).length&&(t=null),!(t&&(e=h.default(t).not(this._selector).data(F))&&e._isTransitioning))){var a=h.default.Event("show.bs.collapse");if(h.default(this._element).trigger(a),!a.isDefaultPrevented()){t&&(s._jQueryInterface.call(h.default(t).not(this._selector),"hide"),e||h.default(t).data(F,null));var i=this._getDimension();h.default(this._element).removeClass(U).addClass(Y),this._element.style[i]=0,this._triggerArray.length&&h.default(this._triggerArray).removeClass(q).attr("aria-expanded",!0),this.setTransitioning(!0);var r="scroll"+(i[0].toUpperCase()+i.slice(1)),o=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,function(){h.default(n._element).removeClass(Y).addClass(U+" "+W),n._element.style[i]="",n.setTransitioning(!1),h.default(n._element).trigger("shown.bs.collapse")}).emulateTransitionEnd(o),this._element.style[i]=this._element[r]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&h.default(this._element).hasClass(W)){var e=h.default.Event("hide.bs.collapse");if(h.default(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",p.reflow(this._element),h.default(this._element).addClass(Y).removeClass(U+" "+W);var a=this._triggerArray.length;if(0<a)for(var i=0;i<a;i++){var r=this._triggerArray[i],o=p.getSelectorFromElement(r);if(null!==o)h.default([].slice.call(document.querySelectorAll(o))).hasClass(W)||h.default(r).addClass(q).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var s=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,function(){t.setTransitioning(!1),h.default(t._element).removeClass(Y).addClass(U).trigger("hidden.bs.collapse")}).emulateTransitionEnd(s)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){h.default.removeData(this._element,F),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},D,t)).toggle=Boolean(t.toggle),p.typeCheckConfig(I,t,H),t},t._getDimension=function(){return h.default(this._element).hasClass("width")?"width":"height"},t._getParent=function(){var t,n=this;p.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',a=[].slice.call(t.querySelectorAll(e));return h.default(a).each(function(t,e){n._addAriaAndCollapsedClass(s._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){var n=h.default(t).hasClass(W);e.length&&h.default(e).toggleClass(q,!n).attr("aria-expanded",n)},s._getTargetFromElement=function(t){var e=p.getSelectorFromElement(t);return e?document.querySelector(e):null},s._jQueryInterface=function(a){return this.each(function(){var t=h.default(this),e=t.data(F),n=l({},D,t.data(),"object"==typeof a&&a?a:{});if(!e&&n.toggle&&"string"==typeof a&&/show|hide/.test(a)&&(n.toggle=!1),e||(e=new s(this,n),t.data(F,e)),"string"==typeof a){if(void 0===e[a])throw new TypeError('No method named "'+a+'"');e[a]()}})},o(s,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return D}}]),s}();h.default(document).on("click.bs.collapse.data-api",z,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=h.default(this),e=p.getSelectorFromElement(this),a=[].slice.call(document.querySelectorAll(e));h.default(a).each(function(){var t=h.default(this),e=t.data(F)?"toggle":n.data();G._jQueryInterface.call(t,e)})}),h.default.fn[I]=G._jQueryInterface,h.default.fn[I].Constructor=G,h.default.fn[I].noConflict=function(){return h.default.fn[I]=N,G._jQueryInterface};var X="dropdown",V="bs.dropdown",K="."+V,Z=".data-api",$=h.default.fn[X],Q=new RegExp("38|40|27"),J="hide"+K,tt="hidden"+K,et="click"+K+Z,nt="keydown"+K+Z,at="disabled",it="show",rt="dropdown-menu-right",ot='[data-toggle="dropdown"]',st=".dropdown-menu",lt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},ut={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},dt=function(){function u(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=u.prototype;return t.toggle=function(){if(!this._element.disabled&&!h.default(this._element).hasClass(at)){var t=h.default(this._menu).hasClass(it);u._clearMenus(),t||this.show(!0)}},t.show=function(t){if(void 0===t&&(t=!1),!(this._element.disabled||h.default(this._element).hasClass(at)||h.default(this._menu).hasClass(it))){var e={relatedTarget:this._element},n=h.default.Event("show.bs.dropdown",e),a=u._getParentFromElement(this._element);if(h.default(a).trigger(n),!n.isDefaultPrevented()){if(!this._inNavbar&&t){if(void 0===c.default)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var i=this._element;"parent"===this._config.reference?i=a:p.isElement(this._config.reference)&&(i=this._config.reference,void 0!==this._config.reference.jquery&&(i=this._config.reference[0])),"scrollParent"!==this._config.boundary&&h.default(a).addClass("position-static"),this._popper=new c.default(i,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===h.default(a).closest(".navbar-nav").length&&h.default(document.body).children().on("mouseover",null,h.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),h.default(this._menu).toggleClass(it),h.default(a).toggleClass(it).trigger(h.default.Event("shown.bs.dropdown",e))}}},t.hide=function(){if(!this._element.disabled&&!h.default(this._element).hasClass(at)&&h.default(this._menu).hasClass(it)){var t={relatedTarget:this._element},e=h.default.Event(J,t),n=u._getParentFromElement(this._element);h.default(n).trigger(e),e.isDefaultPrevented()||(this._popper&&this._popper.destroy(),h.default(this._menu).toggleClass(it),h.default(n).toggleClass(it).trigger(h.default.Event(tt,t)))}},t.dispose=function(){h.default.removeData(this._element,V),h.default(this._element).off(K),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;h.default(this._element).on("click.bs.dropdown",function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=l({},this.constructor.Default,h.default(this._element).data(),t),p.typeCheckConfig(X,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=u._getParentFromElement(this._element);t&&(this._menu=t.querySelector(st))}return this._menu},t._getPlacement=function(){var t=h.default(this._element.parentNode),e="bottom-start";return t.hasClass("dropup")?e=h.default(this._menu).hasClass(rt)?"top-end":"top-start":t.hasClass("dropright")?e="right-start":t.hasClass("dropleft")?e="left-start":h.default(this._menu).hasClass(rt)&&(e="bottom-end"),e},t._detectNavbar=function(){return 0<h.default(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),l({},t,this._config.popperConfig)},u._jQueryInterface=function(e){return this.each(function(){var t=h.default(this).data(V);if(t||(t=new u(this,"object"==typeof e?e:null),h.default(this).data(V,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},u._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(ot)),n=0,a=e.length;n<a;n++){var i=u._getParentFromElement(e[n]),r=h.default(e[n]).data(V),o={relatedTarget:e[n]};if(t&&"click"===t.type&&(o.clickEvent=t),r){var s=r._menu;if(h.default(i).hasClass(it)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&h.default.contains(i,t.target))){var l=h.default.Event(J,o);h.default(i).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&h.default(document.body).children().off("mouseover",null,h.default.noop),e[n].setAttribute("aria-expanded","false"),r._popper&&r._popper.destroy(),h.default(s).removeClass(it),h.default(i).removeClass(it).trigger(h.default.Event(tt,o)))}}}},u._getParentFromElement=function(t){var e,n=p.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},u._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||h.default(t.target).closest(st).length)):Q.test(t.which))&&!this.disabled&&!h.default(this).hasClass(at)){var e=u._getParentFromElement(this),n=h.default(e).hasClass(it);if(n||27!==t.which){if(t.preventDefault(),t.stopPropagation(),!n||27===t.which||32===t.which)return 27===t.which&&h.default(e.querySelector(ot)).trigger("focus"),void h.default(this).trigger("click");var a=[].slice.call(e.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(t){return h.default(t).is(":visible")});if(0!==a.length){var i=a.indexOf(t.target);38===t.which&&0<i&&i--,40===t.which&&i<a.length-1&&i++,i<0&&(i=0),a[i].focus()}}}},o(u,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return lt}},{key:"DefaultType",get:function(){return ut}}]),u}();h.default(document).on(nt,ot,dt._dataApiKeydownHandler).on(nt,st,dt._dataApiKeydownHandler).on(et+" keyup.bs.dropdown.data-api",dt._clearMenus).on(et,ot,function(t){t.preventDefault(),t.stopPropagation(),dt._jQueryInterface.call(h.default(this),"toggle")}).on(et,".dropdown form",function(t){t.stopPropagation()}),h.default.fn[X]=dt._jQueryInterface,h.default.fn[X].Constructor=dt,h.default.fn[X].noConflict=function(){return h.default.fn[X]=$,dt._jQueryInterface};var ct="modal",ft="bs.modal",ht="."+ft,pt=h.default.fn[ct],mt={backdrop:!0,keyboard:!0,focus:!0,show:!0},gt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},vt="hidden"+ht,yt="show"+ht,bt="focusin"+ht,wt="resize"+ht,_t="click.dismiss"+ht,Et="keydown.dismiss"+ht,Tt="mousedown.dismiss"+ht,kt="modal-open",Pt="fade",xt="show",Ct="modal-static",Ot=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",St=".sticky-top",Lt=function(){function i(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=i.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){h.default(this._element).hasClass(Pt)&&(this._isTransitioning=!0);var n=h.default.Event(yt,{relatedTarget:t});h.default(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),h.default(this._element).on(_t,'[data-dismiss="modal"]',function(t){return e.hide(t)}),h.default(this._dialog).on(Tt,function(){h.default(e._element).one("mouseup.dismiss.bs.modal",function(t){h.default(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=h.default.Event("hide.bs.modal");if(h.default(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var a=h.default(this._element).hasClass(Pt);if(a&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),h.default(document).off(bt),h.default(this._element).removeClass(xt),h.default(this._element).off(_t),h.default(this._dialog).off(Tt),a){var i=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(i)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return h.default(t).off(ht)}),h.default(document).off(bt),h.default.removeData(this._element,ft),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},mt,t),p.typeCheckConfig(ct,t,gt),t},t._triggerBackdropTransition=function(){var t=this,e=h.default.Event("hidePrevented.bs.modal");if(h.default(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._element.scrollHeight>document.documentElement.clientHeight;n||(this._element.style.overflowY="hidden"),this._element.classList.add(Ct);var a=p.getTransitionDurationFromElement(this._dialog);h.default(this._element).off(p.TRANSITION_END),h.default(this._element).one(p.TRANSITION_END,function(){t._element.classList.remove(Ct),n||h.default(t._element).one(p.TRANSITION_END,function(){t._element.style.overflowY=""}).emulateTransitionEnd(t._element,a)}).emulateTransitionEnd(a),this._element.focus()}},t._showElement=function(t){var e=this,n=h.default(this._element).hasClass(Pt),a=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),h.default(this._dialog).hasClass("modal-dialog-scrollable")&&a?a.scrollTop=0:this._element.scrollTop=0,n&&p.reflow(this._element),h.default(this._element).addClass(xt),this._config.focus&&this._enforceFocus();var i=h.default.Event("shown.bs.modal",{relatedTarget:t}),r=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,h.default(e._element).trigger(i)};if(n){var o=p.getTransitionDurationFromElement(this._dialog);h.default(this._dialog).one(p.TRANSITION_END,r).emulateTransitionEnd(o)}else r()},t._enforceFocus=function(){var e=this;h.default(document).off(bt).on(bt,function(t){document!==t.target&&e._element!==t.target&&0===h.default(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown?h.default(this._element).on(Et,function(t){e._config.keyboard&&27===t.which?(t.preventDefault(),e.hide()):e._config.keyboard||27!==t.which||e._triggerBackdropTransition()}):this._isShown||h.default(this._element).off(Et)},t._setResizeEvent=function(){var e=this;this._isShown?h.default(window).on(wt,function(t){return e.handleUpdate(t)}):h.default(window).off(wt)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){h.default(document.body).removeClass(kt),t._resetAdjustments(),t._resetScrollbar(),h.default(t._element).trigger(vt)})},t._removeBackdrop=function(){this._backdrop&&(h.default(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=h.default(this._element).hasClass(Pt)?Pt:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),h.default(this._backdrop).appendTo(document.body),h.default(this._element).on(_t,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._triggerBackdropTransition():e.hide())}),n&&p.reflow(this._backdrop),h.default(this._backdrop).addClass(xt),!t)return;if(!n)return void t();var a=p.getTransitionDurationFromElement(this._backdrop);h.default(this._backdrop).one(p.TRANSITION_END,t).emulateTransitionEnd(a)}else if(!this._isShown&&this._backdrop){h.default(this._backdrop).removeClass(xt);var i=function(){e._removeBackdrop(),t&&t()};if(h.default(this._element).hasClass(Pt)){var r=p.getTransitionDurationFromElement(this._backdrop);h.default(this._backdrop).one(p.TRANSITION_END,i).emulateTransitionEnd(r)}else i()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var i=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(Ot)),e=[].slice.call(document.querySelectorAll(St));h.default(t).each(function(t,e){var n=e.style.paddingRight,a=h.default(e).css("padding-right");h.default(e).data("padding-right",n).css("padding-right",parseFloat(a)+i._scrollbarWidth+"px")}),h.default(e).each(function(t,e){var n=e.style.marginRight,a=h.default(e).css("margin-right");h.default(e).data("margin-right",n).css("margin-right",parseFloat(a)-i._scrollbarWidth+"px")});var n=document.body.style.paddingRight,a=h.default(document.body).css("padding-right");h.default(document.body).data("padding-right",n).css("padding-right",parseFloat(a)+this._scrollbarWidth+"px")}h.default(document.body).addClass(kt)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(Ot));h.default(t).each(function(t,e){var n=h.default(e).data("padding-right");h.default(e).removeData("padding-right"),e.style.paddingRight=n||""});var e=[].slice.call(document.querySelectorAll(""+St));h.default(e).each(function(t,e){var n=h.default(e).data("margin-right");void 0!==n&&h.default(e).css("margin-right",n).removeData("margin-right")});var n=h.default(document.body).data("padding-right");h.default(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},i._jQueryInterface=function(n,a){return this.each(function(){var t=h.default(this).data(ft),e=l({},mt,h.default(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new i(this,e),h.default(this).data(ft,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](a)}else e.show&&t.show(a)})},o(i,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return mt}}]),i}();h.default(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e,n=this,a=p.getSelectorFromElement(this);a&&(e=document.querySelector(a));var i=h.default(e).data(ft)?"toggle":l({},h.default(e).data(),h.default(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var r=h.default(e).one(yt,function(t){t.isDefaultPrevented()||r.one(vt,function(){h.default(n).is(":visible")&&n.focus()})});Lt._jQueryInterface.call(h.default(e),i,this)}),h.default.fn[ct]=Lt._jQueryInterface,h.default.fn[ct].Constructor=Lt,h.default.fn[ct].noConflict=function(){return h.default.fn[ct]=pt,Lt._jQueryInterface};var Mt=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],At={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rt=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,Bt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function jt(t,o,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),s=Object.keys(o),l=[].slice.call(n.body.querySelectorAll("*")),a=function(t,e){var n=l[t],a=n.nodeName.toLowerCase();if(-1===s.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var i=[].slice.call(n.attributes),r=[].concat(o["*"]||[],o[a]||[]);i.forEach(function(t){(function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===Mt.indexOf(n)||Boolean(t.nodeValue.match(Rt)||t.nodeValue.match(Bt));for(var a=e.filter(function(t){return t instanceof RegExp}),i=0,r=a.length;i<r;i++)if(n.match(a[i]))return!0;return!1})(t,r)||n.removeAttribute(t.nodeName)})},i=0,r=l.length;i<r;i++)a(i);return n.body.innerHTML}var It="tooltip",Ft="bs.tooltip",Nt="."+Ft,Dt=h.default.fn[It],Ht="bs-tooltip",Wt=new RegExp("(^|\\s)"+Ht+"\\S+","g"),Ut=["sanitize","whiteList","sanitizeFn"],Yt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},qt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},zt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:At,popperConfig:null},Gt="show",Xt={HIDE:"hide"+Nt,HIDDEN:"hidden"+Nt,SHOW:"show"+Nt,SHOWN:"shown"+Nt,INSERTED:"inserted"+Nt,CLICK:"click"+Nt,FOCUSIN:"focusin"+Nt,FOCUSOUT:"focusout"+Nt,MOUSEENTER:"mouseenter"+Nt,MOUSELEAVE:"mouseleave"+Nt},Vt="fade",Kt="show",Zt="hover",$t=function(){function i(t,e){if(void 0===c.default)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=h.default(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),h.default(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(h.default(this.getTipElement()).hasClass(Kt))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),h.default.removeData(this.element,this.constructor.DATA_KEY),h.default(this.element).off(this.constructor.EVENT_KEY),h.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&h.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===h.default(this.element).css("display"))throw new Error("Please use show on visible elements");var t=h.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){h.default(this.element).trigger(t);var n=p.findShadowRoot(this.element),a=h.default.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!a)return;var i=this.getTipElement(),r=p.getUID(this.constructor.NAME);i.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&h.default(i).addClass(Vt);var o="function"==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,s=this._getAttachment(o);this.addAttachmentClass(s);var l=this._getContainer();h.default(i).data(this.constructor.DATA_KEY,this),h.default.contains(this.element.ownerDocument.documentElement,this.tip)||h.default(i).appendTo(l),h.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new c.default(this.element,i,this._getPopperConfig(s)),h.default(i).addClass(Kt),h.default(i).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&h.default(document.body).children().on("mouseover",null,h.default.noop);var u=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,h.default(e.element).trigger(e.constructor.Event.SHOWN),"out"===t&&e._leave(null,e)};if(h.default(this.tip).hasClass(Vt)){var d=p.getTransitionDurationFromElement(this.tip);h.default(this.tip).one(p.TRANSITION_END,u).emulateTransitionEnd(d)}else u()}},t.hide=function(t){var e=this,n=this.getTipElement(),a=h.default.Event(this.constructor.Event.HIDE),i=function(){e._hoverState!==Gt&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),h.default(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if(h.default(this.element).trigger(a),!a.isDefaultPrevented()){if(h.default(n).removeClass(Kt),"ontouchstart"in document.documentElement&&h.default(document.body).children().off("mouseover",null,h.default.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger[Zt]=!1,h.default(this.tip).hasClass(Vt)){var r=p.getTransitionDurationFromElement(n);h.default(n).one(p.TRANSITION_END,i).emulateTransitionEnd(r)}else i();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){h.default(this.getTipElement()).addClass(Ht+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||h.default(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(h.default(t.querySelectorAll(".tooltip-inner")),this.getTitle()),h.default(t).removeClass("fade show")},t.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=jt(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?h.default(e).parent().is(t)||t.empty().append(e):t.text(h.default(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getPopperConfig=function(t){var e=this;return l({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},this.config.popperConfig)},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:p.isElement(this.config.container)?h.default(this.config.container):h.default(document).find(this.config.container)},t._getAttachment=function(t){return qt[t.toUpperCase()]},t._setListeners=function(){var a=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)h.default(a.element).on(a.constructor.Event.CLICK,a.config.selector,function(t){return a.toggle(t)});else if("manual"!==t){var e=t===Zt?a.constructor.Event.MOUSEENTER:a.constructor.Event.FOCUSIN,n=t===Zt?a.constructor.Event.MOUSELEAVE:a.constructor.Event.FOCUSOUT;h.default(a.element).on(e,a.config.selector,function(t){return a._enter(t)}).on(n,a.config.selector,function(t){return a._leave(t)})}}),this._hideModalHandler=function(){a.element&&a.hide()},h.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||h.default(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),h.default(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?"focus":Zt]=!0),h.default(e.getTipElement()).hasClass(Kt)||e._hoverState===Gt?e._hoverState=Gt:(clearTimeout(e._timeout),e._hoverState=Gt,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Gt&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||h.default(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),h.default(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?"focus":Zt]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){"out"===e._hoverState&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=h.default(this.element).data();return Object.keys(e).forEach(function(t){-1!==Ut.indexOf(t)&&delete e[t]}),"number"==typeof(t=l({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),p.typeCheckConfig(It,t,this.constructor.DefaultType),t.sanitize&&(t.template=jt(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=h.default(this.getTipElement()),e=t.attr("class").match(Wt);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(h.default(t).removeClass(Vt),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(a){return this.each(function(){var t=h.default(this),e=t.data(Ft),n="object"==typeof a&&a;if((e||!/dispose|hide/.test(a))&&(e||(e=new i(this,n),t.data(Ft,e)),"string"==typeof a)){if(void 0===e[a])throw new TypeError('No method named "'+a+'"');e[a]()}})},o(i,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return zt}},{key:"NAME",get:function(){return It}},{key:"DATA_KEY",get:function(){return Ft}},{key:"Event",get:function(){return Xt}},{key:"EVENT_KEY",get:function(){return Nt}},{key:"DefaultType",get:function(){return Yt}}]),i}();h.default.fn[It]=$t._jQueryInterface,h.default.fn[It].Constructor=$t,h.default.fn[It].noConflict=function(){return h.default.fn[It]=Dt,$t._jQueryInterface};var Qt="popover",Jt="bs.popover",te="."+Jt,ee=h.default.fn[Qt],ne="bs-popover",ae=new RegExp("(^|\\s)"+ne+"\\S+","g"),ie=l({},$t.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),re=l({},$t.DefaultType,{content:"(string|element|function)"}),oe={HIDE:"hide"+te,HIDDEN:"hidden"+te,SHOW:"show"+te,SHOWN:"shown"+te,INSERTED:"inserted"+te,CLICK:"click"+te,FOCUSIN:"focusin"+te,FOCUSOUT:"focusout"+te,MOUSEENTER:"mouseenter"+te,MOUSELEAVE:"mouseleave"+te},se=function(t){var e,n;function a(){return t.apply(this,arguments)||this}n=t,(e=a).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var i=a.prototype;return i.isWithContent=function(){return this.getTitle()||this._getContent()},i.addAttachmentClass=function(t){h.default(this.getTipElement()).addClass(ne+"-"+t)},i.getTipElement=function(){return this.tip=this.tip||h.default(this.config.template)[0],this.tip},i.setContent=function(){var t=h.default(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(".popover-body"),e),t.removeClass("fade show")},i._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},i._cleanTipClass=function(){var t=h.default(this.getTipElement()),e=t.attr("class").match(ae);null!==e&&0<e.length&&t.removeClass(e.join(""))},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this).data(Jt),e="object"==typeof n?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new a(this,e),h.default(this).data(Jt,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},o(a,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return ie}},{key:"NAME",get:function(){return Qt}},{key:"DATA_KEY",get:function(){return Jt}},{key:"Event",get:function(){return oe}},{key:"EVENT_KEY",get:function(){return te}},{key:"DefaultType",get:function(){return re}}]),a}($t);h.default.fn[Qt]=se._jQueryInterface,h.default.fn[Qt].Constructor=se,h.default.fn[Qt].noConflict=function(){return h.default.fn[Qt]=ee,se._jQueryInterface};var le="scrollspy",ue="bs.scrollspy",de="."+ue,ce=h.default.fn[le],fe={offset:10,method:"auto",target:""},he={offset:"number",method:"string",target:"(string|element)"},pe="active",me=".nav, .list-group",ge=".nav-link",ve=".list-group-item",ye=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+ge+","+this._config.target+" "+ve+","+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,h.default(this._scrollElement).on("scroll.bs.scrollspy",function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?"offset":"position",i="auto"===this._config.method?t:this._config.method,r="position"===i?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=p.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var a=e.getBoundingClientRect();if(a.width||a.height)return[h.default(e)[i]().top+r,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){h.default.removeData(this._element,ue),h.default(this._scrollElement).off(de),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},fe,"object"==typeof t&&t?t:{})).target&&p.isElement(t.target)){var e=h.default(t.target).attr("id");e||(e=p.getUID(le),h.default(t.target).attr("id",e)),t.target="#"+e}return p.typeCheckConfig(le,t,he),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var a=this._targets[this._targets.length-1];this._activeTarget!==a&&this._activate(a)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;){this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&(void 0===this._offsets[i+1]||t<this._offsets[i+1])&&this._activate(this._targets[i])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=h.default([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass(pe),n.addClass(pe)):(n.addClass(pe),n.parents(me).prev(ge+", "+ve).addClass(pe),n.parents(me).prev(".nav-item").children(ge).addClass(pe)),h.default(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(pe)}).forEach(function(t){return t.classList.remove(pe)})},n._jQueryInterface=function(e){return this.each(function(){var t=h.default(this).data(ue);if(t||(t=new n(this,"object"==typeof e&&e),h.default(this).data(ue,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},o(n,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return fe}}]),n}();h.default(window).on("load.bs.scrollspy.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),e=t.length;e--;){var n=h.default(t[e]);ye._jQueryInterface.call(n,n.data())}}),h.default.fn[le]=ye._jQueryInterface,h.default.fn[le].Constructor=ye,h.default.fn[le].noConflict=function(){return h.default.fn[le]=ce,ye._jQueryInterface};var be="bs.tab",we=h.default.fn.tab,_e="active",Ee="> li > .active",Te=function(){function a(t){this._element=t}var t=a.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&h.default(this._element).hasClass(_e)||h.default(this._element).hasClass("disabled"))){var t,a,e=h.default(this._element).closest(".nav, .list-group")[0],i=p.getSelectorFromElement(this._element);if(e){var r="UL"===e.nodeName||"OL"===e.nodeName?Ee:".active";a=(a=h.default.makeArray(h.default(e).find(r)))[a.length-1]}var o=h.default.Event("hide.bs.tab",{relatedTarget:this._element}),s=h.default.Event("show.bs.tab",{relatedTarget:a});if(a&&h.default(a).trigger(o),h.default(this._element).trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){i&&(t=document.querySelector(i)),this._activate(this._element,e);var l=function(){var t=h.default.Event("hidden.bs.tab",{relatedTarget:n._element}),e=h.default.Event("shown.bs.tab",{relatedTarget:a});h.default(a).trigger(t),h.default(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){h.default.removeData(this._element,be),this._element=null},t._activate=function(t,e,n){var a=this,i=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?h.default(e).children(".active"):h.default(e).find(Ee))[0],r=n&&i&&h.default(i).hasClass("fade"),o=function(){return a._transitionComplete(t,i,n)};if(i&&r){var s=p.getTransitionDurationFromElement(i);h.default(i).removeClass("show").one(p.TRANSITION_END,o).emulateTransitionEnd(s)}else o()},t._transitionComplete=function(t,e,n){if(e){h.default(e).removeClass(_e);var a=h.default(e.parentNode).find("> .dropdown-menu .active")[0];a&&h.default(a).removeClass(_e),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(h.default(t).addClass(_e),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),p.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&h.default(t.parentNode).hasClass("dropdown-menu")){var i=h.default(t).closest(".dropdown")[0];if(i){var r=[].slice.call(i.querySelectorAll(".dropdown-toggle"));h.default(r).addClass(_e)}t.setAttribute("aria-expanded",!0)}n&&n()},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this),e=t.data(be);if(e||(e=new a(this),t.data(be,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},o(a,null,[{key:"VERSION",get:function(){return"4.6.0"}}]),a}();h.default(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),Te._jQueryInterface.call(h.default(this),"show")}),h.default.fn.tab=Te._jQueryInterface,h.default.fn.tab.Constructor=Te,h.default.fn.tab.noConflict=function(){return h.default.fn.tab=we,Te._jQueryInterface};var ke="toast",Pe="bs.toast",xe="."+Pe,Ce=h.default.fn[ke],Oe="click.dismiss"+xe,Se="show",Le={animation:"boolean",autohide:"boolean",delay:"number"},Me={animation:!0,autohide:!0,delay:500},Ae=function(){function a(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=a.prototype;return t.show=function(){var t=this,e=h.default.Event("show.bs.toast");if(h.default(this._element).trigger(e),!e.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var n=function(){t._element.classList.remove("showing"),t._element.classList.add(Se),h.default(t._element).trigger("shown.bs.toast"),t._config.autohide&&(t._timeout=setTimeout(function(){t.hide()},t._config.delay))};if(this._element.classList.remove("hide"),p.reflow(this._element),this._element.classList.add("showing"),this._config.animation){var a=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,n).emulateTransitionEnd(a)}else n()}},t.hide=function(){if(this._element.classList.contains(Se)){var t=h.default.Event("hide.bs.toast");h.default(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},t.dispose=function(){this._clearTimeout(),this._element.classList.contains(Se)&&this._element.classList.remove(Se),h.default(this._element).off(Oe),h.default.removeData(this._element,Pe),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},Me,h.default(this._element).data(),"object"==typeof t&&t?t:{}),p.typeCheckConfig(ke,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;h.default(this._element).on(Oe,'[data-dismiss="toast"]',function(){return t.hide()})},t._close=function(){var t=this,e=function(){t._element.classList.add("hide"),h.default(t._element).trigger("hidden.bs.toast")};if(this._element.classList.remove(Se),this._config.animation){var n=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},t._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this),e=t.data(Pe);if(e||(e=new a(this,"object"==typeof n&&n),t.data(Pe,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n](this)}})},o(a,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"DefaultType",get:function(){return Le}},{key:"Default",get:function(){return Me}}]),a}();h.default.fn[ke]=Ae._jQueryInterface,h.default.fn[ke].Constructor=Ae,h.default.fn[ke].noConflict=function(){return h.default.fn[ke]=Ce,Ae._jQueryInterface},t.Alert=m,t.Button=E,t.Carousel=j,t.Collapse=G,t.Dropdown=dt,t.Modal=Lt,t.Popover=se,t.Scrollspy=ye,t.Tab=Te,t.Toast=Ae,t.Tooltip=$t,t.Util=p,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("jquery"),t("popper.js")):i((a="undefined"!=typeof globalThis?globalThis:a||self).bootstrap={},a.jQuery,a.Popper)},{jquery:229,"popper.js":247}],70:[function(t,e,n){t("../../modules/es.array.fill");var a=t("../../internals/entry-unbind");e.exports=a("Array","fill")},{"../../internals/entry-unbind":112,"../../modules/es.array.fill":189}],71:[function(t,e,n){t("../../modules/es.array.iterator");var a=t("../../internals/entry-unbind");e.exports=a("Array","values")},{"../../internals/entry-unbind":112,"../../modules/es.array.iterator":190}],72:[function(t,e,n){t("../../modules/es.map"),t("../../modules/es.object.to-string"),t("../../modules/es.string.iterator"),t("../../modules/web.dom-collections.iterator");var a=t("../../internals/path");e.exports=a.Map},{"../../internals/path":161,"../../modules/es.map":192,"../../modules/es.object.to-string":194,"../../modules/es.string.iterator":202,"../../modules/web.dom-collections.iterator":219}],73:[function(t,e,n){t("../../modules/es.aggregate-error"),t("../../modules/es.object.to-string"),t("../../modules/es.promise"),t("../../modules/es.promise.all-settled"),t("../../modules/es.promise.any"),t("../../modules/es.promise.finally"),t("../../modules/es.string.iterator"),t("../../modules/web.dom-collections.iterator");var a=t("../../internals/path");e.exports=a.Promise},{"../../internals/path":161,"../../modules/es.aggregate-error":187,"../../modules/es.object.to-string":194,"../../modules/es.promise":198,"../../modules/es.promise.all-settled":195,"../../modules/es.promise.any":196,"../../modules/es.promise.finally":197,"../../modules/es.string.iterator":202,"../../modules/web.dom-collections.iterator":219}],74:[function(t,e,n){t("../../modules/es.set"),t("../../modules/es.object.to-string"),t("../../modules/es.string.iterator"),t("../../modules/web.dom-collections.iterator");var a=t("../../internals/path");e.exports=a.Set},{"../../internals/path":161,"../../modules/es.object.to-string":194,"../../modules/es.set":200,"../../modules/es.string.iterator":202,"../../modules/web.dom-collections.iterator":219}],75:[function(t,e,n){t("../../modules/es.string.ends-with");var a=t("../../internals/entry-unbind");e.exports=a("String","endsWith")},{"../../internals/entry-unbind":112,"../../modules/es.string.ends-with":201}],76:[function(t,e,n){t("../../modules/es.array.concat"),t("../../modules/es.object.to-string"),t("../../modules/es.symbol"),t("../../modules/es.symbol.async-iterator"),t("../../modules/es.symbol.description"),t("../../modules/es.symbol.has-instance"),t("../../modules/es.symbol.is-concat-spreadable"),t("../../modules/es.symbol.iterator"),t("../../modules/es.symbol.match"),t("../../modules/es.symbol.match-all"),t("../../modules/es.symbol.replace"),t("../../modules/es.symbol.search"),t("../../modules/es.symbol.species"),t("../../modules/es.symbol.split"),t("../../modules/es.symbol.to-primitive"),t("../../modules/es.symbol.to-string-tag"),t("../../modules/es.symbol.unscopables"),t("../../modules/es.json.to-string-tag"),t("../../modules/es.math.to-string-tag"),t("../../modules/es.reflect.to-string-tag");var a=t("../../internals/path");e.exports=a.Symbol},{"../../internals/path":161,"../../modules/es.array.concat":188,"../../modules/es.json.to-string-tag":191,"../../modules/es.math.to-string-tag":193,"../../modules/es.object.to-string":194,"../../modules/es.reflect.to-string-tag":199,"../../modules/es.symbol":208,"../../modules/es.symbol.async-iterator":203,"../../modules/es.symbol.description":204,"../../modules/es.symbol.has-instance":205,"../../modules/es.symbol.is-concat-spreadable":206,"../../modules/es.symbol.iterator":207,"../../modules/es.symbol.match":210,"../../modules/es.symbol.match-all":209,"../../modules/es.symbol.replace":211,"../../modules/es.symbol.search":212,"../../modules/es.symbol.species":213,"../../modules/es.symbol.split":214,"../../modules/es.symbol.to-primitive":215,"../../modules/es.symbol.to-string-tag":216,"../../modules/es.symbol.unscopables":217}],77:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},{}],78:[function(t,e,n){var a=t("../internals/is-object");e.exports=function(t){if(!a(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},{"../internals/is-object":134}],79:[function(t,e,n){var a=t("../internals/well-known-symbol"),i=t("../internals/object-create"),r=t("../internals/object-define-property"),o=a("unscopables"),s=Array.prototype;null==s[o]&&r.f(s,o,{configurable:!0,value:i(null)}),e.exports=function(t){s[o][t]=!0}},{"../internals/object-create":147,"../internals/object-define-property":149,"../internals/well-known-symbol":186}],80:[function(t,e,n){e.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},{}],81:[function(t,e,n){var a=t("../internals/is-object");e.exports=function(t){if(!a(t))throw TypeError(String(t)+" is not an object");return t}},{"../internals/is-object":134}],82:[function(t,e,n){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],83:[function(t,e,n){"use strict";var a,i=t("../internals/array-buffer-native"),r=t("../internals/descriptors"),o=t("../internals/global"),s=t("../internals/is-object"),l=t("../internals/has"),u=t("../internals/classof"),d=t("../internals/create-non-enumerable-property"),c=t("../internals/redefine"),f=t("../internals/object-define-property").f,h=t("../internals/object-get-prototype-of"),p=t("../internals/object-set-prototype-of"),m=t("../internals/well-known-symbol"),g=t("../internals/uid"),v=o.Int8Array,y=v&&v.prototype,b=o.Uint8ClampedArray,w=b&&b.prototype,_=v&&h(v),E=y&&h(y),T=Object.prototype,k=T.isPrototypeOf,P=m("toStringTag"),x=g("TYPED_ARRAY_TAG"),C=i&&!!p&&"Opera"!==u(o.opera),O=!1,S={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},M=function(t){if(!s(t))return!1;var e=u(t);return l(S,e)||l(L,e)};for(a in S)o[a]||(C=!1);if((!C||"function"!=typeof _||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},C))for(a in S)o[a]&&p(o[a],_);if((!C||!E||E===T)&&(E=_.prototype,C))for(a in S)o[a]&&p(o[a].prototype,E);if(C&&h(w)!==E&&p(w,E),r&&!l(E,P))for(a in O=!0,f(E,P,{get:function(){return s(this)?this[x]:void 0}}),S)o[a]&&d(o[a],x,a);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:C,TYPED_ARRAY_TAG:O&&x,aTypedArray:function(t){if(M(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p){if(k.call(_,t))return t}else for(var e in S)if(l(S,a)){var n=o[e];if(n&&(t===n||k.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(r){if(n)for(var a in S){var i=o[a];if(i&&l(i.prototype,t))try{delete i.prototype[t]}catch(t){}}E[t]&&!n||c(E,t,n?e:C&&y[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var a,i;if(r){if(p){if(n)for(a in S)if((i=o[a])&&l(i,t))try{delete i[t]}catch(t){}if(_[t]&&!n)return;try{return c(_,t,n?e:C&&_[t]||e)}catch(t){}}for(a in S)!(i=o[a])||i[t]&&!n||c(i,t,e)}},isView:function(t){if(!s(t))return!1;var e=u(t);return"DataView"===e||l(S,e)||l(L,e)},isTypedArray:M,TypedArray:_,TypedArrayPrototype:E}},{"../internals/array-buffer-native":82,"../internals/classof":91,"../internals/create-non-enumerable-property":98,"../internals/descriptors":103,"../internals/global":120,"../internals/has":121,"../internals/is-object":134,"../internals/object-define-property":149,"../internals/object-get-prototype-of":154,"../internals/object-set-prototype-of":158,"../internals/redefine":165,"../internals/uid":183,"../internals/well-known-symbol":186}],84:[function(t,e,n){"use strict";var s=t("../internals/to-object"),l=t("../internals/to-absolute-index"),u=t("../internals/to-length");e.exports=function(t){for(var e=s(this),n=u(e.length),a=arguments.length,i=l(1<a?arguments[1]:void 0,n),r=2<a?arguments[2]:void 0,o=void 0===r?n:l(r,n);i<o;)e[i++]=t;return e}},{"../internals/to-absolute-index":176,"../internals/to-length":179,"../internals/to-object":180}],85:[function(t,e,n){var l=t("../internals/to-indexed-object"),u=t("../internals/to-length"),d=t("../internals/to-absolute-index"),a=function(s){return function(t,e,n){var a,i=l(t),r=u(i.length),o=d(n,r);if(s&&e!=e){for(;o<r;)if((a=i[o++])!=a)return!0}else for(;o<r;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":176,"../internals/to-indexed-object":177,"../internals/to-length":179}],86:[function(t,e,n){var _=t("../internals/function-bind-context"),E=t("../internals/indexed-object"),T=t("../internals/to-object"),k=t("../internals/to-length"),P=t("../internals/array-species-create"),x=[].push,a=function(h){var p=1==h,m=2==h,g=3==h,v=4==h,y=6==h,b=7==h,w=5==h||y;return function(t,e,n,a){for(var i,r,o=T(t),s=E(o),l=_(e,n,3),u=k(s.length),d=0,c=a||P,f=p?c(t,u):m||b?c(t,0):void 0;d<u;d++)if((w||d in s)&&(r=l(i=s[d],d,o),h))if(p)f[d]=r;else if(r)switch(h){case 3:return!0;case 5:return i;case 6:return d;case 2:x.call(f,i)}else switch(h){case 4:return!1;case 7:x.call(f,i)}return y?-1:g||v?v:f}};e.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterOut:a(7)}},{"../internals/array-species-create":88,"../internals/function-bind-context":117,"../internals/indexed-object":126,"../internals/to-length":179,"../internals/to-object":180}],87:[function(t,e,n){var a=t("../internals/fails"),i=t("../internals/well-known-symbol"),r=t("../internals/engine-v8-version"),o=i("species");e.exports=function(e){return 51<=r||!a(function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},{"../internals/engine-v8-version":111,"../internals/fails":115,"../internals/well-known-symbol":186}],88:[function(t,e,n){var a=t("../internals/is-object"),i=t("../internals/is-array"),r=t("../internals/well-known-symbol")("species");e.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?a(n)&&null===(n=n[r])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},{"../internals/is-array":132,"../internals/is-object":134,"../internals/well-known-symbol":186}],89:[function(t,e,n){var i=t("../internals/well-known-symbol")("iterator"),r=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a={};a[i]=function(){return{next:function(){return{done:n=!0}}}},t(a)}catch(t){}return n}},{"../internals/well-known-symbol":186}],90:[function(t,e,n){var a={}.toString;e.exports=function(t){return a.call(t).slice(8,-1)}},{}],91:[function(t,e,n){var a=t("../internals/to-string-tag-support"),i=t("../internals/classof-raw"),r=t("../internals/well-known-symbol")("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=a?i:function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},{"../internals/classof-raw":90,"../internals/to-string-tag-support":182,"../internals/well-known-symbol":186}],92:[function(t,e,n){"use strict";var u=t("../internals/object-define-property").f,d=t("../internals/object-create"),c=t("../internals/redefine-all"),f=t("../internals/function-bind-context"),h=t("../internals/an-instance"),p=t("../internals/iterate"),o=t("../internals/define-iterator"),s=t("../internals/set-species"),m=t("../internals/descriptors"),g=t("../internals/internal-metadata").fastKey,a=t("../internals/internal-state"),v=a.set,y=a.getterFor;e.exports={getConstructor:function(t,n,a,i){var r=t(function(t,e){h(t,r,n),v(t,{type:n,index:d(null),first:void 0,last:void 0,size:0}),m||(t.size=0),null!=e&&p(e,t[i],{that:t,AS_ENTRIES:a})}),s=y(n),o=function(t,e,n){var a,i,r=s(t),o=l(t,e);return o?o.value=n:(r.last=o={index:i=g(e,!0),key:e,value:n,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=o),a&&(a.next=o),m?r.size++:t.size++,"F"!==i&&(r.index[i]=o)),t},l=function(t,e){var n,a=s(t),i=g(e);if("F"!==i)return a.index[i];for(n=a.first;n;n=n.next)if(n.key==e)return n};return c(r.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,m?t.size=0:this.size=0},delete:function(t){var e=s(this),n=l(this,t);if(n){var a=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=a),a&&(a.previous=i),e.first==n&&(e.first=a),e.last==n&&(e.last=i),m?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=s(this),a=f(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(a(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),c(r.prototype,a?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),m&&u(r.prototype,"size",{get:function(){return s(this).size}}),r},setStrong:function(t,e,n){var a=e+" Iterator",i=y(e),r=y(a);o(t,e,function(t,e){v(this,{type:a,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=r(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),s(e)}}},{"../internals/an-instance":80,"../internals/define-iterator":101,"../internals/descriptors":103,"../internals/function-bind-context":117,"../internals/internal-metadata":129,"../internals/internal-state":130,"../internals/iterate":137,"../internals/object-create":147,"../internals/object-define-property":149,"../internals/redefine-all":164,"../internals/set-species":168}],93:[function(t,e,n){"use strict";var g=t("../internals/export"),v=t("../internals/global"),y=t("../internals/is-forced"),b=t("../internals/redefine"),w=t("../internals/internal-metadata"),_=t("../internals/iterate"),E=t("../internals/an-instance"),T=t("../internals/is-object"),k=t("../internals/fails"),P=t("../internals/check-correctness-of-iteration"),x=t("../internals/set-to-string-tag"),C=t("../internals/inherit-if-required");e.exports=function(a,t,e){var i=-1!==a.indexOf("Map"),r=-1!==a.indexOf("Weak"),o=i?"set":"add",s=v[a],l=s&&s.prototype,u=s,n={},d=function(t){var n=l[t];b(l,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!T(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!T(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!T(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})};if(y(a,"function"!=typeof s||!(r||l.forEach&&!k(function(){(new s).entries().next()}))))u=e.getConstructor(t,a,i,o),w.REQUIRED=!0;else if(y(a,!0)){var c=new u,f=c[o](r?{}:-0,1)!=c,h=k(function(){c.has(1)}),p=P(function(t){new s(t)}),m=!r&&k(function(){for(var t=new s,e=5;e--;)t[o](e,e);return!t.has(-0)});p||(((u=t(function(t,e){E(t,u,a);var n=C(new s,t,u);return null!=e&&_(e,n[o],{that:n,AS_ENTRIES:i}),n})).prototype=l).constructor=u),(h||m)&&(d("delete"),d("has"),i&&d("get")),(m||f)&&d(o),r&&l.clear&&delete l.clear}return n[a]=u,g({global:!0,forced:u!=s},n),x(u,a),r||e.setStrong(u,a,i),u}},{"../internals/an-instance":80,"../internals/check-correctness-of-iteration":89,"../internals/export":114,"../internals/fails":115,"../internals/global":120,"../internals/inherit-if-required":127,"../internals/internal-metadata":129,"../internals/is-forced":133,"../internals/is-object":134,"../internals/iterate":137,"../internals/redefine":165,"../internals/set-to-string-tag":169}],94:[function(t,e,n){var s=t("../internals/has"),l=t("../internals/own-keys"),u=t("../internals/object-get-own-property-descriptor"),d=t("../internals/object-define-property");e.exports=function(t,e){for(var n=l(e),a=d.f,i=u.f,r=0;r<n.length;r++){var o=n[r];s(t,o)||a(t,o,i(e,o))}}},{"../internals/has":121,"../internals/object-define-property":149,"../internals/object-get-own-property-descriptor":150,"../internals/own-keys":160}],95:[function(t,e,n){var a=t("../internals/well-known-symbol")("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[a]=!1,"/./"[e](n)}catch(t){}}return!1}},{"../internals/well-known-symbol":186}],96:[function(t,e,n){var a=t("../internals/fails");e.exports=!a(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},{"../internals/fails":115}],97:[function(t,e,n){"use strict";var i=t("../internals/iterators-core").IteratorPrototype,r=t("../internals/object-create"),o=t("../internals/create-property-descriptor"),s=t("../internals/set-to-string-tag"),l=t("../internals/iterators"),u=function(){return this};e.exports=function(t,e,n){var a=e+" Iterator";return t.prototype=r(i,{next:o(1,n)}),s(t,a,!1,!0),l[a]=u,t}},{"../internals/create-property-descriptor":99,"../internals/iterators":140,"../internals/iterators-core":139,"../internals/object-create":147,"../internals/set-to-string-tag":169}],98:[function(t,e,n){var a=t("../internals/descriptors"),i=t("../internals/object-define-property"),r=t("../internals/create-property-descriptor");e.exports=a?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},{"../internals/create-property-descriptor":99,"../internals/descriptors":103,"../internals/object-define-property":149}],99:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],100:[function(t,e,n){"use strict";var i=t("../internals/to-primitive"),r=t("../internals/object-define-property"),o=t("../internals/create-property-descriptor");e.exports=function(t,e,n){var a=i(e);a in t?r.f(t,a,o(0,n)):t[a]=n}},{"../internals/create-property-descriptor":99,"../internals/object-define-property":149,"../internals/to-primitive":181}],101:[function(t,e,n){"use strict";var v=t("../internals/export"),y=t("../internals/create-iterator-constructor"),b=t("../internals/object-get-prototype-of"),w=t("../internals/object-set-prototype-of"),_=t("../internals/set-to-string-tag"),E=t("../internals/create-non-enumerable-property"),T=t("../internals/redefine"),a=t("../internals/well-known-symbol"),k=t("../internals/is-pure"),P=t("../internals/iterators"),i=t("../internals/iterators-core"),x=i.IteratorPrototype,C=i.BUGGY_SAFARI_ITERATORS,O=a("iterator"),S="values",L=function(){return this};e.exports=function(t,e,n,a,i,r,o){y(n,e,a);var s,l,u,d=function(t){if(t===i&&m)return m;if(!C&&t in h)return h[t];switch(t){case"keys":case S:case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},c=e+" Iterator",f=!1,h=t.prototype,p=h[O]||h["@@iterator"]||i&&h[i],m=!C&&p||d(i),g="Array"==e&&h.entries||p;if(g&&(s=b(g.call(new t)),x!==Object.prototype&&s.next&&(k||b(s)===x||(w?w(s,x):"function"!=typeof s[O]&&E(s,O,L)),_(s,c,!0,!0),k&&(P[c]=L))),i==S&&p&&p.name!==S&&(f=!0,m=function(){return p.call(this)}),k&&!o||h[O]===m||E(h,O,m),P[e]=m,i)if(l={values:d(S),keys:r?m:d("keys"),entries:d("entries")},o)for(u in l)!C&&!f&&u in h||T(h,u,l[u]);else v({target:e,proto:!0,forced:C||f},l);return l}},{"../internals/create-iterator-constructor":97,"../internals/create-non-enumerable-property":98,"../internals/export":114,"../internals/is-pure":135,"../internals/iterators":140,"../internals/iterators-core":139,"../internals/object-get-prototype-of":154,"../internals/object-set-prototype-of":158,"../internals/redefine":165,"../internals/set-to-string-tag":169,"../internals/well-known-symbol":186}],102:[function(t,e,n){var a=t("../internals/path"),i=t("../internals/has"),r=t("../internals/well-known-symbol-wrapped"),o=t("../internals/object-define-property").f;e.exports=function(t){var e=a.Symbol||(a.Symbol={});i(e,t)||o(e,t,{value:r.f(t)})}},{"../internals/has":121,"../internals/object-define-property":149,"../internals/path":161,"../internals/well-known-symbol-wrapped":185}],103:[function(t,e,n){var a=t("../internals/fails");e.exports=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":115}],104:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/is-object"),r=a.document,o=i(r)&&i(r.createElement);e.exports=function(t){return o?r.createElement(t):{}}},{"../internals/global":120,"../internals/is-object":134}],105:[function(t,e,n){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],106:[function(t,e,n){e.exports="object"==typeof window},{}],107:[function(t,e,n){var a=t("../internals/engine-user-agent");e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(a)},{"../internals/engine-user-agent":110}],108:[function(t,e,n){var a=t("../internals/classof-raw"),i=t("../internals/global");e.exports="process"==a(i.process)},{"../internals/classof-raw":90,"../internals/global":120}],109:[function(t,e,n){var a=t("../internals/engine-user-agent");e.exports=/web0s(?!.*chrome)/i.test(a)},{"../internals/engine-user-agent":110}],110:[function(t,e,n){var a=t("../internals/get-built-in");e.exports=a("navigator","userAgent")||""},{"../internals/get-built-in":118}],111:[function(t,e,n){var a,i,r=t("../internals/global"),o=t("../internals/engine-user-agent"),s=r.process,l=s&&s.versions,u=l&&l.v8;u?i=(a=u.split("."))[0]<4?1:a[0]+a[1]:o&&(!(a=o.match(/Edge\/(\d+)/))||74<=a[1])&&(a=o.match(/Chrome\/(\d+)/))&&(i=a[1]),e.exports=i&&+i},{"../internals/engine-user-agent":110,"../internals/global":120}],112:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/function-bind-context"),r=Function.call;e.exports=function(t,e,n){return i(r,a[t].prototype[e],n)}},{"../internals/function-bind-context":117,"../internals/global":120}],113:[function(t,e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],114:[function(t,e,n){var d=t("../internals/global"),c=t("../internals/object-get-own-property-descriptor").f,f=t("../internals/create-non-enumerable-property"),h=t("../internals/redefine"),p=t("../internals/set-global"),m=t("../internals/copy-constructor-properties"),g=t("../internals/is-forced");e.exports=function(t,e){var n,a,i,r,o,s=t.target,l=t.global,u=t.stat;if(n=l?d:u?d[s]||p(s,{}):(d[s]||{}).prototype)for(a in e){if(r=e[a],i=t.noTargetGet?(o=c(n,a))&&o.value:n[a],!g(l?a:s+(u?".":"#")+a,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;m(r,i)}(t.sham||i&&i.sham)&&f(r,"sham",!0),h(n,a,r,t)}}},{"../internals/copy-constructor-properties":94,"../internals/create-non-enumerable-property":98,"../internals/global":120,"../internals/is-forced":133,"../internals/object-get-own-property-descriptor":150,"../internals/redefine":165,"../internals/set-global":167}],115:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],116:[function(t,e,n){var a=t("../internals/fails");e.exports=!a(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":115}],117:[function(t,e,n){var r=t("../internals/a-function");e.exports=function(a,i,t){if(r(a),void 0===i)return a;switch(t){case 0:return function(){return a.call(i)};case 1:return function(t){return a.call(i,t)};case 2:return function(t,e){return a.call(i,t,e)};case 3:return function(t,e,n){return a.call(i,t,e,n)}}return function(){return a.apply(i,arguments)}}},{"../internals/a-function":77}],118:[function(t,e,n){var a=t("../internals/path"),i=t("../internals/global"),r=function(t){return"function"==typeof t?t:void 0};e.exports=function(t,e){return arguments.length<2?r(a[t])||r(i[t]):a[t]&&a[t][e]||i[t]&&i[t][e]}},{"../internals/global":120,"../internals/path":161}],119:[function(t,e,n){var a=t("../internals/classof"),i=t("../internals/iterators"),r=t("../internals/well-known-symbol")("iterator");e.exports=function(t){if(null!=t)return t[r]||t["@@iterator"]||i[a(t)]}},{"../internals/classof":91,"../internals/iterators":140,"../internals/well-known-symbol":186}],120:[function(t,n,e){(function(e){(function(){var t=function(t){return t&&t.Math==Math&&t};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(t,e,n){var a=t("../internals/to-object"),i={}.hasOwnProperty;e.exports=function(t,e){return i.call(a(t),e)}},{"../internals/to-object":180}],122:[function(t,e,n){e.exports={}},{}],123:[function(t,e,n){var a=t("../internals/global");e.exports=function(t,e){var n=a.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},{"../internals/global":120}],124:[function(t,e,n){var a=t("../internals/get-built-in");e.exports=a("document","documentElement")},{"../internals/get-built-in":118}],125:[function(t,e,n){var a=t("../internals/descriptors"),i=t("../internals/fails"),r=t("../internals/document-create-element");e.exports=!a&&!i(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":103,"../internals/document-create-element":104,"../internals/fails":115}],126:[function(t,e,n){var a=t("../internals/fails"),i=t("../internals/classof-raw"),r="".split;e.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?r.call(t,""):Object(t)}:Object},{"../internals/classof-raw":90,"../internals/fails":115}],127:[function(t,e,n){var r=t("../internals/is-object"),o=t("../internals/object-set-prototype-of");e.exports=function(t,e,n){var a,i;return o&&"function"==typeof(a=e.constructor)&&a!==n&&r(i=a.prototype)&&i!==n.prototype&&o(t,i),t}},{"../internals/is-object":134,"../internals/object-set-prototype-of":158}],128:[function(t,e,n){var a=t("../internals/shared-store"),i=Function.toString;"function"!=typeof a.inspectSource&&(a.inspectSource=function(t){return i.call(t)}),e.exports=a.inspectSource},{"../internals/shared-store":171}],129:[function(t,e,n){var a=t("../internals/hidden-keys"),i=t("../internals/is-object"),r=t("../internals/has"),o=t("../internals/object-define-property").f,s=t("../internals/uid"),l=t("../internals/freezing"),u=s("meta"),d=0,c=Object.isExtensible||function(){return!0},f=function(t){o(t,u,{value:{objectID:"O"+ ++d,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,u)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[u].objectID},getWeakData:function(t,e){if(!r(t,u)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[u].weakData},onFreeze:function(t){return l&&h.REQUIRED&&c(t)&&!r(t,u)&&f(t),t}};a[u]=!0},{"../internals/freezing":116,"../internals/has":121,"../internals/hidden-keys":122,"../internals/is-object":134,"../internals/object-define-property":149,"../internals/uid":183}],130:[function(t,e,n){var a,i,r,o=t("../internals/native-weak-map"),s=t("../internals/global"),l=t("../internals/is-object"),u=t("../internals/create-non-enumerable-property"),d=t("../internals/has"),c=t("../internals/shared-store"),f=t("../internals/shared-key"),h=t("../internals/hidden-keys"),p="Object already initialized",m=s.WeakMap;if(o||c.state){var g=c.state||(c.state=new m),v=g.get,y=g.has,b=g.set;a=function(t,e){if(y.call(g,t))throw new TypeError(p);return e.facade=t,b.call(g,t,e),e},i=function(t){return v.call(g,t)||{}},r=function(t){return y.call(g,t)}}else{var w=f("state");h[w]=!0,a=function(t,e){if(d(t,w))throw new TypeError(p);return e.facade=t,u(t,w,e),e},i=function(t){return d(t,w)?t[w]:{}},r=function(t){return d(t,w)}}e.exports={set:a,get:i,has:r,enforce:function(t){return r(t)?i(t):a(t,{})},getterFor:function(n){return function(t){var e;if(!l(t)||(e=i(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}}},{"../internals/create-non-enumerable-property":98,"../internals/global":120,"../internals/has":121,"../internals/hidden-keys":122,"../internals/is-object":134,"../internals/native-weak-map":144,"../internals/shared-key":170,"../internals/shared-store":171}],131:[function(t,e,n){var a=t("../internals/well-known-symbol"),i=t("../internals/iterators"),r=a("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},{"../internals/iterators":140,"../internals/well-known-symbol":186}],132:[function(t,e,n){var a=t("../internals/classof-raw");e.exports=Array.isArray||function(t){return"Array"==a(t)}},{"../internals/classof-raw":90}],133:[function(t,e,n){var a=t("../internals/fails"),i=/#|\.prototype\./,r=function(t,e){var n=s[o(t)];return n==u||n!=l&&("function"==typeof e?a(e):!!e)},o=r.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=r.data={},l=r.NATIVE="N",u=r.POLYFILL="P";e.exports=r},{"../internals/fails":115}],134:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],135:[function(t,e,n){e.exports=!1},{}],136:[function(t,e,n){var a=t("../internals/is-object"),i=t("../internals/classof-raw"),r=t("../internals/well-known-symbol")("match");e.exports=function(t){var e;return a(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},{"../internals/classof-raw":90,"../internals/is-object":134,"../internals/well-known-symbol":186}],137:[function(t,e,n){var v=t("../internals/an-object"),y=t("../internals/is-array-iterator-method"),b=t("../internals/to-length"),w=t("../internals/function-bind-context"),_=t("../internals/get-iterator-method"),E=t("../internals/iterator-close"),T=function(t,e){this.stopped=t,this.result=e};e.exports=function(t,e,n){var a,i,r,o,s,l,u,d=n&&n.that,c=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=w(e,d,1+c+h),m=function(t){return a&&E(a),new T(!0,t)},g=function(t){return c?(v(t),h?p(t[0],t[1],m):p(t[0],t[1])):h?p(t,m):p(t)};if(f)a=t;else{if("function"!=typeof(i=_(t)))throw TypeError("Target is not iterable");if(y(i)){for(r=0,o=b(t.length);r<o;r++)if((s=g(t[r]))&&s instanceof T)return s;return new T(!1)}a=i.call(t)}for(l=a.next;!(u=l.call(a)).done;){try{s=g(u.value)}catch(t){throw E(a),t}if("object"==typeof s&&s&&s instanceof T)return s}return new T(!1)}},{"../internals/an-object":81,"../internals/function-bind-context":117,"../internals/get-iterator-method":119,"../internals/is-array-iterator-method":131,"../internals/iterator-close":138,"../internals/to-length":179}],138:[function(t,e,n){var a=t("../internals/an-object");e.exports=function(t){var e=t.return;if(void 0!==e)return a(e.call(t)).value}},{"../internals/an-object":81}],139:[function(t,e,n){"use strict";var a,i,r,o=t("../internals/fails"),s=t("../internals/object-get-prototype-of"),l=t("../internals/create-non-enumerable-property"),u=t("../internals/has"),d=t("../internals/well-known-symbol"),c=t("../internals/is-pure"),f=d("iterator"),h=!1;[].keys&&("next"in(r=[].keys())?(i=s(s(r)))!==Object.prototype&&(a=i):h=!0);var p=null==a||o(function(){var t={};return a[f].call(t)!==t});p&&(a={}),c&&!p||u(a,f)||l(a,f,function(){return this}),e.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":98,"../internals/fails":115,"../internals/has":121,"../internals/is-pure":135,"../internals/object-get-prototype-of":154,"../internals/well-known-symbol":186}],140:[function(t,e,n){arguments[4][122][0].apply(n,arguments)},{dup:122}],141:[function(t,e,n){var a,i,r,o,s,l,u,d,c=t("../internals/global"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/task").set,p=t("../internals/engine-is-ios"),m=t("../internals/engine-is-webos-webkit"),g=t("../internals/engine-is-node"),v=c.MutationObserver||c.WebKitMutationObserver,y=c.document,b=c.process,w=c.Promise,_=f(c,"queueMicrotask"),E=_&&_.value;E||(a=function(){var t,e;for(g&&(t=b.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?o():r=void 0,t}}r=void 0,t&&t.enter()},p||g||m||!v||!y?w&&w.resolve?((u=w.resolve(void 0)).constructor=w,d=u.then,o=function(){d.call(u,a)}):o=g?function(){b.nextTick(a)}:function(){h.call(c,a)}:(s=!0,l=y.createTextNode(""),new v(a).observe(l,{characterData:!0}),o=function(){l.data=s=!s})),e.exports=E||function(t){var e={fn:t,next:void 0};r&&(r.next=e),i||(i=e,o()),r=e}},{"../internals/engine-is-ios":107,"../internals/engine-is-node":108,"../internals/engine-is-webos-webkit":109,"../internals/global":120,"../internals/object-get-own-property-descriptor":150,"../internals/task":175}],142:[function(t,e,n){var a=t("../internals/global");e.exports=a.Promise},{"../internals/global":120}],143:[function(t,e,n){var a=t("../internals/engine-v8-version"),i=t("../internals/fails");e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())||!Symbol.sham&&a&&a<41})},{"../internals/engine-v8-version":111,"../internals/fails":115}],144:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/inspect-source"),r=a.WeakMap;e.exports="function"==typeof r&&/native code/.test(i(r))},{"../internals/global":120,"../internals/inspect-source":128}],145:[function(t,e,n){"use strict";var i=t("../internals/a-function"),a=function(t){var n,a;this.promise=new t(function(t,e){if(void 0!==n||void 0!==a)throw TypeError("Bad Promise constructor");n=t,a=e}),this.resolve=i(n),this.reject=i(a)};e.exports.f=function(t){return new a(t)}},{"../internals/a-function":77}],146:[function(t,e,n){var a=t("../internals/is-regexp");e.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},{"../internals/is-regexp":136}],147:[function(t,e,n){var a,i=t("../internals/an-object"),r=t("../internals/object-define-properties"),o=t("../internals/enum-bug-keys"),s=t("../internals/hidden-keys"),l=t("../internals/html"),u=t("../internals/document-create-element"),d=t("../internals/shared-key"),c="prototype",f="script",h=d("IE_PROTO"),p=function(){},m=function(t){return"<script>"+t+"</"+f+">"},g=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;g=a?function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e}(a):((e=u("iframe")).style.display="none",l.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F);for(var n=o.length;n--;)delete g[c][o[n]];return g()};s[h]=!0,e.exports=Object.create||function(t,e){var n;return null!==t?(p[c]=i(t),n=new p,p[c]=null,n[h]=t):n=g(),void 0===e?n:r(n,e)}},{"../internals/an-object":81,"../internals/document-create-element":104,"../internals/enum-bug-keys":113,"../internals/hidden-keys":122,"../internals/html":124,"../internals/object-define-properties":148,"../internals/shared-key":170}],148:[function(t,e,n){var a=t("../internals/descriptors"),o=t("../internals/object-define-property"),s=t("../internals/an-object"),l=t("../internals/object-keys");e.exports=a?Object.defineProperties:function(t,e){s(t);for(var n,a=l(e),i=a.length,r=0;r<i;)o.f(t,n=a[r++],e[n]);return t}},{"../internals/an-object":81,"../internals/descriptors":103,"../internals/object-define-property":149,"../internals/object-keys":156}],149:[function(t,e,n){var a=t("../internals/descriptors"),i=t("../internals/ie8-dom-define"),r=t("../internals/an-object"),o=t("../internals/to-primitive"),s=Object.defineProperty;n.f=a?s:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},{"../internals/an-object":81,"../internals/descriptors":103,"../internals/ie8-dom-define":125,"../internals/to-primitive":181}],150:[function(t,e,n){var a=t("../internals/descriptors"),i=t("../internals/object-property-is-enumerable"),r=t("../internals/create-property-descriptor"),o=t("../internals/to-indexed-object"),s=t("../internals/to-primitive"),l=t("../internals/has"),u=t("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;n.f=a?d:function(t,e){if(t=o(t),e=s(e,!0),u)try{return d(t,e)}catch(t){}if(l(t,e))return r(!i.f.call(t,e),t[e])}},{"../internals/create-property-descriptor":99,"../internals/descriptors":103,"../internals/has":121,"../internals/ie8-dom-define":125,"../internals/object-property-is-enumerable":157,"../internals/to-indexed-object":177,"../internals/to-primitive":181}],151:[function(t,e,n){var a=t("../internals/to-indexed-object"),i=t("../internals/object-get-own-property-names").f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return o&&"[object Window]"==r.call(t)?function(t){try{return i(t)}catch(t){return o.slice()}}(t):i(a(t))}},{"../internals/object-get-own-property-names":152,"../internals/to-indexed-object":177}],152:[function(t,e,n){var a=t("../internals/object-keys-internal"),i=t("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},{"../internals/enum-bug-keys":113,"../internals/object-keys-internal":155}],153:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],154:[function(t,e,n){var a=t("../internals/has"),i=t("../internals/to-object"),r=t("../internals/shared-key"),o=t("../internals/correct-prototype-getter"),s=r("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(t){return t=i(t),a(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},{"../internals/correct-prototype-getter":96,"../internals/has":121,"../internals/shared-key":170,"../internals/to-object":180}],155:[function(t,e,n){var o=t("../internals/has"),s=t("../internals/to-indexed-object"),l=t("../internals/array-includes").indexOf,u=t("../internals/hidden-keys");e.exports=function(t,e){var n,a=s(t),i=0,r=[];for(n in a)!o(u,n)&&o(a,n)&&r.push(n);for(;e.length>i;)o(a,n=e[i++])&&(~l(r,n)||r.push(n));return r}},{"../internals/array-includes":85,"../internals/has":121,"../internals/hidden-keys":122,"../internals/to-indexed-object":177}],156:[function(t,e,n){var a=t("../internals/object-keys-internal"),i=t("../internals/enum-bug-keys");e.exports=Object.keys||function(t){return a(t,i)}},{"../internals/enum-bug-keys":113,"../internals/object-keys-internal":155}],157:[function(t,e,n){"use strict";var a={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!a.call({1:2},1);n.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:a},{}],158:[function(t,e,n){var i=t("../internals/an-object"),r=t("../internals/a-possible-prototype");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,a=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),a=t instanceof Array}catch(t){}return function(t,e){return i(t),r(e),a?n.call(t,e):t.__proto__=e,t}}():void 0)},{"../internals/a-possible-prototype":78,"../internals/an-object":81}],159:[function(t,e,n){"use strict";var a=t("../internals/to-string-tag-support"),i=t("../internals/classof");e.exports=a?{}.toString:function(){return"[object "+i(this)+"]"}},{"../internals/classof":91,"../internals/to-string-tag-support":182}],160:[function(t,e,n){var a=t("../internals/get-built-in"),i=t("../internals/object-get-own-property-names"),r=t("../internals/object-get-own-property-symbols"),o=t("../internals/an-object");e.exports=a("Reflect","ownKeys")||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},{"../internals/an-object":81,"../internals/get-built-in":118,"../internals/object-get-own-property-names":152,"../internals/object-get-own-property-symbols":153}],161:[function(t,e,n){var a=t("../internals/global");e.exports=a},{"../internals/global":120}],162:[function(t,e,n){e.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},{}],163:[function(t,e,n){var a=t("../internals/an-object"),i=t("../internals/is-object"),r=t("../internals/new-promise-capability");e.exports=function(t,e){if(a(t),i(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}},{"../internals/an-object":81,"../internals/is-object":134,"../internals/new-promise-capability":145}],164:[function(t,e,n){var i=t("../internals/redefine");e.exports=function(t,e,n){for(var a in e)i(t,a,e[a],n);return t}},{"../internals/redefine":165}],165:[function(t,e,n){var l=t("../internals/global"),u=t("../internals/create-non-enumerable-property"),d=t("../internals/has"),c=t("../internals/set-global"),a=t("../internals/inspect-source"),i=t("../internals/internal-state"),r=i.get,f=i.enforce,h=String(String).split("String");(e.exports=function(t,e,n,a){var i,r=!!a&&!!a.unsafe,o=!!a&&!!a.enumerable,s=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||d(n,"name")||u(n,"name",e),(i=f(n)).source||(i.source=h.join("string"==typeof e?e:""))),t!==l?(r?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:u(t,e,n)):o?t[e]=n:c(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&r(this).source||a(this)})},{"../internals/create-non-enumerable-property":98,"../internals/global":120,"../internals/has":121,"../internals/inspect-source":128,"../internals/internal-state":130,"../internals/set-global":167}],166:[function(t,e,n){e.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},{}],167:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/create-non-enumerable-property");e.exports=function(e,n){try{i(a,e,n)}catch(t){a[e]=n}return n}},{"../internals/create-non-enumerable-property":98,"../internals/global":120}],168:[function(t,e,n){"use strict";var a=t("../internals/get-built-in"),i=t("../internals/object-define-property"),r=t("../internals/well-known-symbol"),o=t("../internals/descriptors"),s=r("species");e.exports=function(t){var e=a(t),n=i.f;o&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":103,"../internals/get-built-in":118,"../internals/object-define-property":149,"../internals/well-known-symbol":186}],169:[function(t,e,n){var a=t("../internals/object-define-property").f,i=t("../internals/has"),r=t("../internals/well-known-symbol")("toStringTag");e.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,r)&&a(t,r,{configurable:!0,value:e})}},{"../internals/has":121,"../internals/object-define-property":149,"../internals/well-known-symbol":186}],170:[function(t,e,n){var a=t("../internals/shared"),i=t("../internals/uid"),r=a("keys");e.exports=function(t){return r[t]||(r[t]=i(t))}},{"../internals/shared":172,"../internals/uid":183}],171:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/set-global"),r="__core-js_shared__",o=a[r]||i(r,{});e.exports=o},{"../internals/global":120,"../internals/set-global":167}],172:[function(t,e,n){var a=t("../internals/is-pure"),i=t("../internals/shared-store");(e.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.12.1",mode:a?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":135,"../internals/shared-store":171}],173:[function(t,e,n){var i=t("../internals/an-object"),r=t("../internals/a-function"),o=t("../internals/well-known-symbol")("species");e.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||null==(n=i(a)[o])?e:r(n)}},{"../internals/a-function":77,"../internals/an-object":81,"../internals/well-known-symbol":186}],174:[function(t,e,n){var l=t("../internals/to-integer"),u=t("../internals/require-object-coercible"),a=function(s){return function(t,e){var n,a,i=String(u(t)),r=l(e),o=i.length;return r<0||o<=r?s?"":void 0:(n=i.charCodeAt(r))<55296||56319<n||r+1===o||(a=i.charCodeAt(r+1))<56320||57343<a?s?i.charAt(r):n:s?i.slice(r,r+2):a-56320+(n-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":166,"../internals/to-integer":178}],175:[function(t,e,n){var a,i,r,o=t("../internals/global"),s=t("../internals/fails"),l=t("../internals/function-bind-context"),u=t("../internals/html"),d=t("../internals/document-create-element"),c=t("../internals/engine-is-ios"),f=t("../internals/engine-is-node"),h=o.location,p=o.setImmediate,m=o.clearImmediate,g=o.process,v=o.MessageChannel,y=o.Dispatch,b=0,w={},_="onreadystatechange",E=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},T=function(t){return function(){E(t)}},k=function(t){E(t.data)},P=function(t){o.postMessage(t+"",h.protocol+"//"+h.host)};p&&m||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},a(b),b},m=function(t){delete w[t]},f?a=function(t){g.nextTick(T(t))}:y&&y.now?a=function(t){y.now(T(t))}:v&&!c?(r=(i=new v).port2,i.port1.onmessage=k,a=l(r.postMessage,r,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&h&&"file:"!==h.protocol&&!s(P)?(a=P,o.addEventListener("message",k,!1)):a=_ in d("script")?function(t){u.appendChild(d("script"))[_]=function(){u.removeChild(this),E(t)}}:function(t){setTimeout(T(t),0)}),e.exports={set:p,clear:m}},{"../internals/document-create-element":104,"../internals/engine-is-ios":107,"../internals/engine-is-node":108,"../internals/fails":115,"../internals/function-bind-context":117,"../internals/global":120,"../internals/html":124}],176:[function(t,e,n){var a=t("../internals/to-integer"),i=Math.max,r=Math.min;e.exports=function(t,e){var n=a(t);return n<0?i(n+e,0):r(n,e)}},{"../internals/to-integer":178}],177:[function(t,e,n){var a=t("../internals/indexed-object"),i=t("../internals/require-object-coercible");e.exports=function(t){return a(i(t))}},{"../internals/indexed-object":126,"../internals/require-object-coercible":166}],178:[function(t,e,n){var a=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(0<t?i:a)(t)}},{}],179:[function(t,e,n){var a=t("../internals/to-integer"),i=Math.min;e.exports=function(t){return 0<t?i(a(t),9007199254740991):0}},{"../internals/to-integer":178}],180:[function(t,e,n){var a=t("../internals/require-object-coercible");e.exports=function(t){return Object(a(t))}},{"../internals/require-object-coercible":166}],181:[function(t,e,n){var i=t("../internals/is-object");e.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":134}],182:[function(t,e,n){var a={};a[t("../internals/well-known-symbol")("toStringTag")]="z",e.exports="[object z]"===String(a)},{"../internals/well-known-symbol":186}],183:[function(t,e,n){var a=0,i=Math.random();e.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++a+i).toString(36)}},{}],184:[function(t,e,n){var a=t("../internals/native-symbol");e.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":143}],185:[function(t,e,n){var a=t("../internals/well-known-symbol");n.f=a},{"../internals/well-known-symbol":186}],186:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/shared"),r=t("../internals/has"),o=t("../internals/uid"),s=t("../internals/native-symbol"),l=t("../internals/use-symbol-as-uid"),u=i("wks"),d=a.Symbol,c=l?d:d&&d.withoutSetter||o;e.exports=function(t){return r(u,t)&&(s||"string"==typeof u[t])||(s&&r(d,t)?u[t]=d[t]:u[t]=c("Symbol."+t)),u[t]}},{"../internals/global":120,"../internals/has":121,"../internals/native-symbol":143,"../internals/shared":172,"../internals/uid":183,"../internals/use-symbol-as-uid":184}],187:[function(t,e,n){"use strict";var a=t("../internals/export"),i=t("../internals/object-get-prototype-of"),r=t("../internals/object-set-prototype-of"),o=t("../internals/object-create"),s=t("../internals/create-non-enumerable-property"),l=t("../internals/create-property-descriptor"),u=t("../internals/iterate"),d=function(t,e){var n=this;if(!(n instanceof d))return new d(t,e);r&&(n=r(new Error(void 0),i(n))),void 0!==e&&s(n,"message",String(e));var a=[];return u(t,a.push,{that:a}),s(n,"errors",a),n};d.prototype=o(Error.prototype,{constructor:l(5,d),message:l(5,""),name:l(5,"AggregateError")}),a({global:!0},{AggregateError:d})},{"../internals/create-non-enumerable-property":98,"../internals/create-property-descriptor":99,"../internals/export":114,"../internals/iterate":137,"../internals/object-create":147,"../internals/object-get-prototype-of":154,"../internals/object-set-prototype-of":158}],188:[function(t,e,n){"use strict";var a=t("../internals/export"),i=t("../internals/fails"),r=t("../internals/is-array"),o=t("../internals/is-object"),u=t("../internals/to-object"),d=t("../internals/to-length"),c=t("../internals/create-property"),f=t("../internals/array-species-create"),s=t("../internals/array-method-has-species-support"),l=t("../internals/well-known-symbol"),h=t("../internals/engine-v8-version"),p=l("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=51<=h||!i(function(){var t=[];return t[p]=!1,t.concat()[0]!==t}),y=s("concat"),b=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)};a({target:"Array",proto:!0,forced:!v||!y},{concat:function(t){var e,n,a,i,r,o=u(this),s=f(o,0),l=0;for(e=-1,a=arguments.length;e<a;e++)if(r=-1===e?o:arguments[e],b(r)){if(i=d(r.length),m<l+i)throw TypeError(g);for(n=0;n<i;n++,l++)n in r&&c(s,l,r[n])}else{if(m<=l)throw TypeError(g);c(s,l++,r)}return s.length=l,s}})},{"../internals/array-method-has-species-support":87,"../internals/array-species-create":88,"../internals/create-property":100,"../internals/engine-v8-version":111,"../internals/export":114,"../internals/fails":115,"../internals/is-array":132,"../internals/is-object":134,"../internals/to-length":179,"../internals/to-object":180,"../internals/well-known-symbol":186}],189:[function(t,e,n){var a=t("../internals/export"),i=t("../internals/array-fill"),r=t("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:i}),r("fill")},{"../internals/add-to-unscopables":79,"../internals/array-fill":84,"../internals/export":114}],190:[function(t,e,n){"use strict";var a=t("../internals/to-indexed-object"),i=t("../internals/add-to-unscopables"),r=t("../internals/iterators"),o=t("../internals/internal-state"),s=t("../internals/define-iterator"),l="Array Iterator",u=o.set,d=o.getterFor(l);e.exports=s(Array,"Array",function(t,e){u(this,{type:l,target:a(t),index:0,kind:e})},function(){var t=d(this),e=t.target,n=t.kind,a=t.index++;return!e||a>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:a,done:!1}:"values"==n?{value:e[a],done:!1}:{value:[a,e[a]],done:!1}},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},{"../internals/add-to-unscopables":79,"../internals/define-iterator":101,"../internals/internal-state":130,"../internals/iterators":140,"../internals/to-indexed-object":177}],191:[function(t,e,n){var a=t("../internals/global");t("../internals/set-to-string-tag")(a.JSON,"JSON",!0)},{"../internals/global":120,"../internals/set-to-string-tag":169}],192:[function(t,e,n){"use strict";var a=t("../internals/collection"),i=t("../internals/collection-strong");e.exports=a("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i)},{"../internals/collection":93,"../internals/collection-strong":92}],193:[function(t,e,n){t("../internals/set-to-string-tag")(Math,"Math",!0)},{"../internals/set-to-string-tag":169}],194:[function(t,e,n){var a=t("../internals/to-string-tag-support"),i=t("../internals/redefine"),r=t("../internals/object-to-string");a||i(Object.prototype,"toString",r,{unsafe:!0})},{"../internals/object-to-string":159,"../internals/redefine":165,"../internals/to-string-tag-support":182}],195:[function(t,e,n){"use strict";var a=t("../internals/export"),u=t("../internals/a-function"),i=t("../internals/new-promise-capability"),r=t("../internals/perform"),d=t("../internals/iterate");a({target:"Promise",stat:!0},{allSettled:function(t){var s=this,e=i.f(s),l=e.resolve,n=e.reject,a=r(function(){var a=u(s.resolve),i=[],r=0,o=1;d(t,function(t){var e=r++,n=!1;i.push(void 0),o++,a.call(s,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--o||l(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--o||l(i))})}),--o||l(i)});return a.error&&n(a.value),e.promise}})},{"../internals/a-function":77,"../internals/export":114,"../internals/iterate":137,"../internals/new-promise-capability":145,"../internals/perform":162}],196:[function(t,e,n){"use strict";var a=t("../internals/export"),c=t("../internals/a-function"),f=t("../internals/get-built-in"),i=t("../internals/new-promise-capability"),r=t("../internals/perform"),h=t("../internals/iterate"),p="No one promise resolved";a({target:"Promise",stat:!0},{any:function(t){var l=this,e=i.f(l),u=e.resolve,d=e.reject,n=r(function(){var a=c(l.resolve),i=[],r=0,o=1,s=!1;h(t,function(t){var e=r++,n=!1;i.push(void 0),o++,a.call(l,t).then(function(t){n||s||(s=!0,u(t))},function(t){n||s||(n=!0,i[e]=t,--o||d(new(f("AggregateError"))(i,p)))})}),--o||d(new(f("AggregateError"))(i,p))});return n.error&&d(n.value),e.promise}})},{"../internals/a-function":77,"../internals/export":114,"../internals/get-built-in":118,"../internals/iterate":137,"../internals/new-promise-capability":145,"../internals/perform":162}],197:[function(t,e,n){"use strict";var a=t("../internals/export"),i=t("../internals/is-pure"),r=t("../internals/native-promise-constructor"),o=t("../internals/fails"),s=t("../internals/get-built-in"),l=t("../internals/species-constructor"),u=t("../internals/promise-resolve"),d=t("../internals/redefine");if(a({target:"Promise",proto:!0,real:!0,forced:!!r&&o(function(){r.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=l(this,s("Promise")),t="function"==typeof e;return this.then(t?function(t){return u(n,e()).then(function(){return t})}:e,t?function(t){return u(n,e()).then(function(){throw t})}:e)}}),!i&&"function"==typeof r){var c=s("Promise").prototype.finally;r.prototype.finally!==c&&d(r.prototype,"finally",c,{unsafe:!0})}},{"../internals/export":114,"../internals/fails":115,"../internals/get-built-in":118,"../internals/is-pure":135,"../internals/native-promise-constructor":142,"../internals/promise-resolve":163,"../internals/redefine":165,"../internals/species-constructor":173}],198:[function(t,e,n){"use strict";var a,i,r,o,s=t("../internals/export"),l=t("../internals/is-pure"),u=t("../internals/global"),d=t("../internals/get-built-in"),c=t("../internals/native-promise-constructor"),f=t("../internals/redefine"),h=t("../internals/redefine-all"),p=t("../internals/object-set-prototype-of"),m=t("../internals/set-to-string-tag"),g=t("../internals/set-species"),v=t("../internals/is-object"),y=t("../internals/a-function"),b=t("../internals/an-instance"),w=t("../internals/inspect-source"),_=t("../internals/iterate"),E=t("../internals/check-correctness-of-iteration"),T=t("../internals/species-constructor"),k=t("../internals/task").set,P=t("../internals/microtask"),x=t("../internals/promise-resolve"),C=t("../internals/host-report-errors"),O=t("../internals/new-promise-capability"),S=t("../internals/perform"),L=t("../internals/internal-state"),M=t("../internals/is-forced"),A=t("../internals/well-known-symbol"),R=t("../internals/engine-is-browser"),B=t("../internals/engine-is-node"),j=t("../internals/engine-v8-version"),I=A("species"),F="Promise",N=L.get,D=L.set,H=L.getterFor(F),W=c&&c.prototype,U=c,Y=W,q=u.TypeError,z=u.document,G=u.process,X=O.f,V=X,K=!!(z&&z.createEvent&&u.dispatchEvent),Z="function"==typeof PromiseRejectionEvent,$="unhandledrejection",Q=!1,J=M(F,function(){var t=w(U)!==String(U);if(!t&&66===j)return!0;if(l&&!Y.finally)return!0;if(51<=j&&/native code/.test(U))return!1;var e=new U(function(t){t(1)}),n=function(t){t(function(){},function(){})};return(e.constructor={})[I]=n,!(Q=e.then(function(){})instanceof n)||!t&&R&&!Z}),tt=J||!E(function(t){U.all(t).catch(function(){})}),et=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},nt=function(c,f){if(!c.notified){c.notified=!0;var h=c.reactions;P(function(){for(var t=c.value,e=1==c.state,n=0;h.length>n;){var a,i,r,o=h[n++],s=e?o.ok:o.fail,l=o.resolve,u=o.reject,d=o.domain;try{s?(e||(2===c.rejection&&ot(c),c.rejection=1),!0===s?a=t:(d&&d.enter(),a=s(t),d&&(d.exit(),r=!0)),a===o.promise?u(q("Promise-chain cycle")):(i=et(a))?i.call(a,l,u):l(a)):u(t)}catch(t){d&&!r&&d.exit(),u(t)}}c.reactions=[],c.notified=!1,f&&!c.rejection&&it(c)})}},at=function(t,e,n){var a,i;K?((a=z.createEvent("Event")).promise=e,a.reason=n,a.initEvent(t,!1,!0),u.dispatchEvent(a)):a={promise:e,reason:n},!Z&&(i=u["on"+t])?i(a):t===$&&C("Unhandled promise rejection",n)},it=function(a){k.call(u,function(){var t,e=a.facade,n=a.value;if(rt(a)&&(t=S(function(){B?G.emit("unhandledRejection",n,e):at($,e,n)}),a.rejection=B||rt(a)?2:1,t.error))throw t.value})},rt=function(t){return 1!==t.rejection&&!t.parent},ot=function(e){k.call(u,function(){var t=e.facade;B?G.emit("rejectionHandled",t):at("rejectionhandled",t,e.value)})},st=function(e,n,a){return function(t){e(n,t,a)}},lt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,nt(t,!0))},ut=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw q("Promise can't be resolved itself");var a=et(t);a?P(function(){var e={done:!1};try{a.call(t,st(ut,e,n),st(lt,e,n))}catch(t){lt(e,t,n)}}):(n.value=t,n.state=1,nt(n,!1))}catch(t){lt({done:!1},t,n)}}};if(J&&(Y=(U=function(t){b(this,U,F),y(t),a.call(this);var e=N(this);try{t(st(ut,e),st(lt,e))}catch(t){lt(e,t)}}).prototype,(a=function(t){D(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(Y,{then:function(t,e){var n=H(this),a=X(T(this,U));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=B?G.domain:void 0,n.parent=!0,n.reactions.push(a),0!=n.state&&nt(n,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new a,e=N(t);this.promise=t,this.resolve=st(ut,e),this.reject=st(lt,e)},O.f=X=function(t){return t===U||t===r?new i(t):V(t)},!l&&"function"==typeof c&&W!==Object.prototype)){o=W.then,Q||(f(W,"then",function(t,e){var n=this;return new U(function(t,e){o.call(n,t,e)}).then(t,e)},{unsafe:!0}),f(W,"catch",Y.catch,{unsafe:!0}));try{delete W.constructor}catch(t){}p&&p(W,Y)}s({global:!0,wrap:!0,forced:J},{Promise:U}),m(U,F,!1,!0),g(F),r=d(F),s({target:F,stat:!0,forced:J},{reject:function(t){var e=X(this);return e.reject.call(void 0,t),e.promise}}),s({target:F,stat:!0,forced:l||J},{resolve:function(t){return x(l&&this===r?U:this,t)}}),s({target:F,stat:!0,forced:tt},{all:function(t){var s=this,e=X(s),l=e.resolve,u=e.reject,n=S(function(){var a=y(s.resolve),i=[],r=0,o=1;_(t,function(t){var e=r++,n=!1;i.push(void 0),o++,a.call(s,t).then(function(t){n||(n=!0,i[e]=t,--o||l(i))},u)}),--o||l(i)});return n.error&&u(n.value),e.promise},race:function(t){var n=this,a=X(n),i=a.reject,e=S(function(){var e=y(n.resolve);_(t,function(t){e.call(n,t).then(a.resolve,i)})});return e.error&&i(e.value),a.promise}})},{"../internals/a-function":77,"../internals/an-instance":80,"../internals/check-correctness-of-iteration":89,"../internals/engine-is-browser":106,"../internals/engine-is-node":108,"../internals/engine-v8-version":111,"../internals/export":114,"../internals/get-built-in":118,"../internals/global":120,"../internals/host-report-errors":123,"../internals/inspect-source":128,"../internals/internal-state":130,"../internals/is-forced":133,"../internals/is-object":134,"../internals/is-pure":135,"../internals/iterate":137,"../internals/microtask":141,"../internals/native-promise-constructor":142,"../internals/new-promise-capability":145,"../internals/object-set-prototype-of":158,"../internals/perform":162,"../internals/promise-resolve":163,"../internals/redefine":165,"../internals/redefine-all":164,"../internals/set-species":168,"../internals/set-to-string-tag":169,"../internals/species-constructor":173,"../internals/task":175,"../internals/well-known-symbol":186}],199:[function(t,e,n){var a=t("../internals/export"),i=t("../internals/global"),r=t("../internals/set-to-string-tag");a({global:!0},{Reflect:{}}),r(i.Reflect,"Reflect",!0)},{"../internals/export":114,"../internals/global":120,"../internals/set-to-string-tag":169}],200:[function(t,e,n){"use strict";var a=t("../internals/collection"),i=t("../internals/collection-strong");e.exports=a("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i)},{"../internals/collection":93,"../internals/collection-strong":92}],201:[function(t,e,n){"use strict";var a,i=t("../internals/export"),r=t("../internals/object-get-own-property-descriptor").f,o=t("../internals/to-length"),s=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible"),u=t("../internals/correct-is-regexp-logic"),d=t("../internals/is-pure"),c="".endsWith,f=Math.min,h=u("endsWith");i({target:"String",proto:!0,forced:!!(d||h||(!(a=r(String.prototype,"endsWith"))||a.writable))&&!h},{endsWith:function(t){var e=String(l(this));s(t);var n=1<arguments.length?arguments[1]:void 0,a=o(e.length),i=void 0===n?a:f(o(n),a),r=String(t);return c?c.call(e,r,i):e.slice(i-r.length,i)===r}})},{"../internals/correct-is-regexp-logic":95,"../internals/export":114,"../internals/is-pure":135,"../internals/not-a-regexp":146,"../internals/object-get-own-property-descriptor":150,"../internals/require-object-coercible":166,"../internals/to-length":179}],202:[function(t,e,n){"use strict";var i=t("../internals/string-multibyte").charAt,a=t("../internals/internal-state"),r=t("../internals/define-iterator"),o="String Iterator",s=a.set,l=a.getterFor(o);r(String,"String",function(t){s(this,{type:o,string:String(t),index:0})},function(){var t,e=l(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=i(n,a),e.index+=t.length,{value:t,done:!1})})},{"../internals/define-iterator":101,"../internals/internal-state":130,"../internals/string-multibyte":174}],203:[function(t,e,n){t("../internals/define-well-known-symbol")("asyncIterator")},{"../internals/define-well-known-symbol":102}],204:[function(t,e,n){"use strict";var a=t("../internals/export"),i=t("../internals/descriptors"),r=t("../internals/global"),o=t("../internals/has"),s=t("../internals/is-object"),l=t("../internals/object-define-property").f,u=t("../internals/copy-constructor-properties"),d=r.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var c={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(c[e]=!0),e};u(f,d);var h=f.prototype=d.prototype;h.constructor=f;var p=h.toString,m="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(o(c,t))return"";var n=m?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:f})}},{"../internals/copy-constructor-properties":94,"../internals/descriptors":103,"../internals/export":114,"../internals/global":120,"../internals/has":121,"../internals/is-object":134,"../internals/object-define-property":149}],205:[function(t,e,n){t("../internals/define-well-known-symbol")("hasInstance")},{"../internals/define-well-known-symbol":102}],206:[function(t,e,n){t("../internals/define-well-known-symbol")("isConcatSpreadable")},{"../internals/define-well-known-symbol":102}],207:[function(t,e,n){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":102}],208:[function(t,e,n){"use strict";var a=t("../internals/export"),i=t("../internals/global"),r=t("../internals/get-built-in"),o=t("../internals/is-pure"),s=t("../internals/descriptors"),l=t("../internals/native-symbol"),u=t("../internals/use-symbol-as-uid"),d=t("../internals/fails"),c=t("../internals/has"),f=t("../internals/is-array"),h=t("../internals/is-object"),p=t("../internals/an-object"),m=t("../internals/to-object"),g=t("../internals/to-indexed-object"),v=t("../internals/to-primitive"),y=t("../internals/create-property-descriptor"),b=t("../internals/object-create"),w=t("../internals/object-keys"),_=t("../internals/object-get-own-property-names"),E=t("../internals/object-get-own-property-names-external"),T=t("../internals/object-get-own-property-symbols"),k=t("../internals/object-get-own-property-descriptor"),P=t("../internals/object-define-property"),x=t("../internals/object-property-is-enumerable"),C=t("../internals/create-non-enumerable-property"),O=t("../internals/redefine"),S=t("../internals/shared"),L=t("../internals/shared-key"),M=t("../internals/hidden-keys"),A=t("../internals/uid"),R=t("../internals/well-known-symbol"),B=t("../internals/well-known-symbol-wrapped"),j=t("../internals/define-well-known-symbol"),I=t("../internals/set-to-string-tag"),F=t("../internals/internal-state"),N=t("../internals/array-iteration").forEach,D=L("hidden"),H="Symbol",W="prototype",U=R("toPrimitive"),Y=F.set,q=F.getterFor(H),z=Object[W],G=i.Symbol,X=r("JSON","stringify"),V=k.f,K=P.f,Z=E.f,$=x.f,Q=S("symbols"),J=S("op-symbols"),tt=S("string-to-symbol-registry"),et=S("symbol-to-string-registry"),nt=S("wks"),at=i.QObject,it=!at||!at[W]||!at[W].findChild,rt=s&&d(function(){return 7!=b(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a})?function(t,e,n){var a=V(z,e);a&&delete z[e],K(t,e,n),a&&t!==z&&K(z,e,a)}:K,ot=function(t,e){var n=Q[t]=b(G[W]);return Y(n,{type:H,tag:t,description:e}),s||(n.description=e),n},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},lt=function(t,e,n){t===z&&lt(J,e,n),p(t);var a=v(e,!0);return p(n),c(Q,a)?(n.enumerable?(c(t,D)&&t[D][a]&&(t[D][a]=!1),n=b(n,{enumerable:y(0,!1)})):(c(t,D)||K(t,D,y(1,{})),t[D][a]=!0),rt(t,a,n)):K(t,a,n)},ut=function(e,t){p(e);var n=g(t),a=w(n).concat(ht(n));return N(a,function(t){s&&!dt.call(n,t)||lt(e,t,n[t])}),e},dt=function(t){var e=v(t,!0),n=$.call(this,e);return!(this===z&&c(Q,e)&&!c(J,e))&&(!(n||!c(this,e)||!c(Q,e)||c(this,D)&&this[D][e])||n)},ct=function(t,e){var n=g(t),a=v(e,!0);if(n!==z||!c(Q,a)||c(J,a)){var i=V(n,a);return!i||!c(Q,a)||c(n,D)&&n[D][a]||(i.enumerable=!0),i}},ft=function(t){var e=Z(g(t)),n=[];return N(e,function(t){c(Q,t)||c(M,t)||n.push(t)}),n},ht=function(t){var e=t===z,n=Z(e?J:g(t)),a=[];return N(n,function(t){!c(Q,t)||e&&!c(z,t)||a.push(Q[t])}),a};(l||(O((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=A(t),n=function(t){this===z&&n.call(J,t),c(this,D)&&c(this[D],e)&&(this[D][e]=!1),rt(this,e,y(1,t))};return s&&it&&rt(z,e,{configurable:!0,set:n}),ot(e,t)})[W],"toString",function(){return q(this).tag}),O(G,"withoutSetter",function(t){return ot(A(t),t)}),x.f=dt,P.f=lt,k.f=ct,_.f=E.f=ft,T.f=ht,B.f=function(t){return ot(R(t),t)},s&&(K(G[W],"description",{configurable:!0,get:function(){return q(this).description}}),o||O(z,"propertyIsEnumerable",dt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),N(w(nt),function(t){j(t)}),a({target:H,stat:!0,forced:!l},{for:function(t){var e=String(t);if(c(tt,e))return tt[e];var n=G(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(c(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),a({target:"Object",stat:!0,forced:!l,sham:!s},{create:function(t,e){return void 0===e?b(t):ut(b(t),e)},defineProperty:lt,defineProperties:ut,getOwnPropertyDescriptor:ct}),a({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ft,getOwnPropertySymbols:ht}),a({target:"Object",stat:!0,forced:d(function(){T.f(1)})},{getOwnPropertySymbols:function(t){return T.f(m(t))}}),X)&&a({target:"JSON",stat:!0,forced:!l||d(function(){var t=G();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))})},{stringify:function(t,e,n){for(var a,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if((h(a=e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!st(e))return e}),i[1]=e,X.apply(null,i)}});G[W][U]||C(G[W],U,G[W].valueOf),I(G,H),M[D]=!0},{"../internals/an-object":81,"../internals/array-iteration":86,"../internals/create-non-enumerable-property":98,"../internals/create-property-descriptor":99,"../internals/define-well-known-symbol":102,"../internals/descriptors":103,"../internals/export":114,"../internals/fails":115,"../internals/get-built-in":118,"../internals/global":120,"../internals/has":121,"../internals/hidden-keys":122,"../internals/internal-state":130,"../internals/is-array":132,"../internals/is-object":134,"../internals/is-pure":135,"../internals/native-symbol":143,"../internals/object-create":147,"../internals/object-define-property":149,"../internals/object-get-own-property-descriptor":150,"../internals/object-get-own-property-names":152,"../internals/object-get-own-property-names-external":151,"../internals/object-get-own-property-symbols":153,"../internals/object-keys":156,"../internals/object-property-is-enumerable":157,"../internals/redefine":165,"../internals/set-to-string-tag":169,"../internals/shared":172,"../internals/shared-key":170,"../internals/to-indexed-object":177,"../internals/to-object":180,"../internals/to-primitive":181,"../internals/uid":183,"../internals/use-symbol-as-uid":184,"../internals/well-known-symbol":186,"../internals/well-known-symbol-wrapped":185}],209:[function(t,e,n){t("../internals/define-well-known-symbol")("matchAll")},{"../internals/define-well-known-symbol":102}],210:[function(t,e,n){t("../internals/define-well-known-symbol")("match")},{"../internals/define-well-known-symbol":102}],211:[function(t,e,n){t("../internals/define-well-known-symbol")("replace")},{"../internals/define-well-known-symbol":102}],212:[function(t,e,n){t("../internals/define-well-known-symbol")("search")},{"../internals/define-well-known-symbol":102}],213:[function(t,e,n){t("../internals/define-well-known-symbol")("species")},{"../internals/define-well-known-symbol":102}],214:[function(t,e,n){t("../internals/define-well-known-symbol")("split")},{"../internals/define-well-known-symbol":102}],215:[function(t,e,n){t("../internals/define-well-known-symbol")("toPrimitive")},{"../internals/define-well-known-symbol":102}],216:[function(t,e,n){t("../internals/define-well-known-symbol")("toStringTag")},{"../internals/define-well-known-symbol":102}],217:[function(t,e,n){t("../internals/define-well-known-symbol")("unscopables")},{"../internals/define-well-known-symbol":102}],218:[function(t,e,n){"use strict";var a=t("../internals/array-buffer-view-core"),s=t("../internals/species-constructor"),i=t("../internals/fails"),l=a.aTypedArray,u=a.aTypedArrayConstructor,r=a.exportTypedArrayMethod,d=[].slice;r("slice",function(t,e){for(var n=d.call(l(this),t,e),a=s(this,this.constructor),i=0,r=n.length,o=new(u(a))(r);i<r;)o[i]=n[i++];return o},i(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":83,"../internals/fails":115,"../internals/species-constructor":173}],219:[function(t,e,n){var a=t("../internals/global"),i=t("../internals/dom-iterables"),r=t("../modules/es.array.iterator"),o=t("../internals/create-non-enumerable-property"),s=t("../internals/well-known-symbol"),l=s("iterator"),u=s("toStringTag"),d=r.values;for(var c in i){var f=a[c],h=f&&f.prototype;if(h){if(h[l]!==d)try{o(h,l,d)}catch(t){h[l]=d}if(h[u]||o(h,u,c),i[c])for(var p in r)if(h[p]!==r[p])try{o(h,p,r[p])}catch(t){h[p]=r[p]}}}},{"../internals/create-non-enumerable-property":98,"../internals/dom-iterables":105,"../internals/global":120,"../internals/well-known-symbol":186,"../modules/es.array.iterator":190}],220:[function(t,e,n){var a=t("../../es/array/fill");e.exports=a},{"../../es/array/fill":70}],221:[function(t,e,n){var a=t("../../es/array/iterator");e.exports=a},{"../../es/array/iterator":71}],222:[function(t,e,n){var a=t("../../es/map");e.exports=a},{"../../es/map":72}],223:[function(t,e,n){var a=t("../../es/promise");e.exports=a},{"../../es/promise":73}],224:[function(t,e,n){var a=t("../../es/set");e.exports=a},{"../../es/set":74}],225:[function(t,e,n){var a=t("../../es/string/ends-with");e.exports=a},{"../../es/string/ends-with":75}],226:[function(t,e,n){var a=t("../../es/symbol");e.exports=a},{"../../es/symbol":76}],227:[function(t,e,n){t("../../modules/es.typed-array.slice")},{"../../modules/es.typed-array.slice":218}],228:[function(t,a,i){(function(n){(function(){var t,e;t=this,e=function(){"use strict";function d(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){i(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&e.status<=299}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,f=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(t,e,n){var a=c.URL||c.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin===location.origin?s(i):o(i.href)?d(t,e,n):s(i,i.target="_blank")):(i.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){s(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob((i=t,void 0===(r=n)?r={autoBom:!1}:"object"!=typeof r&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i),e);else if(o(t))d(t,e,n);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){s(a)})}var i,r}:function(t,e,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return d(t,e,n);var i="application/octet-stream"===t.type,r=/constructor/i.test(c.HTMLElement)||c.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r||f)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},s.readAsDataURL(t)}else{var l=c.URL||c.webkitURL,u=l.createObjectURL(t);a?a.location=u:location.href=u,a=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});c.saveAs=i.saveAs=i,void 0!==a&&(a.exports=i)},void 0!==i?e():(e(),t.FileSaver={})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],229:[function(t,n,e){!function(t,e){"use strict";"object"==typeof n&&"object"==typeof n.exports?n.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(T,t){"use strict";var e=[],a=Object.getPrototypeOf,s=e.slice,m=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},l=e.push,i=e.indexOf,n={},r=n.toString,g=n.hasOwnProperty,o=g.toString,u=o.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},b=function(t){return null!=t&&t===t.window},k=T.document,d={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var a,i,r=(n=n||k).createElement("script");if(r.text=t,e)for(a in d)(i=e[a]||e.getAttribute&&e.getAttribute(a))&&r.setAttribute(a,i);n.head.appendChild(r).parentNode.removeChild(r)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[r.call(t)]||"object":typeof t}var P=function(t,e){return new P.fn.init(t,e)};function c(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!y(t)&&!b(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}P.fn=P.prototype={jquery:"3.6.0",constructor:P,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=P.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return P.each(this,t)},map:function(n){return this.pushStack(P.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(P.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(P.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},P.extend=P.fn.extend=function(){var t,e,n,a,i,r,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||y(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)a=t[e],"__proto__"!==e&&o!==a&&(u&&a&&(P.isPlainObject(a)||(i=Array.isArray(a)))?(n=o[e],r=i&&!Array.isArray(n)?[]:i||P.isPlainObject(n)?n:{},i=!1,o[e]=P.extend(u,r,a)):void 0!==a&&(o[e]=a));return o},P.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==r.call(t))&&(!(e=a(t))||"function"==typeof(n=g.call(e,"constructor")&&e.constructor)&&o.call(n)===u)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,a=0;if(c(t))for(n=t.length;a<n&&!1!==e.call(t[a],a,t[a]);a++);else for(a in t)if(!1===e.call(t[a],a,t[a]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(c(Object(t))?P.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:i.call(e,t,n)},merge:function(t,e){for(var n=+e.length,a=0,i=t.length;a<n;a++)t[i++]=e[a];return t.length=i,t},grep:function(t,e,n){for(var a=[],i=0,r=t.length,o=!n;i<r;i++)!e(t[i],i)!==o&&a.push(t[i]);return a},map:function(t,e,n){var a,i,r=0,o=[];if(c(t))for(a=t.length;r<a;r++)null!=(i=e(t[r],r,n))&&o.push(i);else for(r in t)null!=(i=e(t[r],r,n))&&o.push(i);return m(o)},guid:1,support:v}),"function"==typeof Symbol&&(P.fn[Symbol.iterator]=e[Symbol.iterator]),P.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var f=function(n){var t,h,w,r,i,p,c,m,_,l,u,E,T,o,k,g,s,d,v,P="sizzle"+1*new Date,f=n.document,x=0,a=0,y=lt(),b=lt(),C=lt(),O=lt(),S=function(t,e){return t===e&&(u=!0),0},L={}.hasOwnProperty,e=[],M=e.pop,A=e.push,R=e.push,B=e.slice,j=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",N="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+F+"*("+N+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+F+"*\\]",H=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",W=new RegExp(F+"+","g"),U=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),Y=new RegExp("^"+F+"*,"+F+"*"),q=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=new RegExp(F+"|>"),G=new RegExp(H),X=new RegExp("^"+N+"$"),V={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},at=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){E()},ot=wt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(e=B.call(f.childNodes),f.childNodes),e[f.childNodes.length].nodeType}catch(t){R={apply:e.length?function(t,e){A.apply(t,B.call(e))}:function(t,e){for(var n=t.length,a=0;t[n++]=e[a++];);t.length=n-1}}}function st(e,t,n,a){var i,r,o,s,l,u,d,c=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!a&&(E(t),t=t||T,k)){if(11!==f&&(l=J.exec(e)))if(i=l[1]){if(9===f){if(!(o=t.getElementById(i)))return n;if(o.id===i)return n.push(o),n}else if(c&&(o=c.getElementById(i))&&v(t,o)&&o.id===i)return n.push(o),n}else{if(l[2])return R.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&h.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(i)),n}if(h.qsa&&!O[e+" "]&&(!g||!g.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(d=e,c=t,1===f&&(z.test(e)||q.test(e))){for((c=tt.test(e)&&vt(t.parentNode)||t)===t&&h.scope||((s=t.getAttribute("id"))?s=s.replace(at,it):t.setAttribute("id",s=P)),r=(u=p(e)).length;r--;)u[r]=(s?"#"+s:":scope")+" "+bt(u[r]);d=u.join(",")}try{return R.apply(n,c.querySelectorAll(d)),n}catch(t){O(e,!0)}finally{s===P&&t.removeAttribute("id")}}}return m(e.replace(U,"$1"),t,n,a)}function lt(){var a=[];return function t(e,n){return a.push(e+" ")>w.cacheLength&&delete t[a.shift()],t[e+" "]=n}}function ut(t){return t[P]=!0,t}function dt(t){var e=T.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),a=n.length;a--;)w.attrHandle[n[a]]=e}function ft(t,e){var n=e&&t,a=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(a)return a;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function mt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ot(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function gt(o){return ut(function(r){return r=+r,ut(function(t,e){for(var n,a=o([],t.length,r),i=a.length;i--;)t[n=a[i]]&&(t[n]=!(e[n]=t[n]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in h=st.support={},i=st.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!K.test(e||n&&n.nodeName||"HTML")},E=st.setDocument=function(t){var e,n,a=t?t.ownerDocument||t:f;return a!=T&&9===a.nodeType&&a.documentElement&&(o=(T=a).documentElement,k=!i(T),f!=T&&(n=T.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",rt,!1):n.attachEvent&&n.attachEvent("onunload",rt)),h.scope=dt(function(t){return o.appendChild(t).appendChild(T.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),h.attributes=dt(function(t){return t.className="i",!t.getAttribute("className")}),h.getElementsByTagName=dt(function(t){return t.appendChild(T.createComment("")),!t.getElementsByTagName("*").length}),h.getElementsByClassName=Q.test(T.getElementsByClassName),h.getById=dt(function(t){return o.appendChild(t).id=P,!T.getElementsByName||!T.getElementsByName(P).length}),h.getById?(w.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var n=e.getElementById(t);return n?[n]:[]}}):(w.filter.ID=function(t){var n=t.replace(et,nt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var n,a,i,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(i=e.getElementsByName(t),a=0;r=i[a++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),w.find.TAG=h.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):h.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,a=[],i=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[i++];)1===n.nodeType&&a.push(n);return a},w.find.CLASS=h.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&k)return e.getElementsByClassName(t)},s=[],g=[],(h.qsa=Q.test(T.querySelectorAll))&&(dt(function(t){var e;o.appendChild(t).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+I+")"),t.querySelectorAll("[id~="+P+"-]").length||g.push("~="),(e=T.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+P+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),dt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=T.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),o.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=Q.test(d=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&dt(function(t){h.disconnectedMatch=d.call(t,"*"),d.call(t,"[s!='']:x"),s.push("!=",H)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),e=Q.test(o.compareDocumentPosition),v=e||Q.test(o.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,a=e&&e.parentNode;return t===a||!(!a||1!==a.nodeType||!(n.contains?n.contains(a):t.compareDocumentPosition&&16&t.compareDocumentPosition(a)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!h.sortDetached&&e.compareDocumentPosition(t)===n?t==T||t.ownerDocument==f&&v(f,t)?-1:e==T||e.ownerDocument==f&&v(f,e)?1:l?j(l,t)-j(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,a=0,i=t.parentNode,r=e.parentNode,o=[t],s=[e];if(!i||!r)return t==T?-1:e==T?1:i?-1:r?1:l?j(l,t)-j(l,e):0;if(i===r)return ft(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;o[a]===s[a];)a++;return a?ft(o[a],s[a]):o[a]==f?-1:s[a]==f?1:0}),T},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(E(t),h.matchesSelector&&k&&!O[e+" "]&&(!s||!s.test(e))&&(!g||!g.test(e)))try{var n=d.call(t,e);if(n||h.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){O(e,!0)}return 0<st(e,T,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=T&&E(t),v(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=T&&E(t);var n=w.attrHandle[e.toLowerCase()],a=n&&L.call(w.attrHandle,e.toLowerCase())?n(t,e,!k):void 0;return void 0!==a?a:h.attributes||!k?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},st.escape=function(t){return(t+"").replace(at,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],a=0,i=0;if(u=!h.detectDuplicates,l=!h.sortStable&&t.slice(0),t.sort(S),u){for(;e=t[i++];)e===t[i]&&(a=n.push(i));for(;a--;)t.splice(n[a],1)}return l=null,t},r=st.getText=function(t){var e,n="",a=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[a++];)n+=r(e);return n},(w=st.selectors={cacheLength:50,createPseudo:ut,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=p(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=y[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&y(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,a,i){return function(t){var e=st.attr(t,n);return null==e?"!="===a:!a||(e+="","="===a?e===i:"!="===a?e!==i:"^="===a?i&&0===e.indexOf(i):"*="===a?i&&-1<e.indexOf(i):"$="===a?i&&e.slice(-i.length)===i:"~="===a?-1<(" "+e.replace(W," ")+" ").indexOf(i):"|="===a&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,t,e,m,g){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),b="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var a,i,r,o,s,l,u=v!==y?"nextSibling":"previousSibling",d=t.parentNode,c=b&&t.nodeName.toLowerCase(),f=!n&&!b,h=!1;if(d){if(v){for(;u;){for(o=t;o=o[u];)if(b?o.nodeName.toLowerCase()===c:1===o.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?d.firstChild:d.lastChild],y&&f){for(h=(s=(a=(i=(r=(o=d)[P]||(o[P]={}))[o.uniqueID]||(r[o.uniqueID]={}))[p]||[])[0]===x&&a[1])&&a[2],o=s&&d.childNodes[s];o=++s&&o&&o[u]||(h=s=0)||l.pop();)if(1===o.nodeType&&++h&&o===t){i[p]=[x,s,h];break}}else if(f&&(h=s=(a=(i=(r=(o=t)[P]||(o[P]={}))[o.uniqueID]||(r[o.uniqueID]={}))[p]||[])[0]===x&&a[1]),!1===h)for(;(o=++s&&o&&o[u]||(h=s=0)||l.pop())&&((b?o.nodeName.toLowerCase()!==c:1!==o.nodeType)||!++h||(f&&((i=(r=o[P]||(o[P]={}))[o.uniqueID]||(r[o.uniqueID]={}))[p]=[x,h]),o!==t)););return(h-=g)===m||h%m==0&&0<=h/m}}},PSEUDO:function(t,r){var e,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return o[P]?o(r):1<o.length?(e=[t,t,"",r],w.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,e){for(var n,a=o(t,r),i=a.length;i--;)t[n=j(t,a[i])]=!(e[n]=a[i])}):function(t){return o(t,0,e)}):o}},pseudos:{not:ut(function(t){var a=[],i=[],s=c(t.replace(U,"$1"));return s[P]?ut(function(t,e,n,a){for(var i,r=s(t,null,a,[]),o=t.length;o--;)(i=r[o])&&(t[o]=!(e[o]=i))}):function(t,e,n){return a[0]=t,s(a,null,n,i),a[0]=null,!i.pop()}}),has:ut(function(e){return function(t){return 0<st(e,t).length}}),contains:ut(function(e){return e=e.replace(et,nt),function(t){return-1<(t.textContent||r(t)).indexOf(e)}}),lang:ut(function(n){return X.test(n||"")||st.error("unsupported lang: "+n),n=n.replace(et,nt).toLowerCase(),function(t){var e;do{if(e=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===o},focus:function(t){return t===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var a=n<0?n+e:e<n?e:n;0<=--a;)t.push(a);return t}),gt:gt(function(t,e,n){for(var a=n<0?n+e:n;++a<e;)t.push(a);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})w.pseudos[t]=pt(t);function yt(){}function bt(t){for(var e=0,n=t.length,a="";e<n;e++)a+=t[e].value;return a}function wt(s,t,e){var l=t.dir,u=t.next,d=u||l,c=e&&"parentNode"===d,f=a++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||c)return s(t,e,n);return!1}:function(t,e,n){var a,i,r,o=[x,f];if(n){for(;t=t[l];)if((1===t.nodeType||c)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||c)if(i=(r=t[P]||(t[P]={}))[t.uniqueID]||(r[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((a=i[d])&&a[0]===x&&a[1]===f)return o[2]=a[2];if((i[d]=o)[2]=s(t,e,n))return!0}return!1}}function _t(i){return 1<i.length?function(t,e,n){for(var a=i.length;a--;)if(!i[a](t,e,n))return!1;return!0}:i[0]}function Et(t,e,n,a,i){for(var r,o=[],s=0,l=t.length,u=null!=e;s<l;s++)(r=t[s])&&(n&&!n(r,a,i)||(o.push(r),u&&e.push(s)));return o}function Tt(h,p,m,g,v,t){return g&&!g[P]&&(g=Tt(g)),v&&!v[P]&&(v=Tt(v,t)),ut(function(t,e,n,a){var i,r,o,s=[],l=[],u=e.length,d=t||function(t,e,n){for(var a=0,i=e.length;a<i;a++)st(t,e[a],n);return n}(p||"*",n.nodeType?[n]:n,[]),c=!h||!t&&p?d:Et(d,s,h,n,a),f=m?v||(t?h:u||g)?[]:e:c;if(m&&m(c,f,n,a),g)for(i=Et(f,l),g(i,[],n,a),r=i.length;r--;)(o=i[r])&&(f[l[r]]=!(c[l[r]]=o));if(t){if(v||h){if(v){for(i=[],r=f.length;r--;)(o=f[r])&&i.push(c[r]=o);v(null,f=[],i,a)}for(r=f.length;r--;)(o=f[r])&&-1<(i=v?j(t,o):s[r])&&(t[i]=!(e[i]=o))}}else f=Et(f===e?f.splice(u,f.length):f),v?v(null,e,f,a):R.apply(e,f)})}function kt(t){for(var i,e,n,a=t.length,r=w.relative[t[0].type],o=r||w.relative[" "],s=r?1:0,l=wt(function(t){return t===i},o,!0),u=wt(function(t){return-1<j(i,t)},o,!0),d=[function(t,e,n){var a=!r&&(n||e!==_)||((i=e).nodeType?l(t,e,n):u(t,e,n));return i=null,a}];s<a;s++)if(e=w.relative[t[s].type])d=[wt(_t(d),e)];else{if((e=w.filter[t[s].type].apply(null,t[s].matches))[P]){for(n=++s;n<a&&!w.relative[t[n].type];n++);return Tt(1<s&&_t(d),1<s&&bt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(U,"$1"),e,s<n&&kt(t.slice(s,n)),n<a&&kt(t=t.slice(n)),n<a&&bt(t))}d.push(e)}return _t(d)}return yt.prototype=w.filters=w.pseudos,w.setFilters=new yt,p=st.tokenize=function(t,e){var n,a,i,r,o,s,l,u=b[t+" "];if(u)return e?0:u.slice(0);for(o=t,s=[],l=w.preFilter;o;){for(r in n&&!(a=Y.exec(o))||(a&&(o=o.slice(a[0].length)||o),s.push(i=[])),n=!1,(a=q.exec(o))&&(n=a.shift(),i.push({value:n,type:a[0].replace(U," ")}),o=o.slice(n.length)),w.filter)!(a=V[r].exec(o))||l[r]&&!(a=l[r](a))||(n=a.shift(),i.push({value:n,type:r,matches:a}),o=o.slice(n.length));if(!n)break}return e?o.length:o?st.error(t):b(t,s).slice(0)},c=st.compile=function(t,e){var n,g,v,y,b,a,i=[],r=[],o=C[t+" "];if(!o){for(e||(e=p(t)),n=e.length;n--;)(o=kt(e[n]))[P]?i.push(o):r.push(o);(o=C(t,(g=r,y=0<(v=i).length,b=0<g.length,a=function(t,e,n,a,i){var r,o,s,l=0,u="0",d=t&&[],c=[],f=_,h=t||b&&w.find.TAG("*",i),p=x+=null==f?1:Math.random()||.1,m=h.length;for(i&&(_=e==T||e||i);u!==m&&null!=(r=h[u]);u++){if(b&&r){for(o=0,e||r.ownerDocument==T||(E(r),n=!k);s=g[o++];)if(s(r,e||T,n)){a.push(r);break}i&&(x=p)}y&&((r=!s&&r)&&l--,t&&d.push(r))}if(l+=u,y&&u!==l){for(o=0;s=v[o++];)s(d,c,e,n);if(t){if(0<l)for(;u--;)d[u]||c[u]||(c[u]=M.call(a));c=Et(c)}R.apply(a,c),i&&!t&&0<c.length&&1<l+v.length&&st.uniqueSort(a)}return i&&(x=p,_=f),d},y?ut(a):a))).selector=t}return o},m=st.select=function(t,e,n,a){var i,r,o,s,l,u="function"==typeof t&&t,d=!a&&p(t=u.selector||t);if(n=n||[],1===d.length){if(2<(r=d[0]=d[0].slice(0)).length&&"ID"===(o=r[0]).type&&9===e.nodeType&&k&&w.relative[r[1].type]){if(!(e=(w.find.ID(o.matches[0].replace(et,nt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(i=V.needsContext.test(t)?0:r.length;i--&&(o=r[i],!w.relative[s=o.type]);)if((l=w.find[s])&&(a=l(o.matches[0].replace(et,nt),tt.test(r[0].type)&&vt(e.parentNode)||e))){if(r.splice(i,1),!(t=a.length&&bt(r)))return R.apply(n,a),n;break}}return(u||c(t,d))(a,e,!k,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},h.sortStable=P.split("").sort(S).join("")===P,h.detectDuplicates=!!u,E(),h.sortDetached=dt(function(t){return 1&t.compareDocumentPosition(T.createElement("fieldset"))}),dt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),h.attributes&&dt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),dt(function(t){return null==t.getAttribute("disabled")})||ct(I,function(t,e,n){var a;if(!n)return!0===t[e]?e.toLowerCase():(a=t.getAttributeNode(e))&&a.specified?a.value:null}),st}(T);P.find=f,P.expr=f.selectors,P.expr[":"]=P.expr.pseudos,P.uniqueSort=P.unique=f.uniqueSort,P.text=f.getText,P.isXMLDoc=f.isXML,P.contains=f.contains,P.escapeSelector=f.escape;var h=function(t,e,n){for(var a=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&P(t).is(n))break;a.push(t)}return a},p=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},E=P.expr.match.needsContext;function x(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,n,a){return y(n)?P.grep(t,function(t,e){return!!n.call(t,e,t)!==a}):n.nodeType?P.grep(t,function(t){return t===n!==a}):"string"!=typeof n?P.grep(t,function(t){return-1<i.call(n,t)!==a}):P.filter(n,t,a)}P.filter=function(t,e,n){var a=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===a.nodeType?P.find.matchesSelector(a,t)?[a]:[]:P.find.matches(t,P.grep(e,function(t){return 1===t.nodeType}))},P.fn.extend({find:function(t){var e,n,a=this.length,i=this;if("string"!=typeof t)return this.pushStack(P(t).filter(function(){for(e=0;e<a;e++)if(P.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<a;e++)P.find(t,i[e],n);return 1<a?P.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&E.test(t)?P(t):t||[],!1).length}});var S,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(P.fn.init=function(t,e,n){var a,i;if(!t)return this;if(n=n||S,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(P):P.makeArray(t,this);if(!(a="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:L.exec(t))||!a[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(a[1]){if(e=e instanceof P?e[0]:e,P.merge(this,P.parseHTML(a[1],e&&e.nodeType?e.ownerDocument||e:k,!0)),C.test(a[1])&&P.isPlainObject(e))for(a in e)y(this[a])?this[a](e[a]):this.attr(a,e[a]);return this}return(i=k.getElementById(a[2]))&&(this[0]=i,this.length=1),this}).prototype=P.fn,S=P(k);var M=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}P.fn.extend({has:function(t){var e=P(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(P.contains(this,e[t]))return!0})},closest:function(t,e){var n,a=0,i=this.length,r=[],o="string"!=typeof t&&P(t);if(!E.test(t))for(;a<i;a++)for(n=this[a];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&P.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?P.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?i.call(P(t),this[0]):i.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(P.uniqueSort(P.merge(this.get(),P(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),P.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return h(t,"parentNode")},parentsUntil:function(t,e,n){return h(t,"parentNode",n)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return h(t,"nextSibling")},prevAll:function(t){return h(t,"previousSibling")},nextUntil:function(t,e,n){return h(t,"nextSibling",n)},prevUntil:function(t,e,n){return h(t,"previousSibling",n)},siblings:function(t){return p((t.parentNode||{}).firstChild,t)},children:function(t){return p(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(x(t,"template")&&(t=t.content||t),P.merge([],t.childNodes))}},function(a,i){P.fn[a]=function(t,e){var n=P.map(this,i,t);return"Until"!==a.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=P.filter(e,n)),1<this.length&&(A[a]||P.uniqueSort(n),M.test(a)&&n.reverse()),this.pushStack(n)}});var B=/[^\x20\t\r\n\f]+/g;function j(t){return t}function I(t){throw t}function F(t,e,n,a){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(a))}catch(t){n.apply(void 0,[t])}}P.Callbacks=function(a){var t,n;a="string"==typeof a?(t=a,n={},P.each(t.match(B)||[],function(t,e){n[e]=!0}),n):P.extend({},a);var i,e,r,o,s=[],l=[],u=-1,d=function(){for(o=o||a.once,r=i=!0;l.length;u=-1)for(e=l.shift();++u<s.length;)!1===s[u].apply(e[0],e[1])&&a.stopOnFalse&&(u=s.length,e=!1);a.memory||(e=!1),i=!1,o&&(s=e?[]:"")},c={add:function(){return s&&(e&&!i&&(u=s.length-1,l.push(e)),function n(t){P.each(t,function(t,e){y(e)?a.unique&&c.has(e)||s.push(e):e&&e.length&&"string"!==_(e)&&n(e)})}(arguments),e&&!i&&d()),this},remove:function(){return P.each(arguments,function(t,e){for(var n;-1<(n=P.inArray(e,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<P.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return o=l=[],s=e="",this},disabled:function(){return!s},lock:function(){return o=l=[],e||i||(s=e=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),i||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},P.extend({Deferred:function(t){var r=[["notify","progress",P.Callbacks("memory"),P.Callbacks("memory"),2],["resolve","done",P.Callbacks("once memory"),P.Callbacks("once memory"),0,"resolved"],["reject","fail",P.Callbacks("once memory"),P.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var i=arguments;return P.Deferred(function(a){P.each(r,function(t,e){var n=y(i[e[4]])&&i[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&y(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,a){var l=0;function u(i,r,o,s){return function(){var n=this,a=arguments,t=function(){var t,e;if(!(i<l)){if((t=o.apply(n,a))===r.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,y(e)?s?e.call(t,u(l,r,j,s),u(l,r,I,s)):(l++,e.call(t,u(l,r,j,s),u(l,r,I,s),u(l,r,j,r.notifyWith))):(o!==j&&(n=void 0,a=[t]),(s||r.resolveWith)(n,a))}},e=s?t:function(){try{t()}catch(t){P.Deferred.exceptionHook&&P.Deferred.exceptionHook(t,e.stackTrace),l<=i+1&&(o!==I&&(n=void 0,a=[t]),r.rejectWith(n,a))}};i?e():(P.Deferred.getStackHook&&(e.stackTrace=P.Deferred.getStackHook()),T.setTimeout(e))}}return P.Deferred(function(t){r[0][3].add(u(0,t,y(a)?a:j,t.notifyWith)),r[1][3].add(u(0,t,y(e)?e:j)),r[2][3].add(u(0,t,y(n)?n:I))}).promise()},promise:function(t){return null!=t?P.extend(t,o):o}},s={};return P.each(r,function(t,e){var n=e[2],a=e[5];o[e[1]]=n.add,a&&n.add(function(){i=a},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),o.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,a=Array(e),i=s.call(arguments),r=P.Deferred(),o=function(e){return function(t){a[e]=this,i[e]=1<arguments.length?s.call(arguments):t,--n||r.resolveWith(a,i)}};if(n<=1&&(F(t,r.done(o(e)).resolve,r.reject,!n),"pending"===r.state()||y(i[e]&&i[e].then)))return r.then();for(;e--;)F(i[e],o(e),r.reject);return r.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;P.Deferred.exceptionHook=function(t,e){T.console&&T.console.warn&&t&&N.test(t.name)&&T.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},P.readyException=function(t){T.setTimeout(function(){throw t})};var D=P.Deferred();function H(){k.removeEventListener("DOMContentLoaded",H),T.removeEventListener("load",H),P.ready()}P.fn.ready=function(t){return D.then(t).catch(function(t){P.readyException(t)}),this},P.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--P.readyWait:P.isReady)||(P.isReady=!0)!==t&&0<--P.readyWait||D.resolveWith(k,[P])}}),P.ready.then=D.then,"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?T.setTimeout(P.ready):(k.addEventListener("DOMContentLoaded",H),T.addEventListener("load",H));var W=function(t,e,n,a,i,r,o){var s=0,l=t.length,u=null==n;if("object"===_(n))for(s in i=!0,n)W(t,e,s,n[s],!0,r,o);else if(void 0!==a&&(i=!0,y(a)||(o=!0),u&&(o?(e.call(t,a),e=null):(u=e,e=function(t,e,n){return u.call(P(t),n)})),e))for(;s<l;s++)e(t[s],n,o?a:a.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):r},U=/^-ms-/,Y=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function z(t){return t.replace(U,"ms-").replace(Y,q)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=P.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var a,i=this.cache(t);if("string"==typeof e)i[z(e)]=n;else for(a in e)i[z(a)]=e[a];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][z(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,a=t[this.expando];if(void 0!==a){if(void 0!==e){n=(e=Array.isArray(e)?e.map(z):(e=z(e))in a?[e]:e.match(B)||[]).length;for(;n--;)delete a[e[n]]}(void 0===e||P.isEmptyObject(a))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!P.isEmptyObject(e)}};var V=new X,K=new X,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/[A-Z]/g;function Q(t,e,n){var a,i;if(void 0===n&&1===t.nodeType)if(a="data-"+e.replace($,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(a))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Z.test(i)?JSON.parse(i):i)}catch(t){}K.set(t,e,n)}else n=void 0;return n}P.extend({hasData:function(t){return K.hasData(t)||V.hasData(t)},data:function(t,e,n){return K.access(t,e,n)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,n){return V.access(t,e,n)},_removeData:function(t,e){V.remove(t,e)}}),P.fn.extend({data:function(n,t){var e,a,i,r=this[0],o=r&&r.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){K.set(this,n)}):W(this,function(t){var e;if(r&&void 0===t)return void 0!==(e=K.get(r,n))?e:void 0!==(e=Q(r,n))?e:void 0;this.each(function(){K.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(i=K.get(r),1===r.nodeType&&!V.get(r,"hasDataAttrs"))){for(e=o.length;e--;)o[e]&&0===(a=o[e].name).indexOf("data-")&&(a=z(a.slice(5)),Q(r,a,i[a]));V.set(r,"hasDataAttrs",!0)}return i},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),P.extend({queue:function(t,e,n){var a;if(t)return e=(e||"fx")+"queue",a=V.get(t,e),n&&(!a||Array.isArray(n)?a=V.access(t,e,P.makeArray(n)):a.push(n)),a||[]},dequeue:function(t,e){e=e||"fx";var n=P.queue(t,e),a=n.length,i=n.shift(),r=P._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),a--),i&&("fx"===e&&n.unshift("inprogress"),delete r.stop,i.call(t,function(){P.dequeue(t,e)},r)),!a&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return V.get(t,n)||V.access(t,n,{empty:P.Callbacks("once memory").add(function(){V.remove(t,[e+"queue",n])})})}}),P.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?P.queue(this[0],e):void 0===n?this:this.each(function(){var t=P.queue(this,e,n);P._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&P.dequeue(this,e)})},dequeue:function(t){return this.each(function(){P.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,a=1,i=P.Deferred(),r=this,o=this.length,s=function(){--a||i.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=V.get(r[o],t+"queueHooks"))&&n.empty&&(a++,n.empty.add(s));return s(),i.promise(e)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],nt=k.documentElement,at=function(t){return P.contains(t.ownerDocument,t)},it={composed:!0};nt.getRootNode&&(at=function(t){return P.contains(t.ownerDocument,t)||t.getRootNode(it)===t.ownerDocument});var rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===P.css(t,"display")};function ot(t,e,n,a){var i,r,o=20,s=a?function(){return a.cur()}:function(){return P.css(t,e,"")},l=s(),u=n&&n[3]||(P.cssNumber[e]?"":"px"),d=t.nodeType&&(P.cssNumber[e]||"px"!==u&&+l)&&tt.exec(P.css(t,e));if(d&&d[3]!==u){for(l/=2,u=u||d[3],d=+l||1;o--;)P.style(t,e,d+u),(1-r)*(1-(r=s()/l||.5))<=0&&(o=0),d/=r;d*=2,P.style(t,e,d+u),n=n||[]}return n&&(d=+d||+l||0,i=n[1]?d+(n[1]+1)*n[2]:+n[2],a&&(a.unit=u,a.start=d,a.end=i)),i}var st={};function lt(t,e){for(var n,a,i,r,o,s,l,u=[],d=0,c=t.length;d<c;d++)(a=t[d]).style&&(n=a.style.display,e?("none"===n&&(u[d]=V.get(a,"display")||null,u[d]||(a.style.display="")),""===a.style.display&&rt(a)&&(u[d]=(l=o=r=void 0,o=(i=a).ownerDocument,s=i.nodeName,(l=st[s])||(r=o.body.appendChild(o.createElement(s)),l=P.css(r,"display"),r.parentNode.removeChild(r),"none"===l&&(l="block"),st[s]=l)))):"none"!==n&&(u[d]="none",V.set(a,"display",n)));for(d=0;d<c;d++)null!=u[d]&&(t[d].style.display=u[d]);return t}P.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){rt(this)?P(this).show():P(this).hide()})}});var ut,dt,ct=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ht=/^$|^module$|\/(?:java|ecma)script/i;ut=k.createDocumentFragment().appendChild(k.createElement("div")),(dt=k.createElement("input")).setAttribute("type","radio"),dt.setAttribute("checked","checked"),dt.setAttribute("name","t"),ut.appendChild(dt),v.checkClone=ut.cloneNode(!0).cloneNode(!0).lastChild.checked,ut.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ut.cloneNode(!0).lastChild.defaultValue,ut.innerHTML="<option></option>",v.option=!!ut.lastChild;var pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&x(t,e)?P.merge([t],n):n}function gt(t,e){for(var n=0,a=t.length;n<a;n++)V.set(t[n],"globalEval",!e||V.get(e[n],"globalEval"))}pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td,v.option||(pt.optgroup=pt.option=[1,"<select multiple='multiple'>","</select>"]);var vt=/<|&#?\w+;/;function yt(t,e,n,a,i){for(var r,o,s,l,u,d,c=e.createDocumentFragment(),f=[],h=0,p=t.length;h<p;h++)if((r=t[h])||0===r)if("object"===_(r))P.merge(f,r.nodeType?[r]:r);else if(vt.test(r)){for(o=o||c.appendChild(e.createElement("div")),s=(ft.exec(r)||["",""])[1].toLowerCase(),l=pt[s]||pt._default,o.innerHTML=l[1]+P.htmlPrefilter(r)+l[2],d=l[0];d--;)o=o.lastChild;P.merge(f,o.childNodes),(o=c.firstChild).textContent=""}else f.push(e.createTextNode(r));for(c.textContent="",h=0;r=f[h++];)if(a&&-1<P.inArray(r,a))i&&i.push(r);else if(u=at(r),o=mt(c.appendChild(r),"script"),u&&gt(o),n)for(d=0;r=o[d++];)ht.test(r.type||"")&&n.push(r);return c}var bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function _t(){return!1}function Et(t,e){return t===function(){try{return k.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,n,a,i,r){var o,s;if("object"==typeof e){for(s in"string"!=typeof n&&(a=a||n,n=void 0),e)Tt(t,s,n,a,e[s],r);return t}if(null==a&&null==i?(i=n,a=n=void 0):null==i&&("string"==typeof n?(i=a,a=void 0):(i=a,a=n,n=void 0)),!1===i)i=_t;else if(!i)return t;return 1===r&&(o=i,(i=function(t){return P().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=P.guid++)),t.each(function(){P.event.add(this,e,i,a,n)})}function kt(t,i,r){r?(V.set(t,i,!1),P.event.add(t,i,{namespace:!1,handler:function(t){var e,n,a=V.get(this,i);if(1&t.isTrigger&&this[i]){if(a.length)(P.event.special[i]||{}).delegateType&&t.stopPropagation();else if(a=s.call(arguments),V.set(this,i,a),e=r(this,i),this[i](),a!==(n=V.get(this,i))||e?V.set(this,i,!1):n={},a!==n)return t.stopImmediatePropagation(),t.preventDefault(),n&&n.value}else a.length&&(V.set(this,i,{value:P.event.trigger(P.extend(a[0],P.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===V.get(t,i)&&P.event.add(t,i,wt)}P.event={global:{},add:function(e,t,n,a,i){var r,o,s,l,u,d,c,f,h,p,m,g=V.get(e);if(G(e))for(n.handler&&(n=(r=n).handler,i=r.selector),i&&P.find.matchesSelector(nt,i),n.guid||(n.guid=P.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==P&&P.event.triggered!==t.type?P.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)h=m=(s=bt.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h&&(c=P.event.special[h]||{},h=(i?c.delegateType:c.bindType)||h,c=P.event.special[h]||{},d=P.extend({type:h,origType:m,data:a,handler:n,guid:n.guid,selector:i,needsContext:i&&P.expr.match.needsContext.test(i),namespace:p.join(".")},r),(f=l[h])||((f=l[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,a,p,o)||e.addEventListener&&e.addEventListener(h,o)),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),P.event.global[h]=!0)},remove:function(t,e,n,a,i){var r,o,s,l,u,d,c,f,h,p,m,g=V.hasData(t)&&V.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(B)||[""]).length;u--;)if(h=m=(s=bt.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(c=P.event.special[h]||{},f=l[h=(a?c.delegateType:c.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=f.length;r--;)d=f[r],!i&&m!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||a&&a!==d.selector&&("**"!==a||!d.selector)||(f.splice(r,1),d.selector&&f.delegateCount--,c.remove&&c.remove.call(t,d));o&&!f.length&&(c.teardown&&!1!==c.teardown.call(t,p,g.handle)||P.removeEvent(t,h,g.handle),delete l[h])}else for(h in l)P.event.remove(t,h+e[u],n,a,!0);P.isEmptyObject(l)&&V.remove(t,"handle events")}},dispatch:function(t){var e,n,a,i,r,o,s=new Array(arguments.length),l=P.event.fix(t),u=(V.get(this,"events")||Object.create(null))[l.type]||[],d=P.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(o=P.event.handlers.call(this,l,u),e=0;(i=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(r=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(a=((P.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(l.result=a)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,a,i,r,o,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(r=[],o={},n=0;n<l;n++)void 0===o[i=(a=e[n]).selector+" "]&&(o[i]=a.needsContext?-1<P(i,this).index(u):P.find(i,this,null,[u]).length),o[i]&&r.push(a);r.length&&s.push({elem:u,handlers:r})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(P.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[P.expando]?t:new P.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ct.test(e.type)&&e.click&&x(e,"input")&&kt(e,"click",wt),!1},trigger:function(t){var e=this||t;return ct.test(e.type)&&e.click&&x(e,"input")&&kt(e,"click"),!0},_default:function(t){var e=t.target;return ct.test(e.type)&&e.click&&x(e,"input")&&V.get(e,"click")||x(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},P.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},P.Event=function(t,e){if(!(this instanceof P.Event))return new P.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:_t,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&P.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[P.expando]=!0},P.Event.prototype={constructor:P.Event,isDefaultPrevented:_t,isPropagationStopped:_t,isImmediatePropagationStopped:_t,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},P.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},P.event.addProp),P.each({focus:"focusin",blur:"focusout"},function(t,e){P.event.special[t]={setup:function(){return kt(this,t,Et),!1},trigger:function(){return kt(this,t),!0},_default:function(){return!0},delegateType:e}}),P.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){P.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,a=t.handleObj;return n&&(n===this||P.contains(this,n))||(t.type=a.origType,e=a.handler.apply(this,arguments),t.type=i),e}}}),P.fn.extend({on:function(t,e,n,a){return Tt(this,t,e,n,a)},one:function(t,e,n,a){return Tt(this,t,e,n,a,1)},off:function(t,e,n){var a,i;if(t&&t.preventDefault&&t.handleObj)return a=t.handleObj,P(t.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=_t),this.each(function(){P.event.remove(this,t,n,e)});for(i in t)this.off(i,e,t[i]);return this}});var Pt=/<script|<style|<link/i,xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return x(t,"table")&&x(11!==e.nodeType?e:e.firstChild,"tr")&&P(t).children("tbody")[0]||t}function St(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var n,a,i,r,o,s;if(1===e.nodeType){if(V.hasData(t)&&(s=V.get(t).events))for(i in V.remove(e,"handle events"),s)for(n=0,a=s[i].length;n<a;n++)P.event.add(e,i,s[i][n]);K.hasData(t)&&(r=K.access(t),o=P.extend({},r),K.set(e,o))}}function At(n,a,i,r){a=m(a);var t,e,o,s,l,u,d=0,c=n.length,f=c-1,h=a[0],p=y(h);if(p||1<c&&"string"==typeof h&&!v.checkClone&&xt.test(h))return n.each(function(t){var e=n.eq(t);p&&(a[0]=h.call(this,t,e.html())),At(e,a,i,r)});if(c&&(e=(t=yt(a,n[0].ownerDocument,!1,n,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(s=(o=P.map(mt(t,"script"),St)).length;d<c;d++)l=t,d!==f&&(l=P.clone(l,!0,!0),s&&P.merge(o,mt(l,"script"))),i.call(n[d],l,d);if(s)for(u=o[o.length-1].ownerDocument,P.map(o,Lt),d=0;d<s;d++)l=o[d],ht.test(l.type||"")&&!V.access(l,"globalEval")&&P.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?P._evalUrl&&!l.noModule&&P._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):w(l.textContent.replace(Ct,""),l,u))}return n}function Rt(t,e,n){for(var a,i=e?P.filter(e,t):t,r=0;null!=(a=i[r]);r++)n||1!==a.nodeType||P.cleanData(mt(a)),a.parentNode&&(n&&at(a)&&gt(mt(a,"script")),a.parentNode.removeChild(a));return t}P.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var a,i,r,o,s,l,u,d=t.cloneNode(!0),c=at(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||P.isXMLDoc(t)))for(o=mt(d),a=0,i=(r=mt(t)).length;a<i;a++)s=r[a],l=o[a],void 0,"input"===(u=l.nodeName.toLowerCase())&&ct.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(e)if(n)for(r=r||mt(t),o=o||mt(d),a=0,i=r.length;a<i;a++)Mt(r[a],o[a]);else Mt(t,d);return 0<(o=mt(d,"script")).length&&gt(o,!c&&mt(t,"script")),d},cleanData:function(t){for(var e,n,a,i=P.event.special,r=0;void 0!==(n=t[r]);r++)if(G(n)){if(e=n[V.expando]){if(e.events)for(a in e.events)i[a]?P.event.remove(n,a):P.removeEvent(n,a,e.handle);n[V.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),P.fn.extend({detach:function(t){return Rt(this,t,!0)},remove:function(t){return Rt(this,t)},text:function(t){return W(this,function(t){return void 0===t?P.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return At(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)})},prepend:function(){return At(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(P.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return P.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,a=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!pt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=P.htmlPrefilter(t);try{for(;n<a;n++)1===(e=this[n]||{}).nodeType&&(P.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return At(this,arguments,function(t){var e=this.parentNode;P.inArray(this,n)<0&&(P.cleanData(mt(this)),e&&e.replaceChild(t,this))},n)}}),P.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){P.fn[t]=function(t){for(var e,n=[],a=P(t),i=a.length-1,r=0;r<=i;r++)e=r===i?this:this.clone(!0),P(a[r])[o](e),l.apply(n,e.get());return this.pushStack(n)}});var Bt=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=T),e.getComputedStyle(t)},It=function(t,e,n){var a,i,r={};for(i in e)r[i]=t.style[i],t.style[i]=e[i];for(i in a=n.call(t),e)t.style[i]=r[i];return a},Ft=new RegExp(et.join("|"),"i");function Nt(t,e,n){var a,i,r,o,s=t.style;return(n=n||jt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||at(t)||(o=P.style(t,e)),!v.pixelBoxStyles()&&Bt.test(o)&&Ft.test(e)&&(a=s.width,i=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=a,s.minWidth=i,s.maxWidth=r)),void 0!==o?o+"":o}function Dt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(l).appendChild(u);var t=T.getComputedStyle(u);n="1%"!==t.top,s=12===e(t.marginLeft),u.style.right="60%",r=36===e(t.right),a=36===e(t.width),u.style.position="absolute",i=12===e(u.offsetWidth/3),nt.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,a,i,r,o,s,l=k.createElement("div"),u=k.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,P.extend(v,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,e,n,a;return null==o&&(t=k.createElement("table"),e=k.createElement("tr"),n=k.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",nt.appendChild(t).appendChild(e).appendChild(n),a=T.getComputedStyle(e),o=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===e.offsetHeight,nt.removeChild(t)),o}}))}();var Ht=["Webkit","Moz","ms"],Wt=k.createElement("div").style,Ut={};function Yt(t){var e=P.cssProps[t]||Ut[t];return e||(t in Wt?t:Ut[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Ht.length;n--;)if((t=Ht[n]+e)in Wt)return t}(t)||t)}var qt=/^(none|table(?!-c[ea]).+)/,zt=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function Vt(t,e,n){var a=tt.exec(e);return a?Math.max(0,a[2]-(n||0))+(a[3]||"px"):e}function Kt(t,e,n,a,i,r){var o="width"===e?1:0,s=0,l=0;if(n===(a?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=P.css(t,n+et[o],!0,i)),a?("content"===n&&(l-=P.css(t,"padding"+et[o],!0,i)),"margin"!==n&&(l-=P.css(t,"border"+et[o]+"Width",!0,i))):(l+=P.css(t,"padding"+et[o],!0,i),"padding"!==n?l+=P.css(t,"border"+et[o]+"Width",!0,i):s+=P.css(t,"border"+et[o]+"Width",!0,i));return!a&&0<=r&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-s-.5))||0),l}function Zt(t,e,n){var a=jt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===P.css(t,"boxSizing",!1,a),r=i,o=Nt(t,e,a),s="offset"+e[0].toUpperCase()+e.slice(1);if(Bt.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&x(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===P.css(t,"display",!1,a))&&t.getClientRects().length&&(i="border-box"===P.css(t,"boxSizing",!1,a),(r=s in t)&&(o=t[s])),(o=parseFloat(o)||0)+Kt(t,e,n||(i?"border":"content"),r,a,o)+"px"}function $t(t,e,n,a,i){return new $t.prototype.init(t,e,n,a,i)}P.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Nt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,a){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,r,o,s=z(e),l=zt.test(e),u=t.style;if(l||(e=Yt(s)),o=P.cssHooks[e]||P.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(t,!1,a))?i:u[e];"string"===(r=typeof n)&&(i=tt.exec(n))&&i[1]&&(n=ot(t,e,i),r="number"),null!=n&&n==n&&("number"!==r||l||(n+=i&&i[3]||(P.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,a))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,a){var i,r,o,s=z(e);return zt.test(e)||(e=Yt(s)),(o=P.cssHooks[e]||P.cssHooks[s])&&"get"in o&&(i=o.get(t,!0,n)),void 0===i&&(i=Nt(t,e,a)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(r=parseFloat(i),!0===n||isFinite(r)?r||0:i):i}}),P.each(["height","width"],function(t,l){P.cssHooks[l]={get:function(t,e,n){if(e)return!qt.test(P.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,l,n):It(t,Gt,function(){return Zt(t,l,n)})},set:function(t,e,n){var a,i=jt(t),r=!v.scrollboxSize()&&"absolute"===i.position,o=(r||n)&&"border-box"===P.css(t,"boxSizing",!1,i),s=n?Kt(t,l,n,o,i):0;return o&&r&&(s-=Math.ceil(t["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(i[l])-Kt(t,l,"border",!1,i)-.5)),s&&(a=tt.exec(e))&&"px"!==(a[3]||"px")&&(t.style[l]=e,e=P.css(t,l)),Vt(0,e,s)}}}),P.cssHooks.marginLeft=Dt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Nt(t,"marginLeft"))||t.getBoundingClientRect().left-It(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),P.each({margin:"",padding:"",border:"Width"},function(i,r){P.cssHooks[i+r]={expand:function(t){for(var e=0,n={},a="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+et[e]+r]=a[e]||a[e-2]||a[0];return n}},"margin"!==i&&(P.cssHooks[i+r].set=Vt)}),P.fn.extend({css:function(t,e){return W(this,function(t,e,n){var a,i,r={},o=0;if(Array.isArray(e)){for(a=jt(t),i=e.length;o<i;o++)r[e[o]]=P.css(t,e[o],!1,a);return r}return void 0!==n?P.style(t,e,n):P.css(t,e)},t,e,1<arguments.length)}}),((P.Tween=$t).prototype={constructor:$t,init:function(t,e,n,a,i,r){this.elem=t,this.prop=n,this.easing=i||P.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=a,this.unit=r||(P.cssNumber[n]?"":"px")},cur:function(){var t=$t.propHooks[this.prop];return t&&t.get?t.get(this):$t.propHooks._default.get(this)},run:function(t){var e,n=$t.propHooks[this.prop];return this.options.duration?this.pos=e=P.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$t.propHooks._default.set(this),this}}).init.prototype=$t.prototype,($t.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=P.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){P.fx.step[t.prop]?P.fx.step[t.prop](t):1!==t.elem.nodeType||!P.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:P.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=$t.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},P.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},P.fx=$t.prototype.init,P.fx.step={};var Qt,Jt,te,ee,ne=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ie(){Jt&&(!1===k.hidden&&T.requestAnimationFrame?T.requestAnimationFrame(ie):T.setTimeout(ie,P.fx.interval),P.fx.tick())}function re(){return T.setTimeout(function(){Qt=void 0}),Qt=Date.now()}function oe(t,e){var n,a=0,i={height:t};for(e=e?1:0;a<4;a+=2-e)i["margin"+(n=et[a])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function se(t,e,n){for(var a,i=(le.tweeners[e]||[]).concat(le.tweeners["*"]),r=0,o=i.length;r<o;r++)if(a=i[r].call(n,e,t))return a}function le(r,t,e){var n,o,a=0,i=le.prefilters.length,s=P.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Qt||re(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),a=0,i=u.tweens.length;a<i;a++)u.tweens[a].run(n);return s.notifyWith(r,[u,n,e]),n<1&&i?e:(i||s.notifyWith(r,[u,1,0]),s.resolveWith(r,[u]),!1)},u=s.promise({elem:r,props:P.extend({},t),opts:P.extend(!0,{specialEasing:{},easing:P.easing._default},e),originalProperties:t,originalOptions:e,startTime:Qt||re(),duration:e.duration,tweens:[],createTween:function(t,e){var n=P.Tween(r,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(r,[u,1,0]),s.resolveWith(r,[u,t])):s.rejectWith(r,[u,t]),this}}),d=u.props;for(!function(t,e){var n,a,i,r,o;for(n in t)if(i=e[a=z(n)],r=t[n],Array.isArray(r)&&(i=r[1],r=t[n]=r[0]),n!==a&&(t[a]=r,delete t[n]),(o=P.cssHooks[a])&&"expand"in o)for(n in r=o.expand(r),delete t[a],r)n in t||(t[n]=r[n],e[n]=i);else e[a]=i}(d,u.opts.specialEasing);a<i;a++)if(n=le.prefilters[a].call(u,r,d,u.opts))return y(n.stop)&&(P._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return P.map(d,se,u),y(u.opts.start)&&u.opts.start.call(r,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),P.fx.timer(P.extend(l,{elem:r,anim:u,queue:u.opts.queue})),u}P.Animation=P.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,tt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(B);for(var n,a=0,i=t.length;a<i;a++)n=t[a],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var a,i,r,o,s,l,u,d,c="width"in e||"height"in e,f=this,h={},p=t.style,m=t.nodeType&&rt(t),g=V.get(t,"fxshow");for(a in n.queue||(null==(o=P._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,P.queue(t,"fx").length||o.empty.fire()})})),e)if(i=e[a],ne.test(i)){if(delete e[a],r=r||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[a])continue;m=!0}h[a]=g&&g[a]||P.style(t,a)}if((l=!P.isEmptyObject(e))||!P.isEmptyObject(h))for(a in c&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=V.get(t,"display")),"none"===(d=P.css(t,"display"))&&(u?d=u:(lt([t],!0),u=t.style.display||u,d=P.css(t,"display"),lt([t]))),("inline"===d||"inline-block"===d&&null!=u)&&"none"===P.css(t,"float")&&(l||(f.done(function(){p.display=u}),null==u&&(d=p.display,u="none"===d?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,h)l||(g?"hidden"in g&&(m=g.hidden):g=V.access(t,"fxshow",{display:u}),r&&(g.hidden=!m),m&&lt([t],!0),f.done(function(){for(a in m||lt([t]),V.remove(t,"fxshow"),h)P.style(t,a,h[a])})),l=se(m?g[a]:0,a,f),a in g||(g[a]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),P.speed=function(t,e,n){var a=t&&"object"==typeof t?P.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return P.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in P.fx.speeds?a.duration=P.fx.speeds[a.duration]:a.duration=P.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){y(a.old)&&a.old.call(this),a.queue&&P.dequeue(this,a.queue)},a},P.fn.extend({fadeTo:function(t,e,n,a){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,a)},animate:function(e,t,n,a){var i=P.isEmptyObject(e),r=P.speed(t,n,a),o=function(){var t=le(this,P.extend({},e),r);(i||V.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(i,t,r){var o=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof i&&(r=t,t=i,i=void 0),t&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=P.timers,a=V.get(this);if(e)a[e]&&a[e].stop&&o(a[e]);else for(e in a)a[e]&&a[e].stop&&ae.test(e)&&o(a[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||P.dequeue(this,i)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=V.get(this),n=e[o+"queue"],a=e[o+"queueHooks"],i=P.timers,r=n?n.length:0;for(e.finish=!0,P.queue(this,o,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===o&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),P.each(["toggle","show","hide"],function(t,a){var i=P.fn[a];P.fn[a]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(oe(a,!0),t,e,n)}}),P.each({slideDown:oe("show"),slideUp:oe("hide"),slideToggle:oe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,a){P.fn[t]=function(t,e,n){return this.animate(a,t,e,n)}}),P.timers=[],P.fx.tick=function(){var t,e=0,n=P.timers;for(Qt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||P.fx.stop(),Qt=void 0},P.fx.timer=function(t){P.timers.push(t),P.fx.start()},P.fx.interval=13,P.fx.start=function(){Jt||(Jt=!0,ie())},P.fx.stop=function(){Jt=null},P.fx.speeds={slow:600,fast:200,_default:400},P.fn.delay=function(a,t){return a=P.fx&&P.fx.speeds[a]||a,t=t||"fx",this.queue(t,function(t,e){var n=T.setTimeout(t,a);e.stop=function(){T.clearTimeout(n)}})},te=k.createElement("input"),ee=k.createElement("select").appendChild(k.createElement("option")),te.type="checkbox",v.checkOn=""!==te.value,v.optSelected=ee.selected,(te=k.createElement("input")).value="t",te.type="radio",v.radioValue="t"===te.value;var ue,de=P.expr.attrHandle;P.fn.extend({attr:function(t,e){return W(this,P.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){P.removeAttr(this,t)})}}),P.extend({attr:function(t,e,n){var a,i,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?P.prop(t,e,n):(1===r&&P.isXMLDoc(t)||(i=P.attrHooks[e.toLowerCase()]||(P.expr.match.bool.test(e)?ue:void 0)),void 0!==n?null===n?void P.removeAttr(t,e):i&&"set"in i&&void 0!==(a=i.set(t,n,e))?a:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(a=i.get(t,e))?a:null==(a=P.find.attr(t,e))?void 0:a)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&x(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,a=0,i=e&&e.match(B);if(i&&1===t.nodeType)for(;n=i[a++];)t.removeAttribute(n)}}),ue={set:function(t,e,n){return!1===e?P.removeAttr(t,n):t.setAttribute(n,n),n}},P.each(P.expr.match.bool.source.match(/\w+/g),function(t,e){var o=de[e]||P.find.attr;de[e]=function(t,e,n){var a,i,r=e.toLowerCase();return n||(i=de[r],de[r]=a,a=null!=o(t,e,n)?r:null,de[r]=i),a}});var ce=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function he(t){return(t.match(B)||[]).join(" ")}function pe(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(B)||[]}P.fn.extend({prop:function(t,e){return W(this,P.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[P.propFix[t]||t]})}}),P.extend({prop:function(t,e,n){var a,i,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&P.isXMLDoc(t)||(e=P.propFix[e]||e,i=P.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(a=i.set(t,n,e))?a:t[e]=n:i&&"get"in i&&null!==(a=i.get(t,e))?a:t[e]},propHooks:{tabIndex:{get:function(t){var e=P.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(P.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),P.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){P.propFix[this.toLowerCase()]=this}),P.fn.extend({addClass:function(e){var t,n,a,i,r,o,s,l=0;if(y(e))return this.each(function(t){P(this).addClass(e.call(this,t,pe(this)))});if((t=me(e)).length)for(;n=this[l++];)if(i=pe(n),a=1===n.nodeType&&" "+he(i)+" "){for(o=0;r=t[o++];)a.indexOf(" "+r+" ")<0&&(a+=r+" ");i!==(s=he(a))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,a,i,r,o,s,l=0;if(y(e))return this.each(function(t){P(this).removeClass(e.call(this,t,pe(this)))});if(!arguments.length)return this.attr("class","");if((t=me(e)).length)for(;n=this[l++];)if(i=pe(n),a=1===n.nodeType&&" "+he(i)+" "){for(o=0;r=t[o++];)for(;-1<a.indexOf(" "+r+" ");)a=a.replace(" "+r+" "," ");i!==(s=he(a))&&n.setAttribute("class",s)}return this},toggleClass:function(i,e){var r=typeof i,o="string"===r||Array.isArray(i);return"boolean"==typeof e&&o?e?this.addClass(i):this.removeClass(i):y(i)?this.each(function(t){P(this).toggleClass(i.call(this,t,pe(this),e),e)}):this.each(function(){var t,e,n,a;if(o)for(e=0,n=P(this),a=me(i);t=a[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!==r||((t=pe(this))&&V.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===i?"":V.get(this,"__className__")||""))})},hasClass:function(t){var e,n,a=0;for(e=" "+t+" ";n=this[a++];)if(1===n.nodeType&&-1<(" "+he(pe(n))+" ").indexOf(e))return!0;return!1}});var ge=/\r/g;P.fn.extend({val:function(n){var a,t,i,e=this[0];return arguments.length?(i=y(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=i?n.call(this,t,P(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=P.map(e,function(t){return null==t?"":t+""})),(a=P.valHooks[this.type]||P.valHooks[this.nodeName.toLowerCase()])&&"set"in a&&void 0!==a.set(this,e,"value")||(this.value=e))})):e?(a=P.valHooks[e.type]||P.valHooks[e.nodeName.toLowerCase()])&&"get"in a&&void 0!==(t=a.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ge,""):null==t?"":t:void 0}}),P.extend({valHooks:{option:{get:function(t){var e=P.find.attr(t,"value");return null!=e?e:he(P.text(t))}},select:{get:function(t){var e,n,a,i=t.options,r=t.selectedIndex,o="select-one"===t.type,s=o?null:[],l=o?r+1:i.length;for(a=r<0?l:o?r:0;a<l;a++)if(((n=i[a]).selected||a===r)&&!n.disabled&&(!n.parentNode.disabled||!x(n.parentNode,"optgroup"))){if(e=P(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,a,i=t.options,r=P.makeArray(e),o=i.length;o--;)((a=i[o]).selected=-1<P.inArray(P.valHooks.option.get(a),r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),P.each(["radio","checkbox"],function(){P.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<P.inArray(P(t).val(),e)}},v.checkOn||(P.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in T;var ve=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};P.extend(P.event,{trigger:function(t,e,n,a){var i,r,o,s,l,u,d,c,f=[n||k],h=g.call(t,"type")?t.type:t,p=g.call(t,"namespace")?t.namespace.split("."):[];if(r=c=o=n=n||k,3!==n.nodeType&&8!==n.nodeType&&!ve.test(h+P.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),l=h.indexOf(":")<0&&"on"+h,(t=t[P.expando]?t:new P.Event(h,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:P.makeArray(e,[t]),d=P.event.special[h]||{},a||!d.trigger||!1!==d.trigger.apply(n,e))){if(!a&&!d.noBubble&&!b(n)){for(s=d.delegateType||h,ve.test(s+h)||(r=r.parentNode);r;r=r.parentNode)f.push(r),o=r;o===(n.ownerDocument||k)&&f.push(o.defaultView||o.parentWindow||T)}for(i=0;(r=f[i++])&&!t.isPropagationStopped();)c=r,t.type=1<i?s:d.bindType||h,(u=(V.get(r,"events")||Object.create(null))[t.type]&&V.get(r,"handle"))&&u.apply(r,e),(u=l&&r[l])&&u.apply&&G(r)&&(t.result=u.apply(r,e),!1===t.result&&t.preventDefault());return t.type=h,a||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!G(n)||l&&y(n[h])&&!b(n)&&((o=n[l])&&(n[l]=null),P.event.triggered=h,t.isPropagationStopped()&&c.addEventListener(h,ye),n[h](),t.isPropagationStopped()&&c.removeEventListener(h,ye),P.event.triggered=void 0,o&&(n[l]=o)),t.result}},simulate:function(t,e,n){var a=P.extend(new P.Event,n,{type:t,isSimulated:!0});P.event.trigger(a,null,e)}}),P.fn.extend({trigger:function(t,e){return this.each(function(){P.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return P.event.trigger(t,e,n,!0)}}),v.focusin||P.each({focus:"focusin",blur:"focusout"},function(n,a){var i=function(t){P.event.simulate(a,t.target,P.event.fix(t))};P.event.special[a]={setup:function(){var t=this.ownerDocument||this.document||this,e=V.access(t,a);e||t.addEventListener(n,i,!0),V.access(t,a,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=V.access(t,a)-1;e?V.access(t,a,e):(t.removeEventListener(n,i,!0),V.remove(t,a))}}});var be=T.location,we={guid:Date.now()},_e=/\?/;P.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new T.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||P.error("Invalid XML: "+(n?P.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Ee=/\[\]$/,Te=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function xe(n,t,a,i){var e;if(Array.isArray(t))P.each(t,function(t,e){a||Ee.test(n)?i(n,e):xe(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,a,i)});else if(a||"object"!==_(t))i(n,t);else for(e in t)xe(n+"["+e+"]",t[e],a,i)}P.param=function(t,e){var n,a=[],i=function(t,e){var n=y(e)?e():e;a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!P.isPlainObject(t))P.each(t,function(){i(this.name,this.value)});else for(n in t)xe(n,t[n],e,i);return a.join("&")},P.fn.extend({serialize:function(){return P.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=P.prop(this,"elements");return t?P.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!P(this).is(":disabled")&&Pe.test(this.nodeName)&&!ke.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var n=P(this).val();return null==n?null:Array.isArray(n)?P.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}});var Ce=/%20/g,Oe=/#.*$/,Se=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,Ae=/^\/\//,Re={},Be={},je="*/".concat("*"),Ie=k.createElement("a");function Fe(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,a=0,i=t.toLowerCase().match(B)||[];if(y(e))for(;n=i[a++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function Ne(e,i,r,o){var s={},l=e===Be;function u(t){var a;return s[t]=!0,P.each(e[t]||[],function(t,e){var n=e(i,r,o);return"string"!=typeof n||l||s[n]?l?!(a=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),a}return u(i.dataTypes[0])||!s["*"]&&u("*")}function De(t,e){var n,a,i=P.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:a||(a={}))[n]=e[n]);return a&&P.extend(!0,t,a),t}Ie.href=be.href,P.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":P.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?De(De(t,P.ajaxSettings),e):De(P.ajaxSettings,t)},ajaxPrefilter:Fe(Re),ajaxTransport:Fe(Be),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var d,c,f,n,h,a,p,m,i,r,g=P.ajaxSetup({},e),v=g.context||g,y=g.context&&(v.nodeType||v.jquery)?P(v):P.event,b=P.Deferred(),w=P.Callbacks("once memory"),_=g.statusCode||{},o={},s={},l="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=Le.exec(f);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(t,e){return null==p&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,o[t]=e),this},overrideMimeType:function(t){return null==p&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)E.always(t[E.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||l;return d&&d.abort(e),u(0,e),this}};if(b.promise(E),g.url=((t||g.url||be.href)+"").replace(Ae,be.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(B)||[""],null==g.crossDomain){a=k.createElement("a");try{a.href=g.url,a.href=a.href,g.crossDomain=Ie.protocol+"//"+Ie.host!=a.protocol+"//"+a.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=P.param(g.data,g.traditional)),Ne(Re,g,e,E),p)return E;for(i in(m=P.event&&g.global)&&0==P.active++&&P.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Me.test(g.type),c=g.url.replace(Oe,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Ce,"+")):(r=g.url.slice(c.length),g.data&&(g.processData||"string"==typeof g.data)&&(c+=(_e.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(c=c.replace(Se,"$1"),r=(_e.test(c)?"&":"?")+"_="+we.guid+++r),g.url=c+r),g.ifModified&&(P.lastModified[c]&&E.setRequestHeader("If-Modified-Since",P.lastModified[c]),P.etag[c]&&E.setRequestHeader("If-None-Match",P.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&E.setRequestHeader("Content-Type",g.contentType),E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+je+"; q=0.01":""):g.accepts["*"]),g.headers)E.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(v,E,g)||p))return E.abort();if(l="abort",w.add(g.complete),E.done(g.success),E.fail(g.error),d=Ne(Be,g,e,E)){if(E.readyState=1,m&&y.trigger("ajaxSend",[E,g]),p)return E;g.async&&0<g.timeout&&(h=T.setTimeout(function(){E.abort("timeout")},g.timeout));try{p=!1,d.send(o,u)}catch(t){if(p)throw t;u(-1,t)}}else u(-1,"No Transport");function u(t,e,n,a){var i,r,o,s,l,u=e;p||(p=!0,h&&T.clearTimeout(h),d=void 0,f=a||"",E.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var a,i,r,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=t.mimeType||e.getResponseHeader("Content-Type"));if(a)for(i in s)if(s[i]&&s[i].test(a)){l.unshift(i);break}if(l[0]in n)r=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){r=i;break}o||(o=i)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),n[r]}(g,E,n)),!i&&-1<P.inArray("script",g.dataTypes)&&P.inArray("json",g.dataTypes)<0&&(g.converters["text script"]=function(){}),s=function(t,e,n,a){var i,r,o,s,l,u={},d=t.dataTypes.slice();if(d[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(r=d.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&a&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=u[l+" "+r]||u["* "+r]))for(i in u)if((s=i.split(" "))[1]===r&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(r=s[0],d.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(g,s,E,i),i?(g.ifModified&&((l=E.getResponseHeader("Last-Modified"))&&(P.lastModified[c]=l),(l=E.getResponseHeader("etag"))&&(P.etag[c]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=s.state,r=s.data,i=!(o=s.error))):(o=u,!t&&u||(u="error",t<0&&(t=0))),E.status=t,E.statusText=(e||u)+"",i?b.resolveWith(v,[r,u,E]):b.rejectWith(v,[E,u,o]),E.statusCode(_),_=void 0,m&&y.trigger(i?"ajaxSuccess":"ajaxError",[E,g,i?r:o]),w.fireWith(v,[E,u]),m&&(y.trigger("ajaxComplete",[E,g]),--P.active||P.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return P.get(t,e,n,"json")},getScript:function(t,e){return P.get(t,void 0,e,"script")}}),P.each(["get","post"],function(t,i){P[i]=function(t,e,n,a){return y(e)&&(a=a||n,n=e,e=void 0),P.ajax(P.extend({url:t,type:i,dataType:a,data:e,success:n},P.isPlainObject(t)&&t))}}),P.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),P._evalUrl=function(t,e,n){return P.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){P.globalEval(t,e,n)}})},P.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=P(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(t){P(this).wrapInner(n.call(this,t))}):this.each(function(){var t=P(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=y(e);return this.each(function(t){P(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){P(this).replaceWith(this.childNodes)}),this}}),P.expr.pseudos.hidden=function(t){return!P.expr.pseudos.visible(t)},P.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},P.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},We=P.ajaxSettings.xhr();v.cors=!!We&&"withCredentials"in We,v.ajax=We=!!We,P.ajaxTransport(function(i){var r,o;if(v.cors||We&&!i.crossDomain)return{send:function(t,e){var n,a=i.xhr();if(a.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)a[n]=i.xhrFields[n];for(n in i.mimeType&&a.overrideMimeType&&a.overrideMimeType(i.mimeType),i.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)a.setRequestHeader(n,t[n]);r=function(t){return function(){r&&(r=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?e(0,"error"):e(a.status,a.statusText):e(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=r(),o=a.onerror=a.ontimeout=r("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&T.setTimeout(function(){r&&o()})},r=r("abort");try{a.send(i.hasContent&&i.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}),P.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),P.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return P.globalEval(t),t}}}),P.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),P.ajaxTransport("script",function(n){var a,i;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){a=P("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){a.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),k.head.appendChild(a[0])},abort:function(){i&&i()}}});var Ue,Ye=[],qe=/(=)\?(?=&|$)|\?\?/;P.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||P.expando+"_"+we.guid++;return this[t]=!0,t}}),P.ajaxPrefilter("json jsonp",function(t,e,n){var a,i,r,o=!1!==t.jsonp&&(qe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qe.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(qe,"$1"+a):!1!==t.jsonp&&(t.url+=(_e.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return r||P.error(a+" was not called"),r[0]},t.dataTypes[0]="json",i=T[a],T[a]=function(){r=arguments},n.always(function(){void 0===i?P(T).removeProp(a):T[a]=i,t[a]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(a)),r&&y(i)&&i(r[0]),r=i=void 0}),"script"}),v.createHTMLDocument=((Ue=k.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ue.childNodes.length),P.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((a=(e=k.implementation.createHTMLDocument("")).createElement("base")).href=k.location.href,e.head.appendChild(a)):e=k),r=!n&&[],(i=C.exec(t))?[e.createElement(i[1])]:(i=yt([t],e,r),r&&r.length&&P(r).remove(),P.merge([],i.childNodes)));var a,i,r},P.fn.load=function(t,e,n){var a,i,r,o=this,s=t.indexOf(" ");return-1<s&&(a=he(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<o.length&&P.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){r=arguments,o.html(a?P("<div>").append(P.parseHTML(t)).find(a):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},P.expr.pseudos.animated=function(e){return P.grep(P.timers,function(t){return e===t.elem}).length},P.offset={setOffset:function(t,e,n){var a,i,r,o,s,l,u=P.css(t,"position"),d=P(t),c={};"static"===u&&(t.style.position="relative"),s=d.offset(),r=P.css(t,"top"),l=P.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(r+l).indexOf("auto")?(o=(a=d.position()).top,i=a.left):(o=parseFloat(r)||0,i=parseFloat(l)||0),y(e)&&(e=e.call(t,n,P.extend({},s))),null!=e.top&&(c.top=e.top-s.top+o),null!=e.left&&(c.left=e.left-s.left+i),"using"in e?e.using.call(t,c):d.css(c)}},P.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){P.offset.setOffset(this,e,t)});var t,n,a=this[0];return a?a.getClientRects().length?(t=a.getBoundingClientRect(),n=a.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,a=this[0],i={top:0,left:0};if("fixed"===P.css(a,"position"))e=a.getBoundingClientRect();else{for(e=this.offset(),n=a.ownerDocument,t=a.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===P.css(t,"position");)t=t.parentNode;t&&t!==a&&1===t.nodeType&&((i=P(t).offset()).top+=P.css(t,"borderTopWidth",!0),i.left+=P.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-P.css(a,"marginTop",!0),left:e.left-i.left-P.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===P.css(t,"position");)t=t.offsetParent;return t||nt})}}),P.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var r="pageYOffset"===i;P.fn[e]=function(t){return W(this,function(t,e,n){var a;if(b(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===n)return a?a[i]:t[e];a?a.scrollTo(r?a.pageXOffset:n,r?n:a.pageYOffset):t[e]=n},e,t,arguments.length)}}),P.each(["top","left"],function(t,n){P.cssHooks[n]=Dt(v.pixelPosition,function(t,e){if(e)return e=Nt(t,n),Bt.test(e)?P(t).position()[n]+"px":e})}),P.each({Height:"height",Width:"width"},function(o,s){P.each({padding:"inner"+o,content:s,"":"outer"+o},function(a,r){P.fn[r]=function(t,e){var n=arguments.length&&(a||"boolean"!=typeof t),i=a||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,n){var a;return b(t)?0===r.indexOf("outer")?t["inner"+o]:t.document.documentElement["client"+o]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+o],a["scroll"+o],t.body["offset"+o],a["offset"+o],a["client"+o])):void 0===n?P.css(t,e,i):P.style(t,e,n,i)},s,n?t:void 0,n)}})}),P.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){P.fn[e]=function(t){return this.on(e,t)}}),P.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,a){return this.on(e,t,n,a)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),P.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){P.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}});var ze=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;P.proxy=function(t,e){var n,a,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return a=s.call(arguments,2),(i=function(){return t.apply(e||this,a.concat(s.call(arguments)))}).guid=t.guid=t.guid||P.guid++,i},P.holdReady=function(t){t?P.readyWait++:P.ready(!0)},P.isArray=Array.isArray,P.parseJSON=JSON.parse,P.nodeName=x,P.isFunction=y,P.isWindow=b,P.camelCase=z,P.type=_,P.now=Date.now,P.isNumeric=function(t){var e=P.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},P.trim=function(t){return null==t?"":(t+"").replace(ze,"")};var Ge=T.jQuery,Xe=T.$;return P.noConflict=function(t){return T.$===P&&(T.$=Xe),t&&T.jQuery===P&&(T.jQuery=Ge),P},void 0===t&&(T.jQuery=T.$=P),P})},{}],230:[function(t,e,n){"use strict";var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=a},{"./lib/deflate":231,"./lib/inflate":232,"./lib/utils/common":233,"./lib/zlib/constants":236}],231:[function(t,e,n){"use strict";var o=t("./zlib/deflate"),s=t("./utils/common"),l=t("./utils/strings"),i=t("./zlib/messages"),r=t("./zlib/zstream"),u=Object.prototype.toString,d=0,c=-1,f=0,h=8;function p(t){if(!(this instanceof p))return new p(t);this.options=s.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==d)throw new Error(i[n]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var a;if(a="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=o.deflateSetDictionary(this.strm,a))!==d)throw new Error(i[n]);this._dict_set=!0}}function a(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||i[n.err];return n.result}p.prototype.push=function(t,e){var n,a,i=this.strm,r=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=l.string2buf(t):"[object ArrayBuffer]"===u.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(r),i.next_out=0,i.avail_out=r),1!==(n=o.deflate(i,a))&&n!==d)return this.onEnd(n),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(i.output,i.next_out))):this.onData(s.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==n);return 4===a?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==a||(this.onEnd(d),!(i.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=p,n.deflate=a,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,a(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,a(t,e)}},{"./utils/common":233,"./utils/strings":234,"./zlib/deflate":238,"./zlib/messages":243,"./zlib/zstream":245}],232:[function(t,e,n){"use strict";var c=t("./zlib/inflate"),f=t("./utils/common"),h=t("./utils/strings"),p=t("./zlib/constants"),a=t("./zlib/messages"),i=t("./zlib/zstream"),r=t("./zlib/gzheader"),m=Object.prototype.toString;function o(t){if(!(this instanceof o))return new o(t);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var n=c.inflateInit2(this.strm,e.windowBits);if(n!==p.Z_OK)throw new Error(a[n]);if(this.header=new r,c.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=h.string2buf(e.dictionary):"[object ArrayBuffer]"===m.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=c.inflateSetDictionary(this.strm,e.dictionary))!==p.Z_OK))throw new Error(a[n])}function s(t,e){var n=new o(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}o.prototype.push=function(t,e){var n,a,i,r,o,s=this.strm,l=this.options.chunkSize,u=this.options.dictionary,d=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?p.Z_FINISH:p.Z_NO_FLUSH,"string"==typeof t?s.input=h.binstring2buf(t):"[object ArrayBuffer]"===m.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new f.Buf8(l),s.next_out=0,s.avail_out=l),(n=c.inflate(s,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&u&&(n=c.inflateSetDictionary(this.strm,u)),n===p.Z_BUF_ERROR&&!0===d&&(n=p.Z_OK,d=!1),n!==p.Z_STREAM_END&&n!==p.Z_OK)return this.onEnd(n),!(this.ended=!0);s.next_out&&(0!==s.avail_out&&n!==p.Z_STREAM_END&&(0!==s.avail_in||a!==p.Z_FINISH&&a!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(i=h.utf8border(s.output,s.next_out),r=s.next_out-i,o=h.buf2string(s.output,i),s.next_out=r,s.avail_out=l-r,r&&f.arraySet(s.output,s.output,i,r,0),this.onData(o)):this.onData(f.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(d=!0)}while((0<s.avail_in||0===s.avail_out)&&n!==p.Z_STREAM_END);return n===p.Z_STREAM_END&&(a=p.Z_FINISH),a===p.Z_FINISH?(n=c.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p.Z_OK):a!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(s.avail_out=0))},o.prototype.onData=function(t){this.chunks.push(t)},o.prototype.onEnd=function(t){t===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=o,n.inflate=s,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,s(t,e)},n.ungzip=s},{"./utils/common":233,"./utils/strings":234,"./zlib/constants":236,"./zlib/gzheader":239,"./zlib/inflate":241,"./zlib/messages":243,"./zlib/zstream":245}],233:[function(t,e,n){"use strict";var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e,n,a=Array.prototype.slice.call(arguments,1);a.length;){var i=a.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)e=i,n=r,Object.prototype.hasOwnProperty.call(e,n)&&(t[r]=i[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,a,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+a),i);else for(var r=0;r<a;r++)t[i+r]=e[n+r]},flattenChunks:function(t){var e,n,a,i,r,o;for(e=a=0,n=t.length;e<n;e++)a+=t[e].length;for(o=new Uint8Array(a),e=i=0,n=t.length;e<n;e++)r=t[e],o.set(r,i),i+=r.length;return o}},r={arraySet:function(t,e,n,a,i){for(var r=0;r<a;r++)t[i+r]=e[n+r]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(a)},{}],234:[function(t,e,n){"use strict";var l=t("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var u=new l.Buf8(256),a=0;a<256;a++)u[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}u[254]=u[254]=1,n.string2buf=function(t){var e,n,a,i,r,o=t.length,s=0;for(i=0;i<o;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<o&&56320==(64512&(a=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new l.Buf8(s),i=r=0;r<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<o&&56320==(64512&(a=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),n<128?e[r++]=n:(n<2048?e[r++]=192|n>>>6:(n<65536?e[r++]=224|n>>>12:(e[r++]=240|n>>>18,e[r++]=128|n>>>12&63),e[r++]=128|n>>>6&63),e[r++]=128|63&n);return e},n.buf2binstring=function(t){return d(t,t.length)},n.binstring2buf=function(t){for(var e=new l.Buf8(t.length),n=0,a=e.length;n<a;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,a,i,r,o=e||t.length,s=new Array(2*o);for(n=a=0;n<o;)if((i=t[n++])<128)s[a++]=i;else if(4<(r=u[i]))s[a++]=65533,n+=r-1;else{for(i&=2===r?31:3===r?15:7;1<r&&n<o;)i=i<<6|63&t[n++],r--;1<r?s[a++]=65533:i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|1023&i)}return d(s,a)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+u[t[n]]>e?n:e}},{"./common":233}],235:[function(t,e,n){"use strict";e.exports=function(t,e,n,a){for(var i=65535&t|0,r=t>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;r=r+(i=i+e[a++]|0)|0,--o;);i%=65521,r%=65521}return i|r<<16|0}},{}],236:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],237:[function(t,e,n){"use strict";var s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,a){var i=s,r=a+n;t^=-1;for(var o=a;o<r;o++)t=t>>>8^i[255&(t^e[o])];return-1^t}},{}],238:[function(t,e,n){"use strict";var l,f=t("../utils/common"),u=t("./trees"),h=t("./adler32"),p=t("./crc32"),a=t("./messages"),d=0,c=4,m=0,g=-2,v=-1,y=4,i=2,b=8,w=9,r=286,o=30,s=19,_=2*r+1,E=15,T=3,k=258,P=k+T+1,x=42,C=113,O=1,S=2,L=3,M=4;function A(t,e){return t.msg=a[e],e}function R(t){return(t<<1)-(4<t?9:0)}function B(t){for(var e=t.length;0<=--e;)t[e]=0}function j(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(f.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function I(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,j(t.strm)}function F(t,e){t.pending_buf[t.pending++]=e}function N(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function D(t,e){var n,a,i=t.max_chain_length,r=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-P?t.strstart-(t.w_size-P):0,u=t.window,d=t.w_mask,c=t.prev,f=t.strstart+k,h=u[r+o-1],p=u[r+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+o]===p&&u[n+o-1]===h&&u[n]===u[r]&&u[++n]===u[r+1]){r+=2,n++;do{}while(u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&r<f);if(a=k-(f-r),r=f-k,o<a){if(t.match_start=e,s<=(o=a))break;h=u[r+o-1],p=u[r+o]}}}while((e=c[e&d])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead}function H(t){var e,n,a,i,r,o,s,l,u,d,c=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=c+(c-P)){for(f.arraySet(t.window,t.window,c,c,0),t.match_start-=c,t.strstart-=c,t.block_start-=c,e=n=t.hash_size;a=t.head[--e],t.head[e]=c<=a?a-c:0,--n;);for(e=n=c;a=t.prev[--e],t.prev[e]=c<=a?a-c:0,--n;);i+=c}if(0===t.strm.avail_in)break;if(o=t.strm,s=t.window,l=t.strstart+t.lookahead,u=i,d=void 0,d=o.avail_in,u<d&&(d=u),n=0===d?0:(o.avail_in-=d,f.arraySet(s,o.input,o.next_in,d,l),1===o.state.wrap?o.adler=h(o.adler,s,d,l):2===o.state.wrap&&(o.adler=p(o.adler,s,d,l)),o.next_in+=d,o.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=T)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+T-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<T)););}while(t.lookahead<P&&0!==t.strm.avail_in)}function W(t,e){for(var n,a;;){if(t.lookahead<P){if(H(t),t.lookahead<P&&e===d)return O;if(0===t.lookahead)break}if(n=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-P&&(t.match_length=D(t,n)),t.match_length>=T)if(a=u._tr_tally(t,t.strstart-t.match_start,t.match_length-T),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=T){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(I(t,!1),0===t.strm.avail_out))return O}return t.insert=t.strstart<T-1?t.strstart:T-1,e===c?(I(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(I(t,!1),0===t.strm.avail_out)?O:S}function U(t,e){for(var n,a,i;;){if(t.lookahead<P){if(H(t),t.lookahead<P&&e===d)return O;if(0===t.lookahead)break}if(n=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=T-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-P&&(t.match_length=D(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===T&&4096<t.strstart-t.match_start)&&(t.match_length=T-1)),t.prev_length>=T&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-T,a=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-T),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=T-1,t.strstart++,a&&(I(t,!1),0===t.strm.avail_out))return O}else if(t.match_available){if((a=u._tr_tally(t,0,t.window[t.strstart-1]))&&I(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return O}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<T-1?t.strstart:T-1,e===c?(I(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(I(t,!1),0===t.strm.avail_out)?O:S}function Y(t,e,n,a,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=a,this.func=i}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*_),this.dyn_dtree=new f.Buf16(2*(2*o+1)),this.bl_tree=new f.Buf16(2*(2*s+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(E+1),this.heap=new f.Buf16(2*r+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*r+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=i,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?x:C,t.adler=2===e.wrap?0:1,e.last_flush=d,u._tr_init(e),m):A(t,g)}function G(t){var e,n=z(t);return n===m&&((e=t.state).window_size=2*e.w_size,B(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=T-1,e.match_available=0,e.ins_h=0),n}function X(t,e,n,a,i,r){if(!t)return g;var o=1;if(e===v&&(e=6),a<0?(o=0,a=-a):15<a&&(o=2,a-=16),i<1||w<i||n!==b||a<8||15<a||e<0||9<e||r<0||y<r)return A(t,g);8===a&&(a=9);var s=new q;return(t.state=s).strm=t,s.wrap=o,s.gzhead=null,s.w_bits=a,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+T-1)/T),s.window=new f.Buf8(2*s.w_size),s.head=new f.Buf16(s.hash_size),s.prev=new f.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new f.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=r,s.method=n,G(t)}l=[new Y(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return O;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+n;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,I(t,!1),0===t.strm.avail_out))return O;if(t.strstart-t.block_start>=t.w_size-P&&(I(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===c?(I(t,!0),0===t.strm.avail_out?L:M):(t.strstart>t.block_start&&(I(t,!1),t.strm.avail_out),O)}),new Y(4,4,8,4,W),new Y(4,5,16,8,W),new Y(4,6,32,32,W),new Y(4,4,16,16,U),new Y(8,16,32,32,U),new Y(8,16,128,128,U),new Y(8,32,128,256,U),new Y(32,128,258,1024,U),new Y(32,258,258,4096,U)],n.deflateInit=function(t,e){return X(t,e,b,15,8,0)},n.deflateInit2=X,n.deflateReset=G,n.deflateResetKeep=z,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,m):g},n.deflate=function(t,e){var n,a,i,r;if(!t||!t.state||5<e||e<0)return t?A(t,g):g;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||666===a.status&&e!==c)return A(t,0===t.avail_out?-5:g);if(a.strm=t,n=a.last_flush,a.last_flush=e,a.status===x)if(2===a.wrap)t.adler=0,F(a,31),F(a,139),F(a,8),a.gzhead?(F(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),F(a,255&a.gzhead.time),F(a,a.gzhead.time>>8&255),F(a,a.gzhead.time>>16&255),F(a,a.gzhead.time>>24&255),F(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),F(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(F(a,255&a.gzhead.extra.length),F(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=p(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(F(a,0),F(a,0),F(a,0),F(a,0),F(a,0),F(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),F(a,3),a.status=C);else{var o=b+(a.w_bits-8<<4)<<8;o|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(o|=32),o+=31-o%31,a.status=C,N(a,o),0!==a.strstart&&(N(a,t.adler>>>16),N(a,65535&t.adler)),t.adler=1}if(69===a.status)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),j(t),i=a.pending,a.pending!==a.pending_buf_size));)F(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),j(t),i=a.pending,a.pending===a.pending_buf_size)){r=1;break}F(a,r=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0)}while(0!==r);a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),0===r&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),j(t),i=a.pending,a.pending===a.pending_buf_size)){r=1;break}F(a,r=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0)}while(0!==r);a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),0===r&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&j(t),a.pending+2<=a.pending_buf_size&&(F(a,255&t.adler),F(a,t.adler>>8&255),t.adler=0,a.status=C)):a.status=C),0!==a.pending){if(j(t),0===t.avail_out)return a.last_flush=-1,m}else if(0===t.avail_in&&R(e)<=R(n)&&e!==c)return A(t,-5);if(666===a.status&&0!==t.avail_in)return A(t,-5);if(0!==t.avail_in||0!==a.lookahead||e!==d&&666!==a.status){var s=2===a.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return O;break}if(t.match_length=0,n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(I(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===c?(I(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(I(t,!1),0===t.strm.avail_out)?O:S}(a,e):3===a.strategy?function(t,e){for(var n,a,i,r,o=t.window;;){if(t.lookahead<=k){if(H(t),t.lookahead<=k&&e===d)return O;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=T&&0<t.strstart&&(a=o[i=t.strstart-1])===o[++i]&&a===o[++i]&&a===o[++i]){r=t.strstart+k;do{}while(a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&i<r);t.match_length=k-(r-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=T?(n=u._tr_tally(t,1,t.match_length-T),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(I(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===c?(I(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(I(t,!1),0===t.strm.avail_out)?O:S}(a,e):l[a.level].func(a,e);if(s!==L&&s!==M||(a.status=666),s===O||s===L)return 0===t.avail_out&&(a.last_flush=-1),m;if(s===S&&(1===e?u._tr_align(a):5!==e&&(u._tr_stored_block(a,0,0,!1),3===e&&(B(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),j(t),0===t.avail_out))return a.last_flush=-1,m}return e!==c?m:a.wrap<=0?1:(2===a.wrap?(F(a,255&t.adler),F(a,t.adler>>8&255),F(a,t.adler>>16&255),F(a,t.adler>>24&255),F(a,255&t.total_in),F(a,t.total_in>>8&255),F(a,t.total_in>>16&255),F(a,t.total_in>>24&255)):(N(a,t.adler>>>16),N(a,65535&t.adler)),j(t),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?m:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==x&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?A(t,g):(t.state=null,e===C?A(t,-3):m):g},n.deflateSetDictionary=function(t,e){var n,a,i,r,o,s,l,u,d=e.length;if(!t||!t.state)return g;if(2===(r=(n=t.state).wrap)||1===r&&n.status!==x||n.lookahead)return g;for(1===r&&(t.adler=h(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===r&&(B(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new f.Buf8(n.w_size),f.arraySet(u,e,d-n.w_size,n.w_size,0),e=u,d=n.w_size),o=t.avail_in,s=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(n);n.lookahead>=T;){for(a=n.strstart,i=n.lookahead-(T-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+T-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++,--i;);n.strstart=a,n.lookahead=T-1,H(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=T-1,n.match_available=0,t.next_in=s,t.input=l,t.avail_in=o,n.wrap=r,m},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":233,"./adler32":235,"./crc32":237,"./messages":243,"./trees":244}],239:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],240:[function(t,e,n){"use strict";e.exports=function(t,e){var n,a,i,r,o,s,l,u,d,c,f,h,p,m,g,v,y,b,w,_,E,T,k,P,x;n=t.state,a=t.next_in,P=t.input,i=a+(t.avail_in-5),r=t.next_out,x=t.output,o=r-(e-t.avail_out),s=r+(t.avail_out-257),l=n.dmax,u=n.wsize,d=n.whave,c=n.wnext,f=n.window,h=n.hold,p=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(h+=P[a++]<<p,p+=8,h+=P[a++]<<p,p+=8),b=m[h&v];e:for(;;){if(h>>>=w=b>>>24,p-=w,0===(w=b>>>16&255))x[r++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&b,(w&=15)&&(p<w&&(h+=P[a++]<<p,p+=8),_+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=P[a++]<<p,p+=8,h+=P[a++]<<p,p+=8),b=g[h&y];n:for(;;){if(h>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(h&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(E=65535&b,p<(w&=15)&&(h+=P[a++]<<p,(p+=8)<w&&(h+=P[a++]<<p,p+=8)),l<(E+=h&(1<<w)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=w,p-=w,(w=r-o)<E){if(d<(w=E-w)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=f,(T=0)===c){if(T+=u-w,w<_){for(_-=w;x[r++]=f[T++],--w;);T=r-E,k=x}}else if(c<w){if(T+=u+c-w,(w-=c)<_){for(_-=w;x[r++]=f[T++],--w;);if(T=0,c<_){for(_-=w=c;x[r++]=f[T++],--w;);T=r-E,k=x}}}else if(T+=c-w,w<_){for(_-=w;x[r++]=f[T++],--w;);T=r-E,k=x}for(;2<_;)x[r++]=k[T++],x[r++]=k[T++],x[r++]=k[T++],_-=3;_&&(x[r++]=k[T++],1<_&&(x[r++]=k[T++]))}else{for(T=r-E;x[r++]=x[T++],x[r++]=x[T++],x[r++]=x[T++],2<(_-=3););_&&(x[r++]=x[T++],1<_&&(x[r++]=x[T++]))}break}}break}}while(a<i&&r<s);a-=_=p>>3,h&=(1<<(p-=_<<3))-1,t.next_in=a,t.next_out=r,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=r<s?s-r+257:257-(r-s),n.hold=h,n.bits=p}},{}],241:[function(t,e,n){"use strict";var S=t("../utils/common"),L=t("./adler32"),M=t("./crc32"),A=t("./inffast"),R=t("./inftrees"),B=1,j=2,I=0,F=-2,N=1,a=852,i=592;function D(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new S.Buf16(320),this.work=new S.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=N,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new S.Buf32(a),e.distcode=e.distdyn=new S.Buf32(i),e.sane=1,e.back=-1,I):F}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,o(t)):F}function l(t,e){var n,a;return t&&t.state?(a=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?F:(null!==a.window&&a.wbits!==e&&(a.window=null),a.wrap=n,a.wbits=e,s(t))):F}function u(t,e){var n,a;return t?(a=new r,(t.state=a).window=null,(n=l(t,e))!==I&&(t.state=null),n):F}var d,c,f=!0;function H(t){if(f){var e;for(d=new S.Buf32(512),c=new S.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(R(B,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;R(j,t.lens,0,32,c,0,t.work,{bits:5}),f=!1}t.lencode=d,t.lenbits=9,t.distcode=c,t.distbits=5}function W(t,e,n,a){var i,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new S.Buf8(r.wsize)),a>=r.wsize?(S.arraySet(r.window,e,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(a<(i=r.wsize-r.wnext)&&(i=a),S.arraySet(r.window,e,n-a,i,r.wnext),(a-=i)?(S.arraySet(r.window,e,n-a,a,0),r.wnext=a,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0}n.inflateReset=s,n.inflateReset2=l,n.inflateResetKeep=o,n.inflateInit=function(t){return u(t,15)},n.inflateInit2=u,n.inflate=function(t,e){var n,a,i,r,o,s,l,u,d,c,f,h,p,m,g,v,y,b,w,_,E,T,k,P,x=0,C=new S.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return F;12===(n=t.state).mode&&(n.mode=13),o=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,a=t.input,s=t.avail_in,u=n.hold,d=n.bits,c=s,f=l,T=I;t:for(;;)switch(n.mode){case N:if(0===n.wrap){n.mode=13;break}for(;d<16;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(2&n.wrap&&35615===u){C[n.check=0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0),d=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){t.msg="unknown compression method",n.mode=30;break}if(d-=4,E=8+(15&(u>>>=4)),0===n.wbits)n.wbits=E;else if(E>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<E,t.adler=n.check=1,n.mode=512&u?10:12,d=u=0;break;case 2:for(;d<16;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(n.flags=u,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0)),d=u=0,n.mode=3;case 3:for(;d<32;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}n.head&&(n.head.time=u),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,n.check=M(n.check,C,4,0)),d=u=0,n.mode=4;case 4:for(;d<16;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0)),d=u=0,n.mode=5;case 5:if(1024&n.flags){for(;d<16;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0)),d=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(s<(h=n.length)&&(h=s),h&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),S.arraySet(n.head.extra,a,r,h,E)),512&n.flags&&(n.check=M(n.check,a,h,r)),s-=h,r+=h,n.length-=h),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;for(h=0;E=a[r+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E)),E&&h<s;);if(512&n.flags&&(n.check=M(n.check,a,h,r)),s-=h,r+=h,E)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;for(h=0;E=a[r+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E)),E&&h<s;);if(512&n.flags&&(n.check=M(n.check,a,h,r)),s-=h,r+=h,E)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;d<16;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}d=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;d<32;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}t.adler=n.check=D(u),d=u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=u,n.bits=d,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){u>>>=7&d,d-=7&d,n.mode=27;break}for(;d<3;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}switch(n.last=1&u,d-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(H(n),n.mode=20,6!==e)break;u>>>=2,d-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}u>>>=2,d-=2;break;case 14:for(u>>>=7&d,d-=7&d;d<32;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,d=u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(h=n.length){if(s<h&&(h=s),l<h&&(h=l),0===h)break t;S.arraySet(i,a,r,h,o),s-=h,r+=h,l-=h,o+=h,n.length-=h;break}n.mode=12;break;case 17:for(;d<14;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(n.nlen=257+(31&u),u>>>=5,d-=5,n.ndist=1+(31&u),u>>>=5,d-=5,n.ncode=4+(15&u),u>>>=4,d-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}n.lens[O[n.have++]]=7&u,u>>>=3,d-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},T=R(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,T){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(x=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&x,!((g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(y<16)u>>>=g,d-=g,n.lens[n.have++]=y;else{if(16===y){for(P=g+2;d<P;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(u>>>=g,d-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}E=n.lens[n.have-1],h=3+(3&u),u>>>=2,d-=2}else if(17===y){for(P=g+3;d<P;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}d-=g,E=0,h=3+(7&(u>>>=g)),u>>>=3,d-=3}else{for(P=g+7;d<P;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}d-=g,E=0,h=11+(127&(u>>>=g)),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;h--;)n.lens[n.have++]=E}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,k={bits:n.lenbits},T=R(B,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,T){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},T=R(j,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,T){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=s&&258<=l){t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=u,n.bits=d,A(t,f),o=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,a=t.input,s=t.avail_in,u=n.hold,d=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;v=(x=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&x,!((g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(v&&0==(240&v)){for(b=g,w=v,_=y;v=(x=n.lencode[_+((u&(1<<b+w)-1)>>b)])>>>16&255,y=65535&x,!(b+(g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}u>>>=b,d-=b,n.back+=b}if(u>>>=g,d-=g,n.back+=g,n.length=y,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(P=n.extra;d<P;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(x=n.distcode[u&(1<<n.distbits)-1])>>>16&255,y=65535&x,!((g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(0==(240&v)){for(b=g,w=v,_=y;v=(x=n.distcode[_+((u&(1<<b+w)-1)>>b)])>>>16&255,y=65535&x,!(b+(g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}u>>>=b,d-=b,n.back+=b}if(u>>>=g,d-=g,n.back+=g,64&v){t.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(P=n.extra;d<P;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(h=f-l,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=i,p=o-n.offset,h=n.length;for(l<h&&(h=l),l-=h,n.length-=h;i[o++]=m[p++],--h;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;i[o++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;d<32;){if(0===s)break t;s--,u|=a[r++]<<d,d+=8}if(f-=l,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?M(n.check,i,f,o-f):L(n.check,i,f,o-f)),f=l,(n.flags?u:D(u))!==n.check){t.msg="incorrect data check",n.mode=30;break}d=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break t;s--,u+=a[r++]<<d,d+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}d=u=0}n.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return F}return t.next_out=o,t.avail_out=l,t.next_in=r,t.avail_in=s,n.hold=u,n.bits=d,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&W(t,t.output,t.next_out,f-t.avail_out)?(n.mode=31,-4):(c-=t.avail_in,f-=t.avail_out,t.total_in+=c,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?M(n.check,i,f,t.next_out-f):L(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===f||4===e)&&T===I&&(T=-5),T)},n.inflateEnd=function(t){if(!t||!t.state)return F;var e=t.state;return e.window&&(e.window=null),t.state=null,I},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?F:((n.head=e).done=!1,I):F},n.inflateSetDictionary=function(t,e){var n,a=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?F:11===n.mode&&L(1,e,a,0)!==n.check?-3:W(t,e,a,a)?(n.mode=31,-4):(n.havedict=1,I):F},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":233,"./adler32":235,"./crc32":237,"./inffast":240,"./inftrees":242}],242:[function(t,e,n){"use strict";var B=t("../utils/common"),j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],I=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],N=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,a,i,r,o,s){var l,u,d,c,f,h,p,m,g,v=s.bits,y=0,b=0,w=0,_=0,E=0,T=0,k=0,P=0,x=0,C=0,O=null,S=0,L=new B.Buf16(16),M=new B.Buf16(16),A=null,R=0;for(y=0;y<=15;y++)L[y]=0;for(b=0;b<a;b++)L[e[n+b]]++;for(E=v,_=15;1<=_&&0===L[_];_--);if(_<E&&(E=_),0===_)return i[r++]=20971520,i[r++]=20971520,s.bits=1,0;for(w=1;w<_&&0===L[w];w++);for(E<w&&(E=w),y=P=1;y<=15;y++)if(P<<=1,(P-=L[y])<0)return-1;if(0<P&&(0===t||1!==_))return-1;for(M[1]=0,y=1;y<15;y++)M[y+1]=M[y]+L[y];for(b=0;b<a;b++)0!==e[n+b]&&(o[M[e[n+b]]++]=b);if(0===t?(O=A=o,h=19):1===t?(O=j,S-=257,A=I,R-=257,h=256):(O=F,A=N,h=-1),y=w,f=r,k=b=C=0,d=-1,c=(x=1<<(T=E))-1,1===t&&852<x||2===t&&592<x)return 1;for(;;){for(p=y-k,o[b]<h?(m=0,g=o[b]):o[b]>h?(m=A[R+o[b]],g=O[S+o[b]]):(m=96,g=0),l=1<<y-k,w=u=1<<T;i[f+(C>>k)+(u-=l)]=p<<24|m<<16|g|0,0!==u;);for(l=1<<y-1;C&l;)l>>=1;if(0!==l?(C&=l-1,C+=l):C=0,b++,0==--L[y]){if(y===_)break;y=e[n+o[b]]}if(E<y&&(C&c)!==d){for(0===k&&(k=E),f+=w,P=1<<(T=y-k);T+k<_&&!((P-=L[T+k])<=0);)T++,P<<=1;if(x+=1<<T,1===t&&852<x||2===t&&592<x)return 1;i[d=C&c]=E<<24|T<<16|f-r|0}}return 0!==C&&(i[f+C]=y-k<<24|64<<16|0),s.bits=E,0}},{"../utils/common":233}],243:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],244:[function(t,e,n){"use strict";var l=t("../utils/common"),s=0,u=1;function a(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,o=29,c=256,f=c+1+o,h=30,p=19,g=2*f+1,v=15,i=16,m=7,y=256,b=16,w=17,_=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(f+2));a(x);var C=new Array(2*h);a(C);var O=new Array(512);a(O);var S=new Array(256);a(S);var L=new Array(o);a(L);var M,A,R,B=new Array(h);function j(t,e,n,a,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=a,this.max_length=i,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function I(t){return t<256?O[t]:O[256+(t>>>7)]}function F(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function N(t,e,n){t.bi_valid>i-n?(t.bi_buf|=e<<t.bi_valid&65535,F(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=n-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function D(t,e,n){N(t,n[2*e],n[2*e+1])}function H(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function W(t,e,n){var a,i,r=new Array(v+1),o=0;for(a=1;a<=v;a++)r[a]=o=o+n[a-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=H(r[s]++,s))}}function U(t){var e;for(e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<p;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Y(t){8<t.bi_valid?F(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function q(t,e,n,a){var i=2*e,r=2*n;return t[i]<t[r]||t[i]===t[r]&&a[e]<=a[n]}function z(t,e,n){for(var a=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&q(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!q(e,a,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=a}function G(t,e,n){var a,i,r,o,s=0;if(0!==t.last_lit)for(;a=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===a?D(t,i,e):(D(t,(r=S[i])+c+1,e),0!==(o=E[r])&&N(t,i-=L[r],o),D(t,r=I(--a),n),0!==(o=T[r])&&N(t,a-=B[r],o)),s<t.last_lit;);D(t,y,e)}function X(t,e){var n,a,i,r=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=g,n=0;n<l;n++)0!==r[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):r[2*n+1]=0;for(;t.heap_len<2;)r[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)z(t,r,n);for(i=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],z(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=a,r[2*i]=r[2*n]+r[2*a],t.depth[i]=(t.depth[n]>=t.depth[a]?t.depth[n]:t.depth[a])+1,r[2*n+1]=r[2*a+1]=i,t.heap[1]=i++,z(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,a,i,r,o,s,l=e.dyn_tree,u=e.max_code,d=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(r=0;r<=v;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<g;n++)p<(r=l[2*l[2*(a=t.heap[n])+1]+1]+1)&&(r=p,m++),l[2*a+1]=r,u<a||(t.bl_count[r]++,o=0,h<=a&&(o=f[a-h]),s=l[2*a],t.opt_len+=s*(r+o),c&&(t.static_len+=s*(d[2*a+1]+o)));if(0!==m){do{for(r=p-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(r=p;0!==r;r--)for(a=t.bl_count[r];0!==a;)u<(i=t.heap[--n])||(l[2*i+1]!==r&&(t.opt_len+=(r-l[2*i+1])*l[2*i],l[2*i+1]=r),a--)}}(t,e),W(r,u,t.bl_count)}function V(t,e,n){var a,i,r=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),e[2*(n+1)+1]=65535,a=0;a<=n;a++)i=o,o=e[2*(a+1)+1],++s<l&&i===o||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==r&&t.bl_tree[2*i]++,t.bl_tree[2*b]++):s<=10?t.bl_tree[2*w]++:t.bl_tree[2*_]++,r=i,(s=0)===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))}function K(t,e,n){var a,i,r=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),a=0;a<=n;a++)if(i=o,o=e[2*(a+1)+1],!(++s<l&&i===o)){if(s<u)for(;D(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==r&&(D(t,i,t.bl_tree),s--),D(t,b,t.bl_tree),N(t,s-3,2)):s<=10?(D(t,w,t.bl_tree),N(t,s-3,3)):(D(t,_,t.bl_tree),N(t,s-11,7));r=i,(s=0)===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4)}}a(B);var Z=!1;function $(t,e,n,a){var i,r,o,s;N(t,(d<<1)+(a?1:0),3),r=e,o=n,s=!0,Y(i=t),s&&(F(i,o),F(i,~o)),l.arraySet(i.pending_buf,i.window,r,o,i.pending),i.pending+=o}n._tr_init=function(t){Z||(function(){var t,e,n,a,i,r=new Array(v+1);for(a=n=0;a<o-1;a++)for(L[a]=n,t=0;t<1<<E[a];t++)S[n++]=a;for(S[n-1]=a,a=i=0;a<16;a++)for(B[a]=i,t=0;t<1<<T[a];t++)O[i++]=a;for(i>>=7;a<h;a++)for(B[a]=i<<7,t=0;t<1<<T[a]-7;t++)O[256+i++]=a;for(e=0;e<=v;e++)r[e]=0;for(t=0;t<=143;)x[2*t+1]=8,t++,r[8]++;for(;t<=255;)x[2*t+1]=9,t++,r[9]++;for(;t<=279;)x[2*t+1]=7,t++,r[7]++;for(;t<=287;)x[2*t+1]=8,t++,r[8]++;for(W(x,f+1,r),t=0;t<h;t++)C[2*t+1]=5,C[2*t]=H(t,5);M=new j(x,E,c+1,f,v),A=new j(C,T,0,h,v),R=new j(new Array(0),k,0,p,m)}(),Z=!0),t.l_desc=new r(t.dyn_ltree,M),t.d_desc=new r(t.dyn_dtree,A),t.bl_desc=new r(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,U(t)},n._tr_stored_block=$,n._tr_flush_block=function(t,e,n,a){var i,r,o=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return u;for(e=32;e<c;e++)if(0!==t.dyn_ltree[2*e])return u;return s}(t)),X(t,t.l_desc),X(t,t.d_desc),o=function(t){var e;for(V(t,t.dyn_ltree,t.l_desc.max_code),V(t,t.dyn_dtree,t.d_desc.max_code),X(t,t.bl_desc),e=p-1;3<=e&&0===t.bl_tree[2*P[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=i&&(i=r)):i=r=n+5,n+4<=i&&-1!==e?$(t,e,n,a):4===t.strategy||r===i?(N(t,2+(a?1:0),3),G(t,x,C)):(N(t,4+(a?1:0),3),function(t,e,n,a){var i;for(N(t,e-257,5),N(t,n-1,5),N(t,a-4,4),i=0;i<a;i++)N(t,t.bl_tree[2*P[i]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),G(t,t.dyn_ltree,t.dyn_dtree)),U(t),a&&Y(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(S[n]+c+1)]++,t.dyn_dtree[2*I(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){var e;N(t,2,3),D(t,y,x),16===(e=t).bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":233}],245:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],246:[function(t,e,n){var a,i;a=this,i=function(){"use strict";var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],s=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function i(t,e){e=e||Object.create(null);var n=document.createEvent("Event");n.initEvent(t,e.bubbles||!1,e.cancelable||!1);for(var a,i=2;i<o.length;i++)n[a=o[i]]=e[a]||s[i];n.buttons=e.buttons||0;var r=0;return r=e.pressure&&n.buttons?e.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=e.pointerId||0,n.width=e.width||0,n.height=e.height||0,n.pressure=r,n.tiltX=e.tiltX||0,n.tiltY=e.tiltY||0,n.twist=e.twist||0,n.tangentialPressure=e.tangentialPressure||0,n.pointerType=e.pointerType||"",n.hwTimestamp=e.hwTimestamp||0,n.isPrimary=e.isPrimary||!1,n}var t=window.Map&&window.Map.prototype.forEach?Map:e;function e(){this.array=[],this.size=0}var r=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],l=[!(e.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(n,a){return this.array.forEach(function(t,e){n.call(a,t,e,this)},this)}}),!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],n={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!=typeof SVGElementInstance,d={pointermap:new t,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,a=n.events;a&&(a.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,a=0;a<n&&(e=this.eventSourceList[a]);a++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,a=0;a<n&&(e=this.eventSourceList[a]);a++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(e,t){t.forEach(function(t){this.addEvent(e,t)},this)},unlisten:function(e,t){t.forEach(function(t){this.removeEvent(e,t)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=new i(t,e);return e.preventDefault&&(n.preventDefault=e.preventDefault),n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),a=0;a<r.length;a++)n[e=r[a]]=t[e]||l[a],!u||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in n?void 0:e:t._target},propagate:function(e,n,t){for(var a=e.target,i=[];a!==document&&!a.contains(e.relatedTarget);)if(i.push(a),!(a=a.parentNode))return;t&&i.reverse(),i.forEach(function(t){e.target=t,n.call(this,e)},this)},setCapture:function(t,e,n){this.captureInfo[t]&&this.releaseCapture(t,n),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,n),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var a=new i("gotpointercapture");a.pointerId=t,a._target=e,n||this.asyncDispatchEvent(a)},releaseCapture:function(t,e){var n=this.captureInfo[t];if(n){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var a=new i("lostpointercapture");a.pointerId=t,a._target=n,e||this.asyncDispatchEvent(a)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};d.boundHandler=d.eventHandler.bind(d);var a={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var a,i,r=t.elementFromPoint(e,n);for(i=this.targetingShadow(r);i;){if(a=i.elementFromPoint(e,n)){var o=this.targetingShadow(a);return this.searchRoot(o,e,n)||a}i=this.olderShadow(i)}return r}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,a=this.owner(t.target);return a.elementFromPoint(e,n)||(a=document),this.searchRoot(a,e,n)}},c=Array.prototype.forEach.call.bind(Array.prototype.forEach),f=Array.prototype.map.call.bind(Array.prototype.map),h=Array.prototype.slice.call.bind(Array.prototype.slice),p=Array.prototype.filter.call.bind(Array.prototype.filter),m=window.MutationObserver||window.WebKitMutationObserver,g={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function v(t,e,n,a){this.addCallback=t.bind(a),this.removeCallback=e.bind(a),this.changedCallback=n.bind(a),m&&(this.observer=new m(this.mutationWatcher.bind(this)))}function y(t){return"body /shadow-deep/ "+b(t)}function b(t){return'[touch-action="'+t+'"]'}function w(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}v.prototype={watchSubtree:function(t){this.observer&&a.canTarget(t)&&this.observer.observe(t,g)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){c(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(h(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=f(t,this.findElements,this);return e.push(p(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var _=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",T=window.PointerEvent||window.MSPointerEvent,k=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;var P=d.pointermap,x=[1,4,2,8,16],C=!1;try{C=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var O,S={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){d.listen(t,this.events)},unregister:function(t){d.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,a=t.clientX,i=t.clientY,r=0,o=n.length;r<o&&(e=n[r]);r++){var s=Math.abs(a-e.x),l=Math.abs(i-e.y);if(s<=25&&l<=25)return!0}},prepareEvent:function(t){var e=d.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var n=P.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);C||(n.buttons=x[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),P.set(this.POINTER_ID,t),e&&0!==e.buttons?d.move(n):d.down(n)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),d.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);if(!C){var a=x[n.button];n.buttons=e?e.buttons&~a:0,t.buttons=n.buttons}P.set(this.POINTER_ID,t),n.buttons&=~x[n.button],0===n.buttons?d.up(n):d.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),d.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,d.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);d.cancel(e),this.deactivateMouse()},deactivateMouse:function(){P.delete(this.POINTER_ID)}},L=d.captureInfo,M=a.findTarget.bind(a),A=a.allShadows.bind(a),R=d.pointermap,B="touch-action",j={events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){O.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(B),n=this.touchActionToScrollType(e);n&&(t._scrollType=n,d.listen(t,this.events),A(t).forEach(function(t){t._scrollType=n,d.listen(t,this.events)},this))},elementRemoved:function(t){t._scrollType=void 0,d.unlisten(t,this.events),A(t).forEach(function(t){t._scrollType=void 0,d.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute(B),a=this.touchActionToScrollType(n),i=this.touchActionToScrollType(e);a&&i?(t._scrollType=a,A(t).forEach(function(t){t._scrollType=a},this)):i?this.elementRemoved(t):a&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return"none"===e?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":n.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===R.size||1===R.size&&R.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=d.cloneEvent(t),a=n.pointerId=t.identifier+2;n.target=L[a]||M(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=t.force||t.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var i=this;return n.preventDefault=function(){i.scrolling=!1,i.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var a,i=0;i<n.length;i++)a=n[i],e.call(this,this.touchToPointer(a))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if("none"===n)e=!1;else if("XY"===n)e=!0;else{var a=t.changedTouches[0],i=n,r="Y"===n?"X":"Y",o=Math.abs(a["client"+i]-this.firstXY[i]);e=Math.abs(a["client"+r]-this.firstXY[r])<=o}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,a=0,i=t.length;a<i&&(n=t[a]);a++)if(n.identifier===e)return!0},vacuumTouches:function(t){var a=t.touches;if(R.size>=a.length){var i=[];R.forEach(function(t,e){if(1!==e&&!this.findTouch(a,e-2)){var n=t.out;i.push(n)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){R.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),d.enterOver(t),d.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=R.get(e.pointerId);if(n){var a=n.out,i=n.outTarget;d.move(e),a&&i!==e.target&&(a.relatedTarget=e.target,e.relatedTarget=i,a.target=i,e.target?(d.leaveOut(a),d.enterOver(e)):(e.target=i,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(d.up(t),d.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){d.cancel(t),d.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){R.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=S.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var a={x:n.clientX,y:n.clientY};e.push(a);var i=function(t,e){var n=t.indexOf(e);-1<n&&t.splice(n,1)}.bind(null,e,a);setTimeout(i,2500)}}};O=new v(j.elementAdded,j.elementRemoved,j.elementChanged,j);var I,F,N,D=d.pointermap,H=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,W={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){d.listen(t,this.events)},unregister:function(t){d.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return H&&((e=d.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){D.delete(t)},MSPointerDown:function(t){D.set(t.pointerId,t);var e=this.prepareEvent(t);d.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);d.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);d.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);d.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);d.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);d.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=d.makeEvent("lostpointercapture",t);d.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=d.makeEvent("gotpointercapture",t);d.dispatchEvent(e)}};function U(t){if(!d.pointermap.has(t)){var e=new Error("InvalidPointerId");throw e.name="InvalidPointerId",e}}function Y(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function q(t){return 0!==d.pointermap.get(t).buttons}return window.navigator.msPointerEnabled?(I=function(t){U(t),Y(this),q(t)&&(d.setCapture(t,this,!0),this.msSetPointerCapture(t))},F=function(t){U(t),d.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(I=function(t){U(t),Y(this),q(t)&&d.setCapture(t,this)},F=function(t){U(t),d.releaseCapture(t)}),N=function(t){return!!d.captureInfo[t]},function(){if(T){_.forEach(function(t){String(t)===t?(E+=b(t)+w(t)+"\n",k&&(E+=y(t)+w(t)+"\n")):(E+=t.selectors.map(b)+w(t.rule)+"\n",k&&(E+=t.selectors.map(y)+w(t.rule)+"\n"))});var t=document.createElement("style");t.textContent=E,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=i,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),d.registerSource("ms",W)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),d.registerSource("mouse",S),void 0!==window.ontouchstart&&d.registerSource("touch",j);d.register(document)}}(),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:I},releasePointerCapture:{value:F},hasPointerCapture:{value:N}}),{dispatcher:d,Installer:v,PointerEvent:i,PointerMap:t,targetFinding:a}},"object"==typeof n&&void 0!==e?e.exports=i():a.PointerEventsPolyfill=i()},{}],247:[function(t,n,a){(function($){(function(){var t,e;t=this,e=function(){"use strict";var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,a=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(n&&0<=navigator.userAgent.indexOf(t[e]))return 1;return 0}();var o=n&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},a))}};function s(t){return t&&"[object Function]"==={}.toString.call(t)}function w(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function h(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function p(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=w(t),n=e.overflow,a=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+a)?t:p(h(t))}function m(t){return t&&t.referenceNode?t.referenceNode:t}var e=n&&!(!window.MSInputMethodContext||!document.documentMode),i=n&&/MSIE 10/.test(navigator.userAgent);function g(t){return 11===t?e:10===t?i:e||i}function R(t){if(!t)return document.documentElement;for(var e=g(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var a=n&&n.nodeName;return a&&"BODY"!==a&&"HTML"!==a?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===w(n,"position")?R(n):n:t?t.ownerDocument.documentElement:document.documentElement}function d(t){return null!==t.parentNode?d(t.parentNode):t}function v(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,a=n?t:e,i=n?e:t,r=document.createRange();r.setStart(a,0),r.setEnd(i,0);var o,s,l=r.commonAncestorContainer;if(t!==l&&e!==l||a.contains(i))return"BODY"===(s=(o=l).nodeName)||"HTML"!==s&&R(o.firstElementChild)!==o?R(l):l;var u=d(t);return u.host?v(u.host,e):v(t,d(e).host)}function y(t){var e="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"!==n&&"HTML"!==n)return t[e];var a=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||a)[e]}function c(t,e){var n="x"===e?"Left":"Top",a="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+a+"Width"])}function r(t,e,n,a){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],g(10)?parseInt(n["offset"+t])+parseInt(a["margin"+("Height"===t?"Top":"Left")])+parseInt(a["margin"+("Height"===t?"Bottom":"Right")]):0)}function b(t){var e=t.body,n=t.documentElement,a=g(10)&&getComputedStyle(n);return{height:r("Height",e,n,a),width:r("Width",e,n,a)}}var t=function(){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}(),_=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};function E(t){return B({},t,{right:t.left+t.width,bottom:t.top+t.height})}function j(t){var e={};try{if(g(10)){e=t.getBoundingClientRect();var n=y(t,"top"),a=y(t,"left");e.top+=n,e.left+=a,e.bottom+=n,e.right+=a}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?b(t.ownerDocument):{},o=r.width||t.clientWidth||i.width,s=r.height||t.clientHeight||i.height,l=t.offsetWidth-o,u=t.offsetHeight-s;if(l||u){var d=w(t);l-=c(d,"x"),u-=c(d,"y"),i.width-=l,i.height-=u}return E(i)}function T(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=g(10),i="HTML"===e.nodeName,r=j(t),o=j(e),s=p(t),l=w(e),u=parseFloat(l.borderTopWidth),d=parseFloat(l.borderLeftWidth);n&&i&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var c=E({top:r.top-o.top-u,left:r.left-o.left-d,width:r.width,height:r.height});if(c.marginTop=0,c.marginLeft=0,!a&&i){var f=parseFloat(l.marginTop),h=parseFloat(l.marginLeft);c.top-=u-f,c.bottom-=u-f,c.left-=d-h,c.right-=d-h,c.marginTop=f,c.marginLeft=h}return(a&&!n?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(c=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=y(e,"top"),i=y(e,"left"),r=n?-1:1;return t.top+=a*r,t.bottom+=a*r,t.left+=i*r,t.right+=i*r,t}(c,e)),c}function k(t){if(!t||!t.parentElement||g())return document.documentElement;for(var e=t.parentElement;e&&"none"===w(e,"transform");)e=e.parentElement;return e||document.documentElement}function f(t,e,n,a){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],r={top:0,left:0},o=i?k(t):v(t,m(e));if("viewport"===a)r=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,a=T(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),r=Math.max(n.clientHeight,window.innerHeight||0),o=e?0:y(n),s=e?0:y(n,"left");return E({top:o-a.top+a.marginTop,left:s-a.left+a.marginLeft,width:i,height:r})}(o,i);else{var s=void 0;"scrollParent"===a?"BODY"===(s=p(h(e))).nodeName&&(s=t.ownerDocument.documentElement):s="window"===a?t.ownerDocument.documentElement:a;var l=T(s,o,i);if("HTML"!==s.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===w(e,"position"))return!0;var a=h(e);return!!a&&t(a)}(o))r=l;else{var u=b(t.ownerDocument),d=u.height,c=u.width;r.top+=l.top-l.marginTop,r.bottom=d+l.top,r.left+=l.left-l.marginLeft,r.right=c+l.left}}var f="number"==typeof(n=n||0);return r.left+=f?n:n.left||0,r.top+=f?n:n.top||0,r.right-=f?n:n.right||0,r.bottom-=f?n:n.bottom||0,r}function l(t,e,a,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var o=f(a,n,r,i),s={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},l=Object.keys(s).map(function(t){return B({key:t},s[t],{area:(e=s[t],e.width*e.height)});var e}).sort(function(t,e){return e.area-t.area}),u=l.filter(function(t){var e=t.width,n=t.height;return e>=a.clientWidth&&n>=a.clientHeight}),d=0<u.length?u[0].key:l[0].key,c=t.split("-")[1];return d+(c?"-"+c:"")}function u(t,e,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return T(n,a?k(e):v(e,m(n)),a)}function P(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),a=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+a,height:t.offsetHeight+n}}function x(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function C(t,e,n){n=n.split("-")[0];var a=P(t),i={width:a.width,height:a.height},r=-1!==["right","left"].indexOf(n),o=r?"top":"left",s=r?"left":"top",l=r?"height":"width",u=r?"width":"height";return i[o]=e[o]+e[l]/2-a[l]/2,i[s]=n===s?e[s]-a[u]:e[x(s)],i}function I(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function O(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var a=I(t,function(t){return t[e]===n});return t.indexOf(a)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&s(e)&&(n.offsets.popper=E(n.offsets.popper),n.offsets.reference=E(n.offsets.reference),n=e(n,t))}),n}function S(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function F(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),a=0;a<e.length;a++){var i=e[a],r=i?""+i+n:t;if(void 0!==document.body.style[r])return r}return null}function L(t){var e=t.ownerDocument;return e?e.defaultView:window}function M(t,e,n,a){n.updateBound=a,L(t).addEventListener("resize",n.updateBound,{passive:!0});var i=p(t);return function t(e,n,a,i){var r="BODY"===e.nodeName,o=r?e.ownerDocument.defaultView:e;o.addEventListener(n,a,{passive:!0}),r||t(p(o.parentNode),n,a,i),i.push(o)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function A(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,L(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function N(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function D(n,a){Object.keys(a).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&N(a[t])&&(e="px"),n.style[t]=a[t]+e})}var H=n&&/Firefox/i.test(navigator.userAgent);function W(t,e,n){var a=I(t,function(t){return t.name===e}),i=!!a&&t.some(function(t){return t.name===n&&t.enabled&&t.order<a.order});if(!i){var r="`"+e+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return i}var U=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Y=U.slice(3);function q(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Y.indexOf(t),a=Y.slice(n+1).concat(Y.slice(0,n));return e?a.reverse():a}var z="flip",G="clockwise",X="counterclockwise";function V(t,i,r,e){var o=[0,0],s=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),a=n.indexOf(I(n,function(t){return-1!==t.search(/,|\s/)}));n[a]&&-1===n[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==a?[n.slice(0,a).concat([n[a].split(l)[0]]),[n[a].split(l)[1]].concat(n.slice(a+1))]:[n];return(u=u.map(function(t,e){var n=(1===e?!s:s)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,a){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],o=i[2];if(!r)return t;if(0!==o.indexOf("%"))return"vh"!==o&&"vw"!==o?r:("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=a}return E(s)[e]/100*r}(t,n,i,r)})})).forEach(function(n,a){n.forEach(function(t,e){N(t)&&(o[a]+=t*("-"===n[e-1]?-1:1))})}),o}var K={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],a=e.split("-")[1];if(a){var i=t.offsets,r=i.reference,o=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",d={start:_({},l,r[l]),end:_({},l,r[l]+r[u]-o[u])};t.offsets.popper=B({},o,d[a])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,a=t.placement,i=t.offsets,r=i.popper,o=i.reference,s=a.split("-")[0],l=void 0;return l=N(+n)?[+n,0]:V(n,r,o,s),"left"===s?(r.top+=l[0],r.left-=l[1]):"right"===s?(r.top+=l[0],r.left+=l[1]):"top"===s?(r.left+=l[0],r.top-=l[1]):"bottom"===s&&(r.left+=l[0],r.top+=l[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,a){var e=a.boundariesElement||R(t.instance.popper);t.instance.reference===e&&(e=R(e));var n=F("transform"),i=t.instance.popper.style,r=i.top,o=i.left,s=i[n];i.top="",i.left="",i[n]="";var l=f(t.instance.popper,t.instance.reference,a.padding,e,t.positionFixed);i.top=r,i.left=o,i[n]=s,a.boundaries=l;var u=a.priority,d=t.offsets.popper,c={primary:function(t){var e=d[t];return d[t]<l[t]&&!a.escapeWithReference&&(e=Math.max(d[t],l[t])),_({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=d[e];return d[t]>l[t]&&!a.escapeWithReference&&(n=Math.min(d[e],l[t]-("right"===t?d.width:d.height))),_({},e,n)}};return u.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";d=B({},d,c[e](t))}),t.offsets.popper=d,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,a=e.reference,i=t.placement.split("-")[0],r=Math.floor,o=-1!==["top","bottom"].indexOf(i),s=o?"right":"bottom",l=o?"left":"top",u=o?"width":"height";return n[s]<r(a[l])&&(t.offsets.popper[l]=r(a[l])-n[u]),n[l]>r(a[s])&&(t.offsets.popper[l]=r(a[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!W(t.instance.modifiers,"arrow","keepTogether"))return t;var a=e.element;if("string"==typeof a){if(!(a=t.instance.popper.querySelector(a)))return t}else if(!t.instance.popper.contains(a))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],r=t.offsets,o=r.popper,s=r.reference,l=-1!==["left","right"].indexOf(i),u=l?"height":"width",d=l?"Top":"Left",c=d.toLowerCase(),f=l?"left":"top",h=l?"bottom":"right",p=P(a)[u];s[h]-p<o[c]&&(t.offsets.popper[c]-=o[c]-(s[h]-p)),s[c]+p>o[h]&&(t.offsets.popper[c]+=s[c]+p-o[h]),t.offsets.popper=E(t.offsets.popper);var m=s[c]+s[u]/2-p/2,g=w(t.instance.popper),v=parseFloat(g["margin"+d]),y=parseFloat(g["border"+d+"Width"]),b=m-t.offsets.popper[c]-v-y;return b=Math.max(Math.min(o[u]-p,b),0),t.arrowElement=a,t.offsets.arrow=(_(n={},c,Math.round(b)),_(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(g,v){if(S(g.instance.modifiers,"inner"))return g;if(g.flipped&&g.placement===g.originalPlacement)return g;var y=f(g.instance.popper,g.instance.reference,v.padding,v.boundariesElement,g.positionFixed),b=g.placement.split("-")[0],w=x(b),_=g.placement.split("-")[1]||"",E=[];switch(v.behavior){case z:E=[b,w];break;case G:E=q(b);break;case X:E=q(b,!0);break;default:E=v.behavior}return E.forEach(function(t,e){if(b!==t||E.length===e+1)return g;b=g.placement.split("-")[0],w=x(b);var n,a=g.offsets.popper,i=g.offsets.reference,r=Math.floor,o="left"===b&&r(a.right)>r(i.left)||"right"===b&&r(a.left)<r(i.right)||"top"===b&&r(a.bottom)>r(i.top)||"bottom"===b&&r(a.top)<r(i.bottom),s=r(a.left)<r(y.left),l=r(a.right)>r(y.right),u=r(a.top)<r(y.top),d=r(a.bottom)>r(y.bottom),c="left"===b&&s||"right"===b&&l||"top"===b&&u||"bottom"===b&&d,f=-1!==["top","bottom"].indexOf(b),h=!!v.flipVariations&&(f&&"start"===_&&s||f&&"end"===_&&l||!f&&"start"===_&&u||!f&&"end"===_&&d),p=!!v.flipVariationsByContent&&(f&&"start"===_&&l||f&&"end"===_&&s||!f&&"start"===_&&d||!f&&"end"===_&&u),m=h||p;(o||c||m)&&(g.flipped=!0,(o||c)&&(b=E[e+1]),m&&(_="end"===(n=_)?"start":"start"===n?"end":n),g.placement=b+(_?"-"+_:""),g.offsets.popper=B({},g.offsets.popper,C(g.instance.popper,g.offsets.reference,g.placement)),g=O(g.instance.modifiers,g,"flip"))}),g},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],a=t.offsets,i=a.popper,r=a.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=r[n]-(s?i[o?"width":"height"]:0),t.placement=x(e),t.offsets.popper=E(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!W(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=I(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,a=e.y,i=t.offsets.popper,r=I(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o,s,l,u,d,c,f,h,p,m,g,v,y,b,w=void 0!==r?r:e.gpuAcceleration,_=R(t.instance.popper),E=j(_),T={position:i.position},k=(o=t,s=window.devicePixelRatio<2||!H,l=o.offsets,u=l.popper,d=l.reference,c=Math.round,f=Math.floor,h=function(t){return t},p=c(d.width),m=c(u.width),g=-1!==["left","right"].indexOf(o.placement),v=-1!==o.placement.indexOf("-"),b=s?c:h,{left:(y=s?g||v||p%2==m%2?c:f:h)(p%2==1&&m%2==1&&!v&&s?u.left-1:u.left),top:b(u.top),bottom:b(u.bottom),right:y(u.right)}),P="bottom"===n?"top":"bottom",x="right"===a?"left":"right",C=F("transform"),O=void 0,S=void 0;if(S="bottom"===P?"HTML"===_.nodeName?-_.clientHeight+k.bottom:-E.height+k.bottom:k.top,O="right"===x?"HTML"===_.nodeName?-_.clientWidth+k.right:-E.width+k.right:k.left,w&&C)T[C]="translate3d("+O+"px, "+S+"px, 0)",T[P]=0,T[x]=0,T.willChange="transform";else{var L="bottom"===P?-1:1,M="right"===x?-1:1;T[P]=S*L,T[x]=O*M,T.willChange=P+", "+x}var A={"x-placement":t.placement};return t.attributes=B({},A,t.attributes),t.styles=B({},T,t.styles),t.arrowStyles=B({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return D(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&D(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,a,i){var r=u(i,e,t,n.positionFixed),o=l(n.placement,r,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",o),D(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Z=function(){function r(t,e){var n=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=o(this.update.bind(this)),this.options=B({},r.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(B({},r.Defaults.modifiers,a.modifiers)).forEach(function(t){n.options.modifiers[t]=B({},r.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return B({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&s(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return t(r,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=u(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=l(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=C(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=O(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[F("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=M(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return A.call(this)}}]),r}();return Z.Utils=("undefined"!=typeof window?window:$).PopperUtils,Z.placements=U,Z.Defaults=K,Z},"object"==typeof a&&void 0!==n?n.exports=e():t.Popper=e()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],248:[function(t,o,e){!function(t){"use strict";function e(){}var n=e.prototype,a=t.EventEmitter;function r(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}n.getListeners=function(t){var e,n,a=this._getEvents();if(t instanceof RegExp)for(n in e={},a)a.hasOwnProperty(n)&&t.test(n)&&(e[n]=a[n]);else e=a[t]||(a[t]=[]);return e},n.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},n.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},n.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,a=this.getListenersAsObject(t),i="object"==typeof e;for(n in a)a.hasOwnProperty(n)&&-1===r(a[n],e)&&a[n].push(i?e:{listener:e,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,e){var n,a,i=this.getListenersAsObject(t);for(a in i)i.hasOwnProperty(a)&&-1!==(n=r(i[a],e))&&i[a].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,n){var a,i,r=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(a=n.length;a--;)r.call(this,e,n[a]);else for(a in e)e.hasOwnProperty(a)&&(i=e[a])&&("function"==typeof i?r.call(this,a,i):o.call(this,a,i));return this},n.removeEvent=function(t){var e,n=typeof t,a=this._getEvents();if("string"===n)delete a[t];else if(t instanceof RegExp)for(e in a)a.hasOwnProperty(e)&&t.test(e)&&delete a[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var n,a,i,r,o=this.getListenersAsObject(t);for(r in o)if(o.hasOwnProperty(r))for(n=o[r].slice(0),i=0;i<n.length;i++)!0===(a=n[i]).once&&this.removeListener(t,a.listener),a.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,a.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=a,e},"object"==typeof o&&o.exports?o.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:this||{})},{}]},{},[1])(1)});
//# sourceMappingURL=chickenpaint.min.js.map
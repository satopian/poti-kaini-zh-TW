!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ChickenPaint=t()}}(function(){return function o(r,s,l){function u(e,t){if(!s[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[e]={exports:{}};r[e][0].call(i.exports,function(t){return u(r[e][1][t]||t)},i,i.exports,o,r,s,l)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=G,t("core-js/es6/symbol"),t("core-js/es6/promise"),t("core-js/es6/map"),t("core-js/es6/set"),t("core-js/es6/typed"),t("core-js/fn/array/iterator"),t("core-js/fn/array/fill"),t("core-js/fn/string/ends-with");var C=i(t("jquery"));t("bootstrap"),t("../lib/raf.js");var O=i(t("./engine/CPBrushInfo")),S=i(t("./engine/CPArtwork")),L=i(t("./engine/CPResourceLoader")),M=i(t("./engine/CPResourceSaver")),A=i(t("./gui/CPSplashScreen.js")),R=i(t("./gui/CPMainGUI")),B=i(t("./gui/CPAboutDialog")),I=i(t("./gui/CPConfirmTransformDialog")),F=i(t("./gui/CPShortcutsDialog")),N=i(t("./gui/CPBoxBlurDialog")),D=i(t("./gui/CPTabletDialog")),j=i(t("./gui/CPGridDialog")),H=i(t("./gui/CPSendDialog")),W=t("./util/CPPolyfill"),U=i(t("./util/CPColor")),Y=i(t("./util/CPWacomTablet")),q=i(t("./util/CPRect")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(n){var a,i,t,e,o,r=this,s=n.uiElem,l=new U.default(0),u=255,d=G.COLOR_MODE_RGB,c=G.T_PENCIL,f=G.M_DRAW,h=f,p=[4278190080,4294967295],m=!1,g=((o=new Array(G.T_MAX))[G.T_PENCIL]=new O.default({toolNb:G.T_PENCIL,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AA,brushMode:O.default.BRUSH_MODE_PAINT,paintMode:O.default.PAINT_MODE_OPACITY}),o[G.T_ERASER]=new O.default({toolNb:G.T_ERASER,size:16,alpha:255,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!1,tip:O.default.TIP_ROUND_AA,brushMode:O.default.BRUSH_MODE_ERASE,paintMode:O.default.PAINT_MODE_OPACITY}),o[G.T_PEN]=new O.default({toolNb:G.T_PEN,size:2,alpha:128,isAA:!0,minSpacing:.5,spacing:.05,pressureSize:!0,pressureAlpha:!1,tip:O.default.TIP_ROUND_AA,brushMode:O.default.BRUSH_MODE_PAINT,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:.5}),o[G.T_SOFTERASER]=new O.default({toolNb:G.T_SOFTERASER,size:16,alpha:64,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AIRBRUSH,brushMode:O.default.BRUSH_MODE_ERASE,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8}),o[G.T_AIRBRUSH]=new O.default({toolNb:G.T_AIRBRUSH,size:50,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AIRBRUSH,brushMode:O.default.BRUSH_MODE_PAINT,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8}),o[G.T_DODGE]=new O.default({toolNb:G.T_DODGE,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AIRBRUSH,brushMode:O.default.BRUSH_MODE_DODGE,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8}),o[G.T_BURN]=new O.default({toolNb:G.T_BURN,size:30,alpha:32,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AIRBRUSH,brushMode:O.default.BRUSH_MODE_BURN,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8}),o[G.T_WATER]=new O.default({toolNb:G.T_WATER,size:30,alpha:70,isAA:!1,minSpacing:.5,spacing:.02,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AA,brushMode:O.default.BRUSH_MODE_WATER,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8,resat:.3,bleed:.6}),o[G.T_BLUR]=new O.default({toolNb:G.T_BLUR,size:20,alpha:255,isAA:!1,minSpacing:.5,spacing:.05,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_PIXEL,brushMode:O.default.BRUSH_MODE_BLUR,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8}),o[G.T_SMUDGE]=new O.default({toolNb:G.T_SMUDGE,size:20,alpha:128,isAA:!1,minSpacing:.5,spacing:.01,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AIRBRUSH,brushMode:O.default.BRUSH_MODE_SMUDGE,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8,resat:0,bleed:1}),o[G.T_BLENDER]=new O.default({toolNb:G.T_BLENDER,size:20,alpha:60,isAA:!1,minSpacing:.5,spacing:.1,pressureSize:!1,pressureAlpha:!0,tip:O.default.TIP_ROUND_AIRBRUSH,brushMode:O.default.BRUSH_MODE_OIL,paintMode:O.default.PAINT_MODE_FLOW,alphaScale:1/8,resat:0,bleed:.07}),o),v={CPFullScreen:{action:function(){m=!m,(0,C.default)("body").toggleClass("chickenpaint-full-screen",m),(0,C.default)(s).toggleClass("chickenpaint-full-screen",m),setTimeout(function(){i.setFullScreenMode(m)},200)},isSupported:function(){return!1!==n.allowFullScreen},modifies:{gui:!0}},CPZoomIn:{action:function(){a.zoomIn()},modifies:{gui:!0}},CPZoomOut:{action:function(){a.zoomOut()},modifies:{gui:!0}},CPZoom100:{action:function(){a.zoom100()},modifies:{gui:!0}},CPUndo:{action:function(){r.artwork.undo()},modifies:{document:!0},allowed:"isUndoAllowed"},CPRedo:{action:function(){r.artwork.redo()},modifies:{document:!0},allowed:"isRedoAllowed"},CPClearHistory:{action:function(){confirm("You're about to clear the current Undo/Redo history.\nThis operation cannot be undone, are you sure you want to do that?")&&r.artwork.clearHistory()},modifies:{document:!0}},CPPencil:new _(G.T_PENCIL),CPPen:new _(G.T_PEN),CPEraser:new _(G.T_ERASER),CPSoftEraser:new _(G.T_SOFTERASER),CPAirbrush:new _(G.T_AIRBRUSH),CPDodge:new _(G.T_DODGE),CPBurn:new _(G.T_BURN),CPWater:new _(G.T_WATER),CPBlur:new _(G.T_BLUR),CPSmudge:new _(G.T_SMUDGE),CPBlender:new _(G.T_BLENDER),CPFloodFill:new b(G.M_FLOODFILL),CPGradientFill:new b(G.M_GRADIENTFILL),CPRectSelection:new b(G.M_RECT_SELECTION),CPMoveTool:new b(G.M_MOVE_TOOL),CPRotateCanvas:new b(G.M_ROTATE_CANVAS),CPColorPicker:new b(G.M_COLOR_PICKER),CPTransform:{action:function(){var t=r.artwork.getActiveLayer();t.visible?0==t.alpha?r.showLayerNotification(t,"Whoops! This layer's opacity is currently 0%","opacity"):null==r.artwork.transformAffineBegin()?r.showLayerNotification(t,"Whoops! All of the selected pixels are transparent!","layer"):T(G.M_TRANSFORM):r.showLayerNotification(t,"Whoops! This layer is currently hidden","layer")},modifies:{mode:!0},allowed:function(){return 0!=r.artwork.getActiveLayer().getEffectiveAlpha()}},CPTransformAccept:{action:function(){f==G.M_TRANSFORM&&(r.artwork.transformAffineFinish(),T(h))},modifies:{mode:!0}},CPTransformReject:{action:function(){f==G.M_TRANSFORM&&(r.artwork.transformAffineAbort(),T(h))},modifies:{document:!0,mode:!0}},CPFreeHand:{action:function(){g[c].strokeMode=O.default.STROKE_MODE_FREEHAND,E()},modifies:{tool:!0}},CPLine:{action:function(){g[c].strokeMode=O.default.STROKE_MODE_LINE,E()},modifies:{tool:!0}},CPBezier:{action:function(){g[c].strokeMode=O.default.STROKE_MODE_BEZIER,E()},modifies:{tool:!0}},CPAbout:{action:function(){new B.default(s).show()},modifies:{}},CPShortcuts:{action:function(){new F.default(s).show()},modifies:{}},CPTabletSupport:{action:function(){new D.default(s).show()},modifies:{}},CPLayerDuplicate:{action:function(){r.artwork.duplicateLayer()},modifies:{document:!0}},CPLayerMergeDown:{action:function(){r.artwork.mergeDown()},modifies:{document:!0},allowed:"isMergeDownAllowed"},CPGroupMerge:{action:function(){r.artwork.mergeGroup()},modifies:{document:!0},allowed:"isMergeGroupAllowed"},CPLayerMergeAll:{action:function(){r.artwork.mergeAllLayers()},modifies:{document:!0},allowed:"isMergeAllLayersAllowed"},CPExpandLayerGroup:{action:function(t){r.artwork.expandLayerGroup(t.group,t.expand)},modifies:{document:!0}},CPFill:{action:function(){r.artwork.fill(4278190080|r.getCurColor().getRgb())},modifies:{document:!0},requiresDrawable:!0},CPClear:{action:function(){r.artwork.clear()},modifies:{document:!0},requiresDrawable:!0},CPSelectAll:{action:function(){r.artwork.rectangleSelection(r.artwork.getBounds()),a.repaintAll()},modifies:{document:!0}},CPDeselectAll:{action:function(){r.artwork.rectangleSelection(new q.default(0,0,0,0)),a.repaintAll()},modifies:{document:!0}},CPHFlip:{action:function(){r.artwork.hFlip()},modifies:{document:!0},requiresDrawable:!0},CPVFlip:{action:function(){r.artwork.vFlip()},modifies:{document:!0},requiresDrawable:!0},CPMNoise:{action:function(){r.artwork.monochromaticNoise()},modifies:{document:!0},requiresDrawable:!0},CPCNoise:{action:function(){r.artwork.colorNoise()},modifies:{document:!0},allowed:"isColorNoiseAllowed"},CPFXBoxBlur:{action:function(){!function(){t||(t=new N.default(s,r));t.show()}()},modifies:{document:!0},requiresDrawable:!0},CPFXInvert:{action:function(){r.artwork.invert()},modifies:{document:!0},requiresDrawable:!0},CPCut:{action:function(){r.artwork.cutSelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCutSelectionAllowed"},CPCopy:{action:function(){r.artwork.copySelection()},modifies:{document:!0},requiresDrawable:!0,allowed:"isCopySelectionAllowed"},CPCopyMerged:{action:function(){r.artwork.copySelectionMerged()},modifies:{document:!0},allowed:"isCopySelectionMergedAllowed"},CPPaste:{action:function(){r.artwork.pasteClipboard()},modifies:{document:!0},allowed:"isPasteClipboardAllowed"},CPToggleGrid:{action:function(t){a.showGrid(t.selected)},modifies:{gui:!0}},CPGridOptions:{action:function(){!function(){e||(e=new j.default(s,a));e.show()}()},modifies:{gui:!0}},CPLinearInterpolation:{action:function(t){a.setInterpolation(t.selected)},modifies:{gui:!0},isSupported:function(){return(0,W.isCanvasInterpolationSupported)()}},CPResetCanvasRotation:{action:function(){a.resetRotation()},modifies:{gui:!0}},CPAddLayer:{action:function(){r.artwork.addLayer("layer")},modifies:{document:!0}},CPAddGroup:{action:function(){r.artwork.addLayer("group")},modifies:{document:!0}},CPAddLayerMask:{action:function(){r.artwork.addLayerMask()},modifies:{document:!0},allowed:"isAddLayerMaskAllowed"},CPApplyLayerMask:{action:function(){r.artwork.applyLayerMask(!0)},modifies:{document:!0},allowed:"isApplyLayerMaskAllowed"},CPRemoveLayerMask:{action:function(){r.artwork.removeLayerMask(!1)},modifies:{document:!0},allowed:"isRemoveLayerMaskAllowed"},CPRemoveLayer:{action:function(){r.artwork.removeLayer()||alert("Sorry, you can't remove the last remaining layer in the drawing.")},modifies:{document:!0},allowed:"isRemoveLayerAllowed"},CPCreateClippingMask:{action:function(){r.artwork.createClippingMask()},modifies:{document:!0},allowed:"isCreateClippingMaskAllowed"},CPReleaseClippingMask:{action:function(){r.artwork.releaseClippingMask()},modifies:{document:!0},allowed:"isReleaseClippingMaskAllowed"},CPRelocateLayer:{action:function(t){r.artwork.relocateLayer(t.layer,t.toGroup,t.toIndex)},modifies:{document:!0}},CPSetActiveLayer:{action:function(t){t.mask&&t.layer.mask&&!t.layer.maskVisible&&r.artwork.setLayerMaskVisible(t.layer,!0),r.artwork.setActiveLayer(t.layer,t.mask),r.artwork.performIdleTasks()},modifies:{document:!0}},CPToggleMaskView:{action:function(){var t=r.artwork.toggleMaskView();t&&r.emitEvent("maskViewOpened",[t])},modifies:{gui:!0}},CPSetMaskVisible:{action:function(t){r.artwork.setLayerMaskVisible(t.layer,t.visible)},modifies:{layerProp:!0}},CPSetLayerVisibility:{action:function(t){r.artwork.setLayerVisibility(t.layer,t.visible)},modifies:{layerProp:!0}},CPSetLayerName:{action:function(t){r.artwork.setLayerName(t.layer,t.name)},modifies:{layerProp:!0}},CPSetLayerBlendMode:{action:function(t){r.artwork.setLayerBlendMode(t.blendMode)},modifies:{layerProp:!0}},CPSetLayerAlpha:{action:function(t){r.artwork.setLayerAlpha(t.alpha)},modifies:{layerProp:!0}},CPSetLayerLockAlpha:{action:function(t){r.artwork.setLayerLockAlpha(t.lock)},modifies:{layerProp:!0}},CPPalColor:new y("color"),CPPalBrush:new y("brush"),CPPalLayers:new y("layers"),CPPalStroke:new y("stroke"),CPPalSwatches:new y("swatches"),CPPalTool:new y("tool"),CPPalMisc:new y("misc"),CPPalTextures:new y("textures"),CPTogglePalettes:{action:function(){i.togglePalettes()},modifies:{gui:!0}},CPArrangePalettes:{action:function(){i.arrangePalettes()},modifies:{gui:!0}},CPSave:{action:function(){var t;(t=new M.default({artwork:r.getArtwork(),rotation:a.getRotation90(),swatches:i.getSwatches()})).on("savingComplete",function(){r.artwork.setHasUnsavedChanges(!1)}),t.on("savingFailure",function(){alert("An error occurred while trying to save your drawing! Please try again!")}),t.save()},isSupported:function(){return!1!==n.allowDownload},modifies:{document:!0}},CPSend:{action:function(){!function(){if(!r.isActionSupported("CPContinue")&&!confirm("Are you sure you want to send your drawing to the server and finish drawing now?"))return;var t=new M.default({artwork:r.getArtwork(),rotation:a.getRotation90(),swatches:i.getSwatches(),url:n.saveUrl}),e=new H.default(r,s,t);t.on("savingComplete",function(){r.artwork.setHasUnsavedChanges(!1),!r.isActionSupported("CPContinue")&&r.isActionSupported("CPPost")&&r.actionPerformed({action:"CPPost"})}),t.on("savingFailure",function(){alert("An error occurred while trying to save your drawing! Please try again!")}),e.on("shown",function(){t.save()}),e.show()}()},isSupported:function(){return!!n.saveUrl},modifies:{document:!0}},CPPost:{action:function(){window.location=n.postUrl},isSupported:function(){return!!n.postUrl},modifies:{document:!0}},CPContinue:{action:function(){},isSupported:function(){return!!n.allowMultipleSends}},CPExit:{action:function(){window.location=n.exitUrl},isSupported:function(){return!!n.exitUrl},modifies:{}}};function y(t){this.palName=t}function _(t){this.toolNum=t}function b(t){this.modeNum=t}function w(t){var e;switch(d=t==S.default.EDITING_MODE_IMAGE?G.COLOR_MODE_RGB:G.COLOR_MODE_GREYSCALE,r.emitEvent("colorModeChange",[t==S.default.EDITING_MODE_IMAGE?"rgb":"greyscale"]),d){case G.COLOR_MODE_RGB:e=l.clone();break;case G.COLOR_MODE_GREYSCALE:e=new U.default(U.default.greyToRGB(u))}r.artwork.setForegroundColor(e.getRgb()),r.emitEvent("colorChange",[e])}function E(){r.emitEvent("toolChange",[c,g[c]])}function T(t){f!=t&&(t==G.M_TRANSFORM&&(h=f),f=t,r.emitEvent("modeChange",[f]))}function k(t){T(G.M_DRAW),c=t,r.artwork.setBrush(g[t]),E()}function P(t,e){s&&(r.artwork.on("editModeChanged",w),i=new R.default(r,s),k(G.T_PEN),i.arrangePalettes(),t&&i.setSwatches(t),e&&i.setRotation90(e),Y.default.getRef().detectTablet(),(0,W.isEventSupported)("onbeforeunload")?window.addEventListener("beforeunload",function(t){if(r.artwork.getHasUnsavedChanges()){var e="Your drawing has unsaved changes!";return t.returnValue=e}}):(0,C.default)("a").click(function(t){if("#"!=this.getAttribute("href")&&r.artwork.getHasUnsavedChanges())return confirm("Your drawing has unsaved changes! Are you sure to want to navigate away?")}))}if(y.prototype.action=function(t){i.showPalette(this.palName,t.selected)},y.prototype.modifies={gui:!0},_.prototype.action=function(){k(this.toolNum)},_.prototype.modifies={mode:!0,tool:!0},_.prototype.requiresDrawable=!0,b.prototype.action=function(){T(this.modeNum)},b.prototype.modifies={mode:!0},this.callToolListeners=function(){E()},this.getArtwork=function(){return this.artwork},this.setCanvas=function(t){a=t},this.setTransformInterpolation=function(t){this.artwork.setTransformInterpolation(t)},this.setCurColor=function(t){switch(d){case G.COLOR_MODE_RGB:l.isEqual(t)||(l.copyFrom(t),this.artwork.setForegroundColor(t.getRgb()),this.emitEvent("colorChange",[t]));break;case G.COLOR_MODE_GREYSCALE:var e=t.getValue();if(u!=e){var n=U.default.greyToRGB(e);this.artwork.setForegroundColor(n),u=e,this.emitEvent("colorChange",[new U.default(n)])}}},this.getCurColor=function(){switch(d){case G.COLOR_MODE_RGB:return l.clone();case G.COLOR_MODE_GREYSCALE:return new U.default(U.default.greyToRGB(u))}},this.setCurGradient=function(t){p=t.slice(0),this.emitEvent("gradientChange",[p])},this.getCurGradient=function(){return p.slice(0)},this.setBrushSize=function(t){g[c].size=Math.max(1,Math.min(200,t)),E()},this.getBrushSize=function(){return g[c].size},this.setAlpha=function(t){g[c].alpha=t,E()},this.getAlpha=function(){return g[c].alpha},this.getCurMode=function(){return f},this.getCurTool=function(){return c},this.getBrushInfo=function(){return g[c]},this.isActionSupported=function(t){if(v[t]){var e=z(v[t].isSupported);return"function"==e?v[t].isSupported():"undefined"==e||v[t].isSupported}return!1},this.isActionAllowed=function(t){var e=v[t];return!!e&&("function"==typeof e.allowed?e.allowed():"string"==typeof e.allowed?this.artwork[e.allowed]():!e.requiresDrawable||this.artwork.isActiveLayerDrawable())},this.showLayerNotification=function(t,e,n){this.emitEvent("layerNotification",[t,e,n])},this.actionPerformed=function(t){if(null!=this.artwork&&null!=a){var e=v[t.action];if(e)if(f==G.M_TRANSFORM&&(e.modifies.document||e.modifies.mode)&&-1==["CPTransformAccept","CPTransformReject"].indexOf(t.action))if("CPUndo"==t.action)v.CPTransformReject.action();else if("CPTransform"==t.action);else{var n=new I.default(s,this);n.on("accept",this.actionPerformed.bind(this,t)),n.on("reject",this.actionPerformed.bind(this,t)),n.show()}else e.action(t)}},this.getResourcesRoot=function(){return n.resourcesRoot},function(){if(!((0,W.isCanvasSupported)()&&"Uint8Array"in window))throw new G.UnsupportedBrowserException;var t=(-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPhone"))&&-1!=navigator.userAgent.indexOf(" OS 8_0 "),e=-1==navigator.userAgent.indexOf("CriOS")&&-1!=navigator.userAgent.indexOf("Safari");if(t&&e)throw new G.UnsupportedBrowserException("You are using Safari 8.0.0, which is unable to upload drawings. That bug was fixed in the iOS 8.0.2 update, or in Chrome for iOS.")}(),s&&((0,W.isFlexboxSupported)()||(s.className+=" no-flexbox"),s.className+=" chickenpaint"),n.resourcesRoot=n.resourcesRoot||"chickenpaint/",n.disableBootstrapAPI&&(0,C.default)(document).off(".data-api"),n.loadImageUrl||n.loadChibiFileUrl){var x=new L.default(n);new A.default(s,x,n.resourcesRoot),x.on("loadingComplete",function(t){r.artwork=t.layers||t.flat,P(t.swatches,n.rotation),n.onLoaded&&n.onLoaded(this)}),x.load()}else n.artwork?this.artwork=n.artwork:(this.artwork=new S.default(n.canvasWidth||800,n.canvasHeight||600),this.artwork.addBackgroundLayer()),P(),n.onLoaded&&n.onLoaded(this)}window.PointerEvent&&(window.hasNativePointerEvents=!0),t("pepjs"),(((G.prototype=Object.create(a.default.prototype)).constructor=G).UnsupportedBrowserException=function(t){this.message=t}).prototype.toString=function(){var t="Sorry, your web browser does not support ChickenPaint.";return this.message?t+=" "+this.message:t+=" Please try a modern browser like Chrome, Safari, Firefox, or Edge.",t},G.M_DRAW=0,G.M_FLOODFILL=1,G.M_RECT_SELECTION=2,G.M_MOVE_TOOL=3,G.M_ROTATE_CANVAS=4,G.M_COLOR_PICKER=5,G.M_GRADIENTFILL=6,G.M_TRANSFORM=7,G.T_PENCIL=0,G.T_ERASER=1,G.T_PEN=2,G.T_SOFTERASER=3,G.T_AIRBRUSH=4,G.T_DODGE=5,G.T_BURN=6,G.T_WATER=7,G.T_BLUR=8,G.T_SMUDGE=9,G.T_BLENDER=10,G.T_MAX=11,G.COLOR_MODE_RGB=0,G.COLOR_MODE_GREYSCALE=1,e.exports=n.default},{"../lib/raf.js":65,"./engine/CPArtwork":3,"./engine/CPBrushInfo":8,"./engine/CPResourceLoader":20,"./engine/CPResourceSaver":21,"./gui/CPAboutDialog":23,"./gui/CPBoxBlurDialog":24,"./gui/CPConfirmTransformDialog":32,"./gui/CPGridDialog":34,"./gui/CPMainGUI":36,"./gui/CPSendDialog":42,"./gui/CPShortcutsDialog":43,"./gui/CPSplashScreen.js":45,"./gui/CPTabletDialog":48,"./util/CPColor":54,"./util/CPPolyfill":56,"./util/CPRect":59,"./util/CPWacomTablet":62,bootstrap:66,"core-js/es6/map":67,"core-js/es6/promise":68,"core-js/es6/set":69,"core-js/es6/symbol":70,"core-js/es6/typed":71,"core-js/fn/array/fill":72,"core-js/fn/array/iterator":73,"core-js/fn/string/ends-with":74,jquery:187,pepjs:204,"wolfy87-eventemitter":206}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},n.createImageData=function(t,e){return document.createElement("canvas").getContext("2d").createImageData(t,e)}},{}],3:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=ee;i(t("./CPLayer"));var Ot=i(t("./CPImageLayer")),St=i(t("./CPLayerGroup")),Lt=i(t("./CPBlend"));t("./CPBlendAdditional");var Mt=i(t("./CPGreyBmp")),At=i(t("./CPBlendTree")),Rt=i(t("./CPMaskView")),Bt=i(t("./CPColorBmp")),It=i(t("./CPBrushManager")),Ft=i(t("./CPBrushInfo")),Nt=i(t("./CPUndo")),Dt=i(t("./CPClip")),jt=i(t("../util/CPColor")),Ht=i(t("../util/CPRect")),Wt=i(t("../util/CPRandom")),Ut=i(t("../util/CPTransform")),Yt=t("../util/CPPolyfill"),qt=t("../util/Canvas"),a=i(t("wolfy87-eventemitter")),zt=t("./CPBrushTool");function i(t){return t&&t.__esModule?t:{default:t}}function Gt(t,e,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Vt(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function Kt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zt(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=$t(o);if(r){var i=$t(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Jt(t,e){return t+e}function te(t){return t?t.width*t.height*4:0}function ee(t,e){t|=0,e|=0;var n=30,d=0,c=16777215,l=1e3,s=new St.default("Root",Lt.default.LM_NORMAL),u=new At.default(s,t,e,!0),f=new Bt.default(t,e),h=new Ht.default(0,0,t,e),p=new Mt.default(t,e,8),m=new Ht.default(0,0,t,e),a=new Mt.default(t,e,32),i=new Ht.default(0,0,0,0),g=new It.default,v=this,y=[],_=s,b=!1,w=null,E=new Ht.default(0,0,0,0),o=!1,r=new Ht.default(0,0,0,0),T=null,k=new Wt.default,P=null,x=null,C=[],O=[],S=null,L=0,M=0,A=0,R=!1,B=!1,I=new Set,F=new Set,N=null,D=0,j="smooth";function H(){B=!0}function W(t){B=!1,(0<F.size||0<I.size)&&(t?G():N||setTimeout(G,l))}function U(){v.emitEvent("changeSelection",[])}function Y(t){v.emitEvent("updateRegion",[t])}function q(){v.emitEvent("changeStructure"),u.resetTree();var t=v.getBounds();h.set(t),Y(t)}function z(t,e,n){v.emitEvent("changeLayer",[t]),n||(u.layerPropertyChanged(t,e),Y(v.getBounds()))}function G(){var t,e=Qt(F);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.rebuildImageThumbnail(),v.emitEvent("changeLayerImageThumb",[n])}}catch(t){e.e(t)}finally{e.f()}var a,i=Qt(I);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.rebuildMaskThumbnail(),v.emitEvent("changeLayerMaskThumb",[o])}}catch(t){i.e(t)}finally{i.f()}F.clear(),N&&(clearTimeout(N),N=null)}function X(t,e,n,a){Array.isArray(t)||(t=[t]),t.forEach(function(t){return u.invalidateLayerRect(t,e)});var i=!1;if(n){h.union(e);var o,r=Qt(t);try{for(r.s();!(o=r.n()).done;){var s=o.value;s instanceof Ot.default&&(F.add(s),i=!0)}}catch(t){r.e(t)}finally{r.f()}}a&&(m.union(e),t.forEach(function(t){I.add(t),w&&w.layer==t&&w.invalidateRect(e)}),i=!0),i&&(N&&(clearTimeout(N),N=null),B||(N=setTimeout(G,l))),Y(e)}function V(t,e){X(t,e,!b,b)}function K(){return b?_.mask:_.image}function Z(t,e){t.copyAlphaFrom(f,e)}function $(){if(!i.isEmpty()){if(b){var t=_.mask;S.brushMode==Ft.default.BRUSH_MODE_ERASE?y[Ft.default.BRUSH_MODE_PAINT].mergeOntoMask(t,p,4278190080):y[S.brushMode].mergeOntoMask(t,p,255&D)}else{var e=_.image,n=_.getLockAlpha();S.brushMode==Ft.default.BRUSH_MODE_ERASE&&n?y[Ft.default.BRUSH_MODE_PAINT].mergeOntoImage(e,f,c):y[S.brushMode].mergeOntoImage(e,f,D),n&&Z(e,i)}i.makeEmpty()}}function Q(){$(),u.buildTree()}function J(){_ instanceof Ot.default&&!h.isEmpty()&&(f.copyBitmapRect(_.image,h.left,h.top,h),h.makeEmpty())}function tt(){_.mask&&!m.isEmpty()&&(p.copyBitmapRect(_.mask,m.left,m.top,m),m.makeEmpty())}function et(){b?tt():J()}function nt(t){o=!0,0<O.length&&(O=[]),0!==C.length&&C[C.length-1].merge(t)?C[C.length-1].noChange()&&C.pop():(C.length>=n&&C.shift(),v.compactUndo(),C.push(t))}function at(t,e){t||e||(t=!b,e=b);var n=E.clone(),a=t?f.copyRectXOR(_.image,n):null,i=e?p.copyRectXOR(_.mask,n):null;this.layer=_,E.makeEmpty(),this.undo=function(){a&&this.layer.image.setRectXOR(a,n),i&&this.layer.mask.setRectXOR(i,n),X(this.layer,n,null!=a,null!=i)},this.redo=this.undo,this.getMemoryUsed=function(t,e){return(a?a.length:0)+(i?i.length:0)}}function it(e){var t=e.maskLinked,n=e.maskVisible;this.undo=function(){e.setMask(null),e.maskLinked=t,e.maskVisible=n,q(),v.setActiveLayer(e,!1)},this.redo=function(){var t=new Mt.default(v.width,v.height,8);t.clearAll(255),e.maskLinked=!0,e.maskVisible=!0,e.setMask(t),q(),v.setActiveLayer(e,!0)},this.redo()}function ot(t,e){var n,a,i=t.mask;n=e&&t instanceof Ot.default?t.image.clone():null,a=_==t&&b,this.undo=function(){t.setMask(i),n&&(t.image.copyPixelsFrom(n),X(t,t.image.getBounds(),!0,!1)),a&&v.setActiveLayer(t,!0),q()},this.redo=function(){n&&(Lt.default.multiplyAlphaByMask(t.image,100,t.mask),X(t,v.getBounds(),!0,!1)),a&&v.setActiveLayer(t,!1),t.setMask(null),q()},this.redo()}function rt(e,n,a){var i=a instanceof Ot.default&&a.clip,o=e.layers[n],r=o instanceof Ot.default&&o.clip,s=b;this.undo=function(){e.removeLayer(a);var t=e.layers[n-1]||e.layers[0]||e;o instanceof Ot.default&&(o.clip=r),a instanceof Ot.default&&(a.clip=i),q(),v.setActiveLayer(t,s)},this.redo=function(){e.insertLayer(n,a),r&&(a instanceof Ot.default?a.clip=!0:o.clip=!1),q(),v.setActiveLayer(a,!1)},this.redo()}function st(e){var n=e.clone(),t=b;this.undo=function(){n.parent.removeLayer(n),q(),v.setActiveLayer(e,t)},this.redo=function(){var t=e.name;t.endsWith(" Copy")||(t+=" Copy"),n.name=t,e.parent.insertLayer(e.parent.indexOf(e)+1,n),q(),v.setActiveLayer(n,!1)},this.redo()}function lt(n){var a=n.parent,i=a.indexOf(n),e=b,o=0;if(n instanceof Ot.default&&!n.clip)for(var t=i+1;t<a.layers.length&&(a.layers[t]instanceof Ot.default&&a.layers[t].clip);t++)o++;this.undo=function(){a.insertLayer(i,n);for(var t=0;t<o;t++)a.layers[t+i+1].clip=!0;q(),v.setActiveLayer(n,e)},this.redo=function(){for(var t=0;t<o;t++)a.layers[t+i+1].clip=!1;var e;a.removeLayerAtIndex(i),e=0==a.layers.length?n.parent:a.layers[Math.max(i-1,0)],q(),v.setActiveLayer(e,!1)},this.getMemoryUsed=function(t,e){return t?0:n.getMemoryUsed()},this.redo()}function ut(n){var t=n.parent.indexOf(n),e=b,a=new Ot.default(v.width,v.height,"");this.undo=function(){n.parent.setLayerAtIndex(t,n),q(),v.setActiveLayer(n,e)},this.redo=function(){n.parent.setLayerAtIndex(t,a),q(),v.setActiveLayer(a,!1)},this.getMemoryUsed=function(t,e){return t?0:n.getMemoryUsed()};var i,o=new At.default(n,v.width,v.height,!1);o.buildTree(),i=o.blendTree(),a.name=n.name,a.alpha=i.alpha,a.image=i.image,a.blendMode=i.blendMode,a.mask=i.mask,a.blendMode==Lt.default.LM_PASSTHROUGH&&(a.blendMode=Lt.default.LM_NORMAL),this.redo()}function dt(n){var e=n.parent,a=e.layers[e.indexOf(n)-1],i=new Ot.default(v.width,v.height,""),o=b;this.undo=function(){var t=e.indexOf(i);e.removeLayerAtIndex(t),e.insertLayer(t,n),e.insertLayer(t,a),q(),v.setActiveLayer(n,o)},this.redo=function(){i.copyFrom(a),0<n.getEffectiveAlpha()&&(i.mask?(Lt.default.multiplyAlphaByMask(i.image,i.alpha,i.mask),i.mask=null):Lt.default.multiplyAlphaBy(i.image,i.alpha),i.alpha=100,Lt.default.fuseImageOntoImage(i.image,!0,n.image,n.alpha,n.blendMode,n.getBounds(),n.mask));var t=e.indexOf(a);e.removeLayerAtIndex(t),e.removeLayerAtIndex(t),e.insertLayer(t,i),q(),v.setActiveLayer(i,!1)},this.getMemoryUsed=function(t,e){return t?0:n.getMemoryUsed()+i.getMemoryUsed()},this.redo()}function ct(){var t=v.getActiveLayer(),n=s.layers.slice(0),e=new Ot.default(v.width,v.height,"");this.undo=function(){s.layers=n.slice(0),q(),v.setActiveLayer(t,!1)},this.redo=function(){var t=v.fusionLayers();e.copyImageFrom(t),s.clearLayers(),e.setName(v.getDefaultLayerName(!1)),s.addLayer(e),q(),v.setActiveLayer(e,!1)},this.getMemoryUsed=function(t,e){return n.map(function(t){return t.getMemoryUsed()}).reduce(Jt,0)},this.redo()}function ft(i,o,a){var r=i.parent,s=i.parent.indexOf(i),l=b,u=r.layers[r.indexOf(i)+1],d=o.layers[a],c=i instanceof Ot.default&&i.clip,f=!!c&&i.getClippingBase(),h=0,p=0;if(i instanceof Ot.default&&!i.clip)for(var t=s+1;t<r.layers.length&&(r.layers[t]instanceof Ot.default&&r.layers[t].clip);t++)h++;else if(i instanceof St.default)for(var e=a;e<o.layers.length&&(o.layers[e]instanceof Ot.default&&o.layers[e].clip);e++)p++;this.undo=function(){i.parent.removeLayer(i);var t=u?r.indexOf(u):r.layers.length;r.insertLayer(t,i),i instanceof Ot.default&&(i.clip=c);for(var e=0;e<h;e++)r.layers[e+s+1].clip=!0;for(var n=0;n<p;n++)o.layers[n+a].clip=!0;q(),v.setActiveLayer(i,l)},this.redo=function(){for(var t=0;t<h;t++)r.layers[t+s+1].clip=!1;i.parent.removeLayer(i);var e=d?o.indexOf(d):o.layers.length;o.insertLayer(e,i);for(var n=0;n<p;n++)o.layers[n+e+1].clip=!1;i instanceof Ot.default&&(i.clip&&i.getClippingBase()!=f&&(i.clip=!1),d instanceof Ot.default&&d.clip&&(i.clip=!0));for(var a=0;a<p;a++)o.layers[a+e+1].clip=!1;q(),v.setActiveLayer(i,!1)},this.redo()}function ht(a,i){var t,o=(t=a).substring(0,1).toUpperCase()+t.substring(1),e=function(t,e){Array.isArray(t)||(t=[t]),this.layers=t,this.from=this.layers.map(function(t){return t["get"+o]()}),this.to=e,this.redo()};return((e.prototype=Object.create(Nt.default.prototype)).constructor=e).prototype.undo=function(){var n=this;this.layers.forEach(function(t,e){return t["set"+o](n.from[e])}),this.layers.forEach(function(t){return z(t,a,!i)})},e.prototype.redo=function(){var e=this;this.layers.forEach(function(t){return t["set"+o](e.to)}),this.layers.forEach(function(t){return z(t,a,!i)})},e.prototype.merge=function(t){return!!(t instanceof e&&function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}(this.layers,t.layers))&&(this.to=t.to,!0)},e.prototype.noChange=function(){for(var t=0;t<this.from.length;t++)if(this.from[t]!=this.to)return!1;return!0},e}this.getLayersRoot=function(){return s},this.getSelectionAutoSelect=function(){return r.isEmpty()?this.getBounds():r.clone()},this.getSelection=function(){return r.clone()},this.setHasUnsavedChanges=function(t){o=t},this.getHasUnsavedChanges=function(){return o},this.isAddLayerMaskAllowed=function(){return!_.mask},this.addLayerMask=function(){this.isAddLayerMaskAllowed()&&nt(new it(_))},this.isRemoveLayerMaskAllowed=function(){return null!==_.mask},this.removeLayerMask=function(){this.isRemoveLayerMaskAllowed()&&nt(new ot(_,!1))},this.isApplyLayerMaskAllowed=function(){return null!==_.mask&&_ instanceof Ot.default},this.applyLayerMask=function(t){this.isApplyLayerMaskAllowed()&&nt(new ot(_,!0))},this.addLayer=function(t){var e,n,a;switch(n=_ instanceof St.default&&_.expanded?(e=_).layers.length:(e=_.parent).layers.indexOf(_)+1,t){case"group":for(;e.layers[n]instanceof Ot.default&&e.layers[n].clip;)n++;a=new St.default(this.getDefaultLayerName(!0),Lt.default.LM_PASSTHROUGH);break;default:(a=new Ot.default(this.width,this.height,this.getDefaultLayerName(!1))).image.clearAll(c)}return nt(new rt(e,n,a)),a},this.addLayerObject=function(t,e){t.addLayer(e),t==s&&1==s.layers.length&&(_=e),q()},this.addLayerGroupObject=function(t,e,n){for(var a=[],i=0;i<n;i++)a.unshift(t.layers.pop());a.forEach(function(t){return e.addLayer(t)}),this.addLayerObject(t,e)},this.isRemoveLayerAllowed=function(){return _ instanceof Ot.default?s.getLinearizedLayerList(!1).some(function(t){return t instanceof Ot.default&&t!=_}):_ instanceof St.default&&s.getLinearizedLayerList(!1).some(function(t){return t instanceof Ot.default&&!t.hasAncestor(_)})},this.removeLayer=function(){return!!this.isRemoveLayerAllowed()&&(nt(new lt(_)),!0)},this.duplicateLayer=function(){nt(new st(_))},this.isMergeDownAllowed=function(){var t=_.parent.indexOf(_);return 0<t&&_ instanceof Ot.default&&_.parent.layers[t-1]instanceof Ot.default},this.mergeDown=function(){this.isMergeDownAllowed()&&nt(new dt(_))},this.isMergeGroupAllowed=function(){return _ instanceof St.default&&0<_.getEffectiveAlpha()},this.mergeGroup=function(){this.isMergeGroupAllowed()&&nt(new ut(_))},this.isMergeAllLayersAllowed=function(){return 1<s.getLinearizedLayerList(!1).length},this.mergeAllLayers=function(){this.isMergeAllLayersAllowed()&&nt(new ct)},this.relocateLayer=function(t,e,n){t&&e&&t!=e&&!e.hasAncestor(t)&&nt(new ft(t,e,n))},this.setLayerVisibility=function(t,e){var n=[];if(t.ancestorsAreVisible())t.visible!=e&&nt(new gt(t,e));else{for(var a=t;null!=a;a=a.parent)a.visible||n.push(a);nt(new gt(n,!0))}},this.expandLayerGroup=function(t,e){t.expanded!=e&&(!(t.expanded=e)&&_.hasAncestor(t)&&this.setActiveLayer(t,!1),z(t,"expanded",!0))},this.setLayerAlpha=function(t){_.getAlpha()!=t&&nt(new pt(_,t))},this.setLayerMaskLinked=function(t){_.maskLinked!=t&&nt(new wt(_,t))},this.setLayerMaskVisible=function(t,e){t.maskVisible!=e&&nt(new yt(t,e))},this.setLayerBlendMode=function(t){_.getBlendMode()!=t&&(t!=Lt.default.LM_PASSTHROUGH||_ instanceof St.default)&&nt(new mt(_,t))},this.setLayerName=function(t,e){t.getName()!=e&&nt(new _t(t,e))},this.paintDab=function(t,e,n){S.applyPressure(n),0<S.scattering&&(t+=k.nextGaussian()*S.curScattering/4,e+=k.nextGaussian()*S.curScattering/4);var a=y[S.brushMode],i=g.getDab(t,e,S),o=new Ht.default(0,0,i.width,i.height),r=new Ht.default(0,0,i.width,i.height);if(r.translate(i.x,i.y),v.getBounds().clipSourceDest(o,r),!r.isEmpty()){E.union(r);var s=b?_.mask:_.image,l=R&&!b?T:s;a.paintDab(s,r,l,S,o,i,D),!b&&a.noMergePhase&&_.getLockAlpha()&&Z(s,r),a.wantsOutputAsInput&&($(),R&&!b&&v.fusionLayers()),V(_,r)}},this.getDefaultLayerName=function(t){for(var e=t?"Group ":"Layer ",n=t?/^Group [0-9]+$/:/^Layer [0-9]+$/,a=0,i=s.getLinearizedLayerList(!1),o=0;o<i.length;o++){var r=i[o];n.test(r.name)&&(a=Math.max(a,parseInt(r.name.substring(e.length),10)))}return e+(a+1)},this.addBackgroundLayer=function(){var t=new Ot.default(v.width,v.height,this.getDefaultLayerName(!1));t.image.clearAll(4294967295),this.addLayerObject(this.getLayersRoot(),t)},this.fusionLayers=function(){return Q(),T=u.blendTree().image},this.upgradeMultiplyLayers=function(t){for(var e=this.getLayersRoot().getLinearizedLayerList(!1,[]),n=-1,a=0;a<e.length;a++){var i=e[a];if(!(i instanceof Ot.default)||i.mask||i.blendMode>Lt.default.LM_LAST_CHIBIPAINT)throw new Error("Bad layer type during multiply upgrade");i.blendMode===Lt.default.LM_MULTIPLY&&(n=a)}if(-1!==n){var o=new Bt.default(this.width,this.height),r=!0,s=!0,l=this.getBounds();o.clearAll(l,16777215);for(var u=0;u<=n;u++){var d=e[u];if(s||(r=r&&o.hasAlphaInRect(l)),d.blendMode===Lt.default.LM_MULTIPLY)switch(t){case"bake":!r&&0<d.getEffectiveAlpha()&&(100===d.alpha?Lt.default.upgradeMultiplyOfOpaqueLayer(o,d.image,100,l):Lt.default.upgradeMultiplyOfTransparentLayer(o,d.image,d.alpha,l),d.setBlendMode(Lt.default.LM_MULTIPLY2));break;default:r&&d.setBlendMode(Lt.default.LM_MULTIPLY2)}0<d.getEffectiveAlpha()&&(s=!1,Lt.default.fuseImageOntoImage(o,r,d.image,d.alpha,d.blendMode,l,null))}}},this.isCreateClippingMaskAllowed=function(){var t=_.parent.indexOf(_),e=_.parent.layers[t-1];return _ instanceof Ot.default&&!_.clip&&e instanceof Ot.default},this.createClippingMask=function(){this.isCreateClippingMaskAllowed()&&nt(new vt(_,!0))},this.isReleaseClippingMaskAllowed=function(){return _ instanceof Ot.default&&_.clip},this.releaseClippingMask=function(){this.isReleaseClippingMaskAllowed()&&nt(new vt(_,!1))},this.setActiveLayer=function(t,e){if(t){var n=(e=t.mask&&e)!=b;if(_!=t||n){var a=_;_=t,b=e,i=v.getBounds(),h.set(i),m.set(i),this.emitEvent("changeActiveLayer",[a,t,b]),n&&this.emitEvent("editModeChanged",[b?ee.EDITING_MODE_MASK:ee.EDITING_MODE_IMAGE]),w&&w.layer==a&&(e?w.setLayer(t):this.closeMaskView())}}var i},this.closeMaskView=function(){w.close(),w=null},this.toggleMaskView=function(){return null!=w&&w.isOpen()?this.closeMaskView():w=_.mask?new Rt.default(_,$):null,w},this.selectTopmostVisibleLayer=function(){for(var t=s.getLinearizedLayerList(!1),e=t.length-1;0<=e;e--)if(t[e]instanceof Ot.default&&0<t[e].getEffectiveAlpha())return void this.setActiveLayer(t[e],!1);for(var n=t.length-1;0<=n;n--)if(t[n]instanceof Ot.default)return void this.setActiveLayer(t[n],!1);this.setActiveLayer(t[t.length-1],!1)},this.getActiveLayer=function(){return _},this.isEditingMask=function(){return b},this.isActiveLayerDrawable=function(){return b&&_.mask||!b&&_ instanceof Ot.default},this.getUndoMemoryUsed=function(){var t,e=0,n=Qt(O);try{for(n.s();!(t=n.n()).done;){e+=t.value.getMemoryUsed(!0,null)}}catch(t){n.e(t)}finally{n.f()}var a,i=Qt(C);try{for(i.s();!(a=i.n()).done;){e+=a.value.getMemoryUsed(!1,null)}}catch(t){i.e(t)}finally{i.f()}return e},this.isUndoAllowed=function(){return 0<C.length},this.isRedoAllowed=function(){return 0<O.length},this.undo=function(){if(this.isUndoAllowed()){o=!0;var t=C.pop();t.undo(),O.push(t)}},this.redo=function(){if(this.isRedoAllowed()){o=!0;var t=O.pop();t.redo(),C.push(t)}},this.performIdleTasks=function(){et(),Q()},this.compactUndo=function(){0<C.length&&C[C.length-1].compact()},this.clearHistory=function(){C=[],O=[]},this.colorPicker=function(t,e){return b&&_.mask?jt.default.greyToRGB(_.mask.getPixel(~~t,~~e)):16777215&T.getPixel(~~t,~~e)},this.setSelection=function(t){r.set(t),r.roundNearest(),r.clipTo(this.getBounds())},this.emptySelection=function(){r.makeEmpty()},this.floodFill=function(t,e){var n=K();n&&(et(),E=this.getBounds(),n.floodFill(~~t,~~e,4278190080|D),nt(new at),V(_,this.getBounds()))},this.gradientFill=function(t,e,n,a,i){var o=this.getSelectionAutoSelect(),r=K();r&&(et(),E=o.clone(),r.gradient(o,t,e,n,a,i,!1),this.getLayerLockAlpha()&&r instanceof Bt.default&&Z(r,o),nt(new at),V(_,o))},this.fill=function(t){var e=this.getSelectionAutoSelect(),n=K();n&&(et(),E=e.clone(),n.clearRect(e,t),nt(new at),V(_,e))},this.clear=function(){b?this.fill(d):this.fill(c)},this.flip=function(t){var e=this.getSelection(),n=e.isEmpty(),a=n&&_ instanceof Ot.default&&_.mask&&_.maskLinked,i=(!b||a)&&_ instanceof Ot.default,o=(b||a)&&_.mask,r=t?"copyRegionHFlip":"copyRegionVFlip";(i||o)&&(n&&(e=this.getBounds()),E=e.clone(),i&&(J(),_.image[r](e,f)),o&&(tt(),_.mask[r](e,p)),nt(new at(i,o)),X(_,e,i,o))},this.hFlip=function(){this.flip(!0)},this.vFlip=function(){this.flip(!1)},this.monochromaticNoise=function(){var t=this.getSelectionAutoSelect(),e=K();e&&(et(),E=t.clone(),e.fillWithNoise(t),nt(new at),V(_,t))},this.isColorNoiseAllowed=function(){return!this.isEditingMask()&&this.isActiveLayerDrawable()},this.colorNoise=function(){if(this.isColorNoiseAllowed()){var t=this.getSelectionAutoSelect();et(),E=t.clone(),_.image.fillWithColorNoise(t),nt(new at(!0,!1)),X(_,t,!0,!1)}},this.invert=function(){var t=this.getSelectionAutoSelect(),e=K();e&&(et(),E=t.clone(),e.invert(t),nt(new at),V(_,t))},this.boxBlur=function(t,e,n){var a=this.getSelectionAutoSelect(),i=K();if(i){et(),E=a.clone();for(var o=0;o<n;o++)i.boxBlur(a,t,e);nt(new at),V(_,a)}},this.rectangleSelection=function(t){var e=t.clone();e.clipTo(this.getBounds()),nt(new Et(this.getSelection(),e)),this.setSelection(e)},this.move=function(t,e,n){if(e|=0,0!=(t|=0)||0!=e){var a=0<C.length?C[C.length-1]:null;if(!n&&a instanceof Pt&&a.layer==this.getActiveLayer())a.amend(t,e),O=[],o=!0;else{var i=new Pt(t,e,n);nt(i),i.redo()}}},this.setTransformInterpolation=function(t){j=t,P instanceof kt&&P.setInterpolation(t)},this.transformAffineAbort=function(){P instanceof kt&&(P.undo(),W(!(P=null)))},this.transformAffineBegin=function(){if(P instanceof kt)return{transform:P.getTransform(),rect:P.getInitialTransformRect(),selection:P.getInitialSelectionRect()};var t,e=new Ut.default;return(t=new kt(e,j)).getInitialTransformRect().isEmpty()?null:(P=t,H(),{transform:e,rect:t.getInitialTransformRect(),selection:t.getInitialSelectionRect()})},this.transformAffineFinish=function(){P instanceof kt&&(nt(P),W(!(P=null)))},this.transformAffineAmend=function(t){P instanceof kt&&P.amend(t)},this.isCutSelectionAllowed=function(){return!this.getSelection().isEmpty()&&null!==K()},this.isCopySelectionAllowed=this.isCutSelectionAllowed,this.cutSelection=function(){this.isCutSelectionAllowed()&&nt(new xt(_,b,this.getSelection()))},this.copySelection=function(){if(this.isCopySelectionAllowed()){var t=v.getSelection(),e=K();x=new Dt.default(e.cloneRect(t),t.left,t.top)}},this.isCopySelectionMergedAllowed=function(){return!this.getSelection().isEmpty()},this.copySelectionMerged=function(){if(this.isCopySelectionMergedAllowed()){var t=v.getSelection();x=new Dt.default(this.fusionLayers().cloneRect(t),t.left,t.top)}},this.isPasteClipboardAllowed=function(){return!this.isClipboardEmpty()},this.pasteClipboard=function(){this.isPasteClipboardAllowed()&&nt(new Ct(x))},this.getClipboard=function(){return x},this.setClipboard=function(t){x=t},this.isClipboardEmpty=function(){return null==x},this.setSampleAllLayers=function(t){R=t},this.getLayerLockAlpha=function(){return this.getActiveLayer().getLockAlpha()},this.setLayerLockAlpha=function(t){_.getLockAlpha()!=t&&nt(new bt(_,t))},this.setForegroundColor=function(t){D=t},this.setBrush=function(t){S=t},this.setBrushTexture=function(t){g.setTexture(t)},this.beginStroke=function(t,e,n){return!(null===S||!this.isActiveLayerDrawable())&&(et(),E.makeEmpty(),a.clearAll(0),i.makeEmpty(),L=t,M=e,A=n,H(),y[S.brushMode].beginStroke(),this.paintDab(t,e,n),!0)},this.continueStroke=function(t,e,n){if(null!=S){var a=Math.sqrt((L-t)*(L-t)+(M-e)*(M-e)),i=Math.max(S.minSpacing,S.curSize*S.spacing);if(i<a){for(var o=L,r=M,s=A,l=(i-.001)/a,u=l;u<=1;u+=l)o=u*t+(1-u)*L,r=u*e+(1-u)*M,s=u*n+(1-u)*A,this.paintDab(o,r,s);L=o,M=r,A=s}}},this.endStroke=function(){null!=S&&($(),y[S.brushMode].endStroke(),E.clipTo(this.getBounds()),E.isEmpty()||(nt(new at),et()),W(!1))},this.hasAlpha=function(){return T.hasAlpha()},this.getFlatPNG=function(t){return this.fusionLayers(),T.getAsPNG(t)},this.isSimpleDrawing=function(){return 1==s.layers.length&&s.layers[0]instanceof Ot.default&&!s.layers[0].mask&&100==s.layers[0].getEffectiveAlpha()},(at.prototype=Object.create(Nt.default.prototype)).constructor=at,(it.prototype=Object.create(Nt.default.prototype)).constructor=it,(ot.prototype=Object.create(Nt.default.prototype)).constructor=ot,(rt.prototype=Object.create(Nt.default.prototype)).constructor=rt,(st.prototype=Object.create(Nt.default.prototype)).constructor=st,(lt.prototype=Object.create(Nt.default.prototype)).constructor=lt,(ut.prototype=Object.create(Nt.default.prototype)).constructor=ut,(dt.prototype=Object.create(Nt.default.prototype)).constructor=dt,(ct.prototype=Object.create(Nt.default.prototype)).constructor=ct,(ft.prototype=Object.create(Nt.default.prototype)).constructor=ft;var pt=ht("alpha",!0),mt=ht("blendMode",!0),gt=ht("visible",!0),vt=ht("clip",!0),yt=ht("maskVisible",!0),_t=ht("name",!1),bt=ht("lockAlpha",!1),wt=ht("maskLinked",!1);function Et(t,e){t=t.clone(),e=e.clone(),this.undo=function(){v.setSelection(t),Y(v.getBounds())},this.redo=function(){v.setSelection(e),Y(v.getBounds())},this.noChange=function(){return t.equals(e)}}(Et.prototype=Object.create(Nt.default.prototype)).constructor=Et;var Tt=function(t){Kt(s,Nt.default);var r=Zt(s);function s(){var t;Xt(this,s),(t=r.call(this)).layer=_,t.fromSelection=v.getSelection(),t.fromMaskMode=b,t.movingWholeLayer=t.fromSelection.isEmpty(),t.movingImage=!b||t.movingWholeLayer&&t.layer.maskLinked,t.movingMask=b||t.movingWholeLayer&&t.layer.maskLinked,t.hasFullUndo=!1,t.erasesSourceRect=!1,t.dstRect=new Ht.default(0,0,0,0),t.movingLayers=[{layer:t.layer,moveImage:t.layer instanceof Ot.default&&t.movingImage,moveMask:null!==t.layer.mask&&t.movingMask,imageRect:new Map,maskRect:new Map}],t.layer instanceof St.default&&t.movingImage&&t.movingWholeLayer&&(t.movingLayers=t.movingLayers.concat(t.layer.getLinearizedLayerList(!1).map(function(t){return{layer:t,moveImage:t instanceof Ot.default,moveMask:null!==t.mask&&t.maskLinked,imageRect:new Map,maskRect:new Map}})));var e=new Ht.default(0,0,0,0);if(t.movingWholeLayer){t.srcRect=v.getBounds();for(var n=0;n<t.movingLayers.length&&!e.equals(t.srcRect);n++){var a=t.movingLayers[n];a.moveMask&&e.union(a.layer.mask.getValueBounds(t.srcRect,255)),a.moveImage&&e.union(a.layer.image.getNonTransparentBounds(t.srcRect))}}else{t.srcRect=t.fromSelection.clone();for(var i=0;i<t.movingLayers.length&&!e.equals(t.srcRect);i++){var o=t.movingLayers[i];o.moveMask&&e.union(o.layer.mask.getValueBounds(t.srcRect,0)),o.moveImage&&e.union(o.layer.image.getNonTransparentBounds(t.srcRect))}}return t.srcRect=e,t}return Vt(s,[{key:"undo",value:function(){var t=this,e=[];this.dstRect.isEmpty()||e.push(this.dstRect),this.erasesSourceRect&&(e.push(this.srcRect),e=Ht.default.union(e)),this.movingLayers.forEach(function(n){t.hasFullUndo?e.forEach(function(t){n.moveImage&&n.layer.image.copyBitmapRect(n.imageUndo,t.left,t.top,t),n.moveMask&&n.layer.mask.copyBitmapRect(n.maskUndo,t.left,t.top,t)}):(n.moveImage&&n.imageRect.forEach(function(t,e){n.layer.image.copyBitmapRect(t,e.left,e.top,t.getBounds())}),n.moveMask&&n.maskRect.forEach(function(t,e){n.layer.mask.copyBitmapRect(t,e.left,e.top,t.getBounds())}))}),X(this.movingLayers.map(function(t){return t.layer}),e.reduce(function(t,e){return t.getUnion(e)},new Ht.default(0,0,0,0)),!0,!0),this.dstRect.makeEmpty(),v.setSelection(this.fromSelection),v.setActiveLayer(this.layer,this.fromMaskMode),U()}},{key:"getMemoryUsed",value:function(t,e){return this.movingLayers.map(function(t){return[t.imageUndo,t.maskUndo,t.imageRect,t.maskRect].map(function(t){return t?t.getMemorySize():0}).reduce(Jt,0)}).reduce(Jt,0)}},{key:"buildFullUndo",value:function(){this.hasFullUndo||(this.movingLayers.forEach(function(t){t.moveImage&&(t.imageUndo=t.layer.image.clone()),t.moveMask&&(t.maskUndo=t.layer.mask.clone()),t.imageRect.clear(),t.maskRect.clear()}),this.hasFullUndo=!0)}},{key:"compact",value:function(){if(this.hasFullUndo){var t=[];this.dstRect.isEmpty()||t.push(this.dstRect),this.erasesSourceRect&&(t.push(this.srcRect),t=Ht.default.union(t)),this.movingLayers.forEach(function(e){e.imageRect.clear(),e.maskRect.clear(),t.forEach(function(t){e.moveImage&&e.imageRect.set(t,e.imageUndo.cloneRect(t)),e.moveMask&&e.maskRect.set(t,e.maskUndo.cloneRect(t))}),e.imageUndo=null,e.maskUndo=null}),this.hasFullUndo=!1}}}]),s}(),kt=function(t){Kt(i,Tt);var a=Zt(i);function i(t,e){var n;return Xt(this,i),(n=a.call(this)).erasesSourceRect=!0,n.affineTransform=t.clone(),n.interpolation=e||"smooth",n.composeCanvas=null,n.composeCanvasContext=null,n}return Vt(i,[{key:"buildFullUndo",value:function(){var a=this;this.hasFullUndo||(Gt($t(i.prototype),"buildFullUndo",this).call(this),this.movingLayers.forEach(function(t){if(t.moveImage){var e=(0,qt.createCanvas)(a.srcRect.getWidth(),a.srcRect.getHeight());e.getContext("2d").putImageData(t.layer.image.getImageData(),-a.srcRect.left,-a.srcRect.top,a.srcRect.left,a.srcRect.top,a.srcRect.getWidth(),a.srcRect.getHeight()),t.imageSourceCanvas=e}if(t.moveMask){var n=(0,qt.createCanvas)(a.srcRect.getWidth(),a.srcRect.getHeight());n.getContext("2d").putImageData(t.layer.mask.getImageData(a.srcRect.left,a.srcRect.top,a.srcRect.getWidth(),a.srcRect.getHeight()),0,0),t.maskSourceCanvas=n}}),this.composeCanvas=(0,qt.createCanvas)(v.width,v.height),this.composeCanvasContext=this.composeCanvas.getContext("2d"),(0,Yt.setCanvasInterpolation)(this.composeCanvasContext,"smooth"==this.interpolation),this.junk=this.composeCanvasContext.getImageData(0,0,1,1))}},{key:"redo",value:function(){var a=this;this.buildFullUndo();var t=this.dstRect.clone(),e=this.srcRect.toPoints();this.affineTransform.transformPoints(e),this.dstRect.set(Ht.default.createBoundingBox(e).roundContain().clipTo(v.getBounds()));var i=Ht.default.subtract(this.dstRect,this.srcRect),o=Ht.default.subtract(t.isEmpty()?this.srcRect:this.srcRect.getIntersection(t),this.dstRect),r=this.srcRect.getIntersection(this.dstRect),s=Ht.default.subtract(t,[this.dstRect,this.srcRect]),n=this.srcRect.getUnion(this.dstRect).getUnion(t);if(this.movingLayers.forEach(function(e){if(o.forEach(function(t){e.moveImage&&e.layer.image.clearRect(t,c),e.moveMask&&(a.movingWholeLayer?e.layer.mask.clearRect(t,255):e.layer.mask.clearRect(t,d))}),!a.dstRect.isEmpty()){if(e.moveImage){var n=e.imageUndo.getImageData();i.forEach(function(t){a.composeCanvasContext.putImageData(n,0,0,t.left,t.top,t.getWidth(),t.getHeight())}),a.composeCanvasContext.clearRect(r.left,r.top,r.getWidth(),r.getHeight()),a.composeCanvasContext.save(),a.composeCanvasContext.setTransform(a.affineTransform.m[0],a.affineTransform.m[1],a.affineTransform.m[2],a.affineTransform.m[3],a.affineTransform.m[4],a.affineTransform.m[5]),a.composeCanvasContext.drawImage(e.imageSourceCanvas,a.srcRect.left,a.srcRect.top),a.composeCanvasContext.restore(),e.layer.image.copyBitmapRect(new Bt.default(a.composeCanvasContext.getImageData(a.dstRect.left,a.dstRect.top,a.dstRect.getWidth(),a.dstRect.getHeight())),a.dstRect.left,a.dstRect.top,new Ht.default(0,0,a.dstRect.getWidth(),a.dstRect.getHeight()))}e.moveMask&&(i.forEach(function(t){a.composeCanvasContext.putImageData(e.layer.mask.getImageData(t.left,t.top,t.getWidth(),t.getHeight()),t.left,t.top)}),a.movingWholeLayer?a.composeCanvasContext.fillStyle="#FFF":a.composeCanvasContext.fillStyle="#000",a.composeCanvasContext.fillRect(r.left,r.top,r.getWidth(),r.getHeight()),a.composeCanvasContext.save(),a.composeCanvasContext.setTransform(a.affineTransform.m[0],a.affineTransform.m[1],a.affineTransform.m[2],a.affineTransform.m[3],a.affineTransform.m[4],a.affineTransform.m[5]),a.composeCanvasContext.drawImage(e.maskSourceCanvas,a.srcRect.left,a.srcRect.top),a.composeCanvasContext.restore(),e.layer.mask.pasteImageData(a.composeCanvasContext.getImageData(a.dstRect.left,a.dstRect.top,a.dstRect.getWidth(),a.dstRect.getHeight()),a.dstRect.left,a.dstRect.top))}s.forEach(function(t){e.moveImage&&e.layer.image.copyBitmapRect(e.imageUndo,t.left,t.top,t),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,t)})}),X(this.movingLayers.map(function(t){return t.layer}),n,!0,!0),!this.fromSelection.isEmpty()){var l,u=this.fromSelection.toPoints();this.affineTransform.transformPoints(u),(l=Ht.default.createBoundingBox(u)).roundNearest(),v.setSelection(l),U()}v.setActiveLayer(this.layer,this.fromMaskMode)}},{key:"amend",value:function(t){this.hasFullUndo||this.undo(),this.affineTransform=t.clone(),this.redo()}},{key:"setInterpolation",value:function(t){t!=this.interpolation&&(this.interpolation=t,this.composeCanvasContext&&(0,Yt.setCanvasInterpolation)(this.composeCanvasContext,"smooth"==this.interpolation),this.undo(),this.redo())}},{key:"compact",value:function(){Gt($t(i.prototype),"compact",this).call(this),this.composeCanvas=null,this.composeCanvasContext=null,this.movingLayers.forEach(function(t){return t.imageSourceCanvas=null})}},{key:"getMemoryUsed",value:function(t,e){var n=Gt($t(i.prototype),"getMemoryUsed",this).call(this,t,e);return n+=te(this.composeCanvas),n+=this.movingLayers.map(function(t){return te(t.imageSourceCanvas)}).reduce(Jt,0)}},{key:"getTransform",value:function(){return this.affineTransform.clone()}},{key:"getInitialTransformRect",value:function(){return this.srcRect.clone()}},{key:"getInitialSelectionRect",value:function(){return this.fromSelection.clone()}}]),i}(),Pt=function(t){Kt(o,Tt);var i=Zt(o);function o(t,e,n){var a;return Xt(this,o),(a=i.call(this)).offsetX=t,a.offsetY=e,a.erasesSourceRect=!n,a}return Vt(o,[{key:"redo",value:function(){var t,n,a=this,e=this.dstRect.clone(),i=e.clone(),o=null;if(this.buildFullUndo(),this.dstRect.set(this.srcRect),this.dstRect.translate(this.offsetX,this.offsetY),t=this.dstRect.clone(),this.dstRect.clipTo(v.getBounds()),this.erasesSourceRect?(o=e.isEmpty()?this.srcRect:this.srcRect.getIntersection(e),i.union(o),n=e.subtract(this.srcRect)):n=[e],this.movingLayers.forEach(function(e){o&&(e.moveImage&&e.layer.image.clearRect(o,c),e.moveMask&&e.layer.mask.clearRect(o,a.movingWholeLayer?255:d)),n.forEach(function(t){e.moveImage&&e.layer.image.copyBitmapRect(e.imageUndo,t.left,t.top,t),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,t)}),e.moveImage&&Lt.default.normalFuseImageOntoImageAtPosition(e.layer.image,e.imageUndo,t.left,t.top,a.srcRect),e.moveMask&&e.layer.mask.copyBitmapRect(e.maskUndo,t.left,t.top,a.srcRect)}),i.union(this.dstRect),X(this.movingLayers.map(function(t){return t.layer}),i,!0,!0),!this.fromSelection.isEmpty()){var r=this.fromSelection.clone();r.translate(this.offsetX,this.offsetY),v.setSelection(r),U()}}},{key:"amend",value:function(t,e){this.hasFullUndo||this.undo(),this.offsetX+=t,this.offsetY+=e,this.redo()}}]),o}();function xt(t,e,n){var a=e?t.mask:t.image,i=a.cloneRect(n);n=n.clone(),this.undo=function(){a.copyBitmapRect(i,n.left,n.top,i.getBounds()),v.setActiveLayer(t,e),v.setSelection(n),X(t,n,!e,e)},this.redo=function(){e?a.clearRect(n,d):a.clearRect(n,c),x=new Dt.default(i,n.left,n.top),v.setActiveLayer(t,e),v.emptySelection(),X(t,n,!e,e)},this.getMemoryUsed=function(t,e){return i==e?0:i.getMemorySize()},this.redo()}function Ct(o){var t=v.getSelection(),e=b,r=new Ot.default(v.width,v.height,v.getDefaultLayerName(!1)),s=_,l=s.parent;this.undo=function(){l.removeLayer(r),v.setSelection(t),q(),v.setActiveLayer(s,e)},this.redo=function(){var t,e,n=l.indexOf(s),a=o.bmp.getBounds();if(l.insertLayer(n+1,r),a.isInside(v.getBounds())?(t=o.x,e=o.y):(t=(v.width-o.bmp.width)/2|0,e=(v.height-o.bmp.height)/2|0),o.bmp instanceof Mt.default){var i=new Bt.default(o.bmp.width,o.bmp.height);i.copyPixelsFromGreyscale(o.bmp),r.image.copyBitmapRect(i,t,e,a)}else r.image.copyBitmapRect(o.bmp,t,e,a);v.emptySelection(),q(),v.setActiveLayer(r,!1)},this.getMemoryUsed=function(t,e){return o.bmp==e?0:o.bmp.getMemorySize()},this.redo()}(xt.prototype=Object.create(Nt.default.prototype)).constructor=xt,(Ct.prototype=Object.create(Nt.default.prototype)).constructor=Ct,y=[zt.CPBrushTool,zt.CPBrushToolEraser,zt.CPBrushToolDodge,zt.CPBrushToolBurn,zt.CPBrushToolWatercolor,zt.CPBrushToolBlur,zt.CPBrushToolSmudge,zt.CPBrushToolOil].map(function(t){return new t(a,i)}),this.width=t,this.height=e}((ee.prototype=Object.create(a.default.prototype)).constructor=ee).prototype.getBounds=function(){return new Ht.default(0,0,this.width,this.height)},ee.prototype.isPointWithin=function(t,e){return 0<=t&&0<=e&&t<this.width&&e<this.height},ee.EDITING_MODE_IMAGE=0,ee.EDITING_MODE_MASK=1,e.exports=n.default},{"../util/CPColor":54,"../util/CPPolyfill":56,"../util/CPRandom":58,"../util/CPRect":59,"../util/CPTransform":60,"../util/Canvas":2,"./CPBlend":5,"./CPBlendAdditional":6,"./CPBlendTree":7,"./CPBrushInfo":8,"./CPBrushManager":9,"./CPBrushTool":10,"./CPClip":12,"./CPColorBmp":13,"./CPGreyBmp":14,"./CPImageLayer":15,"./CPLayer":16,"./CPLayerGroup":17,"./CPMaskView":19,"./CPUndo":22,"wolfy87-eventemitter":206}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var a,i=(a=t("../util/CPRect"))&&a.__esModule?a:{default:a};function o(t,e){this.width=0|t,this.height=0|e}o.prototype.getBounds=function(){return new i.default(0,0,this.width,this.height)},o.prototype.isInside=function(t,e){return 0<=t&&0<=e&&t<this.width&&e<this.height},e.exports=n.default},{"../util/CPRect":59}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;a(t("./CPColorBmp")),a(t("./CPGreyBmp")),a(t("./CPLayer")),a(t("../util/CPRect"));function a(t){return t&&t.__esModule?t:{default:t}}function i(){}var w=new Array(256),E=new Array(256);i.multiplyOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;d&&(c=t.data[s],t.data[s]=c-((255^e.data[s])*c*d/65025|0),c=t.data[s+1],t.data[s+1]=c-((255^e.data[s+1])*c*d/65025|0),c=t.data[s+2],t.data[s+2]=c-((255^e.data[s+2])*c*d/65025|0))}},i.multiplyOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;d&&(c=t.data[s],t.data[s]=c-((255^e.data[s])*c*d/65025|0),c=t.data[s+1],t.data[s+1]=c-((255^e.data[s+1])*c*d/65025|0),c=t.data[s+2],t.data[s+2]=c-((255^e.data[s+2])*c*d/65025|0))}},i.multiplyOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiplyOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiplyOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-((255^e.data[l])*p*h/65025|0),p=t.data[l+1],t.data[l+1]=p-((255^e.data[l+1])*p*h/65025|0),p=t.data[l+2],t.data[l+2]=p-((255^e.data[l+2])*p*h/65025|0))}},i.multiplyOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-((255^e.data[l])*p*h/65025|0),p=t.data[l+1],t.data[l+1]=p-((255^e.data[l+1])*p*h/65025|0),p=t.data[l+2],t.data[l+2]=p-((255^e.data[l+2])*p*h/65025|0))}},i.multiplyOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.multiplyOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.multiply2OntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;d&&(c=t.data[s],t.data[s]=c-Math.ceil((255^e.data[s])*c*d/65025),c=t.data[s+1],t.data[s+1]=c-Math.ceil((255^e.data[s+1])*c*d/65025),c=t.data[s+2],t.data[s+2]=c-Math.ceil((255^e.data[s+2])*c*d/65025))}},i.multiply2OntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;d&&(c=t.data[s],t.data[s]=c-Math.ceil((255^e.data[s])*c*d/65025),c=t.data[s+1],t.data[s+1]=c-Math.ceil((255^e.data[s+1])*c*d/65025),c=t.data[s+2],t.data[s+2]=c-Math.ceil((255^e.data[s+2])*c*d/65025))}},i.multiply2OntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiply2OntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+(f*h*m/255|0))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+(f*h*m/255|0))/p|0,t.data[s+3]=p}}},i.multiply2OntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-Math.ceil((255^e.data[l])*p*h/65025),p=t.data[l+1],t.data[l+1]=p-Math.ceil((255^e.data[l+1])*p*h/65025),p=t.data[l+2],t.data[l+2]=p-Math.ceil((255^e.data[l+2])*p*h/65025))}},i.multiply2OntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;h&&(p=t.data[l],t.data[l]=p-Math.ceil((255^e.data[l])*p*h/65025),p=t.data[l+1],t.data[l+1]=p-Math.ceil((255^e.data[l+1])*p*h/65025),p=t.data[l+2],t.data[l+2]=p-Math.ceil((255^e.data[l+2])*p*h/65025))}},i.multiply2OntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.multiply2OntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+(m*g*y/255|0))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+(m*g*y/255|0))/v|0,t.data[l+3]=v}}},i.normalOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;if(d)if(255==d)t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2];else{var f=255-d;c=e.data[s],t.data[s]=(c*d+t.data[s]*f)/255|0,c=e.data[s+1],t.data[s+1]=(c*d+t.data[s+1]*f)/255|0,c=e.data[s+2],t.data[s+2]=(c*d+t.data[s+2]*f)/255|0}}},i.normalOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=255-d;c=e.data[s],t.data[s]=(c*d+t.data[s]*f)/255|0,c=e.data[s+1],t.data[s+1]=(c*d+t.data[s+1]*f)/255|0,c=e.data[s+2],t.data[s+2]=(c*d+t.data[s+2]*f)/255|0}}},i.normalOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=255*d/f|0,p=255-h;t.data[s]=(e.data[s]*h+t.data[s]*p)/255|0,t.data[s+1]=(e.data[s+1]*h+t.data[s+1]*p)/255|0,t.data[s+2]=(e.data[s+2]*h+t.data[s+2]*p)/255|0,t.data[s+3]=f}}},i.normalOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=255*d/f|0,p=255-h;t.data[s]=(e.data[s]*h+t.data[s]*p)/255|0,t.data[s+1]=(e.data[s+1]*h+t.data[s+1]*p)/255|0,t.data[s+2]=(e.data[s+2]*h+t.data[s+2]*p)/255|0,t.data[s+3]=f}}},i.normalOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h)if(255==h)t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2];else{var m=255-h;p=e.data[l],t.data[l]=(p*h+t.data[l]*m)/255|0,p=e.data[l+1],t.data[l+1]=(p*h+t.data[l+1]*m)/255|0,p=e.data[l+2],t.data[l+2]=(p*h+t.data[l+2]*m)/255|0}}},i.normalOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=255-h;p=e.data[l],t.data[l]=(p*h+t.data[l]*m)/255|0,p=e.data[l+1],t.data[l+1]=(p*h+t.data[l+1]*m)/255|0,p=e.data[l+2],t.data[l+2]=(p*h+t.data[l+2]*m)/255|0}}},i.normalOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=255*h/m|0,v=255-g;t.data[l]=(e.data[l]*g+t.data[l]*v)/255|0,t.data[l+1]=(e.data[l+1]*g+t.data[l+1]*v)/255|0,t.data[l+2]=(e.data[l+2]*g+t.data[l+2]*v)/255|0,t.data[l+3]=m}}},i.normalOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=255*h/m|0,v=255-g;t.data[l]=(e.data[l]*g+t.data[l]*v)/255|0,t.data[l+1]=(e.data[l+1]*g+t.data[l+1]*v)/255|0,t.data[l+2]=(e.data[l+2]*g+t.data[l+2]*v)/255|0,t.data[l+3]=m}}},i.addOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3];d&&(t.data[s]=t.data[s]+d*e.data[s]/255|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255|0)}},i.addOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0;d&&(t.data[s]=t.data[s]+d*e.data[s]/255|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255|0)}},i.addOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0;t.data[s]=(c*t.data[s]+d*e.data[s])/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1])/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2])/f|0,t.data[s+3]=f}}},i.addOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0;t.data[s]=(c*t.data[s]+d*e.data[s])/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1])/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2])/f|0,t.data[s+3]=f}}},i.addOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255|0)}},i.addOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255|0)}},i.addOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0;t.data[l]=(p*t.data[l]+h*e.data[l])/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1])/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2])/m|0,t.data[l+3]=m}}},i.addOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0;t.data[l]=(p*t.data[l]+h*e.data[l])/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1])/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2])/m|0,t.data[l+3]=m}}},i.subtractOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3];d&&(t.data[s]=t.data[s]+d*e.data[s]/255-d|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255-d|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255-d|0)}},i.subtractOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0;d&&(t.data[s]=t.data[s]+d*e.data[s]/255-d|0,t.data[s+1]=t.data[s+1]+d*e.data[s+1]/255-d|0,t.data[s+2]=t.data[s+2]+d*e.data[s+2]/255-d|0)}},i.subtractOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=d*c;t.data[s]=(c*t.data[s]+d*e.data[s]-h)/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1]-h)/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2]-h)/f|0,t.data[s+3]=f}}},i.subtractOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=d+(c=t.data[s+3])-(d*c/255|0)|0,h=d*c;t.data[s]=(c*t.data[s]+d*e.data[s]-h)/f|0,t.data[s+1]=(c*t.data[s+1]+d*e.data[s+1]-h)/f|0,t.data[s+2]=(c*t.data[s+2]+d*e.data[s+2]-h)/f|0,t.data[s+3]=f}}},i.subtractOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255-h|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255-h|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255-h|0)}},i.subtractOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;h&&(t.data[l]=t.data[l]+h*e.data[l]/255-h|0,t.data[l+1]=t.data[l+1]+h*e.data[l+1]/255-h|0,t.data[l+2]=t.data[l+2]+h*e.data[l+2]/255-h|0)}},i.subtractOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=h*p;t.data[l]=(p*t.data[l]+h*e.data[l]-g)/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1]-g)/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2]-g)/m|0,t.data[l+3]=m}}},i.subtractOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=h+(p=t.data[l+3])-(h*p/255|0)|0,g=h*p;t.data[l]=(p*t.data[l]+h*e.data[l]-g)/m|0,t.data[l+1]=(p*t.data[l+1]+h*e.data[l+1]-g)/m|0,t.data[l+2]=(p*t.data[l+2]+h*e.data[l+2]-g)/m|0,t.data[l+3]=m}}},i.screenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=255^((255^c)*f+(255^e.data[s])*(255^c)*d/255)/255,c=t.data[s+1],t.data[s+1]=255^((255^c)*f+(255^e.data[s+1])*(255^c)*d/255)/255,c=t.data[s+2],t.data[s+2]=255^((255^c)*f+(255^e.data[s+2])*(255^c)*d/255)/255}}},i.screenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=255^((255^c)*f+(255^e.data[s])*(255^c)*d/255)/255,c=t.data[s+1],t.data[s+1]=255^((255^c)*f+(255^e.data[s+1])*(255^c)*d/255)/255,c=t.data[s+2],t.data[s+2]=255^((255^c)*f+(255^e.data[s+2])*(255^c)*d/255)/255}}},i.screenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,t.data[s+3]=p}}},i.screenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=255^((255^f)*g+(255^h)*v+(255^f)*(255^h)*m/255)/p,t.data[s+3]=p}}},i.screenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=255^((255^p)*m+(255^e.data[l])*(255^p)*h/255)/255,p=t.data[l+1],t.data[l+1]=255^((255^p)*m+(255^e.data[l+1])*(255^p)*h/255)/255,p=t.data[l+2],t.data[l+2]=255^((255^p)*m+(255^e.data[l+2])*(255^p)*h/255)/255}}},i.screenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=255^((255^p)*m+(255^e.data[l])*(255^p)*h/255)/255,p=t.data[l+1],t.data[l+1]=255^((255^p)*m+(255^e.data[l+1])*(255^p)*h/255)/255,p=t.data[l+2],t.data[l+2]=255^((255^p)*m+(255^e.data[l+2])*(255^p)*h/255)/255}}},i.screenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=255^((255^m)*_+(255^g)*b+(255^m)*(255^g)*y/255)/v,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=255^((255^m)*_+(255^g)*b+(255^m)*(255^g)*y/255)/v,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=255^((255^m)*_+(255^g)*b+(255^m)*(255^g)*y/255)/v,t.data[l+3]=v}}},i.screenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=255^((255^m)*_+(255^g)*b+(255^m)*(255^g)*y/255)/v,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=255^((255^m)*_+(255^g)*b+(255^m)*(255^g)*y/255)/v,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=255^((255^m)*_+(255^g)*b+(255^m)*(255^g)*y/255)/v,t.data[l+3]=v}}},i.lightenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?f:(f*h+c*d)/255|0}}},i.lightenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?f:(f*h+c*d)/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?f:(f*h+c*d)/255|0}}},i.lightenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=c*(255^d)/p|0,g=255^m,v=d*(255^c)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?f*v+h*y:h*m+f*g)/255|0,t.data[s+3]=p}}},i.lightenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=c*(255^d)/p|0,g=255^m,v=d*(255^c)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?f*v+h*y:h*m+f*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?f*v+h*y:h*m+f*g)/255|0,t.data[s+3]=p}}},i.lightenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?m:(m*g+p*h)/255|0}}},i.lightenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?m:(m*g+p*h)/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?m:(m*g+p*h)/255|0}}},i.lightenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=p*(255^h)/v|0,_=255^y,b=h*(255^p)/v|0,w=255^b;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?m*b+g*w:g*y+m*_)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?m*b+g*w:g*y+m*_)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?m*b+g*w:g*y+m*_)/255|0,t.data[l+3]=v}}},i.lightenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=p*(255^h)/v|0,_=255^y,b=h*(255^p)/v|0,w=255^b;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?m*b+g*w:g*y+m*_)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?m*b+g*w:g*y+m*_)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?m*b+g*w:g*y+m*_)/255|0,t.data[l+3]=v}}},i.darkenOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?(f*h+c*d)/255|0:f}}},i.darkenOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=c<=f?(f*h+c*d)/255|0:f,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=c<=f?(f*h+c*d)/255|0:f}}},i.darkenOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*(255^c)/p|0,g=255^m,v=c*(255^d)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?h*v+f*y:f*m+h*g)/255|0,t.data[s+3]=p}}},i.darkenOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*(255^c)/p|0,g=255^m,v=c*(255^d)/p|0,y=255^v;f=e.data[s],h=t.data[s],t.data[s]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f<=h?h*v+f*y:f*m+h*g)/255|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f<=h?h*v+f*y:f*m+h*g)/255|0,t.data[s+3]=p}}},i.darkenOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?(m*g+p*h)/255|0:m}}},i.darkenOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=p<=m?(m*g+p*h)/255|0:m,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=p<=m?(m*g+p*h)/255|0:m}}},i.darkenOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*(255^p)/v|0,_=255^y,b=p*(255^h)/v|0,w=255^b;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?g*b+m*w:m*y+g*_)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?g*b+m*w:m*y+g*_)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?g*b+m*w:m*y+g*_)/255|0,t.data[l+3]=v}}},i.darkenOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*(255^p)/v|0,_=255^y,b=p*(255^h)/v|0,w=255^b;m=e.data[l],g=t.data[l],t.data[l]=(m<=g?g*b+m*w:m*y+g*_)/255|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m<=g?g*b+m*w:m*y+g*_)/255|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m<=g?g*b+m*w:m*y+g*_)/255|0,t.data[l+3]=v}}},i.dodgeOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0}}},i.dodgeOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(255==c?255:Math.min(255,255*f/(255^c)|0)))/255|0}}},i.dodgeOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,t.data[s+3]=p}}},i.dodgeOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(255==f?255:Math.min(255,255*h/(255^f)|0)))/p|0,t.data[s+3]=p}}},i.dodgeOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0}}},i.dodgeOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(255==p?255:Math.min(255,255*m/(255^p)|0)))/255|0}}},i.dodgeOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,t.data[l+3]=v}}},i.dodgeOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+y*(255==m?255:Math.min(255,255*g/(255^m)|0)))/v|0,t.data[l+3]=v}}},i.burnOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0}}},i.burnOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(f*h+d*(0==c?0:255^Math.min(255,255*(255^f)/c)))/255|0}}},i.burnOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,t.data[s+3]=p}}},i.burnOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(f*g+h*v+m*(0==f?0:255^Math.min(255,255*(255^h)/f)))/p|0,t.data[s+3]=p}}},i.burnOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0}}},i.burnOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(m*g+h*(0==p?0:255^Math.min(255,255*(255^m)/p)))/255|0}}},i.burnOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,t.data[l+3]=v}}},i.burnOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(m*_+g*b+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(m*_+g*b+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(m*_+g*b+y*(0==m?0:255^Math.min(255,255*(255^g)/m)))/v|0,t.data[l+3]=v}}},i.overlayOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.overlayOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(f<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.overlayOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.overlayOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(h<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.overlayOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.overlayOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(m<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.overlayOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.overlayOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(g<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.hardLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.hardLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?2*d*c*f/255:d*(2*(255^c)*(255^f)/255^255)))/255|0}}},i.hardLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.hardLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?2*m*f*h/255:m*(2*(255^f)*(255^h)/255^255)))/p|0,t.data[s+3]=p}}},i.hardLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.hardLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?2*h*p*m/255:h*(2*(255^p)*(255^m)/255^255)))/255|0}}},i.hardLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.hardLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(m<=127?2*y*m*g/255:y*(2*(255^m)*(255^g)/255^255)))/v|0,t.data[l+3]=v}}},i.softLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(c<=127?((2*c-255)*w[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(c<=127?((2*c-255)*w[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(c<=127?((2*c-255)*w[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0}}},i.softLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(c<=127?((2*c-255)*w[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(c<=127?((2*c-255)*w[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(c<=127?((2*c-255)*w[f]/255|0)+f:((2*c-255)*E[f]/255|0)+f))/255|0}}},i.softLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(((2*f-255)*w[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(((2*f-255)*w[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(((2*f-255)*w[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,t.data[s+3]=p}}},i.softLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(((2*f-255)*w[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(((2*f-255)*w[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(((2*f-255)*w[h]/255|0)+h):m*(((2*f-255)*E[h]/255|0)+h)))/p|0,t.data[s+3]=p}}},i.softLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(p<=127?((2*p-255)*w[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(p<=127?((2*p-255)*w[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(p<=127?((2*p-255)*w[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0}}},i.softLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(p<=127?((2*p-255)*w[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(p<=127?((2*p-255)*w[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(p<=127?((2*p-255)*w[m]/255|0)+m:((2*p-255)*E[m]/255|0)+m))/255|0}}},i.softLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(m<=127?y*(((2*m-255)*w[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(m<=127?y*(((2*m-255)*w[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(m<=127?y*(((2*m-255)*w[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,t.data[l+3]=v}}},i.softLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(m<=127?y*(((2*m-255)*w[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(m<=127?y*(((2*m-255)*w[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(m<=127?y*(((2*m-255)*w[g]/255|0)+g):y*(((2*m-255)*E[g]/255|0)+g)))/v|0,t.data[l+3]=v}}},i.vividLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0}}},i.vividLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+(c<=127?d*(0==c?0:255-Math.min(255,255*(255-f)/(2*c)|0)):d*(255==c?255:Math.min(255,255*f/(2*(255-c))|0))))/255|0}}},i.vividLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,t.data[s+3]=p}}},i.vividLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+(f<=127?m*(0==f?0:255-Math.min(255,255*(255-h)/(2*f)|0)):m*(255==f?255:Math.min(255,255*h/(2*(255-f))|0))))/p|0,t.data[s+3]=p}}},i.vividLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0}}},i.vividLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+(p<=127?h*(0==p?0:255-Math.min(255,255*(255-m)/(2*p)|0)):h*(255==p?255:Math.min(255,255*m/(2*(255-p))|0))))/255|0}}},i.vividLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,t.data[l+3]=v}}},i.vividLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+(m<=127?y*(0==m?0:255-Math.min(255,255*(255-g)/(2*m)|0)):y*(255==m?255:Math.min(255,255*g/(2*(255-m))|0))))/v|0,t.data[l+3]=v}}},i.linearLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s]-255)))/255|0,c=t.data[s+1],t.data[s+1]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+1]-255)))/255|0,c=t.data[s+2],t.data[s+2]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+2]-255)))/255|0}}},i.linearLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0;if(d){var f=255^d;c=t.data[s],t.data[s]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s]-255)))/255|0,c=t.data[s+1],t.data[s+1]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+1]-255)))/255|0,c=t.data[s+2],t.data[s+2]=(f*c+d*Math.min(255,Math.max(0,c+2*e.data[s+2]-255)))/255|0}}},i.linearLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,t.data[s+3]=p}}},i.linearLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*Math.min(255,Math.max(0,h+2*f-255)))/p|0,t.data[s+3]=p}}},i.linearLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l]-255)))/255|0,p=t.data[l+1],t.data[l+1]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+1]-255)))/255|0,p=t.data[l+2],t.data[l+2]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+2]-255)))/255|0}}},i.linearLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0;if(h){var m=255^h;p=t.data[l],t.data[l]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l]-255)))/255|0,p=t.data[l+1],t.data[l+1]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+1]-255)))/255|0,p=t.data[l+2],t.data[l+2]=(m*p+h*Math.min(255,Math.max(0,p+2*e.data[l+2]-255)))/255|0}}},i.linearLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,t.data[l+3]=v}}},i.linearLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+y*Math.min(255,Math.max(0,g+2*m-255)))/v|0,t.data[l+3]=v}}},i.pinLightOntoOpaqueFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0}}},i.pinLightOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;if(d){var h=255^d;c=e.data[s],f=t.data[s],t.data[s]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+1],f=t.data[s+1],t.data[s+1]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0,c=e.data[s+2],f=t.data[s+2],t.data[s+2]=(h*f+d*(2*c<=f?2*c:f<=2*c-255?2*c-255:f))/255|0}}},i.pinLightOntoTransparentFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,t.data[s+3]=p}}},i.pinLightOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0,h=void 0;if(d){var p=d+(c=t.data[s+3])-(d*c/255|0)|0,m=d*c/255|0,g=d*(255^c)/255|0,v=(255^d)*c/255|0;f=e.data[s],h=t.data[s],t.data[s]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+1],h=t.data[s+1],t.data[s+1]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,f=e.data[s+2],h=t.data[s+2],t.data[s+2]=(g*f+v*h+m*(2*f<=h?2*f:h<=2*f-255?2*f-255:h))/p|0,t.data[s+3]=p}}},i.pinLightOntoOpaqueFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0}}},i.pinLightOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0;if(h){var g=255^h;p=e.data[l],m=t.data[l],t.data[l]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+1],m=t.data[l+1],t.data[l+1]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0,p=e.data[l+2],m=t.data[l+2],t.data[l+2]=(g*m+h*(2*p<=m?2*p:m<=2*p-255?2*p-255:m))/255|0}}},i.pinLightOntoTransparentFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,t.data[l+3]=v}}},i.pinLightOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0,p=void 0,m=void 0,g=void 0;if(h){var v=h+(p=t.data[l+3])-(h*p/255|0)|0,y=h*p/255|0,_=h*(255^p)/255|0,b=(255^h)*p/255|0;m=e.data[l],g=t.data[l],t.data[l]=(_*m+b*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+1],g=t.data[l+1],t.data[l+1]=(_*m+b*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,m=e.data[l+2],g=t.data[l+2],t.data[l+2]=(_*m+b*g+y*(2*m<=g?2*m:g<=2*m-255?2*m-255:g))/v|0,t.data[l+3]=v}}},i.passthroughOntoOpaqueFusionWithOpaqueLayer=i.passthroughOntoOpaqueFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=n/100,f=1-c,h=d*c+255*f;t.data[s]=(e.data[s]*d*c+255*t.data[s]*f)/h|0,t.data[s+1]=(e.data[s+1]*d*c+255*t.data[s+1]*f)/h|0,t.data[s+2]=(e.data[s+2]*d*c+255*t.data[s+2]*f)/h|0,t.data[s+3]=h}},i.passthroughOntoTransparentFusionWithOpaqueLayer=i.passthroughOntoTransparentFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=t.data[s+3],f=n/100,h=1-f,p=d*f+c*h;t.data[s]=(e.data[s]*d*f+t.data[s]*c*h)/p|0,t.data[s+1]=(e.data[s+1]*d*f+t.data[s+1]*c*h)/p|0,t.data[s+2]=(e.data[s+2]*d*f+t.data[s+2]*c*h)/p|0,t.data[s+3]=p}},i.passthroughOntoOpaqueFusionWithOpaqueLayerMasked=i.passthroughOntoOpaqueFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3],p=i.data[d]*n/25500,m=1-p,g=h*p+255*m;t.data[l]=(e.data[l]*h*p+255*t.data[l]*m)/g|0,t.data[l+1]=(e.data[l+1]*h*p+255*t.data[l+1]*m)/g|0,t.data[l+2]=(e.data[l+2]*h*p+255*t.data[l+2]*m)/g|0,t.data[l+3]=g}},i.passthroughOntoTransparentFusionWithOpaqueLayerMasked=i.passthroughOntoTransparentFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3],p=t.data[l+3],m=i.data[d]*n/25500,g=1-m,v=h*m+p*g;t.data[l]=(e.data[l]*h*m+t.data[l]*p*g)/v|0,t.data[l+1]=(e.data[l+1]*h*m+t.data[l+1]*p*g)/v|0,t.data[l+2]=(e.data[l+2]*h*m+t.data[l+2]*p*g)/v|0,t.data[l+3]=v}},i.replaceOntoFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0;t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2],t.data[s+3]=d}},i.replaceOntoFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3];t.data[s]=e.data[s],t.data[s+1]=e.data[s+1],t.data[s+2]=e.data[s+2],t.data[s+3]=d}},i.replaceOntoFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2],t.data[l+3]=h}},i.replaceOntoFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;t.data[l]=e.data[l],t.data[l+1]=e.data[l+1],t.data[l+2]=e.data[l+2],t.data[l+3]=h}},i.replaceAlphaOntoFusionWithTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0;t.data[s+3]=d}},i.replaceAlphaOntoFusionWithTransparentLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]*n/25500|0;t.data[l+3]=h}},i.replaceAlphaOntoFusionWithOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3];t.data[s+3]=d}},i.replaceAlphaOntoFusionWithOpaqueLayerMasked=function(t,e,n,a,i){for(var o=0|a.getHeight(),r=0|a.getWidth(),s=4*(e.width-r)|0,l=0|e.offsetOfPixel(a.left,a.top),u=i.width-r|0,d=0|i.offsetOfPixel(a.left,a.top),c=0;c<o;c++,l+=s,d+=u)for(var f=0;f<r;f++,l+=4,d++){var h=e.data[l+3]*i.data[d]/255|0;t.data[l+3]=h}},i.upgradeMultiplyOfOpaqueLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3],c=void 0,f=void 0;d&&(c=e.data[s],f=t.data[s],e.data[s]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+1],f=t.data[s+1],e.data[s+1]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+2],f=t.data[s+2],e.data[s+2]=c+Math.ceil((255-c)*f*d%65025/(f*d)))}},i.upgradeMultiplyOfTransparentLayer=function(t,e,n,a){for(var i=0|a.getHeight(),o=0|a.getWidth(),r=4*(e.width-o)|0,s=0|e.offsetOfPixel(a.left,a.top),l=0;l<i;l++,s+=r)for(var u=0;u<o;u++,s+=4){var d=e.data[s+3]*n/100|0,c=void 0,f=void 0;d&&(c=e.data[s],f=t.data[s],e.data[s]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+1],f=t.data[s+1],e.data[s+1]=c+Math.ceil((255-c)*f*d%65025/(f*d)),c=e.data[s+2],f=t.data[s+2],e.data[s+2]=c+Math.ceil((255-c)*f*d%65025/(f*d)))}},i._normalFuseImageOntoImageAtPosition=function(t,e,n,a,i,o){for(var r=0|a.getHeight(),s=0|a.getWidth(),l=4*(e.width-s)|0,u=0|e.offsetOfPixel(a.left,a.top),d=4*(t.width-s)|0,c=0|t.offsetOfPixel(i,o),f=0;f<r;f++,u+=l,c+=d)for(var h=0;h<s;h++,u+=4,c+=4){var p=e.data[u+3],m=void 0;if(p){var g=p+(m=t.data[c+3])-(p*m/255|0)|0,v=255*p/g|0,y=255-v;t.data[c]=(e.data[u]*v+t.data[c]*y)/255|0,t.data[c+1]=(e.data[u+1]*v+t.data[c+1]*y)/255|0,t.data[c+2]=(e.data[u+2]*v+t.data[c+2]*y)/255|0,t.data[c+3]=g}}},i.LM_NORMAL=0,i.LM_MULTIPLY=1,i.LM_ADD=2,i.LM_SCREEN=3,i.LM_LIGHTEN=4,i.LM_DARKEN=5,i.LM_SUBTRACT=6,i.LM_DODGE=7,i.LM_BURN=8,i.LM_OVERLAY=9,i.LM_HARDLIGHT=10,i.LM_SOFTLIGHT=11,i.LM_VIVIDLIGHT=12,i.LM_LINEARLIGHT=13,i.LM_PINLIGHT=14,i.LM_PASSTHROUGH=15,i.LM_MULTIPLY2=16,i.LM_FIRST=0,i.LM_LAST=16,i.LM_LAST_CHIBIPAINT=i.LM_PINLIGHT,i.BLEND_MODE_CODENAMES=["normal","multiply","add","screen","lighten","darken","subtract","dodge","burn","overlay","hardLight","softLight","vividLight","linearLight","pinLight","passthrough","multiply2"],i.BLEND_MODE_DISPLAY_NAMES=["Normal","Multiply","Add","Screen","Lighten","Darken","Subtract","Dodge","Burn","Overlay","Hard Light","Soft Light","Vivid Light","Linear Light","Pin Light","Passthrough","Multiply"],function(){for(var t=0;t<256;t++){var e=t/255;w[t]=255*(e-e*e)|0}for(var n=0;n<256;n++){var a=n/255;E[n]=255*(Math.sqrt(a)-a)|0}}(),e.exports=n.default},{"../util/CPRect":59,"./CPColorBmp":13,"./CPGreyBmp":14,"./CPLayer":16}],6:[function(t,e,n){"use strict";var l=a(t("./CPBlend")),s=a(t("../util/CPRect")),r=a(t("./CPColorBmp"));a(t("./CPGreyBmp"));function a(t){return t&&t.__esModule?t:{default:t}}l.default.blendFunctionNameForParameters=function(t,e,n,a){var i=l.default.BLEND_MODE_CODENAMES[n]+"Onto";return i+=t?"TransparentFusion":"OpaqueFusion",i+=100==e?"WithOpaqueLayer":"WithTransparentLayer",a&&(i+="Masked"),i},l.default.fuseImageOntoImage=function(t,e,n,a,i,o,r){if(!(a<=0)){var s=l.default.blendFunctionNameForParameters(e,a,i,null!=r);o=t.getBounds().clipTo(o),this[s](t,n,a,o,r)}},l.default.normalFuseImageOntoImageAtPosition=function(t,e,n,a,i){var o=i.clone(),r=new s.default(n,a,0,0);t.getBounds().clipSourceDest(o,r),this._normalFuseImageOntoImageAtPosition(t,e,100,o,r.left,r.top)},l.default.multiplyAlphaBy=function(t,e){if(e<100)if(0==e)t.clearAll(0);else for(var n=t.data,a=3;a<n.length;a+=4)n[a]=Math.round(n[a]*e/100)},l.default.multiplyAlphaByMask=function(t,e,n){for(var a=e/25500,i=r.default.ALPHA_BYTE_OFFSET,o=0;i<t.data.length;i+=r.default.BYTES_PER_PIXEL,o++)t.data[i]=Math.round(t.data[i]*n.data[o]*a)},l.default.copyAndMultiplyAlphaBy=function(t,e,n,a){if(100==n)t.copyBitmapRect(e,a.left,a.top,a);else if(0==n)t.clearRect(a,0);else for(var i=e.data,o=0;o<i.length;o+=4)i[o]=i[o],i[o+1]=i[o+1],i[o+2]=i[o+2],i[o+3]=Math.round(i[o+3]*n/100)}},{"../util/CPRect":59,"./CPBlend":5,"./CPColorBmp":13,"./CPGreyBmp":14}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,l,u,n){var a,c=!1,i=[],o=new Map;function r(){return 0<i.length?i.pop():new y.default(l,u)}function d(t){if(0==t.layers.length)return null;if(1!=t.layers.length||null!=t.mask&&null!=t.layers[0].mask)return t.blendMode==g.default.LM_PASSTHROUGH&&100==t.alpha&&null==t.mask?t.layers:(t.image=r(),t);var e=t.layers[0];return e.alpha=Math.round(t.alpha*e.alpha/100),t.blendMode!=g.default.LM_PASSTHROUGH&&(e.blendMode=t.blendMode),e.mask=t.mask||e.mask,t.layer&&o.set(t.layer,e),e}function f(t){var e=new E(l,u,t);return o.set(t,e),e}function s(t,e){t&&(t.dirtyRect.union(e),s(t.parent,e))}function h(t){if(t.isGroup){t.image&&i.push(t.image);var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}(t.layers);try{for(n.s();!(e=n.n()).done;){var a=e.value;h(a)}}catch(t){n.e(t)}finally{n.f()}}}function p(t,e,n,a,i){if(100!=n||i||a.getWidth()!=t.width||a.getHeight()!=t.height){var o="replaceOntoFusionWith";o+=100==n?"OpaqueLayer":"TransparentLayer",i&&(o+="Masked"),c&&console.log("CPBlend.".concat(o,"(dest, source, sourceAlpha = ").concat(n,", rect = ").concat(a,", mask = ").concat(i,");")),g.default[o](t,e,n,a,i)}else c&&console.log("CPColorBmp.copyDataFrom(source);"),t.copyPixelsFrom(e)}function m(t){if(!t||!t.isGroup)return t;var e,n,a,i=t.dirtyRect,o=!0,r=!0;if(t.blendMode==g.default.LM_PASSTHROUGH&&t.parent&&i.union(t.parent.dirtyRect),i.isEmpty())return t;t.blendMode==g.default.LM_PASSTHROUGH&&t.parent&&(o=!1,e=t.image,n=t.parent.image,(a=i).getWidth()==e.width&&a.getHeight()==e.height?(c&&console.log("CPColorBmp.copyDataFrom(source);"),e.copyPixelsFrom(n)):(c&&console.log("CPBlend.replaceOntoFusionWithOpaqueLayer(dest, source, 100, ".concat(a,");")),g.default.replaceOntoFusionWithOpaqueLayer(e,n,100,a)));for(var s=0;s<t.layers.length;s++){var l=t.layers[s],u=m(l);o?(p(t.image,u.image,u.alpha,i,u.mask),o=!1):(r=r&&t.image.hasAlphaInRect(i),c&&console.log("CPBlend.fuseImageOntoImage(treeNode.image, fusionHasTransparency == ".concat(r,", childNode.image, childNode.alpha == ").concat(u.alpha,", childNode.blendMode == ").concat(u.blendMode,", ").concat(i,", ").concat(u.mask,");")),g.default.fuseImageOntoImage(t.image,r,u.image,u.alpha,u.blendMode,i,u.mask))}if(t.clip){var d=t.layers[0];d.alpha<100?d.mask?(c&&console.log("CPBlend.replaceAlphaOntoFusionWithTransparentLayerMasked(treeNode.image, baseLayer.image, treeNode.layers[0].alpha == ".concat(t.layers[0].alpha,", ").concat(i,");")),g.default.replaceAlphaOntoFusionWithTransparentLayerMasked(t.image,d.image,d.alpha,i,d.mask)):(c&&console.log("CPBlend.replaceAlphaOntoFusionWithTransparentLayer(treeNode.image, baseLayer.image, treeNode.layers[0].alpha == ".concat(t.layers[0].alpha,", ").concat(i,");")),g.default.replaceAlphaOntoFusionWithTransparentLayer(t.image,d.image,d.alpha,i)):d.mask?(c&&console.log("CPBlend.replaceAlphaOntoFusionWithOpaqueLayerMasked(treeNode.image, baseLayer.image, 100, ".concat(i,");")),g.default.replaceAlphaOntoFusionWithOpaqueLayerMasked(t.image,d.image,100,i,d.mask)):(c&&console.log("CPBlend.replaceAlphaOntoFusionWithOpaqueLayer(treeNode.image, baseLayer.image, 100, ".concat(i,");")),g.default.replaceAlphaOntoFusionWithOpaqueLayer(t.image,d.image,100,i))}return t.dirtyRect.makeEmpty(),t}this.invalidateLayerRect=function(t,e){var n=o.get(t);s(n,e)},this.buildTree=function(){if(!a){if(a=function t(e){if(0==e.getEffectiveAlpha())return null;var n=f(e);for(var a=0;a<e.layers.length;a++){var i=e.layers[a],o=e.layers[a+1];if(i instanceof _.default&&o&&o.clip){var r=new E(l,u,null),s=void 0;for(r.blendMode=i.blendMode,r.alpha=100,r.clip=!0,r.addChildren(f(i)),s=a+1;s<e.layers.length&&e.layers[s].clip;s++)0<e.layers[s].getEffectiveAlpha()&&r.addChildren(f(e.layers[s]));0<i.getEffectiveAlpha()&&n.addChildren(d(r)),a=s-1}else i instanceof v.default?n.addChildren(t(i)):0<i.getEffectiveAlpha()&&n.addChildren(f(i))}return d(n)}(e)){if(Array.isArray(a)||n&&(a.alpha<100||a.mask)){var t=a;(a=new E(l,u)).blendMode=Array.isArray(t)?g.default.LM_NORMAL:t.blendMode,a.alpha=100,a.image=r(),a.addChildren(t)}}else(a=new E(l,u,{image:r(),blendMode:g.default.LM_NORMAL,alpha:100,getEffectiveMask:function(){return null},visible:!0})).image.clearAll(0);i=[]}},this.resetTree=function(){a&&(h(a),a=null,o.clear())},this.layerPropertyChanged=function(t,e){var n=o.get(t);n&&n.visible==t.visible&&n.alpha==t.alpha&&null==n.mask==(null==t.getEffectiveMask())&&n.blendMode==g.default.LM_PASSTHROUGH==(t.blendMode==g.default.LM_PASSTHROUGH)&&"clip"!==e?(n.blendMode=t.blendMode,s(n,new b.default(0,0,l,u))):this.resetTree()},this.blendTree=function(){return c&&console.log("Fusing layers..."),m(a)}};var g=a(t("./CPBlend"));t("./CPBlendAdditional");a(t("./CPLayer"));var v=a(t("./CPLayerGroup")),y=a(t("./CPColorBmp")),_=a(t("./CPImageLayer")),b=a(t("../util/CPRect"));function a(t){return t&&t.__esModule?t:{default:t}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function E(t,e,n){n?(this.isGroup=n instanceof v.default,this.image=n.image,this.mask=n.getEffectiveMask(),this.layer=n,this.blendMode=n.blendMode,this.alpha=n.alpha,this.visible=n.visible):(this.isGroup=!0,this.image=null,this.mask=null,this.layer=null,this.blendMode=g.default.LM_PASSTHROUGH,this.alpha=100,this.visible=!0),this.dirtyRect=new b.default(0,0,t,e),this.layers=[],this.parent=null,this.clip=!1}E.prototype.addChildren=function(t){var e=this;if(null!=t)if(Array.isArray(t))t.forEach(function(t){return t.parent=e}),this.layers=this.layers.concat(t);else{var n=t;(n.parent=this).layers.push(n)}},e.exports=n.default},{"../util/CPRect":59,"./CPBlend":5,"./CPBlendAdditional":6,"./CPColorBmp":13,"./CPImageLayer":15,"./CPLayer":16,"./CPLayerGroup":17}],8:[function(t,e,n){"use strict";function a(t){var e;for(e in a.DEFAULTS)a.DEFAULTS.hasOwnProperty(e)&&(this[e]=a.DEFAULTS[e]);for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).STROKE_MODE_FREEHAND=0,a.STROKE_MODE_LINE=1,a.STROKE_MODE_BEZIER=2,a.TIP_ROUND_PIXEL=0,a.TIP_ROUND_AA=1,a.TIP_ROUND_AIRBRUSH=2,a.TIP_SQUARE_PIXEL=3,a.TIP_SQUARE_AA=4,a.BRUSH_MODE_PAINT=0,a.BRUSH_MODE_ERASE=1,a.BRUSH_MODE_DODGE=2,a.BRUSH_MODE_BURN=3,a.BRUSH_MODE_WATER=4,a.BRUSH_MODE_BLUR=5,a.BRUSH_MODE_SMUDGE=6,a.BRUSH_MODE_OIL=7,a.PAINT_MODE_OPACITY=0,a.PAINT_MODE_FLOW=1,a.DEFAULTS={isAA:!1,minSpacing:0,spacing:0,pressureSize:!0,pressureAlpha:!1,pressureScattering:!1,alphaScale:1,tip:a.TIP_ROUND_PIXEL,brushMode:a.BRUSH_MODE_PAINT,paintMode:a.PAINT_MODE_OPACITY,strokeMode:a.STROKE_MODE_FREEHAND,resat:1,bleed:0,texture:1,size:0,curSize:0,alpha:0,curAlpha:0,scattering:0,curScattering:0,squeeze:0,curSqueeze:0,angle:Math.PI,curAngle:0,smoothing:0},a.prototype.applyPressure=function(t){this.pressureSize&&this.brushMode!=a.BRUSH_MODE_SMUDGE&&this.brushMode!=a.BRUSH_MODE_OIL?this.curSize=Math.max(.1,this.size*t):this.curSize=Math.max(.1,this.size),16<this.curSize&&(this.curSize=Math.floor(this.curSize)),this.curSize=Math.min(this.curSize,400),this.curAlpha=this.pressureAlpha?Math.floor(this.alpha*Math.min(t,1)):this.alpha,this.curSqueeze=this.squeeze,this.curAngle=this.angle,this.curScattering=this.scattering*this.curSize*(this.pressureScattering?t:1)},a.prototype.clone=function(){return new a(this)},e.exports=n.default},{}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,n,a,i,c=new Uint8Array(160801),_=new Uint8Array(161604),b=[new Float32Array(402),new Float32Array(402)],o=null,h=this;function w(t){if(null!=o&&t.curSize==e&&t.curSqueeze==n&&t.curAngle==a&&t.tip==i)return o;switch(t.tip){case f.default.TIP_ROUND_AIRBRUSH:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),o=1+e.curSqueeze*T,r=Math.cos(e.curAngle),s=Math.sin(e.curAngle),l=0,u=0;u<n;u++)for(var d=0;d<n;d++){var c=d+.5-a,f=u+.5-a,h=(c*r-f*s)*o,p=f*r+c*s,m=h*h+p*p;t[l++]=m<=i?~~(255*(1-m/i)):0}}(c,t);break;case f.default.TIP_ROUND_AA:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),o=(e.curSize-2)/2*((e.curSize-2)/2),r=(e.curSize+2)/2*((e.curSize+2)/2),s=1+e.curSqueeze*T,l=Math.cos(e.curAngle),u=Math.sin(e.curAngle),d=0,c=0;c<n;c++)for(var f=0;f<n;f++){var h=f+.5-a,p=c+.5-a,m=(h*l-p*u)*s,g=p*l+h*u,v=m*m+g*g;if(v<=o)t[d++]=255;else if(r<v)t[d++]=0;else{for(var y=0,_=0;_<4;_++)for(var b=0;b<4;b++)(v=(m=((h=f+.25*b-a)*l-(p=c+.25*_-a)*u)*s)*m+(g=p*l+h*u)*g)<=i&&(y+=1);t[d++]=Math.min(16*y,255)}}}(c,t);break;case f.default.TIP_ROUND_PIXEL:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize/2*(e.curSize/2),o=1+e.curSqueeze*T,r=Math.cos(e.curAngle),s=Math.sin(e.curAngle),l=0,u=0;u<n;u++)for(var d=0;d<n;d++){var c=d+.5-a,f=u+.5-a,h=(c*r-f*s)*o,p=f*r+c*s,m=h*h+p*p;t[l++]=m<=i?255:0}}(c,t);break;case f.default.TIP_SQUARE_AA:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize*Math.sin(Math.PI/4),o=i/2/(1+e.curSqueeze*T),r=i/2,s=o-1,l=r-1,u=o+1,d=r+1,c=Math.cos(e.curAngle),f=Math.sin(e.curAngle),h=0,p=0;p<n;p++)for(var m=0;m<n;m++){var g=m+.5-a,v=p+.5-a,y=Math.abs(g*c-v*f),_=Math.abs(v*c+g*f);if(y<=s&&_<=l)t[h++]=255;else if(u<y||d<_)t[h++]=0;else{for(var b=0,w=0;w<4;w++)for(var E=0;E<4;E++)g=m+.25*E-a,v=p+.25*w-a,y=Math.abs(g*c-v*f),_=Math.abs(v*c+g*f),y<=o&&_<=r&&b++;t[h++]=Math.min(16*b,255)}}}(c,t);break;case f.default.TIP_SQUARE_PIXEL:!function(t,e){for(var n=Math.ceil(e.curSize),a=n/2,i=e.curSize*Math.sin(Math.PI/4),o=i/2/(1+e.curSqueeze*T),r=i/2,s=Math.cos(e.curAngle),l=Math.sin(e.curAngle),u=0,d=0;d<n;d++)for(var c=0;c<n;c++){var f=c+.5-a,h=d+.5-a,p=Math.abs(f*s-h*l),m=Math.abs(h*s+f*l);t[u++]=p<=o&&m<=r?255:0}}(c,t)}return o=c,e=t.curSize,i=t.tip,n=t.curSqueeze,a=t.curAngle,c}this.getDab=function(t,e,n){var a={alpha:n.curAlpha,width:Math.ceil(n.curSize),height:Math.ceil(n.curSize)},i=n.isAA&&n.tip!=f.default.TIP_ROUND_PIXEL;i&&(a.width++,a.height++);var o=t-a.width/2+.5,r=e-a.height/2+.5,s=Math.floor(o),l=Math.floor(r);if(i){var u=o-s,d=r-l;a.brush=function(t,e,n){var a,i=w(t),o=Math.ceil(t.curSize),r=Math.ceil(t.curSize)+1,s=(1-e)*(1-n),l=e*(1-n),u=e*n,d=(1-e)*n,c=0,f=0,h=b[0],p=b[1];h.fill(0);for(var m=0;m<o;m++){var g=void 0;for(p[0]=0,g=0;g<o;g++,c++,f++){var v=i[c];_[f]=h[g]+v*s+.5|0,h[g+1]+=v*l,p[g]+=v*d,p[g+1]=v*u}_[f++]=h[g]+.5|0,a=h,h=p,p=a}for(var y=0;y<r;y++,f++)_[f]=h[y]+.5|0;return _}(n,u,d)}else a.brush=w(n);return a.x=s,a.y=l,0<n.texture&&null!=this.texture&&(a.brush==c&&(_.set(c),a.brush=_),function(t,e){var n,a,i=Math.floor(255*e),o=h.texture,r=t.x%o.width,s=t.y%o.height,l=0;r<0&&(r+=o.width);s<0&&(s+=o.height);for(var u=0;u<t.height;u++){n=s*o.width+r,a=s*o.width+o.width;for(var d=0;d<t.width;d++){var c=t.brush[l],f=o.data[n];t.brush[l]=~~(c*(f*i/255^255)/255),l++,++n==a&&(n-=o.width)}++s==o.height&&(s=0)}}(a,n.texture)),a},this.setTexture=function(t){this.texture=t}};var a,f=(a=t("./CPBrushInfo"))&&a.__esModule?a:{default:a};var T=10;e.exports=n.default},{"./CPBrushInfo":8}],10:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.CPBrushToolSmudge=n.CPBrushToolOil=n.CPBrushToolWatercolor=n.CPBrushToolBlur=n.CPBrushToolBurn=n.CPBrushToolDodge=n.CPBrushToolEraser=n.CPBrushTool=void 0;var T=a(t("./CPColorBmp")),v=a(t("./CPGreyBmp")),l=a(t("./CPBrushInfo")),y=a(t("../util/CPColorFloat"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=u(o);if(r){var i=u(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function _(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}function b(t){for(var e=new y.default(0,0,0),n=0;n<t.length;n++){var a=t[n];e.r+=a.r,e.g+=a.g,e.b+=a.b}return e.r/=t.length,e.g/=t.length,e.b/=t.length,e}function w(t,e,n){return t*(1-n)+e*n}var h=function(){function n(t,e){d(this,n),this._strokeBuffer=t,this._strokedRegion=e,this.wantsOutputAsInput=!0}return f(n,[{key:"paintDab",value:function(t,e,n,a,i,o,r){var s=Math.max(1,Math.ceil(o.alpha*a.alphaScale));switch(a.paintMode){case l.default.PAINT_MODE_FLOW:this._paintFlow(i,e,o.brush,o.width,s);break;case l.default.PAINT_MODE_OPACITY:this._paintOpacity(i,e,o.brush,o.width,s)}}},{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=e.data,r=t.data,s=n>>16&255,l=n>>8&255,u=255&n,d=0|i.getWidth(),c=0|i.getHeight(),f=this._strokeBuffer.offsetOfPixel(i.left,i.top),h=t.offsetOfPixel(i.left,i.top),p=this._strokeBuffer.width-d|0,m=(t.width-d)*T.default.BYTES_PER_PIXEL|0,g=0;g<c;g++,f+=p,h+=m)for(var v=0;v<d;v++,f++,h+=T.default.BYTES_PER_PIXEL){var y=a[f]/255+.5|0;if(0<y){var _=y+o[h+T.default.ALPHA_BYTE_OFFSET]*(255-y)/255|0,b=255*y/_|0,w=255-b;r[h]=(s*b+o[h]*w)/255&255,r[h+1]=(l*b+o[h+1]*w)/255&255,r[h+2]=(u*b+o[h+2]*w)/255&255,r[h+3]=_}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=e.data,r=t.data,s=0|i.getWidth(),l=0|i.getHeight(),u=t.offsetOfPixel(i.left,i.top),d=this._strokeBuffer.offsetOfPixel(i.left,i.top),c=this._strokeBuffer.width-s|0,f=t.width-s|0,h=0;h<l;h++,d+=c,u+=f)for(var p=0;p<s;p++,d++,u++){var m=a[d]/255|0;if(0<m){var g=255-m;r[u]=(n*m+o[u]*g)/255}}}},{key:"_paintFlow",value:function(t,e,n,a,i){var o=this._strokeBuffer.data,r=t.left+t.top*a,s=this._strokeBuffer.offsetOfPixel(e.left,e.top),l=e.getHeight(),u=e.getWidth(),d=a-u,c=this._strokeBuffer.width-u;this._strokedRegion.union(e);for(var f=0;f<l;f++,r+=d,s+=c)for(var h=0;h<u;h++,r++,s++){var p=n[r]*i;0!=p&&(o[s]=Math.min(65025,o[s]+(255-o[s]/255)*p/255))}}},{key:"_paintOpacity",value:function(t,e,n,a,i){var o=this._strokeBuffer.data,r=t.left+t.top*a,s=this._strokeBuffer.offsetOfPixel(e.left,e.top),l=e.getWidth(),u=a-l,d=this._strokeBuffer.width-l;i=Math.min(255,i),this._strokedRegion.union(e);for(var c=e.top;c<e.bottom;c++,r+=u,s+=d)for(var f=0;f<l;f++,r++,s++)o[s]=Math.max(n[r]*i,o[s])}},{key:"beginStroke",value:function(){}},{key:"endStroke",value:function(){}}]),n}();n.CPBrushTool=h;var p=function(t){o(n,h);var e=r(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=e.data,r=t.data,s=i.top;s<i.bottom;s++)for(var l=t.offsetOfPixel(i.left,s)+T.default.ALPHA_BYTE_OFFSET,u=this._strokeBuffer.offsetOfPixel(i.left,s),d=i.left;d<i.right;d++,l+=T.default.BYTES_PER_PIXEL){var c=a[u++]/255|0;if(0<c){var f=o[l];r[l]=f*(255-c)/255}}}}]),n}();n.CPBrushToolEraser=p;var m=function(t){o(n,h);var e=r(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=i.getWidth(),r=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=(t.width-o)*T.default.BYTES_PER_PIXEL,d=this._strokeBuffer.width-o,c=e.data,f=t.data,h=0;h<r;h++,l+=d,s+=u)for(var p=0;p<o;p++,l++,s+=T.default.BYTES_PER_PIXEL){var m=a[l]/255|0;if(0<m&&0!=c[s+T.default.ALPHA_BYTE_OFFSET]){var g=(m+255)/255;f[s+T.default.RED_BYTE_OFFSET]=c[s+T.default.RED_BYTE_OFFSET]*g,f[s+T.default.GREEN_BYTE_OFFSET]=c[s+T.default.GREEN_BYTE_OFFSET]*g,f[s+T.default.BLUE_BYTE_OFFSET]=c[s+T.default.BLUE_BYTE_OFFSET]*g}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=i.getWidth(),r=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=t.width-o,d=this._strokeBuffer.width-o,c=e.data,f=t.data,h=0;h<r;h++,l+=d,s+=u)for(var p=0;p<o;p++,l++,s++){var m=a[l]/255|0;if(0<m){var g=(m+255)/255;f[s]=Math.min(c[s]*g,255)}}}}]),n}();n.CPBrushToolDodge=m;var g=function(t){o(n,h);var e=r(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=i.getWidth(),r=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=(t.width-o)*T.default.BYTES_PER_PIXEL,d=this._strokeBuffer.width-o,c=e.data,f=t.data,h=0;h<r;h++,l+=d,s+=u)for(var p=0;p<o;p++,l++,s+=T.default.BYTES_PER_PIXEL){var m=a[l]/255|0;0<m&&0!=c[s+T.default.ALPHA_BYTE_OFFSET]&&(f[s+T.default.RED_BYTE_OFFSET]=c[s+T.default.RED_BYTE_OFFSET]-(260-c[s+T.default.RED_BYTE_OFFSET])*m/255|0,f[s+T.default.GREEN_BYTE_OFFSET]=c[s+T.default.GREEN_BYTE_OFFSET]-(260-c[s+T.default.GREEN_BYTE_OFFSET])*m/255|0,f[s+T.default.BLUE_BYTE_OFFSET]=c[s+T.default.BLUE_BYTE_OFFSET]-(260-c[s+T.default.BLUE_BYTE_OFFSET])*m/255|0)}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=i.getWidth(),r=i.getHeight(),s=t.offsetOfPixel(i.left,i.top),l=this._strokeBuffer.offsetOfPixel(i.left,i.top),u=t.width-o,d=this._strokeBuffer.width-o,c=e.data,f=t.data,h=0;h<r;h++,l+=d,s+=u)for(var p=0;p<o;p++,l++,s++){var m=a[l]/255|0;0<m&&(f[s]=Math.max(c[s]-(260-c[s])*m/255,0))}}}]),n}();n.CPBrushToolBurn=g;var E=function(t){o(n,h);var e=r(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a,i,o,r,s=this._strokeBuffer.data,l=this._strokedRegion,u=e.data,d=t.data,c=l.getWidth(),f=e.width*T.default.BYTES_PER_PIXEL,h=e.offsetOfPixel(l.left,l.top),p=this._strokeBuffer.offsetOfPixel(l.left,l.top),m=(e.width-c)*T.default.BYTES_PER_PIXEL,g=this._strokeBuffer.width-c,v=function(t){a+=u[t+T.default.RED_BYTE_OFFSET],i+=u[t+T.default.GREEN_BYTE_OFFSET],o+=u[t+T.default.BLUE_BYTE_OFFSET],r+=u[t+T.default.ALPHA_BYTE_OFFSET]},y=l.top;y<l.bottom;y++,h+=m,p+=g)for(var _=l.left;_<l.right;_++,h+=T.default.BYTES_PER_PIXEL,p++){var b=s[p]/255|0;if(0<b){var w=64+-63*b/255|0,E=w+4;a=w*u[h+T.default.RED_BYTE_OFFSET],i=w*u[h+T.default.GREEN_BYTE_OFFSET],o=w*u[h+T.default.BLUE_BYTE_OFFSET],r=w*u[h+T.default.ALPHA_BYTE_OFFSET],v(0<y?h-f:h),v(y<e.height-1?h+f:h),v(0<_?h-T.default.BYTES_PER_PIXEL:h),v(_<e.width-1?h+T.default.BYTES_PER_PIXEL:h),r/=E,a/=E,i/=E,o/=E,d[h+T.default.RED_BYTE_OFFSET]=0|a,d[h+T.default.GREEN_BYTE_OFFSET]=0|i,d[h+T.default.BLUE_BYTE_OFFSET]=0|o,d[h+T.default.ALPHA_BYTE_OFFSET]=0|r}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a,i=this._strokeBuffer.data,o=this._strokedRegion,r=e.data,s=t.data,l=o.getWidth(),u=e.width,d=e.offsetOfPixel(o.left,o.top),c=this._strokeBuffer.offsetOfPixel(o.left,o.top),f=e.width-l,h=this._strokeBuffer.width-l,p=o.top;p<o.bottom;p++,d+=f,c+=h)for(var m=o.left;m<o.right;m++,d++,c++){var g=i[c]/255|0;if(0<g){var v=64+-63*g/255|0,y=v+4;a=v*r[d],a+=r[0<p?d-u:d],a+=r[p<e.height-1?d+u:d],a+=r[0<m?d-1:d],a+=r[m<e.width-1?d+1:d],s[d]=a/y|0}}}}]),n}();n.CPBrushToolBlur=E;var k=function(t){o(n,h);var e=r(n);function n(){return d(this,n),e.apply(this,arguments)}return f(n,[{key:"mergeOntoImage",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=e.data,r=t.data,s=this._strokeBuffer.offsetOfPixel(i.left,i.top),l=t.offsetOfPixel(i.left,i.top),u=0|i.getWidth(),d=0|i.getHeight(),c=this._strokeBuffer.width-u|0,f=(t.width-u)*T.default.BYTES_PER_PIXEL|0,h=0;h<d;h++,s+=c,l+=f)for(var p=0;p<u;p++,s++,l+=T.default.BYTES_PER_PIXEL){var m=a[s],g=m>>>24;if(0<g){var v=o[l+T.default.ALPHA_BYTE_OFFSET],y=g+v-g*v/255|0,_=255*g/y|0,b=255-_;r[l]=((m>>16&255)*_+o[l]*b)/255|0,r[l+1]=((m>>8&255)*_+o[l+1]*b)/255|0,r[l+2]=((255&m)*_+o[l+2]*b)/255|0,r[l+3]=y}}}},{key:"mergeOntoMask",value:function(t,e,n){for(var a=this._strokeBuffer.data,i=this._strokedRegion,o=e.data,r=t.data,s=this._strokeBuffer.offsetOfPixel(i.left,i.top),l=t.offsetOfPixel(i.left,i.top),u=0|i.getWidth(),d=0|i.getHeight(),c=this._strokeBuffer.width-u|0,f=t.width-u|0,h=0;h<d;h++,s+=c,l+=f)for(var p=0;p<u;p++,s++,l++){var m=a[s],g=m>>8;if(0<g){var v=255-g;r[l]=((255&m)*g+o[l]*v)/255|0}}}}]),n}(),P=function(t){o(g,k);var a=r(g);function g(t,e){var n;return d(this,g),(n=a.call(this,t,e)).wantsOutputAsInput=!0,n}return f(g,[{key:"_paintToColorStrokeBuffer",value:function(t,e,n,a,i,o){var r=this._strokeBuffer.data,s=e.getWidth(),l=e.getHeight(),u=this._strokeBuffer.width-s,d=a-s,c=t.left+t.top*a,f=this._strokeBuffer.offsetOfPixel(e.left,e.top);this._strokedRegion.union(e);for(var h=0;h<l;h++,c+=d,f+=u)for(var p=0;p<s;p++,c++,f++){var m=n[c]*i/255|0;if(0<m){var g=r[f],v=g>>>24,y=m+v-m*v/255|0,_=255-(255*m/y|0);r[f]=y<<24|(o>>16&255)+((g>>16&255)*_-(o>>16&255)*_)/255<<16|(o>>8&255)+((g>>8&255)*_-(o>>8&255)*_)/255<<8|(255&o)+((255&g)*_-(255&o)*_)/255}}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(t,e,n,a,i,o){var r=this._strokeBuffer.data;this._strokedRegion.union(e);for(var s=e.top,l=t.top;s<e.bottom;s++,l++)for(var u=t.left+l*a,d=this._strokeBuffer.offsetOfPixel(e.left,s),c=e.left;c<e.right;c++,u++,d++){var f=n[u]*i/255|0;if(!(f<=0)){var h=r[d],p=h>>8,m=f+p-f*p/255|0;if(0<m){var g=255-(255*f/m|0);r[d]=m<<8|o+((255&h)*g-o*g)/255}}}}},{key:"beginStroke",value:function(){this._previousSamples=null}},{key:"paintDab",value:function(t,e,n,a,i,o,r){var s=Math.max(1,o.alpha/4),l=(e.left+e.right)/2,u=(e.top+e.bottom)/2,d=Math.max(1,Math.min(64,e.getWidth()*(2/6))),c=Math.max(1,Math.min(64,e.getHeight()*(2/6)));if(n instanceof v.default){null==this._previousSamples&&(this._previousSamples=new Array(50),this._previousSamples.fill(g._sampleGrey(n,l,u,d,c)));var f,h=_(this._previousSamples);h=w(f=h=w(h,255&r,a.resat*a.resat),g._sampleGrey(n,l,u,d,c),a.bleed),this._previousSamples.push(h),this._previousSamples.shift(),this._paintToGreyscaleStrokeBuffer(i,e,o.brush,o.width,s,Math.round(f))}else{null==this._previousSamples&&(this._previousSamples=new Array(50),this._previousSamples.fill(g._sampleRGB(n,l,u,d,c)));var p=b(this._previousSamples);p.mixWith(y.default.createFromInt(r),a.resat*a.resat);var m=p.toInt();p.mixWith(g._sampleRGB(n,l,u,d,c),a.bleed),this._previousSamples.push(p),this._previousSamples.shift(),this._paintToColorStrokeBuffer(i,e,o.brush,o.width,s,m)}}}],[{key:"_sampleGrey",value:function(e,t,n,a,i){for(var o=[{x:t|=0,y:n|=0}],r=.25;r<1.001;r+=.25)Array.prototype.push.apply(o,[{x:~~(t+r*a),y:n},{x:~~(t-r*a),y:n},{x:t,y:~~(n+r*i)},{x:t,y:~~(n-r*i)},{x:~~(t+.7*r*a),y:~~(n+.7*r*i)},{x:~~(t+.7*r*a),y:~~(n-.7*r*i)},{x:~~(t-.7*r*a),y:~~(n+.7*r*i)},{x:~~(t-.7*r*a),y:~~(n-.7*r*i)}]);return _(o.map(function(t){return e.getPixel(t.x,t.y)}))}},{key:"_sampleRGB",value:function(e,t,n,a,i){for(var o=[{x:t|=0,y:n|=0}],r=.25;r<1.001;r+=.25)Array.prototype.push.apply(o,[{x:~~(t+r*a),y:n},{x:~~(t-r*a),y:n},{x:t,y:~~(n+r*i)},{x:t,y:~~(n-r*i)},{x:~~(t+.7*r*a),y:~~(n+.7*r*i)},{x:~~(t+.7*r*a),y:~~(n-.7*r*i)},{x:~~(t-.7*r*a),y:~~(n+.7*r*i)},{x:~~(t-.7*r*a),y:~~(n-.7*r*i)}]);return b(o.map(function(t){return y.default.createFromInt(e.getPixel(t.x,t.y))}))}}]),g}();n.CPBrushToolWatercolor=P;var x=function(t){o(i,k);var a=r(i);function i(t,e){var n;return d(this,i),(n=a.call(this,t,e)).wantsOutputAsInput=!0,n}return f(i,[{key:"_accumulatePaintFromMask",value:function(t,e,n,a){var i=this._brushBuffer.data,o=t.data,r=n.getWidth(),s=n.getHeight(),l=e.left+e.top*this._brushBuffer.width,u=t.offsetOfPixel(n.left,n.top),d=this._brushBuffer.width-r,c=t.width-r;if(!(a<=0))for(var f=0;f<s;f++,l+=d,u+=c)for(var h=0;h<r;h++,l++,u++){var p=o[u],m=i[l],g=m>>8,v=a+g-a*g/255|0,y=255-(255*a/v|0);i[l]=v<<8|p+((255&m)*y-p*y)/255}}},{key:"_resaturateBrushWithGrey",value:function(t,e,n){if(!(e<=0))for(var a=this._brushBuffer.data,i=t.getWidth(),o=t.getHeight(),r=t.left+t.top*this._brushBuffer.width,s=this._brushBuffer.width-i,l=0;l<o;l++,r+=s)for(var u=0;u<i;u++,r++){var d=a[r],c=d>>8,f=e+c-e*c/255|0,h=255-(255*e/f|0);a[r]=f<<8|n+((255&d)*h-n*h)/255}}},{key:"_paintToGreyscaleStrokeBuffer",value:function(t,e,n,a,i){var o=this._strokeBuffer.data,r=this._brushBuffer.data,s=t.data;this._strokedRegion.union(n);for(var l=n.top,u=e.top;l<n.bottom;l++,u++)for(var d=this._brushBuffer.offsetOfPixel(e.left,u),c=this._strokeBuffer.offsetOfPixel(n.left,l),f=t.offsetOfPixel(n.left,l),h=n.left;h<n.right;h++,d++,f++,c++){var p=r[d],m=(p>>8)*a[d]*i/65025|0;if(0<m){var g=s[f],v=255-m;o[c]=65280|(255&p)+(g*v-(255&p)*v)/255}}}},{key:"_accumulatePaintFromImage",value:function(t,e,n,a){for(var i=this._brushBuffer.data,o=t.data,r=n.getWidth(),s=n.getHeight(),l=e.left+e.top*this._brushBuffer.width,u=t.offsetOfPixel(n.left,n.top),d=this._brushBuffer.width-r,c=(t.width-r)*T.default.BYTES_PER_PIXEL,f=0;f<s;f++,l+=d,u+=c)for(var h=0;h<r;h++,l++,u+=T.default.BYTES_PER_PIXEL){var p=o[u+T.default.ALPHA_BYTE_OFFSET]*a/255|0;if(0<p){var m=i[l],g=m>>>24,v=p+g-p*g/255|0,y=255-(255*p/v|0),_=o[u+T.default.RED_BYTE_OFFSET],b=o[u+T.default.GREEN_BYTE_OFFSET],w=o[u+T.default.BLUE_BYTE_OFFSET];i[l]=v<<24|_+((m>>16&255)*y-_*y)/255<<16|b+((m>>8&255)*y-b*y)/255<<8|w+((255&m)*y-w*y)/255}}}},{key:"_resaturateBrushWithColor",value:function(t,e,n){if(!(e<=0))for(var a=this._brushBuffer.data,i=t.getWidth(),o=t.getHeight(),r=t.left+t.top*this._brushBuffer.width,s=this._brushBuffer.width-i,l=0;l<o;l++,r+=s)for(var u=0;u<i;u++,r++){var d=a[r],c=d>>>24,f=e+c-e*c/255|0,h=255-(255*e/f|0);a[r]=f<<24|(n>>>16&255)+((d>>>16&255)*h-(n>>>16&255)*h)/255<<16|(n>>>8&255)+((d>>>8&255)*h-(n>>>8&255)*h)/255<<8|(255&n)+((255&d)*h-(255&n)*h)/255}}},{key:"_paintToColorStrokeBuffer",value:function(t,e,n,a,i){var o=this._strokeBuffer.data,r=this._brushBuffer.data,s=t.data;this._strokedRegion.union(n);for(var l=n.top,u=e.top;l<n.bottom;l++,u++)for(var d=this._brushBuffer.offsetOfPixel(e.left,u),c=this._strokeBuffer.offsetOfPixel(n.left,l),f=t.offsetOfPixel(n.left,l),h=n.left;h<n.right;h++,d++,f+=T.default.BYTES_PER_PIXEL,c++){var p=r[d],m=(p>>>24)*a[d]*i/65025|0;if(0<m){var g=s[f+T.default.ALPHA_BYTE_OFFSET],v=m+g-m*g/255|0,y=s[f+T.default.RED_BYTE_OFFSET],_=s[f+T.default.GREEN_BYTE_OFFSET],b=s[f+T.default.BLUE_BYTE_OFFSET],w=255-(255*m/v|0);o[c]=v<<24|(p>>16&255)+(y*w-(p>>16&255)*w)/255<<16|(p>>8&255)+(_*w-(p>>8&255)*w)/255<<8|(255&p)+(b*w-(255&p)*w)/255}}}},{key:"paintDab",value:function(t,e,n,a,i,o,r){t instanceof T.default?null==this._brushBuffer?(this._brushBuffer=new v.default(o.width,o.height,32),this._accumulatePaintFromImage(n,i,e,255)):(this._resaturateBrushWithColor(i,~~(a.resat<=0?0:Math.max(1,a.resat*a.resat*255)),16777215&r),this._paintToColorStrokeBuffer(t,i,e,o.brush,o.alpha),this._accumulatePaintFromImage(n,i,e,~~(255*a.bleed))):null==this._brushBuffer?(this._brushBuffer=new v.default(o.width,o.height,16),this._accumulatePaintFromMask(n,i,e,255)):(this._resaturateBrushWithGrey(i,~~(a.resat<=0?0:Math.max(1,a.resat*a.resat*255)),255&r),this._paintToGreyscaleStrokeBuffer(t,i,e,o.brush,o.alpha),this._accumulatePaintFromMask(n,i,e,~~(255*a.bleed)))}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),i}();function C(t,e){var n=t.data;if(0<e.left)for(var a=e.top;a<e.bottom;a++)for(var i=a*t.width,o=i,r=n[i+e.left],s=0;s<e.left;s++,o++)n[o]=r;if(e.right<t.width)for(var l=e.top;l<e.bottom;l++)for(var u=l*t.width+e.right,d=n[u-1],c=e.right;c<t.width;c++,u++)n[u]=d;for(var f=0,h=0;h<e.top;h++)for(var p=e.top*t.width,m=0;m<t.width;m++,p++,f++)n[f]=n[p];f=e.bottom*t.width;for(var g=e.bottom;g<t.width;g++)for(var v=(e.bottom-1)*t.width,y=0;y<t.width;y++,v++,f++)n[f]=n[v]}n.CPBrushToolOil=x;var O=function(t){o(i,k);var a=r(i);function i(t,e){var n;return d(this,i),(n=a.call(this,t,e))._brushBuffer=null,n.wantsOutputAsInput=!0,n.noMergePhase=!0,n}return f(i,[{key:"_sampleFromMask",value:function(t,e,n,a){var i=this._brushBuffer.data,o=e.getWidth(),r=e.getHeight(),s=this._brushBuffer.offsetOfPixel(e.left,e.top),l=t.offsetOfPixel(n.left,n.top),u=this._brushBuffer.width-o,d=t.width-o,c=255-a;if(255!=a){for(var f=0;f<r;f++,s+=u,l+=d)for(var h=0;h<o;h++,s++,l++){var p=t.data[l],m=i[s],g=(p*c+(255&m)*a)/255,v=(255*c+(m>>8)*a)/255<<8|g;v==m&&(g<p?v++:p<g&&v--),i[s]=v}C(this._brushBuffer,e)}}},{key:"_paintToMask",value:function(t,e,n,a){for(var i=e.getWidth(),o=e.getHeight(),r=this._brushBuffer.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(n.left,n.top),l=this._brushBuffer.width-i,u=t.width-i,d=t.data,c=this._brushBuffer.data,f=0;f<o;f++,s+=u,r+=l)for(var h=0;h<i;h++,r++,s++){var p=c[r],m=255&p;0<((p>>8)*a[r]/255|0)&&(d[s]=m)}}},{key:"_sampleFromImage",value:function(t,e,n,a){var i=this._brushBuffer.data,o=e.getWidth(),r=e.getHeight(),s=this._brushBuffer.offsetOfPixel(e.left,e.top),l=t.offsetOfPixel(n.left,n.top),u=this._brushBuffer.width-o,d=(t.width-o)*T.default.BYTES_PER_PIXEL,c=255-a;if(255!=a){for(var f=0;f<r;f++,s+=u,l+=d)for(var h=0;h<o;h++,s++,l+=T.default.BYTES_PER_PIXEL){var p=t.data[l+T.default.RED_BYTE_OFFSET],m=t.data[l+T.default.GREEN_BYTE_OFFSET],g=t.data[l+T.default.BLUE_BYTE_OFFSET],v=t.data[l+T.default.ALPHA_BYTE_OFFSET],y=i[s],_=(v*c+(y>>24&255)*a)/255<<24&4278190080|(p*c+(y>>16&255)*a)/255<<16&16711680|(m*c+(y>>8&255)*a)/255<<8&65280|(g*c+(255&y)*a)/255&255;if(_==y){var b=(16711680&_)>>16,w=(65280&_)>>8,E=255&_;b<p?_+=65536:p<b&&(_-=65536),w<m?_+=256:m<w&&(_-=256),E<g?_+=1:g<E&&(_-=1)}i[s]=_}C(this._brushBuffer,e)}}},{key:"_paintToImage",value:function(t,e,n,a){for(var i=e.getWidth(),o=e.getHeight(),r=this._brushBuffer.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(n.left,n.top),l=this._brushBuffer.width-i,u=(t.width-i)*T.default.BYTES_PER_PIXEL,d=t.data,c=this._brushBuffer.data,f=0;f<o;f++,s+=u,r+=l)for(var h=0;h<i;h++,r++,s+=T.default.BYTES_PER_PIXEL){var p=c[r];0<((p>>>24)*a[r]/255|0)&&(d[s+T.default.RED_BYTE_OFFSET]=p>>16&255,d[s+T.default.GREEN_BYTE_OFFSET]=p>>8&255,d[s+T.default.BLUE_BYTE_OFFSET]=255&p,d[s+T.default.ALPHA_BYTE_OFFSET]=p>>24&255)}}},{key:"paintDab",value:function(t,e,n,a,i,o,r){t instanceof T.default?null==this._brushBuffer?(this._brushBuffer=new v.default(o.width,o.height,32),this._sampleFromImage(n,i,e,0)):(this._sampleFromImage(n,i,e,o.alpha),this._paintToImage(t,i,e,o.brush)):null==this._brushBuffer?(this._brushBuffer=new v.default(o.width,o.height,16),this._sampleFromMask(n,i,e,0)):(this._sampleFromMask(n,i,e,o.alpha),this._paintToMask(t,i,e,o.brush))}},{key:"mergeOntoImage",value:function(t,e,n){}},{key:"mergeOntoMask",value:function(t,e,n){}},{key:"beginStroke",value:function(){this._brushBuffer=null}},{key:"endStroke",value:function(){this._brushBuffer=null}}]),i}();n.CPBrushToolSmudge=O},{"../util/CPColorFloat":55,"./CPBrushInfo":8,"./CPColorBmp":13,"./CPGreyBmp":14}],11:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=a(t("./CPArtwork")),d=a(t("./CPImageLayer")),c=a(t("./CPColorBmp")),m=a(t("../util/ArrayDataStream")),y=a(t("./CPLayerGroup")),i=a(t("./CPGreyBmp")),_=a(t("./CPBlend")),b=a(t("pako"));function a(t){return t&&t.__esModule?t:{default:t}}function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t,e,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=h(o);if(r){var i=h(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function E(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}var T="CHIBIOEK";function k(t){this.version=t.readU32BE(),this.width=t.readU32BE(),this.height=t.readU32BE(),this.layersNb=t.readU32BE()}function P(t){for(var e=new Array(4),n=0;n<e.length;n++)e[n]=String.fromCharCode(t.readByte());if(this.chunkType=e.join(""),this.chunkSize=t.readU32BE(),t.eof)throw"Truncated chunk"}k.FIXED_HEADER_LENGTH=16;P.HEADER_LENGTH=8;var x=function(){function a(t,e,n){g(this,a),this.chunkHeader=t,this.width=e,this.height=n,this.state=0,this.payloadOffset=0,this.skipBytes=0,this.nameLength=0,this.done=!1,this.colorDecoder=null,this.maskDecoder=null}return E(a,[{key:"readFixedHeader",value:function(t){this.payloadOffset=t.readU32BE(),this.blendMode=t.readU32BE(),this.alpha=t.readU32BE();var e=t.readU32BE();this.visible=0!=(1&e),this.clip=0!=(2&e),this.hasMask=0!=(4&e),this.maskLinked=0!=(8&e),this.maskVisible=0!=(16&e),this.expanded=0!=(32&e),this.lockAlpha=0!=(64&e),this.blendMode===_.default.LM_MULTIPLY&&0!=(128&e)&&(this.blendMode=_.default.LM_MULTIPLY2),this.nameLength=t.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return 20}},{key:"getVariableHeaderLen",value:function(){return this.nameLength}},{key:"readVariableSizeHeader",value:function(t){this.name=t.readString(this.nameLength)}},{key:"decode",value:function(t){for(var e;;){if(0<this.skipBytes){if(this.skipBytes>=t.length)return this.skipBytes-=t.length,null;t=t.subarray(this.skipBytes),this.skipBytes=0}switch(this.state){case 0:if(t.length<this.getFixedHeaderLen())break;e=new m.default(t),this.readFixedHeader(e),t=t.subarray(e.pos),this.state=1;continue;case 1:if(t.length<this.getVariableHeaderLen())break;e=new m.default(t),this.readVariableSizeHeader(e),this.layer=this.createLayer(),this.hasMask&&(this.layer.setMask(new i.default(this.width,this.height,8)),this.maskDecoder=new L(this.layer.mask)),this.layer instanceof d.default&&(this.colorDecoder=new S(this.layer.image)),this.skipBytes=this.payloadOffset-this.getFixedHeaderLen(),this.colorDecoder?this.state=3:this.maskDecoder?this.state=4:this.state=5;continue;case 3:if(t=this.colorDecoder.decode(t),this.colorDecoder.done){this.maskDecoder?this.state=4:this.state=5;continue}break;case 4:if(t=this.maskDecoder.decode(t),this.maskDecoder.done){this.state=5;continue}break;case 5:var n=this.payloadOffset;this.colorDecoder&&(n+=this.colorDecoder.bytesTotal),this.maskDecoder&&(n+=this.maskDecoder.bytesTotal),this.state=6,this.skipBytes=this.chunkHeader.chunkSize-n;continue;case 6:this.done=!0}break}return t}}]),a}(),C=function(t){u(n,x);var e=f(n);function n(){return g(this,n),e.apply(this,arguments)}return E(n,[{key:"createLayer",value:function(){var t=new d.default(this.width,this.height,this.name);return t.setBlendMode(this.blendMode),t.setAlpha(this.alpha),t.setVisible(this.visible),t.setClip(this.clip),t.setMaskLinked(this.maskLinked),t.setMaskVisible(this.maskVisible),t.setLockAlpha(this.lockAlpha),t}}]),n}(),O=function(t){u(o,x);var i=f(o);function o(t,e,n){var a;return g(this,o),(a=i.call(this,t,e,n)).childLayers=0,a}return E(o,[{key:"readFixedHeader",value:function(t){r(h(o.prototype),"readFixedHeader",this).call(this,t),this.childLayers=t.readU32BE()}},{key:"getFixedHeaderLen",value:function(){return r(h(o.prototype),"getFixedHeaderLen",this).call(this)+4}},{key:"createLayer",value:function(){var t=new y.default(this.name,this.blendMode);return t.setAlpha(this.alpha),t.setVisible(this.visible),t.setExpanded(this.expanded),t.setMaskLinked(this.maskLinked),t.setMaskVisible(this.maskVisible),t}}]),o}();var S=function(){function e(t){g(this,e),this.bytesRead=0,this.bytesTotal=t.width*t.height*c.default.BYTES_PER_PIXEL,this.output=t.data,this.done=!1}return E(e,[{key:"decode",value:function(t){if(null==t)return null;for(var e=this.bytesRead%c.default.BYTES_PER_PIXEL,n=this.bytesRead-e,a=0,i=[c.default.ALPHA_BYTE_OFFSET,c.default.RED_BYTE_OFFSET,c.default.GREEN_BYTE_OFFSET,c.default.BLUE_BYTE_OFFSET];e<c.default.BYTES_PER_PIXEL&&a<t.length;e++)this.output[n+i[e]]=t[a],a++;this.bytesRead+=a;for(var o=0|Math.min(t.length-a,this.bytesTotal-this.bytesRead),r=o/c.default.BYTES_PER_PIXEL|0,s=o%c.default.BYTES_PER_PIXEL,l=0;l<r;l++)this.output[this.bytesRead+c.default.ALPHA_BYTE_OFFSET]=t[a],this.output[this.bytesRead+c.default.RED_BYTE_OFFSET]=t[a+1],this.output[this.bytesRead+c.default.GREEN_BYTE_OFFSET]=t[a+2],this.output[this.bytesRead+c.default.BLUE_BYTE_OFFSET]=t[a+3],this.bytesRead+=c.default.BYTES_PER_PIXEL,a+=c.default.BYTES_PER_PIXEL;for(n=this.bytesRead,e=0;e<s;e++)this.output[n+i[e]]=t[a],a++;return this.bytesRead+=s,this.bytesRead>=this.bytesTotal&&(this.done=!0),a<t.length?t.subarray(a):null}}]),e}(),L=function(){function e(t){g(this,e),this.bytesRead=0,this.bytesTotal=t.width*t.height,this.output=t.data,this.done=!1}return E(e,[{key:"decode",value:function(t){if(null==t)return null;var e,n=0|Math.min(t.length,this.bytesTotal-this.bytesRead),a=this.bytesRead;for(e=0;e<n;e++,a++)this.output[a]=t[e];return this.bytesRead=a,this.bytesRead>=this.bytesTotal&&(this.done=!0),e<t.length?t.subarray(e):null}}]),e}();function M(t,e){return t<<16|e}function A(t){return{major:t>>16&65535,minor:65535&t}}function R(t,e){var n,a,i,o=new Uint8Array(P.HEADER_LENGTH+e),r=new m.default(o);return a=t,i=e,(n=r).writeString(a),n.writeU32BE(i),r}function B(t){var e,n,a,i=t instanceof d.default,o=4*(i?5:6),r=t.name.length,s=o+r,l=R(i?"LAYR":"GRUP",o+r+((i?t.image.data.length:0)+(t.mask?t.mask.data.length:0))),u=0;return t.visible&&(u|=1),i&&t.clip&&(u|=2),t.mask&&(u|=4),t.maskLinked&&(u|=8),t.maskVisible&&(u|=16),t.lockAlpha&&(u|=64),!i&&t.expanded&&(u|=32),t.blendMode===_.default.LM_MULTIPLY2?(e=_.default.LM_MULTIPLY,u|=128):e=t.blendMode,l.writeU32BE(s),l.writeU32BE(e),l.writeU32BE(t.alpha),l.writeU32BE(u),l.writeU32BE(t.name.length),i||l.writeU32BE(t.layers.length),l.writeString(t.name),i&&function(t,e){for(var n=t.pos,a=t.data,i=e.data,o=0;o<i.length;o+=c.default.BYTES_PER_PIXEL)a[n++]=i[o+c.default.ALPHA_BYTE_OFFSET],a[n++]=i[o+c.default.RED_BYTE_OFFSET],a[n++]=i[o+c.default.GREEN_BYTE_OFFSET],a[n++]=i[o+c.default.BLUE_BYTE_OFFSET];t.pos=n}(l,t.image),t.mask&&(n=l,a=t.mask,n.data.set(a.data,n.pos),n.pos+=a.data.length),l.getAsDataArray()}e.exports.save=function(g,v){return v=v||{},Promise.resolve().then(function(){var t,e,n,a,i,o=new b.default.Deflate({level:7}),u=[],r=new Uint8Array(T.length),s=g.getLayersRoot().getLinearizedLayerList(!1),l=v.forceOldVersion?M(0,0):function(t){var e,n=w(t.getLayersRoot().getLinearizedLayerList(!1));try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a instanceof y.default||a.mask||a.clip||a.blendMode>_.default.LM_LAST_CHIBIPAINT||a.blendMode===_.default.LM_MULTIPLY)return M(0,10)}}catch(t){n.e(t)}finally{n.f()}return M(0,0)}(g),d=0===(t=A(l)).major&&0===t.minor?"ChibiPaint v0.0":"ChickenPaint v"+t.major+"."+t.minor,c=Promise.resolve();o.onData=function(t){u.push(t)};for(var f=0;f<T.length;f++)r[f]=T.charCodeAt(f);u.push(r),o.push((e=g,n=l,a=s.length,(i=R("HEAD",k.FIXED_HEADER_LENGTH)).writeU32BE(n),i.writeU32BE(e.width),i.writeU32BE(e.height),i.writeU32BE(a),i.getAsDataArray()),!1);var h,p=w(s);try{var m=function(){var e=h.value;c=c.then(function(){return new Promise(function(t){o.push(B(e),!1),setTimeout(t,10)})})};for(p.s();!(h=p.n()).done;)m()}catch(t){p.e(t)}finally{p.f()}return c.then(function(){return new Promise(function(s,l){o.onEnd=function(t){if(0===t)if("undefined"!=typeof Blob)s({bytes:new Blob(u,{type:"application/octet-stream"}),version:d});else{var e,n=u.map(function(t){return t.byteLength}).reduce(function(t,e){return t+e},0),a=new Uint8Array(n),i=0,o=w(u);try{for(o.s();!(e=o.n()).done;){var r=e.value;a.set(r,i),i+=r.byteLength}}catch(t){o.e(t)}finally{o.f()}s({bytes:a,version:d})}else l(t)},o.push(R("ZEND",0).getAsDataArray(),!0)})})})},e.exports.load=function(n,i){i=i||{};var a,o=new b.default.Inflate({}),r=0,s=null,l=null,u=0,d=null,c=null,f=null;function h(t){var e;for(f=function(t,e){if(null===t||0===t.length)return e;if(null===e||0===e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}(f,t),t=null;f;){if(!(u<f.length)){u-=f.length,f=null;break}switch(f=f.subarray(u),u=0,r){case 0:if(f.length<P.HEADER_LENGTH)break;if(e=new m.default(f),c=new P(e),f=f.subarray(e.pos),d){if("ZEND"!=c.chunkType){if("LAYR"==c.chunkType){r=2,a=new C(c,d.width,d.height);continue}if("GRUP"==c.chunkType){r=3,a=new O(c,d.width,d.height);continue}console.log("Unknown chunk type '"+c.chunkType+"', attempting to skip..."),u=c.chunkSize;continue}r=45}else{if("HEAD"==c.chunkType){r=1;continue}r=5}break;case 1:if(f.length<c.chunkSize)break;if(e=new m.default(f),0<A((d=new k(e)).version).major){r=5;break}s=new p.default(d.width,d.height),l=s.getLayersRoot(),u=c.chunkSize,r=0;continue;case 2:if(f=a.decode(f),a.done){s.addLayerObject(l,a.layer),r=0;continue}break;case 3:if(f=a.decode(f),a.done){s.addLayerGroupObject(l,a.layer,a.childLayers),r=0;continue}}break}}return new Promise(function(t){if(n instanceof ArrayBuffer)t(n);else{var e=new FileReader;e.onload=function(){t(this.result)},e.readAsArrayBuffer(n)}}).then(function(a){return new Promise(function(e,n){var t=new Uint8Array(a);!function(t){for(var e=0;e<T.length;e++)if(t[e]!=T.charCodeAt(e))return!1;return!0}(t)?n("This doesn't appear to be a ChibiPaint layers file, is it damaged?"):(t=t.subarray(T.length),o.onData=h,o.onEnd=function(t){0===t&&45==r?(!1!==i.upgradeMultiplyLayers&&d.version<M(0,10)&&s.upgradeMultiplyLayers(i.upgradeMultiplyLayers),s.selectTopmostVisibleLayer(),e(s)):n("Fatal error decoding ChibiFile: "+t)},o.push(t,!0))})})}},{"../util/ArrayDataStream":52,"./CPArtwork":3,"./CPBlend":5,"./CPColorBmp":13,"./CPGreyBmp":14,"./CPImageLayer":15,"./CPLayerGroup":17,pako:188}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){this.bmp=t,this.x=e,this.y=n},e.exports=n.default},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=R,n.getRotatedCanvas=r;var a=o(t("./CPBitmap")),h=o(t("../util/CPRect")),i=t("../util/Canvas");function o(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if("number"==typeof t)a.default.call(this,t,e),this.imageData=(0,i.createImageData)(this.width,this.height);else{var n=t;a.default.call(this,n.width,n.height),this.imageData=n}this.data=this.imageData.data}function p(t,e){for(var n=0,a=0;a<e;a++){for(var i=t[n+R.ALPHA_BYTE_OFFSET],o=0;o<3;o++,n++)t[n]=Math.round(t[n]*i/255);n++}}function m(t,e){for(var n=0,a=0;a<e;a++){var i=t[n+R.ALPHA_BYTE_OFFSET];if(0!=i){for(var o=255/i,r=0;r<3;r++,n++)t[n]=Math.min(Math.round(t[n]*o),255);n++}else n+=R.BYTES_PER_PIXEL}}function g(t,e,n,a){for(var i,o,r=0,s=[0,0,0,0],l=i=0;l<a&&l<n;l++){for(var u=0;u<R.BYTES_PER_PIXEL;u++)s[u]+=t[i++];r++}for(var d=o=0;d<n;d++){if(d+a<n){i=(d+a)*R.BYTES_PER_PIXEL;for(var c=0;c<R.BYTES_PER_PIXEL;c++)s[c]+=t[i++];r++}for(var f=0;f<R.BYTES_PER_PIXEL;f++)e[o++]=Math.round(s[f]/r);if(0<=d-a){i=(d-a)*R.BYTES_PER_PIXEL;for(var h=0;h<R.BYTES_PER_PIXEL;h++)s[h]-=t[i++];r--}}}function r(t,e){if(0==(e%=4))return t;var n=(0,i.createCanvas)(0,0),a=n.getContext("2d");switch(e%2==0?(n.width=t.width,n.height=t.height):(n.width=t.height,n.height=t.width),e){case 1:a.rotate(Math.PI/2),a.drawImage(t,0,-t.height);break;case 2:a.rotate(Math.PI),a.drawImage(t,-t.width,-t.height);break;case 3:a.rotate(-Math.PI/2),a.drawImage(t,-t.width,0);break;case 0:default:return t}return n}((R.prototype=Object.create(a.default.prototype)).constructor=R).BYTES_PER_PIXEL=4,R.RED_BYTE_OFFSET=0,R.GREEN_BYTE_OFFSET=1,R.BLUE_BYTE_OFFSET=2,R.ALPHA_BYTE_OFFSET=3,R.prototype.clone=function(){return this.cloneRect(this.getBounds())},R.prototype.cloneRect=function(t){var e=new R(t.getWidth(),t.getHeight());return e.copyBitmapRect(this,0,0,t),e},R.prototype.getPixel=function(t,e){t=Math.max(0,Math.min(this.width-1,t)),e=Math.max(0,Math.min(this.height-1,e));var n=this.offsetOfPixel(t,e);return this.data[n+R.ALPHA_BYTE_OFFSET]<<24|this.data[n+R.RED_BYTE_OFFSET]<<16|this.data[n+R.GREEN_BYTE_OFFSET]<<8|this.data[n+R.BLUE_BYTE_OFFSET]},R.prototype.copyRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=new Uint8Array(n*a*R.BYTES_PER_PIXEL),o=0,r=this.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(e.left,e.top),l=(this.width-n)*R.BYTES_PER_PIXEL,u=(t.width-n)*R.BYTES_PER_PIXEL,d=n*R.BYTES_PER_PIXEL,c=e.top;c<e.bottom;c++,r+=l,s+=u)for(var f=0;f<d;f++,o++,r++,s++)i[o]=this.data[r]^t.data[s];return i},R.prototype.setRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=this.offsetOfPixel(e.left,e.top),o=0,r=(this.width-n)*R.BYTES_PER_PIXEL,s=n*R.BYTES_PER_PIXEL,l=0;l<a;l++){for(var u=0;u<s;u++)this.data[i++]^=t[o++];i+=r}},R.prototype.copyBitmapRect=function(t,e,n,a){var i=new h.default(e,n,0,0);a=a.clone(),this.getBounds().clipSourceDest(a,i);var o=0|i.getWidth(),r=0|i.getHeight();if(0==i.left&&0==i.top&&o==this.width&&r==this.height&&o==t.width&&r==t.height)this.copyPixelsFrom(t);else for(var s=this.offsetOfPixel(i.left,i.top),l=(this.width-o)*R.BYTES_PER_PIXEL,u=t.offsetOfPixel(a.left,a.top),d=(t.width-o)*R.BYTES_PER_PIXEL,c=0;c<r;c++,u+=d,s+=l)for(var f=0;f<o;f++,u+=R.BYTES_PER_PIXEL,s+=R.BYTES_PER_PIXEL)this.data[s]=t.data[u],this.data[s+1]=t.data[u+1],this.data[s+2]=t.data[u+2],this.data[s+3]=t.data[u+3]},R.prototype.copyAlphaFrom=function(t,e){for(var n=0|(e=this.getBounds().clipTo(e)).getWidth(),a=0|e.getHeight(),i=this.offsetOfPixel(e.left,e.top)+R.ALPHA_BYTE_OFFSET|0,o=(this.width-n)*R.BYTES_PER_PIXEL|0,r=0;r<a;r++,i+=o)for(var s=0;s<n;s++,i+=R.BYTES_PER_PIXEL)this.data[i]=t.data[i]},R.prototype.setToSize=function(t){t.width==this.width&&t.height==this.height||(this.width=t.width,this.height=t.height,this.imageData=(0,i.createImageData)(this.width,this.height),this.data=this.imageData.data)},R.prototype.copyPixelsFrom=function(t){if(this.setToSize(t),"set"in this.data)this.data.set(t.data);else for(var e=0;e<this.data.length;e++)this.data[e]=t.data[e]},R.prototype.copyPixelsFromGreyscale=function(t){var e,n=0,a=t.width*t.height;for(this.setToSize(t),e=0;e<a;e++,n+=R.BYTES_PER_PIXEL)this.data[n+R.RED_BYTE_OFFSET]=t.data[e],this.data[n+R.GREEN_BYTE_OFFSET]=t.data[e],this.data[n+R.BLUE_BYTE_OFFSET]=t.data[e],this.data[n+R.ALPHA_BYTE_OFFSET]=255},R.prototype.copyScaledNearestNeighbor=function(t){for(var e,n=0,a=t.width/this.width,i=t.height/this.height,o=0,r=0;o<this.height;o++,r+=i){e=t.offsetOfPixel(0,Math.round(r));for(var s=0,l=0;s<this.width;s++,n+=R.BYTES_PER_PIXEL,l+=a){var u=e+Math.round(l)*R.BYTES_PER_PIXEL;this.data[n]=t.data[u],this.data[n+1]=t.data[u+1],this.data[n+2]=t.data[u+2],this.data[n+R.ALPHA_BYTE_OFFSET]=t.data[u+R.ALPHA_BYTE_OFFSET]}}},R.prototype.createThumbnailFrom=function(t){var e=Math.min(Math.floor(t.width/this.width),3);if(e<2)this.copyScaledNearestNeighbor(t);else for(var n=new Uint16Array(5*this.width),a=t.width*R.BYTES_PER_PIXEL,i=Math.floor(t.width/this.width)*R.BYTES_PER_PIXEL,o=Math.floor(t.width/this.width/e)*R.BYTES_PER_PIXEL,r=i-o*e,s=Math.floor(t.height/this.height),l=Math.floor(t.height/this.height/e),u=l*a-i*this.width,d=(s-l*e)*a,c=0,f=0,h=0;h<this.height;h++,c+=d){var p=0;n.fill(0);for(var m=0;m<e;m++,c+=u)for(var g=p=0;g<this.width;g++,p+=5,c+=r)for(var v=0;v<e;v++,c+=o){var y=t.data[c+R.ALPHA_BYTE_OFFSET],_=y/255;n[p]+=t.data[c]*_,n[p+1]+=t.data[c+1]*_,n[p+2]+=t.data[c+2]*_,n[p+R.ALPHA_BYTE_OFFSET]+=y,n[p+4]=Math.max(n[p+4],y)}for(var b=p=0;b<this.width;b++,p+=5,f+=R.BYTES_PER_PIXEL){var w=n[p+4];if(0==w)this.data[f+R.ALPHA_BYTE_OFFSET]=0;else{var E=w/n[p+R.ALPHA_BYTE_OFFSET];this.data[f]=n[p]*E,this.data[f+1]=n[p+1]*E,this.data[f+2]=n[p+2]*E,this.data[f+R.ALPHA_BYTE_OFFSET]=w}}}},R.prototype.floodFill=function(t,e,n){if(this.isInside(t,e)){var a=this.getPixel(t,e),i=a>>24&255,o=a>>16&255,r=a>>8&255,s=255&a,l=n>>24&255,u=n>>16&255,d=n>>8&255,c=255&n,f=[],h=this.getBounds(),p=this.data;if(h.left*=R.BYTES_PER_PIXEL,h.right*=R.BYTES_PER_PIXEL,f.push({x1:t*R.BYTES_PER_PIXEL,x2:t*R.BYTES_PER_PIXEL,y:e,dy:-1}),f.push({x1:t*R.BYTES_PER_PIXEL,x2:t*R.BYTES_PER_PIXEL,y:e+1,dy:1}),0==i){if(0==l)return;for(;0<f.length;){var m=f.pop();if(!(m.y<h.top||m.y>=h.bottom)){for(var g=this.offsetOfPixel(0,m.y),v=m.x1,y=void 0;v>=h.left&&0==p[v+g+R.ALPHA_BYTE_OFFSET];)p[v+g+R.RED_BYTE_OFFSET]=u,p[v+g+R.GREEN_BYTE_OFFSET]=d,p[v+g+R.BLUE_BYTE_OFFSET]=c,p[v+g+R.ALPHA_BYTE_OFFSET]=l,v-=R.BYTES_PER_PIXEL;if(v>=m.x1){for(;v<=m.x2&&p[v+g+R.ALPHA_BYTE_OFFSET]!=i;)v+=R.BYTES_PER_PIXEL;if(y=v+R.BYTES_PER_PIXEL,v>m.x2)continue}else(v+=R.BYTES_PER_PIXEL)<m.x1&&f.push({x1:v,x2:m.x1-R.BYTES_PER_PIXEL,y:m.y-m.dy,dy:-m.dy}),y=m.x1+R.BYTES_PER_PIXEL;do{for(p[v+g+R.RED_BYTE_OFFSET]=u,p[v+g+R.GREEN_BYTE_OFFSET]=d,p[v+g+R.BLUE_BYTE_OFFSET]=c,p[v+g+R.ALPHA_BYTE_OFFSET]=l;y<h.right&&p[y+g+R.ALPHA_BYTE_OFFSET]==i;)p[y+g+R.RED_BYTE_OFFSET]=u,p[y+g+R.GREEN_BYTE_OFFSET]=d,p[y+g+R.BLUE_BYTE_OFFSET]=c,p[y+g+R.ALPHA_BYTE_OFFSET]=l,y+=R.BYTES_PER_PIXEL;for(f.push({x1:v,x2:y-R.BYTES_PER_PIXEL,y:m.y+m.dy,dy:m.dy}),y-R.BYTES_PER_PIXEL>m.x2&&f.push({x1:m.x2+R.BYTES_PER_PIXEL,x2:y-R.BYTES_PER_PIXEL,y:m.y-m.dy,dy:-m.dy}),v=y+R.BYTES_PER_PIXEL;v<=m.x2&&p[v+g+R.ALPHA_BYTE_OFFSET]!=i;)v+=R.BYTES_PER_PIXEL;y=v+R.BYTES_PER_PIXEL}while(v<=m.x2)}}}else{if(n==a)return;for(;0<f.length;){var _=f.pop();if(!(_.y<h.top||_.y>=h.bottom)){for(var b=this.offsetOfPixel(0,_.y),w=_.x1,E=void 0;w>=h.left&&p[w+b+R.RED_BYTE_OFFSET]==o&&p[w+b+R.GREEN_BYTE_OFFSET]==r&&p[w+b+R.BLUE_BYTE_OFFSET]==s&&p[w+b+R.ALPHA_BYTE_OFFSET]==i;)p[w+b+R.RED_BYTE_OFFSET]=u,p[w+b+R.GREEN_BYTE_OFFSET]=d,p[w+b+R.BLUE_BYTE_OFFSET]=c,p[w+b+R.ALPHA_BYTE_OFFSET]=l,w-=R.BYTES_PER_PIXEL;if(w>=_.x1){for(;w<=_.x2&&(p[w+b+R.RED_BYTE_OFFSET]!=o||p[w+b+R.GREEN_BYTE_OFFSET]!=r||p[w+b+R.BLUE_BYTE_OFFSET]!=s||p[w+b+R.ALPHA_BYTE_OFFSET]!=i);)w+=R.BYTES_PER_PIXEL;if(E=w+R.BYTES_PER_PIXEL,w>_.x2)continue}else(w+=R.BYTES_PER_PIXEL)<_.x1&&f.push({x1:w,x2:_.x1-R.BYTES_PER_PIXEL,y:_.y-_.dy,dy:-_.dy}),E=_.x1+R.BYTES_PER_PIXEL;do{for(p[w+b+R.RED_BYTE_OFFSET]=u,p[w+b+R.GREEN_BYTE_OFFSET]=d,p[w+b+R.BLUE_BYTE_OFFSET]=c,p[w+b+R.ALPHA_BYTE_OFFSET]=l;E<h.right&&p[E+b+R.RED_BYTE_OFFSET]==o&&p[E+b+R.GREEN_BYTE_OFFSET]==r&&p[E+b+R.BLUE_BYTE_OFFSET]==s&&p[E+b+R.ALPHA_BYTE_OFFSET]==i;)p[E+b+R.RED_BYTE_OFFSET]=u,p[E+b+R.GREEN_BYTE_OFFSET]=d,p[E+b+R.BLUE_BYTE_OFFSET]=c,p[E+b+R.ALPHA_BYTE_OFFSET]=l,E+=R.BYTES_PER_PIXEL;for(f.push({x1:w,x2:E-R.BYTES_PER_PIXEL,y:_.y+_.dy,dy:_.dy}),E-R.BYTES_PER_PIXEL>_.x2&&f.push({x1:_.x2+R.BYTES_PER_PIXEL,x2:E-R.BYTES_PER_PIXEL,y:_.y-_.dy,dy:-_.dy}),w=E+R.BYTES_PER_PIXEL;w<=_.x2&&(p[w+b+R.RED_BYTE_OFFSET]!=o||p[w+b+R.GREEN_BYTE_OFFSET]!=r||p[w+b+R.BLUE_BYTE_OFFSET]!=s||p[w+b+R.ALPHA_BYTE_OFFSET]!=i);)w+=R.BYTES_PER_PIXEL;E=w+R.BYTES_PER_PIXEL}while(w<=_.x2)}}}}},R.prototype.copyPixelColumnToArray=function(t,e,n,a){for(var i=(this.width-1)*R.BYTES_PER_PIXEL,o=0,r=this.offsetOfPixel(t,e),s=0;s<n;s++){for(var l=0;l<R.BYTES_PER_PIXEL;l++)a[o++]=this.data[r++];r+=i}},R.prototype.copyArrayToPixelColumn=function(t,e,n,a){for(var i=(this.width-1)*R.BYTES_PER_PIXEL,o=0,r=this.offsetOfPixel(t,e),s=0;s<n;s++){for(var l=0;l<R.BYTES_PER_PIXEL;l++)this.data[r++]=a[o++];r+=i}},R.prototype.boxBlur=function(t,e,n){for(var a=(t=this.getBounds().clipTo(t)).getWidth(),i=a*R.BYTES_PER_PIXEL,o=t.getHeight(),r=Math.max(a,o),s=new Uint8Array(r*R.BYTES_PER_PIXEL),l=new Uint8Array(r*R.BYTES_PER_PIXEL),u=t.top;u<t.bottom;u++){for(var d=this.offsetOfPixel(t.left,u),c=0;c<i;c++)s[c]=this.data[d++];p(s,a),g(s,l,a,e),d=this.offsetOfPixel(t.left,u);for(var f=0;f<i;f++)this.data[d++]=l[f]}for(var h=t.left;h<t.right;h++)this.copyPixelColumnToArray(h,t.top,o,s),g(s,l,o,n),m(l,o),this.copyArrayToPixelColumn(h,t.top,o,l)},R.prototype.offsetOfPixel=function(t,e){return 4*(e*this.width+t)|0},R.prototype.getMemorySize=function(){return this.data.length},R.prototype.getImageData=function(){return this.imageData},R.prototype.setImageData=function(t){this.width=t.width,this.height=t.height,this.imageData=t,this.data=t.data},R.prototype.clearAll=function(t){if(0==t&&"fill"in this.data)this.data.fill(0);else for(var e=t>>24&255,n=t>>16&255,a=t>>8&255,i=255&t,o=0;o<this.width*this.height*R.BYTES_PER_PIXEL;)this.data[o++]=n,this.data[o++]=a,this.data[o++]=i,this.data[o++]=e},R.prototype.clearRect=function(t,e){t=this.getBounds().clipTo(t);for(var n=e>>24&255,a=e>>16&255,i=e>>8&255,o=255&e,r=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=this.offsetOfPixel(t.left,t.top),l=t.top;l<t.bottom;l++,s+=r)for(var u=t.left;u<t.right;u++)this.data[s++]=a,this.data[s++]=i,this.data[s++]=o,this.data[s++]=n},R.prototype.copyRegionHFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).top;n<t.bottom;n++)for(var a=this.offsetOfPixel(t.left,n),i=e.offsetOfPixel(t.right-1,n),o=t.left;o<t.right;o++,i-=2*R.BYTES_PER_PIXEL)for(var r=0;r<R.BYTES_PER_PIXEL;r++)this.data[a++]=e.data[i++]},R.prototype.copyRegionVFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).getWidth()*R.BYTES_PER_PIXEL,a=t.top;a<t.bottom;a++)for(var i=this.offsetOfPixel(t.left,a),o=e.offsetOfPixel(t.left,t.bottom-1-(a-t.top)),r=0;r<n;r++)this.data[i++]=e.data[o++]},R.prototype.fillWithNoise=function(t){t=this.getBounds().clipTo(t);for(var e,n=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var o=t.left;o<t.right;o++,a+=R.BYTES_PER_PIXEL)e=256*Math.random()|0,this.data[a+R.RED_BYTE_OFFSET]=e,this.data[a+R.GREEN_BYTE_OFFSET]=e,this.data[a+R.BLUE_BYTE_OFFSET]=e,this.data[a+R.ALPHA_BYTE_OFFSET]=255},R.prototype.gradientHorzReplace=function(t,e,n,a){var i={r:a[0]>>16&255,g:a[0]>>8&255,b:255&a[0],a:a[0]>>24&255},o={r:a[1]>>16&255,g:a[1]>>8&255,b:255&a[1],a:a[1]>>24&255},r=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.bottom-t.top|0;if(n<e){var u=n;n=e,e=u,u=i,i=o,o=u}for(var d=n-e|0,c=(o.r-i.r)/d,f=(o.g-i.g)/d,h=(o.b-i.b)/d,p=(o.a-i.a)/d,m=Math.max(t.left-e,0),g=0;g<l;g++,s+=r){for(var v=t.left,y=0|Math.min(e,t.right);v<y;v++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=i.r,this.data[s+R.GREEN_BYTE_OFFSET]=i.g,this.data[s+R.BLUE_BYTE_OFFSET]=i.b,this.data[s+R.ALPHA_BYTE_OFFSET]=i.a;var _=i.r+c*m,b=i.g+f*m,w=i.b+h*m,E=i.a+p*m;for(y=0|Math.min(n,t.right);v<y;v++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=_,this.data[s+R.GREEN_BYTE_OFFSET]=b,this.data[s+R.BLUE_BYTE_OFFSET]=w,this.data[s+R.ALPHA_BYTE_OFFSET]=E,_+=c,b+=f,w+=h,E+=p;for(;v<t.right;v++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=o.r,this.data[s+R.GREEN_BYTE_OFFSET]=o.g,this.data[s+R.BLUE_BYTE_OFFSET]=o.b,this.data[s+R.ALPHA_BYTE_OFFSET]=o.a}},R.prototype.gradientVertReplace=function(t,e,n,a){var i={r:a[0]>>16&255,g:a[0]>>8&255,b:255&a[0],a:a[0]>>24&255},o={r:a[1]>>16&255,g:a[1]>>8&255,b:255&a[1],a:a[1]>>24&255},r=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0;if(n<e){var u=n;n=e,e=u,u=i,i=o,o=u}for(var d=t.top,c=0|Math.min(t.bottom,e);d<c;d++,s+=r)for(var f=0;f<l;f++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=i.r,this.data[s+R.GREEN_BYTE_OFFSET]=i.g,this.data[s+R.BLUE_BYTE_OFFSET]=i.b,this.data[s+R.ALPHA_BYTE_OFFSET]=i.a;for(var h=n-e|0,p=(o.r-i.r)/h,m=(o.g-i.g)/h,g=(o.b-i.b)/h,v=(o.a-i.a)/h,y=Math.max(d-e,0),_=i.r+p*y,b=i.g+m*y,w=i.b+g*y,E=i.a+v*y,T=0|Math.min(t.bottom,n);d<T;d++,s+=r){for(var k=0;k<l;k++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=_,this.data[s+R.GREEN_BYTE_OFFSET]=b,this.data[s+R.BLUE_BYTE_OFFSET]=w,this.data[s+R.ALPHA_BYTE_OFFSET]=E;_+=p,b+=m,w+=g,E+=v}for(;d<t.bottom;d++,s+=r)for(var P=0;P<l;P++,s+=R.BYTES_PER_PIXEL)this.data[s+R.RED_BYTE_OFFSET]=o.r,this.data[s+R.GREEN_BYTE_OFFSET]=o.g,this.data[s+R.BLUE_BYTE_OFFSET]=o.b,this.data[s+R.ALPHA_BYTE_OFFSET]=o.a},R.prototype.gradientReplace=function(t,e,n,a,i,o){for(var r=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=o[0]>>16&255,d=o[0]>>8&255,c=255&o[0],f=o[0]>>24&255,h=o[1]>>16&255,p=o[1]>>8&255,m=255&o[1],g=o[1]>>24&255,v=i-n+(a-e)*(a-e)/(i-n),y=a-e+(i-n)*(i-n)/(a-e),_=1/y,b=t.top;b<t.bottom;b++,s+=r)for(var w=(t.left-e)/y+(b-n)/v,E=0;E<l;E++,s+=R.BYTES_PER_PIXEL){var T=Math.min(Math.max(w,0),1),k=1-T;this.data[s+R.RED_BYTE_OFFSET]=u*k+h*T,this.data[s+R.GREEN_BYTE_OFFSET]=d*k+p*T,this.data[s+R.BLUE_BYTE_OFFSET]=c*k+m*T,this.data[s+R.ALPHA_BYTE_OFFSET]=f*k+g*T,w+=_}},R.prototype.gradientAlpha=function(t,e,n,a,i,o){for(var r=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=o[0]>>16&255,d=o[0]>>8&255,c=255&o[0],f=o[0]>>24&255,h=o[1]>>16&255,p=o[1]>>8&255,m=255&o[1],g=o[1]>>24&255,v=i-n+(a-e)*(a-e)/(i-n),y=a-e+(i-n)*(i-n)/(a-e),_=1/y,b=t.top;b<t.bottom;b++,s+=r)for(var w=(t.left-e)/y+(b-n)/v,E=0;E<l;E++,s+=R.BYTES_PER_PIXEL){var T=Math.min(Math.max(w,0),1),k=1-T,P=u*k+h*T,x=d*k+p*T,C=c*k+m*T,O=f*k+g*T,S=this.data[s+R.ALPHA_BYTE_OFFSET],L=O+S-O*S/255|0;if(0<L){var M=255*O/L|0,A=255-M;this.data[s+R.RED_BYTE_OFFSET]=(P*M+this.data[s+R.RED_BYTE_OFFSET]*A)/255|0,this.data[s+R.GREEN_BYTE_OFFSET]=(x*M+this.data[s+R.GREEN_BYTE_OFFSET]*A)/255|0,this.data[s+R.BLUE_BYTE_OFFSET]=(C*M+this.data[s+R.BLUE_BYTE_OFFSET]*A)/255|0,this.data[s+R.ALPHA_BYTE_OFFSET]=L}w+=_}},R.prototype.gradient=function(t,e,n,a,i,o,r){t=this.getBounds().clipTo(t),e==a&&n==i||(r||o[0]>>>24==255&&o[1]>>>24==255?e==a?this.gradientVertReplace(t,n,i,o):n==i?this.gradientHorzReplace(t,e,a,o):this.gradientReplace(t,e,n,a,i,o):this.gradientAlpha(t,e,n,a,i,o))},R.prototype.fillWithColorNoise=function(t){t=this.getBounds().clipTo(t);for(var e,n=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var o=t.left;o<t.right;o++,a+=R.BYTES_PER_PIXEL)e=16777216*Math.random()|0,this.data[a+R.RED_BYTE_OFFSET]=e>>16&255,this.data[a+R.GREEN_BYTE_OFFSET]=e>>8&255,this.data[a+R.BLUE_BYTE_OFFSET]=255&e,this.data[a+R.ALPHA_BYTE_OFFSET]=255},R.prototype.invert=function(t){t=this.getBounds().clipTo(t);for(var e=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n+=R.BYTES_PER_PIXEL)this.data[n+R.RED_BYTE_OFFSET]^=255,this.data[n+R.GREEN_BYTE_OFFSET]^=255,this.data[n+R.BLUE_BYTE_OFFSET]^=255},R.prototype.getNonTransparentBounds=function(t){var e,n,a,i,o,r=t.clone();for(o=(this.width-r.getWidth())*R.BYTES_PER_PIXEL,e=this.offsetOfPixel(r.left,r.top)+R.ALPHA_BYTE_OFFSET,a=r.top;a<r.bottom;a++,e+=o){for(i=0,n=r.left;n<r.right;n++,e+=R.BYTES_PER_PIXEL)i|=this.data[e];if(0!=i)break}if(r.top=a,r.top==r.bottom)return r;for(e=this.offsetOfPixel(r.right-1,r.bottom-1)+R.ALPHA_BYTE_OFFSET,a=r.bottom-1;a>=r.top;a--,e-=o){for(i=0,n=r.right-1;n>=r.left;n--,e-=R.BYTES_PER_PIXEL)i|=this.data[e];if(0!=i)break}for(r.bottom=a+1,o=R.BYTES_PER_PIXEL*this.width,n=r.left;n<r.right;n++){for(e=this.offsetOfPixel(n,r.top)+R.ALPHA_BYTE_OFFSET,i=0,a=r.top;a<r.bottom;a++,e+=o)i|=this.data[e];if(0!=i)break}for(r.left=n,n=r.right-1;n>=r.left;n--){for(e=this.offsetOfPixel(n,r.top)+R.ALPHA_BYTE_OFFSET,i=0,a=r.top;a<r.bottom;a++,e+=o)i|=this.data[e];if(0!=i)break}return r.right=n+1,r},R.prototype.getAsCanvas=function(t){var e=(0,i.createCanvas)(this.imageData.width,this.imageData.height);return e.getContext("2d").putImageData(this.imageData,0,0),r(e,t||0)},R.prototype.getAsPNG=function(t){var e,n=this.getAsCanvas(t);return!("string"!=typeof(e=n.toDataURL("image/png"))||!e.match(/^data:image\/png;base64,/i))&&window.atob(e.substring("data:image/png;base64,".length))},R.prototype.hasAlphaInRect=function(t){t=this.getBounds().clipTo(t);for(var e=(this.width-t.getWidth())*R.BYTES_PER_PIXEL,n=this.offsetOfPixel(t.left,t.top)+R.ALPHA_BYTE_OFFSET,a=t.top;a<t.bottom;a++,n+=e){for(var i=255,o=t.left;o<t.right;o++,n+=R.BYTES_PER_PIXEL)i&=this.data[n];if(255!=i)return!0}return!1},R.prototype.hasAlpha=function(){return this.hasAlphaInRect(this.getBounds())},R.createFromImage=function(t){var e=(0,i.createCanvas)(t.width,t.height).getContext("2d");return e.globalCompositeOperation="copy",e.drawImage(t,0,0),new R(e.getImageData(0,0,t.width,t.height))},R.prototype.equals=function(t){if(this.width!=t.width||this.height!=t.height)return!1;for(var e=0;e<this.data.length;e+=R.BYTES_PER_PIXEL)if(!(0==this.data[e+R.ALPHA_BYTE_OFFSET]&&0==t.data[e+R.ALPHA_BYTE_OFFSET]||this.data[e]==t.data[e]&&this.data[e+1]==t.data[e+1]&&this.data[e+2]==t.data[e+2]&&this.data[e+3]==t.data[e+3]))return!1;return!0}},{"../util/CPRect":59,"../util/Canvas":2,"./CPBitmap":4}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var a=o(t("./CPBitmap")),h=o(t("../util/CPRect")),d=t("../util/Canvas"),i=t("./CPColorBmp");function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){a.default.call(this,t,e),this.createBitmap(t,e,n)}function p(t,e,n,a){for(var i,o=0,r=0,s=0;s<a&&s<n;s++)r+=t[s],o++;for(var l=i=0;l<n;l++)l+a<n&&(r+=t[l+a],o++),e[i++]=Math.round(r/o),0<=l-a&&(r-=t[l-a],o--)}((r.prototype=Object.create(a.default.prototype)).constructor=r).prototype.createBitmap=function(t,e,n){switch(this.bitDepth=n){case 32:this.data=new Uint32Array(t*e);break;case 16:this.data=new Uint16Array(t*e);break;case 8:default:this.data=new Uint8Array(t*e)}},r.prototype.clone=function(){var t=new r(this.width,this.height,this.bitDepth);return t.copyPixelsFrom(this),t},r.prototype.cloneRect=function(t){var e=new r(t.getWidth(),t.getHeight(),this.bitDepth);return e.copyBitmapRect(this,0,0,t),e},r.prototype.getPixel=function(t,e){return t=Math.max(0,Math.min(this.width-1,t)),e=Math.max(0,Math.min(this.height-1,e)),this.data[this.offsetOfPixel(t,e)]},r.prototype.clearAll=function(t){this.data.fill(t)},r.prototype.clearRect=function(t,e){t=this.getBounds().clipTo(t);for(var n=this.width-t.getWidth(),a=this.offsetOfPixel(t.left,t.top),i=t.top;i<t.bottom;i++,a+=n)for(var o=t.left;o<t.right;o++,a++)this.data[a]=e},r.prototype.copyScaledNearestNeighbor=function(t){for(var e,n=0,a=t.width/this.width,i=t.height/this.height,o=0,r=0;o<this.height;o++,r+=i){e=t.offsetOfPixel(0,Math.round(r));for(var s=0,l=0;s<this.width;s++,n++,l+=a){var u=e+Math.round(l);this.data[n]=t.data[u]}}},r.prototype.floodFill=function(t,e,n){if(this.isInside(t,e)){n&=255;var a=this.getPixel(t,e),i=[],o=this.getBounds(),r=this.data;if(i.push({x1:t,x2:t,y:e,dy:-1}),i.push({x1:t,x2:t,y:e+1,dy:1}),n!=a)for(;0<i.length;){var s=i.pop();if(!(s.y<o.top||s.y>=o.bottom)){for(var l=this.offsetOfPixel(0,s.y),u=s.x1,d=void 0;u>=o.left&&r[u+l]==a;)r[u+l]=n,u--;if(u>=s.x1){for(;u<=s.x2&&r[u+l]!=a;)u++;if(d=u+1,u>s.x2)continue}else++u<s.x1&&i.push({x1:u,x2:s.x1-1,y:s.y-s.dy,dy:-s.dy}),d=s.x1+1;do{for(r[u+l]=n;d<o.right&&r[d+l]==a;)r[d+l]=n,d++;for(i.push({x1:u,x2:d-1,y:s.y+s.dy,dy:s.dy}),d-1>s.x2&&i.push({x1:s.x2+1,x2:d-1,y:s.y-s.dy,dy:-s.dy}),u=d+1;u<=s.x2&&r[u+l]!=a;)u++;d=u+1}while(u<=s.x2)}}}},r.prototype.createThumbnailFrom=function(t){var e=Math.min(Math.floor(t.width/this.width),3);if(e<2)this.copyScaledNearestNeighbor(t);else for(var n=new Uint16Array(this.width),a=t.width,i=Math.floor(t.width/this.width),o=Math.floor(t.width/this.width/e),r=i-o*e,s=Math.floor(t.height/this.height),l=Math.floor(t.height/this.height/e),u=l*a-i*this.width,d=(s-l*e)*a,c=0,f=0,h=0;h<this.height;h++,c+=d){var p=0;n.fill(0);for(var m=0;m<e;m++,c+=u)for(var g=p=0;g<this.width;g++,p++,c+=r)for(var v=0;v<e;v++,c+=o)n[p]+=t.data[c];for(var y=p=0;y<this.width;y++,p++,f++)this.data[f]=n[p]/(e*e)}},r.prototype.mirrorHorizontally=function(){for(var t=this.width,e=this.height,n=new Uint8Array(t*e),a=0,i=t,o=0;o<e;o++,i+=t+t)for(var r=0;r<t;r++)n[a++]=this.data[--i];this.data=n},r.prototype.applyLUT=function(t){for(var e=0;e<this.data.length;e++)this.data[e]=t.table[this.data[e]]},r.prototype.getAsCanvas=function(t){var e=this.getImageData(0,0,this.width,this.height),n=(0,d.createCanvas)(this.width,this.height);return n.getContext("2d").putImageData(e,0,0),(0,i.getRotatedCanvas)(n,t||0)},r.prototype.getImageData=function(t,e,n,a){for(var i=(0,d.createImageData)(n,a),o=this.offsetOfPixel(t,e),r=0,s=this.width-n,l=0;l<a;l++,o+=s)for(var u=0;u<n;u++,o++)i.data[r++]=this.data[o],i.data[r++]=this.data[o],i.data[r++]=this.data[o],i.data[r++]=255;return i},r.prototype.pasteImageData=function(t,e,n){for(var a=0,i=this.offsetOfPixel(e,n),o=this.width-t.width,r=0;r<t.height;r++,i+=o)for(var s=0;s<t.width;s++,a+=4,i++)this.data[i]=t.data[a];return t},r.prototype.copyPixelsFrom=function(t){t.width!=this.width||t.height!=this.height||t.bitDepth!=this.bitDepth?(this.data=t.data.slice(0),this.width=t.width,this.height=t.height,this.bitDepth=t.bitDepth):this.data.set(t.data)},r.prototype.copyRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=new Uint8Array(n*a),o=0,r=this.offsetOfPixel(e.left,e.top),s=t.offsetOfPixel(e.left,e.top),l=this.width-n,u=t.width-n,d=e.top;d<e.bottom;d++,r+=l,s+=u)for(var c=0;c<n;c++,o++,r++,s++)i[o]=this.data[r]^t.data[s];return i},r.prototype.setRectXOR=function(t,e){for(var n=(e=this.getBounds().clipTo(e)).getWidth(),a=e.getHeight(),i=this.offsetOfPixel(e.left,e.top),o=0,r=this.width-n,s=0;s<a;s++){for(var l=0;l<n;l++)this.data[i++]^=t[o++];i+=r}},r.prototype.copyBitmapRect=function(t,e,n,a){var i=new h.default(e,n,0,0);a=a.clone(),this.getBounds().clipSourceDest(a,i);var o=0|i.getWidth(),r=0|i.getHeight();if(0==i.left&&0==i.top&&o==this.width&&r==this.height&&o==t.width&&r==t.height)this.copyPixelsFrom(t);else for(var s=this.offsetOfPixel(i.left,i.top),l=this.width-o,u=t.offsetOfPixel(a.left,a.top),d=t.width-o,c=0;c<r;c++,u+=d,s+=l)for(var f=0;f<o;f++,u++,s++)this.data[s]=t.data[u]},r.prototype.copyRegionHFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).top;n<t.bottom;n++)for(var a=this.offsetOfPixel(t.left,n),i=e.offsetOfPixel(t.right-1,n),o=t.left;o<t.right;o++,i-=2)this.data[a++]=e.data[i++]},r.prototype.copyRegionVFlip=function(t,e){for(var n=(t=this.getBounds().clipTo(t)).getWidth(),a=t.top;a<t.bottom;a++)for(var i=this.offsetOfPixel(t.left,a),o=e.offsetOfPixel(t.left,t.bottom-1-(a-t.top)),r=0;r<n;r++)this.data[i++]=e.data[o++]},r.prototype.copyPixelColumnToArray=function(t,e,n,a){for(var i=this.width,o=0,r=this.offsetOfPixel(t,e),s=0;s<n;s++)a[o]=this.data[r],r+=i,o++},r.prototype.copyArrayToPixelColumn=function(t,e,n,a){for(var i=this.width,o=0,r=this.offsetOfPixel(t,e),s=0;s<n;s++)this.data[r]=a[o],r+=i,o++},r.prototype.boxBlur=function(t,e,n){for(var a=(t=this.getBounds().clipTo(t)).getWidth(),i=t.getHeight(),o=Math.max(a,i),r=new this.data.constructor(o),s=new this.data.constructor(o),l=t.top;l<t.bottom;l++){for(var u=this.offsetOfPixel(t.left,l),d=0;d<a;d++)r[d]=this.data[u++];p(r,s,a,e),u=this.offsetOfPixel(t.left,l);for(var c=0;c<a;c++)this.data[u++]=s[c]}for(var f=t.left;f<t.right;f++)this.copyPixelColumnToArray(f,t.top,i,r),p(r,s,i,n),this.copyArrayToPixelColumn(f,t.top,i,s)},r.prototype.offsetOfPixel=function(t,e){return e*this.width+t},r.prototype.fillWithNoise=function(t){t=this.getBounds().clipTo(t);for(var e=this.width-t.getWidth(),n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n++)this.data[n]=256*Math.random()|0},r.prototype.invert=function(t){t=this.getBounds().clipTo(t);for(var e=this.width-t.getWidth(),n=this.offsetOfPixel(t.left,t.top),a=t.top;a<t.bottom;a++,n+=e)for(var i=t.left;i<t.right;i++,n++)this.data[n]=~this.data[n]},r.prototype.getValueBounds=function(t,e){var n,a,i,o,r,s=t.clone();for(o=this.width-s.getWidth(),n=this.offsetOfPixel(s.left,s.top),i=s.top;i<s.bottom;i++,n+=o){for(r=!1,a=s.left;a<s.right;a++,n++)if(this.data[n]!=e){r=!0;break}if(r)break}if(s.top=i,s.top==s.bottom)return s;for(n=this.offsetOfPixel(s.right-1,s.bottom-1),i=s.bottom-1;i>=s.top;i--,n-=o){for(r=!1,a=s.right-1;a>=s.left;a--,n--)if(this.data[n]!=e){r=!0;break}if(r)break}for(s.bottom=i+1,o=this.width,a=s.left;a<s.right;a++){for(n=this.offsetOfPixel(a,s.top),r=!1,i=s.top;i<s.bottom;i++,n+=o)if(this.data[n]!=e){r=!0;break}if(r)break}for(s.left=a,a=s.right-1;a>=s.left;a--){for(n=this.offsetOfPixel(a,s.top),r=!1,i=s.top;i<s.bottom;i++,n+=o)if(this.data[n]!=e){r=!0;break}if(r)break}return s.right=a+1,s},r.prototype.gradientHorzReplace=function(t,e,n,a){var i=255&a[0],o=255&a[1],r=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.bottom-t.top|0;if(n<e){var u=n;n=e,e=u,u=i,i=o,o=u}for(var d=(o-i)/(n-e|0),c=Math.max(t.left-e,0),f=0;f<l;f++,s+=r){for(var h=t.left,p=0|Math.min(e,t.right);h<p;h++,s++)this.data[s]=i;var m=i+d*c;for(p=0|Math.min(n,t.right);h<p;h++,s++)this.data[s]=m,m+=d;for(;h<t.right;h++,s++)this.data[s]=o}},r.prototype.gradientVertReplace=function(t,e,n,a){var i=255&a[0],o=255&a[1],r=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0;if(n<e){var u=n;n=e,e=u,u=i,i=o,o=u}for(var d=t.top,c=0|Math.min(t.bottom,e);d<c;d++,s+=r)for(var f=0;f<l;f++,s++)this.data[s]=i;for(var h=(o-i)/(n-e|0),p=i+h*Math.max(d-e,0),m=0|Math.min(t.bottom,n);d<m;d++,s+=r){for(var g=0;g<l;g++,s++)this.data[s]=p;p+=h}for(;d<t.bottom;d++,s+=r)for(var v=0;v<l;v++,s++)this.data[s]=o},r.prototype.gradientReplace=function(t,e,n,a,i,o){for(var r=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=255&o[0],d=255&o[1],c=i-n+(a-e)*(a-e)/(i-n),f=a-e+(i-n)*(i-n)/(a-e),h=1/f,p=t.top;p<t.bottom;p++,s+=r)for(var m=(t.left-e)/f+(p-n)/c,g=0;g<l;g++,s++){var v=Math.min(Math.max(m,0),1),y=1-v;this.data[s]=u*y+d*v,m+=h}},r.prototype.gradientAlpha=function(t,e,n,a,i,o){for(var r=this.width-t.getWidth(),s=0|this.offsetOfPixel(t.left,t.top),l=t.right-t.left|0,u=255&o[0],d=o[0]>>24&255,c=255&o[1],f=o[1]>>24&255,h=i-n+(a-e)*(a-e)/(i-n),p=a-e+(i-n)*(i-n)/(a-e),m=1/p,g=t.top;g<t.bottom;g++,s+=r)for(var v=(t.left-e)/p+(g-n)/h,y=0;y<l;y++,s++){var _=Math.min(Math.max(v,0),1),b=1-_,w=u*b+c*_,E=d*b+f*_,T=255-E;this.data[s]=(w*E+this.data[s]*T)/255|0,v+=m}},r.prototype.gradient=function(t,e,n,a,i,o,r){t=this.getBounds().clipTo(t),e==a&&n==i||(r||o[0]>>>24==255&&o[1]>>>24==255?e==a?this.gradientVertReplace(t,n,i,o):n==i?this.gradientHorzReplace(t,e,a,o):this.gradientReplace(t,e,n,a,i,o):this.gradientAlpha(t,e,n,a,i,o))},r.prototype.equals=function(t){if(this.width!=t.width||this.height!=t.height)return!1;for(var e=0;e<this.data.length;e++)if(this.data[e]!=t.data[e])return!1;return!0},e.exports=n.default},{"../util/CPRect":59,"../util/Canvas":2,"./CPBitmap":4,"./CPColorBmp":13}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var a=r(t("./CPColorBmp")),i=r(t("./CPLayer")),o=r(t("../util/CPRect"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){i.default.call(this,n),this.image=0<t&&0<e?new a.default(t,e):null,this.clip=!1,this.imageThumbnail=null}((s.prototype=Object.create(i.default.prototype)).constructor=s).createFromImage=function(t,e){var n=new s(0,0,e);return n.image=t,n},s.prototype.clone=function(){var t=new s(0,0,this.name);return t.copyFrom(this),t},s.prototype.copyFrom=function(t){i.default.prototype.copyFrom.call(this,t),this.clip=t.clip,this.image?this.image.copyPixelsFrom(t.image):this.image=t.image.clone()},s.prototype.hasAlpha=function(){return 100!=this.alpha||this.image.hasAlpha()},s.prototype.hasAlphaInRect=function(t){return 100!=this.alpha||this.image.hasAlphaInRect(t)},s.prototype.copyImageFrom=function(t){this.image.copyPixelsFrom(t)},s.prototype.getClippingBase=function(){if(this.clip&&this.parent)for(var t=this.parent.indexOf(this)-1;0<=t&&this.parent.layers[t]instanceof s;t--)if(!this.parent.layers[t].clip)return this.parent.layers[t];return null},s.prototype.getClip=function(){return this.clip},s.prototype.setClip=function(t){this.clip=t},s.prototype.getNonTransparentBounds=function(t){return this.image.getNonTransparentBounds(t)},s.prototype.getBounds=function(){return new o.default(0,0,this.image.width,this.image.height)},s.prototype.getMemoryUsed=function(){return this.image?this.image.getMemorySize():0},s.prototype.rebuildImageThumbnail=function(){if(!this.imageThumbnail){var t=Math.ceil(Math.max(this.image.width/i.default.LAYER_THUMBNAIL_WIDTH,this.image.height/i.default.LAYER_THUMBNAIL_HEIGHT));this.imageThumbnail=new a.default(Math.floor(this.image.width/t),Math.floor(this.image.height/t))}this.imageThumbnail.createThumbnailFrom(this.image)},s.prototype.getImageThumbnail=function(){return this.imageThumbnail||this.rebuildImageThumbnail(),this.imageThumbnail},e.exports=n.default},{"../util/CPRect":59,"./CPColorBmp":13,"./CPLayer":16}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;r(t("./CPLayerGroup"));var a=r(t("./CPBlend")),i=r(t("./CPGreyBmp")),o=r(t("../util/CPRect"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.name=t||"",this.parent=null,this.lockAlpha=!1,this.alpha=100,this.visible=!0,this.blendMode=a.default.LM_NORMAL,this.mask=null,this.maskLinked=!0,this.maskVisible=!0,this.maskThumbnail=null,this.useLegacyMultiply=!1}s.prototype.copyFrom=function(t){this.name=t.name,this.blendMode=t.blendMode,this.useLegacyMultiply=t.useLegacyMultiply,this.alpha=t.alpha,this.visible=t.visible,this.parent=t.parent,this.lockAlpha=t.lockAlpha,t.mask?this.mask?this.mask.copyPixelsFrom(t.mask):this.mask=t.mask.clone():this.mask=null,this.maskLinked=t.maskLinked,this.maskVisible=t.maskVisible,t.maskThumbnail?this.maskThumbnail?this.maskThumbnail.copyPixelsFrom(t.maskThumbnail):this.maskThumbnail=t.maskThumbnail.clone():this.maskThumbnail=null},s.prototype.setMask=function(t){(this.mask=t)||(this.maskThumbnail=null)},s.prototype.setAlpha=function(t){this.alpha=t},s.prototype.getAlpha=function(){return this.alpha},s.prototype.getEffectiveAlpha=function(){return this.visible?this.alpha:0},s.prototype.getEffectiveMask=function(){return this.maskVisible?this.mask:null},s.prototype.setName=function(t){this.name=t},s.prototype.getName=function(){return this.name},s.prototype.setBlendMode=function(t){(this.blendMode=t)===a.default.LM_MULTIPLY?this.useLegacyMultiply=!0:t===a.default.LM_MULTIPLY2&&(this.useLegacyMultiply=!1)},s.prototype.getBlendMode=function(){return this.blendMode},s.prototype.getLockAlpha=function(){return this.lockAlpha},s.prototype.setLockAlpha=function(t){this.lockAlpha=t},s.prototype.setVisible=function(t){this.visible=t},s.prototype.isVisible=s.prototype.getVisible=function(){return this.visible},s.prototype.setMaskLinked=function(t){this.maskLinked=t},s.prototype.getMaskLinked=function(){return this.maskLinked},s.prototype.setMaskVisible=function(t){this.maskVisible=t},s.prototype.getMaskVisible=function(){return this.maskVisible},s.prototype.getMemoryUsed=function(){return 0},s.prototype.getDepth=function(){return null==this.parent?0:this.parent.getDepth()+1},s.prototype.ancestorsAreVisible=function(){return null==this.parent||this.parent.visible&&this.parent.ancestorsAreVisible()},s.prototype.hasAncestor=function(t){return this.parent==t||this.parent&&this.parent.hasAncestor(t)},s.prototype.clone=function(){throw"Pure virtual CPLayer.clone() call"},s.prototype.getNonTransparentBounds=function(t){return new o.default(0,0,0,0)},s.prototype.rebuildMaskThumbnail=function(){if(this.mask){if(!this.maskThumbnail){var t=Math.ceil(Math.max(this.mask.width/s.LAYER_THUMBNAIL_WIDTH,this.mask.height/s.LAYER_THUMBNAIL_HEIGHT));this.maskThumbnail=new i.default(Math.floor(this.mask.width/t),Math.floor(this.mask.height/t),8)}this.maskThumbnail.createThumbnailFrom(this.mask)}else this.maskThumbnail=null},s.prototype.getMaskThumbnail=function(){return!this.maskThumbnail&&this.mask&&this.rebuildMaskThumbnail(),this.maskThumbnail},s.LAYER_THUMBNAIL_WIDTH=80,s.LAYER_THUMBNAIL_HEIGHT=50,e.exports=n.default},{"../util/CPRect":59,"./CPBlend":5,"./CPGreyBmp":14,"./CPLayerGroup":17}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var a=o(t("./CPLayer")),i=o(t("../util/CPRect"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){a.default.call(this,t),this.layers=[],this.expanded=!0,this.blendMode=e}function u(t,e){return t+e}((s.prototype=Object.create(a.default.prototype)).constructor=s).prototype.getLinearizedLayerList=function(t,e){e=e||[];var n,a=r(this.layers);try{for(a.s();!(n=a.n()).done;){var i=n.value;i instanceof s&&(i.expanded||!t)&&i.getLinearizedLayerList(t,e),e.push(i)}}catch(t){a.e(t)}finally{a.f()}return e},s.prototype.clearLayers=function(){this.layers=[]},s.prototype.addLayer=function(t){(t.parent=this).layers.push(t)},s.prototype.insertLayer=function(t,e){(e.parent=this).layers.splice(t,0,e)},s.prototype.removeLayer=function(t){var e=this.layers.indexOf(t);-1<e&&this.layers.splice(e,1)},s.prototype.removeLayerAtIndex=function(t){var e=this.layers[t];return e&&this.layers.splice(t,1),e},s.prototype.setLayerAtIndex=function(t,e){var n=this.layers[t];return(e.parent=this).layers[t]=e,n},s.prototype.setExpanded=function(t){this.expanded=t},s.prototype.getExpanded=function(){return this.expanded},s.prototype.indexOf=function(t){return this.layers.indexOf(t)},s.prototype.getMemoryUsed=function(){return this.layers.map(function(t){return t.getMemoryUsed()}).reduce(u,0)},s.prototype.clone=function(){var e=new s(this.name,this.blendMode);return a.default.prototype.copyFrom.call(e,this),e.expanded=this.expanded,e.layers=this.layers.map(function(t){return t.clone()}),e.layers.forEach(function(t){return t.parent=e}),e},s.prototype.getNonTransparentBounds=function(e){var n=new i.default(0,0,0,0);return this.layers.forEach(function(t){return n.union(t.getNonTransparentBounds(e))}),n},e.exports=n.default},{"../util/CPRect":59,"./CPLayer":16}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){this.table=new Uint8Array(256),this.loadIdentity=function(){for(var t=0;t<256;t++)this.table[t]=t},this.loadBrightnessContrast=function(t,e){for(var n=0<e?1/(1.0001-e):1+e,a=.5-.5*n+t,i=0;i<256;i++){var o=i/255,r=o*n+a;this.table[i]=Math.min(255,Math.max(~~(255*r),0))}},this.invert=function(){for(var t=0;t<256;t++)this.table[t]=255-this.table[t]}},e.exports=n.default},{}],19:[function(t,e,n){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("../util/CPRect")),c=a(t("./CPColorBmp")),l=(a(t("./CPGreyBmp")),a(t("wolfy87-eventemitter")));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,a=h(o);if(r){var i=h(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return e=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(o,l.default);var e,n,a,i=f(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).layer=t,n.buffer=t.mask.getImageData(0,0,t.mask.width,t.mask.height),n.invalidRect=new r.default(0,0,0,0),n.prepareMask=e,n}return e=o,(n=[{key:"close",value:function(){this.buffer=null,this.layer=null,this.emitEvent("changeLayer")}},{key:"setLayer",value:function(t){this.layer=t,this.invalidRect=t.getBounds(),this.emitEvent("changeLayer")}},{key:"isOpen",value:function(){return null!=this.layer}},{key:"invalidateRect",value:function(t){this.invalidRect.union(t)}},{key:"getImageData",value:function(){return this.prepareMask(),!this.invalidRect.isEmpty()&&this.layer&&this.layer.mask&&(!function(t,e,n){for(var a=n.top*e.width+n.left,i=a*c.default.BYTES_PER_PIXEL,o=n.getWidth(),r=n.getHeight(),s=e.width-o,l=s*c.default.BYTES_PER_PIXEL,u=0;u<r;u++,a+=s,i+=l)for(var d=0;d<o;d++,a++,i+=c.default.BYTES_PER_PIXEL)t.data[i+c.default.RED_BYTE_OFFSET]=e.data[a],t.data[i+c.default.GREEN_BYTE_OFFSET]=e.data[a],t.data[i+c.default.BLUE_BYTE_OFFSET]=e.data[a],t.data[i+c.default.ALPHA_BYTE_OFFSET]=255}(this.buffer,this.layer.mask,this.invalidRect),this.invalidRect.makeEmpty()),this.buffer}}])&&u(e.prototype,n),a&&u(e,a),o}();n.default=i,e.exports=n.default},{"../util/CPRect":59,"./CPColorBmp":13,"./CPGreyBmp":14,"wolfy87-eventemitter":206}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("../../js/engine/CPChibiFile"),l=i(t("./CPArtwork")),u=i(t("./CPColorBmp")),d=i(t("./CPImageLayer")),c=i(t("../util/AdobeColorTable")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=[],i={},o=this;function r(t,e){null===e?o.emitEvent("loadingProgress",[1,"Loading your "+t.friendly+"..."]):o.emitEvent("loadingProgress",[e,"Loading your "+t.friendly+" ("+Math.round(100*e)+"%)..."])}t.loadChibiFileUrl&&0<(""+t.loadChibiFileUrl).length?e.push({url:t.loadChibiFileUrl,friendly:"drawing layers",name:"layers",required:!0}):t.loadImageUrl&&0<(""+t.loadImageUrl).length&&e.push({url:t.loadImageUrl,friendly:"drawing",name:"flat",required:!0}),t.loadSwatchesUrl&&e.push({url:t.loadSwatchesUrl,friendly:"color swatches",name:"swatches",required:!1,noProgress:!0}),this.load=function(){if(0!=e.length){var n=e.shift(),t=new XMLHttpRequest;t.addEventListener("progress",function(t){var e;e=t.lengthComputable&&!n.noProgress?t.loaded/t.total:null,r(n,e)},!1),t.addEventListener("load",function(t){if(200==this.status){var e=this.response;o.emitEvent("loadingProgress",[1,"Starting ChickenPaint..."]),setTimeout(function(){(function(t,o){switch(t.name){case"flat":return new Promise(function(n,t){var e=new Blob([o],{type:"image/png"}),a=window.URL.createObjectURL(e);if(a){var i=new Image;i.onload=function(){var t=new l.default(this.width,this.height),e=new d.default(0,0,"Layer 1");e.image=u.default.createFromImage(i),t.addLayerObject(t.getLayersRoot(),e),i=null,window.URL.revokeObjectURL(a),n(t)},i.src=a}else t(null)});case"swatches":var e=(new c.default).read(o);return e?Promise.resolve(e):Promise.reject(null);case"layers":return(0,s.load)(o);default:return Promise.reject("Unexpected resource type '"+t.name+"'")}})(n,e).then(function(t){i[n.name]=t,o.load()},function(){o.emitEvent("loadingFailure",["Failed to read your "+n.friendly])})},0)}else a()},!1),t.addEventListener("error",a),r(n,n.noProgress?null:0),t.open("GET",n.url,!0),t.responseType="arraybuffer",t.send()}else o.emitEvent("loadingComplete",[i]);function a(){n.required?o.emitEvent("loadingFailure",["Failed to load your "+n.friendly+", please try again later."]):o.load()}}}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{"../../js/engine/CPChibiFile":11,"../util/AdobeColorTable":51,"./CPArtwork":3,"./CPColorBmp":13,"./CPImageLayer":15,"wolfy87-eventemitter":206}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.binaryStringToByteArray=m,n.default=r;var a=t("../../js/engine/CPChibiFile"),h=o(t("../util/AdobeColorTable")),i=o(t("wolfy87-eventemitter")),p=o(t("file-saver"));function o(t){return t&&t.__esModule?t:{default:t}}function m(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function r(l){var u=this,d=!1;function c(t){null===t?u.emitEvent("savingProgress",[1,"Saving your drawing to the server..."]):u.emitEvent("savingProgress",[t,"Saving your drawing to the server...  ("+Math.round(100*t)+"%)"])}function f(t){u.emitEvent("savingFailure",[t])}l.rotation=l.rotation||0,this.save=function(){var t,r,s;t=m(l.artwork.getFlatPNG(l.rotation)),r=new Blob([t],{type:"image/png"}),t=null,(l.artwork.isSimpleDrawing()?Promise.resolve(null):(0,a.save)(l.artwork)).then(function(t){if(d)u.emitEvent("savingFailure");else{if(l.swatches){var e=new h.default;s=new Blob([e.write(l.swatches)],{type:"application/octet-stream"})}else s=null;if(l.url){var n="This marker ensures the upload wasn't truncated",a=new FormData;a.append("beginMarker",n),a.append("painter","ChickenPaint v2.0"),a.append("picture",r),r=null,t?(a.append("chibifileFormat",t.version),a.append("chibifile",t.bytes),t=null,a.append("rotation",""+l.rotation)):a.append("rotation","0"),s&&(a.append("swatches",s),s=null),a.append("endMarker",n),i=a,(o=new XMLHttpRequest).upload.addEventListener("progress",function(t){c(t.lengthComputable?t.loaded/t.total:null)},!1),o.addEventListener("load",function(t){c(1),200==this.status&&/^CHIBIOK/.test(this.response)?u.emitEvent("savingComplete"):f(this.response)},!1),o.addEventListener("error",function(){f(this.response)},!1),c(0),o.open("POST",l.url,!0),o.responseType="text",o.send(i)}else p.default.saveAs(r,"oekaki.png"),t&&p.default.saveAs(t.bytes,"oekaki.chi"),s&&p.default.saveAs(s,"oekaki.aco");var i,o}}).catch(function(t){u.emitEvent("savingFailure")})},this.cancel=function(){d=!0}}(r.prototype=Object.create(i.default.prototype)).constructor=r},{"../../js/engine/CPChibiFile":11,"../util/AdobeColorTable":51,"file-saver":186,"wolfy87-eventemitter":206}],22:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"merge",value:function(t){return!1}},{key:"noChange",value:function(){return!1}},{key:"getMemoryUsed",value:function(t,e){return 0}},{key:"compact",value:function(){}}])&&i(e.prototype,n),a&&i(e,a),t}();n.default=a,e.exports=n.default},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,i.default)('<div class="modal fade chickenpaint-about-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">About ChickenPaint v2</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <a class="chickenpaint-on-github" target="_blank" href="https://github.com/thenickdude/chickenpaint"><span class="fab fa-github"></span> ChickenPaint on GitHub</a>\n                            \n                            <p>\n                                ChickenPaint is a translation of <a href="http://www.chibipaint.com/" target="_blank">ChibiPaint</a>\n                                from Java to JavaScript by Nicholas Sherlock / Chicken Smoothie\n                            </p>\n                            <p>\n                                ChibiPaint is Copyright (c) 2006-2008 Marc Schefer. All Rights Reserved\n                            </p>\n                            <p>\n                                ChickenPaint is free software: you can redistribute it and/or modify\n                                it under the terms of the GNU General Public License as published by\n                                the Free Software Foundation, either version 3 of the License, or\n                                (at your option) any later version.\n                            </p>\n        \n                            <p>\n                                ChickenPaint is distributed in the hope that it will be useful,\n                                but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n                                <a target="_blank" href="http://www.gnu.org/licenses/">GNU General Public License</a> for more details.\n                            </p>\n        \n                            <pre class="pre-scrollable chickenpaint-third-party-licenses">Includes icons from the <a href="http://tango.freedesktop.org/" target="_blank">Tango Desktop Project</a>\n\nIncludes these MIT-licensed libraries:\n\n    Includes the <a target="_blank" href="https://github.com/eligrey/FileSaver.js">FileSaver.js library</a>\n    FileSaver.js Copyright © 2015 <a target="_blank" href="http://eligrey.com/">Eli Grey</a>\n\n    Includes the <a target="_blank" href="https://github.com/nodeca/pako">Pako zlib compression library</a>\n    Copyright (C) 2014-2015 by Vitaly Puzrin\n    \n    Includes the <a target="_blank" href="https://github.com/madrobby/keymaster">keymaster.js</a> keyboard library\n    Copyright (c) 2011-2013 Thomas Fuchs\n\n    Includes the <a target="_blank" href="https://github.com/stefanpenner/es6-promise">es6-promise</a> library\n    Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n\n    Includes the <a target="_blank" href="http://benalman.com/projects/jquery-throttle-debounce-plugin/">jQuery throttle-debounce</a> library\n    Copyright (c) 2010 "Cowboy" Ben Alman\n\n    Permission is hereby granted, free of charge, to any person\n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use,\n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="http://www.jquery.com/" target="_blank">jQuery library</a> \nCopyright <a href="https://jquery.org/" target="_blank">jQuery Foundation and other contributors</a>\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/jquery\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation\n    files (the "Software"), to deal in the Software without\n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or\n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following\n    conditions:\n    \n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes the <a href="https://github.com/jquery/PEP/" target="_blank">jQuery PEP library</a>\nCopyright jQuery Foundation and other contributors, https://jquery.org/\n    \n    This software consists of voluntary contributions made by many\n    individuals. For exact contribution history, see the revision \n    history available at https://github.com/jquery/PEP\n    \n    The following license applies to all parts of this software \n    except as documented below:\n    \n    Permission is hereby granted, free of charge, to any person \n    obtaining a copy of this software and associated documentation \n    files (the "Software"), to deal in the Software without \n    restriction, including without limitation the rights to use, \n    copy, modify, merge, publish, distribute, sublicense, and/or \n    sell copies of the Software, and to permit persons to whom the\n    Software is furnished to do so, subject to the following \n    conditions:\n\n    The above copyright notice and this permission notice shall be\n    included in all copies or substantial portions of the Software.\n    \n    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND \n    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT \n    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, \n    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \n    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR \n    OTHER DEALINGS IN THE SOFTWARE.\n\nIncludes Font Awesome by Dave Gandy - <a href="http://fontawesome.io" target="_blank">http://fontawesome.io</a>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    ');e.on("hidden.bs.modal",function(t){e.remove()}),e.modal({show:!1}),e.data("bs.modal").$body=(0,i.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var a,i=(a=t("jquery"))&&a.__esModule?a:{default:a};e.exports=n.default},{jquery:187}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,a){var e=(0,r.default)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Box blur</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>Blur amount (pixels)</label>\n                                    <input type="text" class="form-control chickenpaint-blur-amount" value="3">\n                                </div>\n                                <div class="form-group">\n                                    <label>Iterations (1-8, larger gives smoother blur)</label>\n                                    <input type="text" class="form-control chickenpaint-blur-iterations" value="1">\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-box-blur" data-dismiss="modal">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),i=(0,r.default)(".chickenpaint-blur-amount",e),o=(0,r.default)(".chickenpaint-blur-iterations",e),n=(0,r.default)(".chickenpaint-apply-box-blur",e);this.show=function(){e.modal("show")},n.click(function(t){var e=Math.max(parseInt(i.val(),10),1),n=Math.min(Math.max(parseInt(o.val(),10),1),8);a.getArtwork().boxBlur(e,e,n)}),e.modal({show:!1}).on("shown.bs.modal",function(){i.focus()}).on("keypress",function(t){13==t.keyCode&&n.click()}),e.data("bs.modal").$body=(0,r.default)(t),t.appendChild(e[0])};var a,r=(a=t("jquery"))&&a.__esModule?a:{default:a};e.exports=n.default},{jquery:187}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=b;var o=a(t("../ChickenPaint")),r=a(t("./CPPalette")),m=a(t("./CPCheckbox")),u=a(t("./CPColorSwatch")),g=a(t("./CPSlider")),c=t("./CPGUIUtils"),f=a(t("../engine/CPColorBmp")),d=a(t("../util/CPColor")),l=t("../util/CPPolyfill"),h=a(t("jquery")),v=a(t("../../lib/keymaster"));function a(t){return t&&t.__esModule?t:{default:t}}function y(t,e){var n=document.createElement("div");return n.className="chickenpaint-checkbox-slider-group",n.appendChild(t.getElement()),n.appendChild(e.getElement()),n}function _(t,e){for(var n in e){var a=document.createElement("option");a.appendChild(document.createTextNode(e[n])),a.value=n,t.appendChild(a)}}function p(t){var e=150,n=32,a=document.createElement("canvas"),i=a.getContext("2d"),o=(0,c.createCheckerboardPattern)(i),r=new f.default(e,n),s=document.createElement("canvas"),l=s.getContext("2d"),u=t.getCurGradient();function d(){r.gradient(r.getBounds(),0,0,r.width,0,u,!0),l.putImageData(r.imageData,0,0,0,0,e,n),i.fillRect(0,0,a.width,a.height),i.drawImage(s,0,0)}this.getElement=function(){return a},t.on("gradientChange",function(t){u=t,d()}),a.width=s.width=e,a.height=s.height=n,a.className="chickenpaint-gradient-preview",i.fillStyle=o,d()}function b(t){r.default.call(this,t,"brush","Tool options");var e=new s(t),n=new w(t),a=new E(t),i=this.getBodyElement();i.appendChild(e.getElement()),i.appendChild(n.getElement()),i.appendChild(a.getElement()),t.on("modeChange",function(t){switch(e.getElement().style.display="none",n.getElement().style.display="none",a.getElement().style.display="none",t){case o.default.M_GRADIENTFILL:n.getElement().style.display="block";break;case o.default.M_TRANSFORM:a.getElement().style.display="block";break;default:e.getElement().style.display="block"}})}function s(a){var n=[1,2,3,4,5,6,7,8,9,10,15,20,25,30,35,40,45,50,60,70,80,90,100,125,150,175,200],t=document.createElement("div"),i=document.createElement("select"),o=new m.default(!1,"Control brush opacity with pen pressure"),r=new g.default(1,255),s=new m.default(!0,"Control brush size with pen pressure"),l=new g.default(1,200,!1,!0),u=new m.default(!1,"Control brush scattering with pen pressure"),d=new g.default(0,1e3,!1,!0),c=new g.default(0,100,!1,!0),f=new g.default(0,100,!1,!0),h=new g.default(0,100,!1,!0),p=new g.default(0,100,!1,!0),e=new b.CPBrushPreview(a);this.getElement=function(){return t},r.title=function(t){return"Opacity: "+t},r.on("valueChange",function(t){a.setAlpha(t)}),l.title=function(t){return"Brush size: "+t},l.on("valueChange",function(t){a.setBrushSize(t)}),c.title=function(t){return"Color: "+t+"%"},c.on("valueChange",function(t){a.getBrushInfo().resat=t/100,a.callToolListeners()}),f.title=function(t){return"Blend: "+t+"%"},f.on("valueChange",function(t){a.getBrushInfo().bleed=t/100,a.callToolListeners()}),h.title=function(t){return"Spacing: "+t+"%"},h.on("valueChange",function(t){a.getBrushInfo().spacing=t/100,a.callToolListeners()}),d.title=function(t){return"Scattering: "+t+"%"},d.on("valueChange",function(t){a.getBrushInfo().scattering=t/100,a.callToolListeners()}),p.title=function(t){return"Smoothing: "+t+"%"},p.on("valueChange",function(t){a.getBrushInfo().smoothing=t/100,a.callToolListeners()}),u.on("valueChange",function(t){a.getBrushInfo().pressureScattering=t,a.callToolListeners()}),o.on("valueChange",function(t){a.getBrushInfo().pressureAlpha=t,a.callToolListeners()}),s.on("valueChange",function(t){a.getBrushInfo().pressureSize=t,a.callToolListeners()}),i.addEventListener("change",function(t){a.getBrushInfo().tip=parseInt(i.value,10)}),i.className="form-control form-control-sm",_(i,["Round Pixelated","Round Hard Edge","Round Soft","Square Pixelated","Square Hard Edge"]),t.appendChild(i),t.appendChild(e.getElement()),t.appendChild(y(s,l)),t.appendChild(y(o,r)),t.appendChild(c.getElement()),t.appendChild(f.getElement()),t.appendChild(h.getElement()),t.appendChild(y(u,d)),t.appendChild(p.getElement()),o.setValue(a.getBrushInfo().pressureAlpha),r.setValue(a.getAlpha()),s.setValue(a.getBrushInfo().pressureSize),l.setValue(a.getBrushSize()),u.setValue(a.getBrushInfo().pressureScattering),d.setValue(~~(100*a.getBrushInfo().scattering)),i.value=a.getBrushInfo().tip,c.setValue(~~(100*a.getBrushInfo().resat)),f.setValue(~~(100*a.getBrushInfo().bleed)),h.setValue(~~(100*a.getBrushInfo().spacing)),p.setValue(~~(100*a.getBrushInfo().smoothing)),a.on("toolChange",function(t,e){r.setValue(e.alpha),l.setValue(e.size),s.setValue(e.pressureSize),o.setValue(e.pressureAlpha),i.value=e.tip,u.setValue(e.pressureScattering),~~(100*e.resat)!=c.value&&c.setValue(~~(100*e.resat)),~~(100*e.bleed)!=f.value&&f.setValue(~~(100*e.bleed)),~~(100*e.spacing)!=h.value&&h.setValue(~~(100*e.spacing)),~~(100*e.scattering)!=d.value&&d.setValue(~~(100*e.scattering)),~~(100*e.smoothing)!=p.value&&p.setValue(~~(100*e.smoothing))}),(0,v.default)("1,2,3,4,5,6,7,8,9,0",function(t,e){var n=parseInt(e.shortcut,10);0==n&&(n=10),a.setAlpha(Math.round(n/10*255))}),(0,v.default)("{,[",function(){for(var t=a.getBrushSize(),e=n.length-1;0<=e;e--)if(n[e]<t){a.setBrushSize(n[e]);break}}),(0,v.default)("},]",function(){for(var t=a.getBrushSize(),e=0;e<n.length;e++)if(t<n[e]){a.setBrushSize(n[e]);break}})}function w(e){var t,n,a,i=document.createElement("div"),o=new p(e),r=new u.default(new d.default(16777215&e.getCurGradient()[0]),e.getCurGradient()[0]>>>24,i),s=new u.default(new d.default(16777215&e.getCurGradient()[1]),e.getCurGradient()[1]>>>24,i);function l(){var t=[r.getAlpha()<<24|r.getColorRgb(),s.getAlpha()<<24|s.getColorRgb()];e.setCurGradient(t)}this.getElement=function(){return i},i.className="chickenpaint-gradient-panel",i.style.display="none",r.on("colorChange",l),r.on("alphaChange",l),s.on("colorChange",l),s.on("alphaChange",l),(t=document.createElement("p")).innerHTML="Gradient",i.appendChild(t),i.appendChild(o.getElement()),(n=document.createElement("div")).className="chickenpaint-gradient-colors",(a=document.createElement("div")).className="chickenpaint-gradient-start-color",a.appendChild(r.getElement()),n.appendChild(a),(a=document.createElement("div")).className="chickenpaint-gradient-end-color",a.appendChild(s.getElement()),n.appendChild(a),i.appendChild(n)}function E(e){var t=document.createElement("div"),n=document.createElement("button"),a=document.createElement("button"),i=document.createElement("select");if(this.getElement=function(){return t},t.className="chickenpaint-transform-panel",t.style.display="none",n.type="button",a.type="button",n.className="btn btn-primary btn-block",a.className="btn btn-light btn-block",n.innerHTML="Apply transform",a.innerHTML="Cancel",i.addEventListener("change",function(t){e.setTransformInterpolation(this.value)}),i.className="form-control chickenpaint-transform-interpolation",_(i,{smooth:"Smooth",sharp:"Sharp"}),(0,l.isCanvasInterpolationSupported)()){var o=document.createElement("div"),r=document.createElement("label");r.innerHTML="Transform style",o.className="form-group",o.appendChild(r),o.appendChild(i),t.appendChild(o)}var s=document.createElement("div");s.appendChild(n),s.appendChild(a),s.className="form-group",t.appendChild(s),n.addEventListener("click",function(t){e.actionPerformed({action:"CPTransformAccept"}),t.preventDefault()}),a.addEventListener("click",function(t){e.actionPerformed({action:"CPTransformReject"}),t.preventDefault()})}((b.prototype=Object.create(r.default.prototype)).constructor=b).CPBrushPreview=function(s){var l=16,u=document.createElement("canvas"),t=u.getContext("2d"),e=!1;function d(){t.clearRect(0,0,u.width,u.height),t.beginPath(),t.arc(u.width/2,u.height/2,l/2*window.devicePixelRatio,0,2*Math.PI),t.stroke()}function n(t){var e=(0,h.default)(u).offset(),n=t.pageX-e.left,a=t.pageY-e.top,i=n-(0,h.default)(u).width()/2,o=a-(0,h.default)(u).height()/2,r=Math.round(2*Math.sqrt(i*i+o*o));l=Math.max(1,Math.min(200,r)),d(),s.setBrushSize(l)}function a(t){e&&(e=!1,window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",n))}this.getElement=function(){return u},u.addEventListener("mousedown",function(t){e||(e=!0,window.addEventListener("mouseup",a),window.addEventListener("mousemove",n),n(t))}),s.on("toolChange",function(t,e){e.size!=l&&(l=e.size,d())}),u.width=64,u.height=64,1<window.devicePixelRatio&&(u.style.width=u.width+"px",u.style.height=u.height+"px",u.width=u.width*window.devicePixelRatio,u.height=u.height*window.devicePixelRatio),u.className="chickenpaint-brush-preview",t.strokeStyle="black",t.lineWidth=1*window.devicePixelRatio,d()},e.exports=n.default},{"../../lib/keymaster":64,"../ChickenPaint":1,"../engine/CPColorBmp":13,"../util/CPColor":54,"../util/CPPolyfill":56,"./CPCheckbox":27,"./CPColorSwatch":31,"./CPGUIUtils":33,"./CPPalette":39,"./CPSlider":44,jquery:187}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;var a=i(t("wolfy87-eventemitter")),jt=i(t("jquery")),Ht=i(t("../../lib/keymaster")),Wt=i(t("../util/CPRect")),Ut=i(t("../util/CPTransform")),Yt=i(t("../util/CPWacomTablet")),qt=i(t("../util/CPBezier")),zt=t("../util/throttle-debounce"),Gt=i(t("../util/CPPolygon")),Xt=t("../util/CPPolyfill"),Vt=i(t("../util/CPVector")),Kt=i(t("../ChickenPaint")),Zt=i(t("../engine/CPBrushInfo")),$t=i(t("../engine/CPLayerGroup")),Qt=(i(t("../engine/CPMaskView")),t("./CPGUIUtils")),Jt=i(t("./CPScrollbar")),te=i(t("../util/CPColor"));function i(t){return t&&t.__esModule?t:{default:t}}function ee(){this.modes=[]}ee.MODE_INDEX_DEFAULT=0,ee.MODE_INDEX_USER=1,ee.prototype.setMode=function(t,e){var n=this.modes[t];n!=e&&(n&&n.leave(),(this.modes[t]=e).enter())},ee.prototype.setDefaultMode=function(t){t.transient=!1,t.capture=!1,this.setMode(ee.MODE_INDEX_DEFAULT,t)},ee.prototype.setUserMode=function(t){for(var e=this.modes.length-1;ee.MODE_INDEX_USER<e;e--)this.modes[e].leave(),this.modes.splice(e,1);t.transient=!1,t.capture=!1,this.setMode(ee.MODE_INDEX_USER,t)},ee.prototype.deliverEvent=function(t,e){for(var n=this.modes.length-1;0<=n;n--){var a=this.modes[n];if(a[t].apply(a,e)||a.capture&&"paint"!=t)return!0}return!1};for(var o=function(){var a=s[r];ee.prototype[a]=function(t,e,n){this.deliverEvent(a,[t,e,n])}},r=0,s=["mouseDown","mouseUp"];r<s.length;r++)o();for(var l=function(){var n=d[u];ee.prototype[n]=function(t,e){this.deliverEvent(n,[t,e])}},u=0,d=["mouseDrag","mouseMove"];u<d.length;u++)l();for(var c=function(){var e=h[f];ee.prototype[e]=function(t){this.deliverEvent(e,[t])&&t.preventDefault()}},f=0,h=["keyDown","keyUp"];f<h.length;f++)c();function p(o){var u,t,i,r,s,n,a,l,d,c,f,g=0,h=1,p=2,m=.1,v=16,y="default",e="grab",_="grabbing",b="crosshair",w="move",E="nesw-resize",T="nwse-resize",k="ns-resize",P="ew-resize",U=this,x=document.createElement("div"),C=document.createElement("div"),O=document.createElement("div"),S=document.createElement("canvas"),L=S.getContext("2d"),M=document.createElement("canvas"),A=M.getContext("2d"),R=(0,Qt.createCheckerboardPattern)(L),Y=o.getArtwork(),B=1,I=0,F=0,N=0,q=new Ut.default,D=!1,j=!1,H=32,z=0,G=0,W=!1,X=[!1,!1,!1],V=!1,K=Y.getBounds(),Z=new Wt.default(0,0,0,0),$=!1,Q=[],J=new ee,tt=new Jt.default(!1),et=new Jt.default(!0),nt=Yt.default.getRef();function at(){}function it(){}function ot(){this.shouldPaintBrushPreview=!1,this.oldPreviewRect=null}function rt(){ot.call(this),this.smoothMouse={x:0,y:0}}function st(){var o,r;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")&&_t())return this.capture=!0,o=r={x:z+.5,y:G+.5},this.eraseBrushPreview(),!0},this.mouseDrag=function(t){if(this.capture){var e=new Wt.default(Math.min(o.x,r.x)-1-1,Math.min(o.y,r.y)-1-1,Math.max(o.x,r.x)+1+1+1,Math.max(o.y,r.y)+1+1+1);if(r={x:z+.5,y:G+.5},t.shiftKey){var n=Math.PI/4,a=Math.round(Math.atan2(r.y-o.y,r.x-o.x)/n);switch(a){case 0:case 4:r.y=o.y;break;case 2:case 6:r.x=o.x;break;default:a*=n;var i=Math.sqrt((r.y-o.y)*(r.y-o.y)+(r.x-o.x)*(r.x-o.x));r.x=o.x+i*Math.cos(a),r.y=o.y+i*Math.sin(a)}}return e.union(new Wt.default(Math.min(o.x,r.x)-1-1,Math.min(o.y,r.y)-1-1,Math.max(o.x,r.x)+1+1+1,Math.max(o.y,r.y)+1+1+1)),Ft(e),!0}this.mouseMove.call(this,t)},this.mouseUp=function(t,e,n){if(this.capture&&e==g){var a=Et(o),i=Et(r);return this.capture=!1,this.drawLine(a,i),Ft(new Wt.default(Math.min(o.x,r.x)-1-1,Math.min(o.y,r.y)-1-1,Math.max(o.x,r.x)+1+1+1,Math.max(o.y,r.y)+1+1+1)),!0}},this.paint=function(){this.capture?(L.lineWidth=1,L.beginPath(),L.moveTo(o.x,o.y),L.lineTo(r.x,r.y),L.stroke()):ot.prototype.paint.call(this)},ot.call(this)}function lt(){var c,f,h,p,m=0;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")&&_t()){var a=Et({x:z,y:G});return m=0,c=f=h=p=a,this.capture=!0,this.eraseBrushPreview(),!0}},this.mouseDrag=function(t){if(this.capture&&0===m){var e=Et({x:z,y:G});return h=p=e,U.repaintAll(),!0}this.mouseMove.call(this,t)},this.mouseUp=function(t,e,n){if(this.capture&&e==g){switch(m){case 0:m=1;break;case 1:m=2;break;case 2:this.capture=!1;var a=c,i=f,o=h,r=p,s=new qt.default;s.x0=a.x,s.y0=a.y,s.x1=i.x,s.y1=i.y,s.x2=o.x,s.y2=o.y,s.x3=r.x,s.y3=r.y;var l=new Array(500),u=new Array(500);s.compute(l,u,500),Y.beginStroke(l[0],u[0],1);for(var d=1;d<500;d++)Y.continueStroke(l[d],u[d],1);Y.endStroke(),U.repaintAll()}return!0}},this.mouseMove=function(t,e){if(this.capture){var n=Et({x:z,y:G});return 1==m?f=n:2==m&&(h=n),U.repaintAll(),!0}ot.prototype.mouseMove.call(this,t,e)},this.paint=function(){if(this.capture){var t=new qt.default,e=kt(c),n=kt(f),a=kt(h),i=kt(p);t.x0=e.x,t.y0=e.y,t.x1=n.x,t.y1=n.y,t.x2=a.x,t.y2=a.y,t.x3=i.x,t.y3=i.y;var o=new Array(100),r=new Array(100);t.compute(o,r,100),L.beginPath(),L.moveTo(o[0],r[0]);for(var s=1;s<100;s++)L.lineTo(o[s],r[s]);L.moveTo(~~e.x,~~e.y),L.lineTo(~~n.x,~~n.y),L.moveTo(~~a.x,~~a.y),L.lineTo(~~i.x,~~i.y),L.stroke()}else ot.prototype.paint.call(this)},ot.call(this)}function ut(){var a;this.mouseDown=function(t,e,n){return!!this.capture||(Ht.default.isPressed("space")||(e!=g||this.transient&&!t.altKey)&&e!=p?void(this.transient&&J.pop()):(a=e,this.capture=!0,vt(b),this.mouseDrag(t),!0))},this.mouseDrag=function(t){if(this.capture){var e=Et({x:z,y:G});return Y.isPointWithin(e.x,e.y)&&o.setCurColor(new te.default(Y.colorPicker(e.x,e.y))),!0}},this.mouseUp=function(t,e,n){if(this.capture&&e==a)return a=-1,this.capture=!1,vt(y),this.transient&&J.pop(),!0},this.enter=function(){at.prototype.enter.call(this),a=-1}}function dt(){var a,i,o,r;this.keyDown=function(t){if(32==t.keyCode)return this.capture||vt(e),!0},this.keyUp=function(t){if(this.transient&&r!=h&&32==t.keyCode)return vt(y),J.pop(),!0},this.mouseDown=function(t,e,n){return!!this.capture||(e==h||Ht.default.isPressed("space")&&e==g?(this.capture=!0,r=e,a=t.pageX,i=t.pageY,o=U.getOffset(),vt(_),!0):void(this.transient&&J.pop()))},this.mouseDrag=function(t){if(this.capture)return U.setOffset(o.x+t.pageX-a,o.y+t.pageY-i),!0},this.mouseUp=function(t,e,n){if(this.capture&&e==r)return r=-1,this.capture=!1,this.transient&&!Ht.default.isPressed("space")&&(vt(y),J.pop()),!0},this.enter=function(){vt(e)}}function ct(){}function ft(){var i,o=new Wt.default(0,0,0,0),r=-1;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")){var a=Tt({x:z,y:G});return r=e,o.makeEmpty(),i=a,U.repaintAll(),this.capture=!0}},this.mouseDrag=function(t){if(!this.capture)return!1;var e=Tt({x:z,y:G}),n=t.shiftKey,a=~~Math.max(Math.abs(e.x-i.x),Math.abs(e.y-i.y));return e.x>=i.x?(o.left=i.x,o.right=(n?i.x+a:e.x)+1):(o.left=n?i.x-a:e.x,o.right=i.x+1),e.y>=i.y?(o.top=i.y,o.bottom=(n?i.y+a:e.y)+1):(o.top=n?i.y-a:e.y,o.bottom=i.y+1),U.repaintAll(),!0},this.mouseUp=function(t,e,n){if(this.capture&&e==r)return Y.rectangleSelection(o),o.makeEmpty(),U.repaintAll(),this.capture=!1,r=-1,!0},this.paint=function(){o.isEmpty()||(L.lineWidth=1,Ct(L,o))}}function ht(){var o,r,s=!1;this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!Ht.default.isPressed("space")&&yt())return o=Et({x:z,y:G}),r=t.altKey,s=!0,this.capture=!0},this.mouseDrag=(0,zt.throttle)(25,function(t){if(this.capture){var e=Et({x:z,y:G}),n=e.x-o.x,a=e.y-o.y,i={x:~~n,y:~~a};return 0==i.x&&0==i.y||(Y.move(i.x,i.y,r&&s),s=!1),o.x=e.x-(n-i.x),o.y=e.y-(a-i.y),!0}}),this.mouseUp=function(t,e,n){if(this.capture&&e==g)return this.capture=!1,this.transient&&J.pop(),!0}}function pt(){var M,A,R,B,I,F,N=-2,D=-3,j=-1;function l(){return R.getTransformed(q)}function H(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function W(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function u(t,e){for(var n=0;n<t.points.length;n++)if((e.x-t.points[n].x)*(e.x-t.points[n].x)+(e.y-t.points[n].y)*(e.y-t.points[n].y)<=49)return 2*n;for(var a=0;a<t.points.length;a++){var i=t.points[a],o=t.points[(a+1)%t.points.length],r=new Vt.default(o.x-i.x,o.y-i.y),s=new Vt.default(e.x-i.x,e.y-i.y),l=r.getLength(),u=r.getScaled(1/l),d=s.getScaled(1/l),c=u.getDotProduct(d);if(0<=c&&c<=1&&(r.scale(c),(r.x-s.x)*(r.x-s.x)+(r.y-s.y)*(r.y-s.y)<=49))return 2*a+1}return t.containsPoint(e)?D:N}function i(){var t=l(),e=u(t,{x:z,y:G});switch(e){case 0:case 2:case 4:case 6:var n=~~(e/2),a=t.points[(n+3)%4],i=t.points[n],o=t.points[(n+1)%4];d(Vt.default.subtractPoints(a,i).normalize().add(Vt.default.subtractPoints(o,i).normalize()));break;case 1:case 3:case 5:case 7:var r=t.points[~~(e/2)],s=t.points[(1+~~(e/2))%4];d(Vt.default.subtractPoints(s,r).getPerpendicular());break;case D:vt(w);break;case N:vt(y);break;default:vt(y)}}function d(t){var e,n=Math.atan2(-t.y,t.x),a=Math.floor(n/(Math.PI/4)+.5);switch(a<0&&(a+=4),a){case 0:default:e=P;break;case 1:e=E;break;case 2:e=k;break;case 3:e=T}vt(e)}this.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")){var a=l();return j=u(a,{x:z,y:G}),I=Et(B={x:z,y:G}),this.capture=!0,i(),!0}},this.mouseDrag=(0,zt.throttle)(40,function(t){if(this.capture){var e={x:z,y:G};switch(j){case D:var n=W(Et(e)),a=Vt.default.subtractPoints(n,I),i=a.getTruncated(),o=a.subtract(i),r=new Ut.default;r.translate(i.x,i.y),M.preMultiply(r),I=Vt.default.subtractPoints(n,o);break;case N:var s,l=Math.PI/4,u=R.getCenter(),d=kt(u),c=Math.atan2(B.y-d.y,B.x-d.x),f=Math.atan2(e.y-d.y,e.x-d.x)-c,h=new Ut.default;F+=f,s=t.shiftKey?-M.decompose().rotate+Math.round(F/l)*l:f,h.rotateAroundPoint(s,u.x,u.y),M.preMultiply(h),B=e;break;case 0:case 2:case 4:case 6:var p=~~(j/2),m=A.points[p],g=M.getInverted().getTransformedPoint(W(Et(e))),v=A.points[(p+2)%4],y=(g.x-v.x)/(m.x-v.x),_=(g.y-v.y)/(m.y-v.y);if(Math.abs(y)<.001||Math.abs(_)<.001||isNaN(y)||isNaN(_))return!0;if(t.shiftKey){var b=Math.max(y,_);_=y=b}M.scaleAroundPoint(y,_,v.x,v.y);break;case 1:case 5:case 3:case 7:var w,E,T=~~(j/2),k=H(A.points[T],A.points[(T+1)%4]),P=M.getInverted().getTransformedPoint(W(Et(e))),x=H(A.points[(T+2)%4],A.points[(T+3)%4]),C=Vt.default.subtractPoints(k,x),O=Vt.default.subtractPoints(P,x),S=C.getLength(),L=C.getDotProduct(O)/S/S;if(Math.abs(L)<.001||isNaN(L))return!0;1==j||5==j?(w=1,E=L):(w=L,E=1),M.scaleAroundPoint(w,E,x.x,x.y)}return R=A.getTransformed(M),Y.transformAffineAmend(M),U.repaintAll(),!0}}),this.mouseUp=function(t,e,n){if(this.capture&&e==g)return this.capture=!1,j=-1,!0},this.mouseMove=function(){this.capture||i()},this.paint=function(){for(var t=l().points,e=new Array(2*t.length),n=0;n<t.length;n++)e[n]=t[n];for(var a=0;a<t.length;a++){var i=t[a],o=t[(a+1)%t.length],r={x:(i.x+o.x)/2,y:(i.y+o.y)/2};e[a+t.length]=r}(0,Qt.setContrastingDrawStyle)(L,"fill");for(var s=0;s<e.length;s++)L.fillRect(e[s].x-3,e[s].y-3,7,7);xt(L,t)},this.keyDown=function(t){return 13==t.keyCode?(o.actionPerformed({action:"CPTransformAccept"}),!0):27==t.keyCode?(o.actionPerformed({action:"CPTransformReject"}),!0):void 0},this.enter=function(){at.prototype.enter.call(this);var t,e=Y.transformAffineBegin();M=e.transform,e.rect,(t=e.selection).isEmpty()&&(t=e.rect.clone()),A=new Gt.default(t.toPoints()),R=A.getTransformed(M),j=-1,F=0,U.repaintAll()},this.leave=function(){at.prototype.leave.call(this),U.repaintAll()}}function mt(){var l,u,d=0,c=!1,a=-1;this.mouseDown=function(t,e,n){return!!this.capture||(!this.transient&&e==g&&!t.altKey&&!Ht.default.isPressed("space")||t.altKey&&(e==h||e==g&&Ht.default.isPressed("space"))?(l={x:z,y:G},d=U.getRotation(),u=q.clone(),c=!1,this.capture=!0,a=e,!0):void(this.transient&&J.pop()))},this.mouseDrag=function(t){if(this.capture){var e=z,n=G,a=(0,jt.default)(S).width()/2,i=(0,jt.default)(S).height()/2,o={x:S.width/2,y:S.height/2},r=Math.atan2(n-i,e-a)-Math.atan2(l.y-i,l.x-a),s=new Ut.default;return s.rotateAroundPoint(r,o.x,o.y),s.multiply(u),U.setRotation(d+r),U.setOffset(~~s.getTranslateX(),~~s.getTranslateY()),c=!0}},this.mouseUp=function(t,e,n){if(this.capture&&e==a)return c?function(){var t=Math.round(N/(Math.PI/2))*Math.PI/2;if(Math.abs(N-t)<5/180*Math.PI){var e=t-d,n={x:S.width/2,y:S.height/2},a=new Ut.default;a.rotateAroundPoint(e,n.x,n.y),a.multiply(u),U.setRotation(d+e),U.setOffset(~~a.getTranslateX(),~~a.getTranslateY()),U.repaintAll()}U.emitEvent("canvasRotated90",[U.getRotation90()])}():U.resetRotation(),this.capture=!1,!this.transient||Ht.default.isPressed("space")&&Ht.default.alt||J.pop(),!0},this.keyUp=function(t){if(this.transient&&a!=h&&32==t.keyCode)return vt(y),J.pop(),!0},this.keyDown=function(t){if(32==t.keyCode&&t.altKey)return!0}}function gt(){st.call(this)}function vt(t){S.getAttribute("data-cursor")!=t&&S.setAttribute("data-cursor",t)}function yt(){var t=Y.getActiveLayer();return t.visible&&t.ancestorsAreVisible()?0!=t.alpha||(o.showLayerNotification(t,"Whoops! This layer's opacity is currently 0%","opacity"),!1):(o.showLayerNotification(t,"Whoops! This layer is currently hidden","layer"),!1)}function _t(){var t=Y.getActiveLayer();return t instanceof $t.default&&!Y.isEditingMask()?(o.showLayerNotification(t,"Whoops! You can't draw on a group","layer"),!1):yt()}function bt(t,e,n,a,i){var o=e-a-i+n/4,r=e+n-i-n/4;t.setValues(-i,a,o,r),t.setBlockIncrement(Math.max(1,~~(.66*a))),t.setUnitIncrement(Math.max(1,~~(.05*a)))}function wt(){q.setToIdentity(),q.translate(I,F),q.scale(B,B),q.rotate(N),function(){if(null!=tt&&null!=et&&!tt.getValueIsAdjusting()&&!et.getValueIsAdjusting()){var t=Ot(new Wt.default(0,0,M.width,M.height));bt(tt,t.left,t.getWidth(),(0,jt.default)(S).width(),U.getOffset().x),bt(et,t.top,t.getHeight(),(0,jt.default)(S).height(),U.getOffset().y)}}(),U.repaintAll()}function Et(t){return q.getInverted().getTransformedPoint(t)}function Tt(t){var e=Et(t);return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e}function kt(t){return q.getTransformedPoint(t)}function Pt(t){var e=kt(t);return e.x=Math.round(e.x),e.y=Math.round(e.y),e}function xt(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y),t.stroke()}function Ct(t,e){xt(t,function(t){for(var e=kt({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}),n=t.toPoints(),a=0;a<n.length;a++)n[a]=Pt(n[a]),n[a].x+=.5*Math.sign(e.x-n[a].x),n[a].y+=.5*Math.sign(e.y-n[a].y);return n}(e))}function Ot(t){var e=Pt({x:t.left-1,y:t.top-1}),n=Pt({x:t.left-1,y:t.bottom}),a=Pt({x:t.right,y:t.top-1}),i=Pt({x:t.right,y:t.bottom}),o=new Wt.default(Math.min(Math.min(e.x,n.x),Math.min(a.x,i.x)),Math.min(Math.min(e.y,n.y),Math.min(a.y,i.y)),Math.max(Math.max(e.x,n.x),Math.max(a.x,i.x))+1,Math.max(Math.max(e.y,n.y),Math.max(a.y,i.y))+1);return o.grow(2,2),o}function St(){var t=S.width,e=S.height,n=kt({x:Y.width/2,y:Y.height/2});U.setOffset(Math.round(I+t/2-n.x),Math.round(F+e/2-n.y))}function Lt(t,e,n){if(t=Math.max(m,Math.min(v,t)),U.getZoom()!=t){var a=U.getOffset();U.setOffset(a.x+~~((e-a.x)*(1-t/U.getZoom())),a.y+~~((n-a.y)*(1-t/U.getZoom()))),U.setZoom(t),U.repaintAll()}}function Mt(t){Lt(t,(0,jt.default)(S).width()/2,(0,jt.default)(S).height()/2)}function At(t){return V?nt.getPressure():2*t.pressure}Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1},at.prototype.transient=!1,at.prototype.capture=!1,at.prototype.enter=function(){vt(y)},at.prototype.leave=function(){this.capture=!1},at.prototype.mouseMove=at.prototype.paint=at.prototype.mouseDown=at.prototype.mouseDrag=at.prototype.mouseUp=at.prototype.keyDown=at.prototype.suspend=at.prototype.resume=at.prototype.keyUp=function(){},((it.prototype=Object.create(at.prototype)).constructor=it).prototype.mouseDown=function(t,e,n){var a=Ht.default.isPressed("space");!a&&(e==p||e==g&&t.altKey)?(J.push(i,!0),J.peek().mouseDown(t,e,n)):(e==h||a&&e==g)&&(t.altKey?J.push(s,!0):J.push(r,!0),J.peek().mouseDown(t,e,n))},it.prototype.keyDown=function(t){if(32==t.keyCode)return t.altKey?J.push(s,!0):J.push(r,!0),J.peek().keyDown(t),!0},((ot.prototype=Object.create(at.prototype)).constructor=ot).prototype.getBrushPreviewOval=function(){var t=o.getBrushSize()*B;return new Wt.default(z-t/2,G-t/2,z+t/2,G+t/2)},ot.prototype.queueBrushPreview=function(){if(J.peek()==this){this.shouldPaintBrushPreview=!0;var t=this.getBrushPreviewOval();t.grow(2,2),null!=this.oldPreviewRect&&(t.union(this.oldPreviewRect),this.oldPreviewRect=null),Ft(t)}},ot.prototype.eraseBrushPreview=function(){this.shouldPaintBrushPreview=!1,null!=this.oldPreviewRect&&(Ft(this.oldPreviewRect),this.oldPreviewRect=null)},ot.prototype.mouseMove=function(t,e){this.queueBrushPreview()},ot.prototype.enter=function(){at.prototype.enter.call(this),W&&this.queueBrushPreview()},ot.prototype.suspend=ot.prototype.leave=function(){at.prototype.leave.call(this),this.eraseBrushPreview()},ot.prototype.resume=ot.prototype.enter,ot.prototype.paint=function(){if(this.shouldPaintBrushPreview){this.shouldPaintBrushPreview=!1;var t=this.getBrushPreviewOval();L.beginPath(),L.arc((t.left+t.right)/2,(t.top+t.bottom)/2,t.getWidth()/2,0,2*Math.PI),L.stroke(),t.grow(2,2),null==this.oldPreviewRect?this.oldPreviewRect=t:this.oldPreviewRect.union(t)}},((rt.prototype=Object.create(ot.prototype)).constructor=rt).prototype.mouseDown=function(t,e,n){if(!this.capture&&e==g&&!t.altKey&&!Ht.default.isPressed("space")&&_t()){var a=Et({x:z,y:G});if(this.eraseBrushPreview(),Y.beginStroke(a.x,a.y,n))return this.capture=!0,this.smoothMouse=a,!0}},rt.prototype.mouseDrag=function(t,e){if(this.capture){var n=Et({x:z,y:G}),a=Math.min(.999,Math.pow(o.getBrushInfo().smoothing,.3));return this.smoothMouse.x=(1-a)*n.x+a*this.smoothMouse.x,this.smoothMouse.y=(1-a)*n.y+a*this.smoothMouse.y,Y.continueStroke(this.smoothMouse.x,this.smoothMouse.y,e),!0}this.mouseMove(t)},rt.prototype.mouseUp=function(t,e,n){if(this.capture)return e==g&&(this.capture=!1,Y.endStroke()),!0},((st.prototype=Object.create(ot.prototype)).constructor=st).prototype.drawLine=function(t,e){Y.beginStroke(t.x,t.y,1),Y.continueStroke(e.x,e.y,1),Y.endStroke()},(lt.prototype=Object.create(ot.prototype)).constructor=lt,(ut.prototype=Object.create(at.prototype)).constructor=ut,((((dt.prototype=Object.create(at.prototype)).constructor=ct).prototype=Object.create(at.prototype)).constructor=ct).prototype.mouseDown=function(t,e,n){if(e==g&&!t.altKey&&!Ht.default.isPressed("space")&&_t()){var a=Et({x:z,y:G});return Y.isPointWithin(a.x,a.y)&&(Y.floodFill(a.x,a.y),U.repaintAll()),!0}},(ft.prototype=Object.create(at.prototype)).constructor=ft,((ht.prototype=Object.create(at.prototype)).constructor=ht).prototype.mouseMove=function(t){if(!Ht.default.isPressed("space")&&!t.altKey)return vt(w),!0},ht.prototype.enter=function(){vt(w)},(pt.prototype=Object.create(at.prototype)).constructor=pt,(mt.prototype=Object.create(at.prototype)).constructor=mt,((gt.prototype=Object.create(st.prototype)).constructor=gt).prototype.drawLine=function(t,e){Y.gradientFill(Math.round(t.x),Math.round(t.y),Math.round(e.x),Math.round(e.y),o.getCurGradient())},gt.prototype.queueBrushPreview=function(){},this.setZoom=function(t){B=t,wt()},this.getZoom=function(){return B},this.setGridSize=function(t){H=Math.max(Math.round(t),1),this.repaintAll()},this.getGridSize=function(){return H},this.setOffset=function(t,e){isNaN(t)||isNaN(e)?console.log("Bad offset"):(I=t,F=e,wt())},this.getOffset=function(){return{x:I,y:F}},this.setInterpolation=function(t){D=t,(0,Xt.setCanvasInterpolation)(L,t),this.repaintAll()},this.setRotation=function(t){N=t%(2*Math.PI),wt()},this.getRotation=function(){return N},this.getRotation90=function(){var t=Math.round(this.getRotation()/Math.PI*2);return(t%=4)<0&&(t+=4),t},this.zoomIn=function(){Mt(2*this.getZoom())},this.zoomOut=function(){Mt(.5*this.getZoom())},this.zoom100=function(){Mt(1),St()};var Rt,Bt=!(this.resetRotation=function(){var t={x:S.width/2,y:S.height/2},e=new Ut.default;e.rotateAroundPoint(-this.getRotation(),t.x,t.y),e.multiply(q),this.setOffset(~~e.getTranslateX(),~~e.getTranslateY()),this.setRotation(0),U.emitEvent("canvasRotated90",[0])});function It(){$||($=!0,window.requestAnimationFrame(function(){U.paint()}))}function Ft(t){Z.union(t),It()}function Nt(){K=Y.getBounds(),U.repaintAll()}this.getElement=function(){return x},this.repaintAll=function(){Z.left=0,Z.top=0,Z.right=S.width,Z.bottom=S.height,It()},this.paint=function(){var t,e=!1;($=!1,Z.isEmpty()||(L.save(),L.clipTo&&(L.beginPath(),Z.left=0|Z.left,Z.top=0|Z.top,L.rect(Z.left,Z.top,Math.ceil(Z.getWidth()),Math.ceil(Z.getHeight())),L.clip()),e=!0),K.isEmpty())||(t=u&&u.isOpen()?u.getImageData():Y.fusionLayers().getImageData(),A.putImageData(t,0,0,K.left,K.top,K.getWidth(),K.getHeight()),K.makeEmpty());if(L.fillStyle="#606060",L.fillRect(0,0,S.width,S.height),L.save(),L.setTransform(q.m[0],q.m[1],q.m[2],q.m[3],q.m[4],q.m[5]),L.fillStyle=R,L.fillRect(0,0,Y.width,Y.height),L.drawImage(M,0,0,M.width,M.height),L.restore(),(0,Qt.setContrastingDrawStyle)(L,"stroke"),L.lineWidth=1,Y.getSelection().isEmpty()||J.peek()instanceof ft&&J.peek().capture||(L.setLineDash([3,2]),Ct(L,Y.getSelection()),L.setLineDash([])),j){var n=Y.getBounds();if(2<B*H){L.beginPath();for(var a=H-1;a<n.right;a+=H){var i=kt({x:a,y:n.top}),o=kt({x:a,y:n.bottom});L.moveTo(i.x+.5,i.y+.5),L.lineTo(o.x+.5,o.y+.5)}for(var r=H-1;r<n.bottom;r+=H){var s=kt({x:0,y:r}),l=kt({x:n.right,y:r});L.moveTo(s.x+.5,s.y+.5),L.lineTo(l.x+.5,l.y+.5)}L.stroke()}}J.paint(L),L.globalCompositeOperation="source-over",e&&(Z.makeEmpty(),L.restore())},this.showGrid=function(t){j=t,this.repaintAll()},this.resize=function(t,e){t-=(0,jt.default)(O).outerHeight(),(0,jt.default)(S).css("height",t+"px"),S.width=(0,jt.default)(S).width(),S.height=t,Rt=null,e||St(),this.setInterpolation(D),this.repaintAll()},o.on("toolChange",function(t,e){for(var n=Q[e.strokeMode],a=0;a<J.modes.length;a++)if(J.modes[a]instanceof ot){J.modes[a].leave(),J.modes[a]=n,J.modes[a].enter();break}f=n}),o.on("modeChange",function(t){var e;switch(t){case Kt.default.M_DRAW:e=f;break;case Kt.default.M_FLOODFILL:e=n;break;case Kt.default.M_GRADIENTFILL:e=a;break;case Kt.default.M_RECT_SELECTION:e=l;break;case Kt.default.M_MOVE_TOOL:e=d;break;case Kt.default.M_ROTATE_CANVAS:e=s;break;case Kt.default.M_COLOR_PICKER:e=i;break;case Kt.default.M_TRANSFORM:e=c}J.setUserMode(e)}),o.on("maskViewOpened",function(t){u&&u.off("changeLayer",Nt),(u=t).on("changeLayer",Nt),Nt()}),t=new it,i=new ut,r=new dt,s=new mt,n=new ct,a=new gt,l=new ft,d=new ht,c=new pt,Q=[new rt,new st,new lt],f=Q[Zt.default.STROKE_MODE_FREEHAND],J.setDefaultMode(t),J.setUserMode(f),M.width=Y.width,M.height=Y.height,S.width=800,S.height=900,S.className="chickenpaint-canvas",S.setAttribute("touch-action","none"),L.setLineDash||(L.setLineDash=function(){}),S.addEventListener("contextmenu",function(t){t.preventDefault()}),S.addEventListener("mouseenter",function(){W=!0}),S.addEventListener("mouseleave",function(){W=!1,X[g]||X[p]||X[h]||U.repaintAll()}),S.addEventListener("pointerdown",function(t){S.setPointerCapture(t.pointerId),Rt=S.getBoundingClientRect(),z=t.clientX-Rt.left,G=t.clientY-Rt.top,V=nt.isPen(),X[g]=!1,X[p]=!1,X[h]=!1,X[t.button]=!0,J.mouseDown(t,t.button,At(t))}),S.addEventListener("pointermove",function(t){Rt||(Rt=S.getBoundingClientRect()),z=t.clientX-Rt.left,G=t.clientY-Rt.top;var e=0!=t.buttons,n=At(t);if(0!=(1&t.buttons)!=X[g]){if(.5===t.mozPressure)return;X[g]=!X[g],X[g]?J.mouseDown(t,g,n):J.mouseUp(t,g,n)}0!=(2&t.buttons)!=X[p]&&(X[p]=!X[p],X[p]?J.mouseDown(t,p,n):J.mouseUp(t,p,n)),0!=(4&t.buttons)!=X[h]&&(X[h]=!X[h],X[h]?J.mouseDown(t,h,n):J.mouseUp(t,h,n)),e?J.mouseDrag(t,n):J.mouseMove(t,n)}),S.addEventListener("pointerup",function(t){X[g]=!1,X[p]=!1,X[h]=!1,V=!1,J.mouseUp(t,t.button,0),S.releasePointerCapture(t.pointerId)}),S.addEventListener("wheel",function(t){if(0!=t.deltaY){if(!Bt||20<Math.abs(t.deltaY)){var e;e=0<t.deltaY?1/1.15:1.15;var n=(i={x:t.pageX,y:t.pageY},o=S.getBoundingClientRect(),{x:i.x-o.left-window.pageXOffset,y:i.y-o.top-window.pageYOffset}),a=Et(n);Y.isPointWithin(a.x,a.y)?Lt(U.getZoom()*e,n.x,n.y):Lt(U.getZoom()*e,I+~~(Y.width*B/2),F+~~(Y.height*B/2)),Bt=Bt||setTimeout(function(){Bt=!1},50)}t.preventDefault()}var i,o}),document.addEventListener("keydown",function(t){J.keyDown(t)}),document.addEventListener("keyup",function(t){J.keyUp(t)}),document.addEventListener("visibilitychange",function(){var t=S.height+(0,jt.default)(O).outerHeight();S.width=1,S.height=1,U.resize(t,!0)},!1),window.addEventListener("scroll",function(){Rt=null}),S.addEventListener("mousedown",function(t){t.button==h&&t.preventDefault()}),Y.on("changeSelection",function(){U.repaintAll()}),Y.on("updateRegion",function(t){K.union(t),Ft(Ot(K))}),tt.on("valueChanged",function(t){var e=U.getOffset();U.setOffset(-t,e.y)}),et.on("valueChanged",function(t){var e=U.getOffset();U.setOffset(e.x,-t)}),this.setInterpolation(!1);var Dt=document.createElement("div");Dt.className="chickenpaint-canvas-container-wrapper",Dt.appendChild(S),C.className="chickenpaint-canvas-container-top",C.appendChild(Dt),C.appendChild(et.getElement()),O.className="chickenpaint-canvas-container-bottom",O.appendChild(tt.getElement()),x.appendChild(C),x.appendChild(O),o.setCanvas(this)}ee.prototype.paint=function(t){this.deliverEvent("paint",[t])},ee.prototype.push=function(t,e){var n=this.peek();n&&n.suspend(),t.transient=e,t.capture=!1,t.enter(),this.modes.push(t)},ee.prototype.peek=function(){return 0<this.modes.length?this.modes[this.modes.length-1]:null},ee.prototype.pop=function(){var t=this.modes.pop(),e=this.peek();return t&&t.leave(),e&&e.resume(),e},(p.prototype=Object.create(a.default.prototype)).constructor=p,e.exports=n.default},{"../../lib/keymaster":64,"../ChickenPaint":1,"../engine/CPBrushInfo":8,"../engine/CPLayerGroup":17,"../engine/CPMaskView":19,"../util/CPBezier":53,"../util/CPColor":54,"../util/CPPolyfill":56,"../util/CPPolygon":57,"../util/CPRect":59,"../util/CPTransform":60,"../util/CPVector":61,"../util/CPWacomTablet":62,"../util/throttle-debounce":63,"./CPGUIUtils":33,"./CPScrollbar":41,jquery:187,"wolfy87-eventemitter":206}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var a,i=(a=t("wolfy87-eventemitter"))&&a.__esModule?a:{default:a};function o(t,e){var n=document.createElement("canvas"),a=n.getContext("2d"),i=this;function o(){var t=n.width,e=n.height;a.clearRect(0,0,t,e),a.beginPath(),a.arc(t/2+1,t/2+1,Math.max(t/2,1)-2,0,2*Math.PI),i.state?a.fill():a.stroke()}this.state=t||!1,this.setValue=function(t){this.state!=t&&(this.state=t,this.emitEvent("valueChange",[t]),o())},this.getElement=function(){return n},n.addEventListener("mousedown",function(t){i.setValue(!i.state)}),n.title=e||"",n.className="chickenpaint-checkbox",n.width=20,n.height=20,n.fillStyle="black",n.strokeStyle="black",o()}(o.prototype=Object.create(i.default.prototype)).constructor=o,e.exports=n.default},{"wolfy87-eventemitter":206}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=a(t("./CPPalette")),s=a(t("./CPColorSelect")),l=a(t("./CPColorSlider")),u=a(t("../util/CPColor"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t){r.default.call(this,t,"color","Color");var e=new s.default(t),n=new l.default(t,e),a=new d(t),i=this.getBodyElement(),o=document.createElement("div");o.className="chickenpaint-colorpicker-top",o.appendChild(e.getElement()),o.appendChild(n.getElement()),i.appendChild(o),i.appendChild(a.getElement())}function d(a){var i=0,t=document.createElement("div");function o(t,e,n){for(;t.length<n;)t=e+t;return t}function e(){t.style.backgroundColor="#"+o(Number(i).toString(16),"0",6)}this.getElement=function(){return t},a.on("colorChange",function(t){i=t.getRgb(),e()}),t.className="chickenpaint-colorpicker-show",t.addEventListener("click",function(t){t.preventDefault();var e="#"+o(Number(i).toString(16),"0",6);if(null!=(e=window.prompt("Please enter a color in hex format",e)))try{(e.match(/^#/)||e.match(/^$/))&&(e=e.substring(1));var n=parseInt(e,16);a.setCurColor(new u.default(n))}catch(t){}}),e()}(i.prototype=Object.create(r.default.prototype)).constructor=i,e.exports=n.default},{"../util/CPColor":54,"./CPColorSelect":29,"./CPColorSlider":30,"./CPPalette":39}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,t){var r=128,s=128,n=window.devicePixelRatio||1,l=Math.round(r*n),u=Math.round(s*n),d=document.createElement("canvas"),a=d.getContext("2d"),i=a.createImageData(l,u),c=i.data,f=new b.default(0),h=!0,e=!1,p=!1;function m(){h&&function(){var t=0;if(p)for(var e=0;e<u;e++)for(var n=255-Math.round(e/(u-1)*255),a=0;a<l;a++)c[t+w.default.RED_BYTE_OFFSET]=n,c[t+w.default.GREEN_BYTE_OFFSET]=n,c[t+w.default.BLUE_BYTE_OFFSET]=n,c[t+w.default.ALPHA_BYTE_OFFSET]=255,t+=w.default.BYTES_PER_PIXEL;else for(var i=f.clone(),o=0;o<u;o++){i.setValue(255-~~(o/(u-1)*255));for(var r=0;r<l;r++)i.setSaturation(Math.round(r/(l-1)*255)),c[t+w.default.RED_BYTE_OFFSET]=i.rgb>>16&255,c[t+w.default.GREEN_BYTE_OFFSET]=i.rgb>>8&255,c[t+w.default.BLUE_BYTE_OFFSET]=255&i.rgb,c[t+w.default.ALPHA_BYTE_OFFSET]=255,t+=w.default.BYTES_PER_PIXEL}h=!1}(),a.putImageData(i,0,0,0,0,l,u);var t=f.getSaturation()/255*(l-1),e=(255-f.getValue())/255*(u-1);(0,E.setContrastingDrawStyle)(a,"stroke"),a.lineWidth=1.5*n,a.beginPath(),p?(a.moveTo(0,e),a.lineTo(l,e)):a.arc(t,e,5*n,0,2*Math.PI),a.stroke(),a.globalCompositeOperation="source-over"}function g(t){var e=t.pageX-(0,_.default)(d).offset().left,n=t.pageY-(0,_.default)(d).offset().top,a=Math.max(Math.min(255-~~(255*n/(s-1)),255),0);if(p)f.setGreyscale(a);else{var i=Math.max(Math.min(~~(255*e/(r-1)),255),0);f.setHsv(f.getHue(),i,a)}m(),o.setCurColor(f)}function v(t){g(t)}function y(t){d.releasePointerCapture(t.pointerId),e=!1,d.removeEventListener("pointerup",y),d.removeEventListener("pointermove",v)}this.setHue=function(t){f.getHue()!=t&&(f.setHue(t),o.setCurColor(f))},this.getElement=function(){return d},o.on("colorChange",function(t){f.copyFrom(t),h=!0,m()}),o.on("colorModeChange",function(t){p="greyscale"==t,h=!0,m()}),d.addEventListener("pointerdown",function(t){e||(e=!0,d.setPointerCapture(t.pointerId),d.addEventListener("pointerup",y),d.addEventListener("pointermove",v)),g(t)}),d.className="chickenpaint-colorpicker-select",d.setAttribute("touch-action","none"),d.width=l,d.height=u,d.style.width=r+"px",d.style.height=s+"px",t&&f.copyFrom(t);m()};var _=a(t("jquery")),b=a(t("../util/CPColor")),w=a(t("../engine/CPColorBmp")),E=t("./CPGUIUtils");function a(t){return t&&t.__esModule?t:{default:t}}e.exports=n.default},{"../engine/CPColorBmp":13,"../util/CPColor":54,"./CPGUIUtils":33,jquery:187}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,a,e){var i=24,o=128,n=this,r=document.createElement("canvas"),s=r.getContext("2d"),l=s.createImageData(i,o),u=l.data,d=!1,c=e||0;function f(){s.putImageData(l,0,0,0,0,i,o);var t=c*o/360;s.globalCompositeOperation="exclusion",s.strokeStyle="white",s.lineWidth=1.5,s.beginPath(),s.moveTo(0,t),s.lineTo(i,t),s.stroke(),s.globalCompositeOperation="source-over"}function h(t){var e=t.pageY-(0,g.default)(r).offset().top,n=~~(360*e/o);c=Math.max(0,Math.min(359,n)),f(),null!=a&&a.setHue(c)}function p(t){h(t)}function m(t){r.releasePointerCapture(t.pointerId),d=!1,r.removeEventListener("pointerup",m),r.removeEventListener("pointermove",p)}this.getElement=function(){return r},this.setHue=function(t){c=t,f()},t.on("colorChange",function(t){n.setHue(t.getHue())}),t.on("colorModeChange",function(t){r.style.display="greyscale"==t?"none":"block"}),r.setAttribute("touch-action","none"),r.addEventListener("pointerdown",function(t){d||(d=!0,r.setPointerCapture(t.pointerId),r.addEventListener("pointerup",m),r.addEventListener("pointermove",p));h(t)}),r.width=i,r.height=o,r.className="chickenpaint-colorpicker-slider",function(){for(var t=new v.default(65535),e=0,n=0;n<o;n++){t.setHue(359*n/o);for(var a=0;a<i;a++)u[e+y.default.RED_BYTE_OFFSET]=t.rgb>>16&255,u[e+y.default.GREEN_BYTE_OFFSET]=t.rgb>>8&255,u[e+y.default.BLUE_BYTE_OFFSET]=255&t.rgb,u[e+y.default.ALPHA_BYTE_OFFSET]=255,e+=y.default.BYTES_PER_PIXEL}}(),f()};var g=a(t("jquery")),v=a(t("../util/CPColor")),y=a(t("../engine/CPColorBmp"));function a(t){return t&&t.__esModule?t:{default:t}}e.exports=n.default},{"../engine/CPColorBmp":13,"../util/CPColor":54,jquery:187}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var u=i(t("jquery")),d=i(t("../util/CPColor")),c=i(t("./CPSlider")),f=i(t("./CPColorSelect")),h=i(t("./CPColorSlider")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var o=this,r=new d.default(0),s=255,a=document.createElement("div");function i(){a.style.backgroundColor="#"+function(t,e,n){for(;t.length<n;)t=e+t;return t}(Number(r.getRgb()).toString(16),"0",6)}this.getElement=function(){return a},this.setColor=function(t){r.isEqual(t)||(r.copyFrom(t),i(),this.emitEvent("colorChange",[r]))},this.setAlpha=function(t){t!=s&&(s=t,i(),this.emitEvent("alphaChange",[s]))},this.getColorRgb=function(){return r.getRgb()},this.getAlpha=function(){return s},this.setCurColor=this.setColor,a.className="chickenpaint-color-pick-swatch",t&&r.copyFrom(t),e&&(s=e);var l=function(t){0==(0,u.default)(t.target).closest(".popover").length&&(0,u.default)(t.target).closest(".chickenpaint-color-pick-swatch")[0]!=a&&(0,u.default)(a).popover("hide")};(0,u.default)(a).popover({html:!0,content:function(){return window.addEventListener("mousedown",l),t=document.createElement("div"),e=document.createElement("div"),n=new f.default(o,r),a=new h.default(o,n,r.getHue()),i=new c.default(0,255),t.className="chickenpaint-color-pick-panel",e.className="chickenpaint-colorpicker-top",e.appendChild(n.getElement()),e.appendChild(a.getElement()),t.appendChild(e),i.value=s,i.title=function(t){return"Opacity: "+t},i.on("valueChange",function(t){o.setAlpha(t)}),t.appendChild(i.getElement()),setTimeout(function(){i.resize()},0),t;var t,e,n,a,i},trigger:"manual",placement:"bottom",container:n||!1}).on("click",function(t){t.preventDefault(),(0,u.default)(this).popover("toggle")}).on("hidden.bs.popover",function(){window.removeEventListener("mousedown",l)}),i()}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{"../util/CPColor":54,"./CPColorSelect":29,"./CPColorSlider":30,"./CPSlider":44,jquery:187,"wolfy87-eventemitter":206}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var a=i(t("wolfy87-eventemitter")),r=i(t("jquery"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=(0,r.default)('<div class="modal fade" tabindex="-1" role="dialog">\n\t            <div class="modal-dialog">\n\t                <div class="modal-content">\n\t                    <div class="modal-header">\n\t                        <h5 class="modal-title">Complete transform</h5>\n\t                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n\t                            <span aria-hidden="true">&times;</span>\n\t                        </button>\n\t                    </div>\n\t                    <div class="modal-body">\n\t                        <p>\n\t                            You need to finish transforming this layer before you can do that. What would you like to do with the transform?\n\t\t\t\t\t\t\t</p>\n\t                    </div>\n\t                    <div class="modal-footer">\n\t                        <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>\n\t                        <button type="button" class="btn btn-light chickenpaint-reject-transform" data-dismiss="modal">Undo transform</button>\n\t                        <button type="button" class="btn btn-primary chickenpaint-accept-transform" data-dismiss="modal">Apply transform</button>\n\t                    </div>\n\t                </div>\n\t            </div>\n\t        </div>\n\t    '),a=this,i=(0,r.default)(".chickenpaint-accept-transform",n),o=(0,r.default)(".chickenpaint-reject-transform",n);i.click(function(t){e.actionPerformed({action:"CPTransformAccept"}),a.emitEvent("accept")}),o.click(function(t){e.actionPerformed({action:"CPTransformReject"}),a.emitEvent("reject")}),n.modal({show:!1}).on("shown.bs.modal",function(){i.focus()}).on("hidden.bs.modal",function(t){n.remove()}).on("keypress",function(t){13==t.keyCode&&i.click()}),n.data("bs.modal").$body=(0,r.default)(t),t.appendChild(n[0]),this.show=function(){n.modal("show")}}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{jquery:187,"wolfy87-eventemitter":206}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createCheckerboardPattern=function(t){for(var e=document.createElement("canvas"),n=e.getContext("2d"),a=n.createImageData(64,64),i=a.data,o=0,r=0;r<64;r++)for(var s=0;s<64;s++)0!=(8&s)^0!=(8&r)?(i[o++]=255,i[o++]=255,i[o++]=255):(i[o++]=204,i[o++]=204,i[o++]=204),i[o++]=255;return e.width=64,e.height=64,n.putImageData(a,0,0),t.createPattern(e,"repeat")},n.setContrastingDrawStyle=function(t,e){e+="Style",(t.globalCompositeOperation="exclusion")==t.globalCompositeOperation?t[e]="white":(t.globalCompositeOperation="difference",t[e]="#888","difference"!=t.globalCompositeOperation&&(t[e]="black"))}},{}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,n){var e=(0,o.default)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Grid options</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <form>\n                                <div class="form-group">\n                                    <label>Grid size</label>\n                                    <input type="text" class="form-control chickenpaint-grid-size" value="" autofocus>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>\n                            <button type="button" class="btn btn-primary chickenpaint-apply-grid-settings" data-dismiss="modal">Ok</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),a=(0,o.default)(".chickenpaint-grid-size",e),i=(0,o.default)(".chickenpaint-apply-grid-settings",e);a.val(n.getGridSize()),(0,o.default)(".chickenpaint-apply-grid-settings",e).click(function(t){var e=parseInt(a.val(),10);n.setGridSize(e)}),e.modal({show:!1}).on("shown.bs.modal",function(){a.focus()}).on("keypress",function(t){13==t.keyCode&&i.click()}),e.data("bs.modal").$body=(0,o.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var a,o=(a=t("jquery"))&&a.__esModule?a:{default:a};e.exports=n.default},{jquery:187}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var tt=a(t("jquery")),p=a(t("./CPPalette")),et=a(t("../engine/CPBlend")),m=a(t("./CPSlider")),nt=a(t("../engine/CPLayerGroup")),at=(a(t("../engine/CPLayer")),a(t("../engine/CPImageLayer")));function a(t){return t&&t.__esModule?t:{default:t}}function it(t){t.preventDefault(),t.stopPropagation()}function ot(t){var e=document.createElement("span");return e.className="fa "+t,e}function rt(t){var e=document.createElement("span");return e.className="chickenpaint-icon chickenpaint-icon-"+t,e}function g(t,e){var n=document.createElement("div"),a=document.createElement("label");return n.className="form-check",t.className="form-check-input",a.className="form-check-label",a.setAttribute("for",t.id),a.appendChild(t),a.appendChild(document.createTextNode(e)),n.appendChild(t),n.appendChild(a),n}function st(t){return{"image-layer":t instanceof at.default,"layer-group":t instanceof nt.default,"clipping-mask":t instanceof at.default&&t.clip,"no-clipping-mask":t instanceof at.default&&!t.clip,"no-clipping-mask-or-is-group":!(t instanceof at.default&&t.clip),mask:t&&null!==t.mask,"no-mask":t&&null===t.mask,"mask-enabled":t&&null!==t.mask&&t.maskVisible,"mask-disabled":t&&null!==t.mask&&!t.maskVisible}}function i(Y){var o=this;p.default.call(this,Y,"layers","Layers",!0,!0);var i,q=0,z=2,G=this,X=Y.getArtwork(),V=null,t=this.getBodyElement(),K=this.getElement(),Z=K,r=new function(){var n=5,c=16,f="active",h="chickenpaint-layer-visible",p="chickenpaint-layer-hidden",m="chickenpaint-layer-group-expanded",g="chickenpaint-layer-group-collapsed",r="chickenpaint-layer-group-toggle",a="chickenpaint-layer-image-thumbnail",s="chickenpaint-layer-mask-thumbnail",o="chickenpaint-layer-thumbnail",e=0,l=1,d=2,u=3,i=4,v=800,y={state:e,layer:null,layerElem:null,dragX:0,dragY:0,initialScrollTop:0,dropTarget:null,dropBetweenMarkerElem:null,frameElem:null},t=document.createElement("div"),_=document.createElement("div"),b=_,w=function(){var t=document.createElement("div");t.className="dropdown-menu";for(var e=0,n=[{title:"Rename...",action:"CPRenameLayer"},{require:["image-layer"],title:"Delete layer",action:"CPRemoveLayer"},{require:["layer-group"],title:"Delete group",action:"CPRemoveLayer"},{require:["image-layer","no-clipping-mask"],title:"Clip to the layer below",action:"CPCreateClippingMask"},{require:["image-layer","clipping-mask"],title:"Unclip from the layer below",action:"CPReleaseClippingMask"},{require:["no-mask"],title:"Add mask",action:"CPAddLayerMask"},{require:["mask"],title:"Delete mask",action:"CPRemoveLayerMask"},{require:["mask"],title:"Apply mask",action:"CPApplyLayerMask"},{require:["layer-group"],title:"Merge group",action:"CPGroupMerge"},{require:["mask-enabled"],title:"Disable mask",action:"CPSetMaskVisible",actionData:{visible:"false"}},{require:["mask-disabled"],title:"Enable mask",action:"CPSetMaskVisible",actionData:{visible:"true"}}];e<n.length;e++){var a=n[e],i=document.createElement("a");if(i.className="dropdown-item",a.require&&(i.className=i.className+" "+a.require.map(function(t){return"chickenpaint-action-require-"+t}).join(" ")),i.href="#",i.innerHTML=a.title,i.setAttribute("data-action",a.action),a.actionData)for(var o in a.actionData)a.actionData.hasOwnProperty(o)&&i.setAttribute("data-action-"+o,a.actionData[o]);t.appendChild(i)}return t}(),E={x:0,y:0},T=0,k=null,P=!1,x=null;function C(t){"button"in t&&t.button!==q||(j(),(0,tt.default)(this).off("click",C))}function O(t){var e=(0,tt.default)(".chickenpaint-layer",_);return e.get(e.length-1-t)}function S(t){var e=(0,tt.default)(t).closest(".chickenpaint-layer");if(e.length){var n=(0,tt.default)(".chickenpaint-layer",_);return n.length-1-n.index(e)}return-1}function L(){if(y.state===d){var t=K.getBoundingClientRect(),e=!0,n=!0;if(y.dropTarget=function(t,e){for(var n=(0,tt.default)(".chickenpaint-layer",_),a={layer:V[V.length-1],displayIndex:V.length-1,direction:"over"},i=0;i<n.length;i++){var o=n[n.length-1-i],r=o.getBoundingClientRect();if(0===i&&e>r.bottom){var s=X.getLayersRoot().layers[0];a={layer:s,displayIndex:J(s),direction:"under"};break}if(e>=r.top){var l=Q(i),u=r.bottom-r.top;a={layer:l,displayIndex:i},l instanceof nt.default?e>=r.top+.75*u?l.expanded&&0<l.layers.length?(a.layer=l.layers[l.layers.length-1],a.displayIndex--,a.direction="over"):a.direction="under":e>=r.top+.25*u?l.expanded&&0<l.layers.length?(a.layer=l.layers[l.layers.length-1],a.displayIndex--,a.direction="over"):a.direction="inside":a.direction="over":e>=r.top+.5*u?a.direction="under":a.direction="over";break}}if(a.layer.parent==y.layer.parent&&("over"==a.direction||"under"==a.direction)){var d=a.layer.parent,c=d.indexOf(a.layer);if("over"==a.direction&&d.layers[c+1]==y.layer||"under"==a.direction&&d.layers[c-1]==y.layer||a.layer==y.layer)return null}if(y.layer instanceof nt.default&&(a.layer==y.layer&&"inside"==a.direction||a.layer.hasAncestor(y.layer)))return null;return a}(y.dragX,y.dragY),y.dropTarget){var a=O(y.dropTarget.displayIndex);switch(y.dropTarget.direction){case"over":case"under":_.appendChild(y.dropBetweenMarkerElem);var i,o,r,s=y.dropTarget.layer.getDepth()-1;if(i=a.getBoundingClientRect(),"under"==y.dropTarget.direction&&y.dropTarget.layer instanceof nt.default&&y.dropTarget.layer.expanded){var l;for(l=y.dropTarget.displayIndex-1;0<=l&&V[l].hasAncestor(y.dropTarget.layer);l--);r=O(l+1).getBoundingClientRect().bottom}else r=i.bottom;o=i.left-t.left+(0<s?26+c*s:0),y.dropBetweenMarkerElem.style.left=o+"px",y.dropBetweenMarkerElem.style.width=i.right-t.left-o+"px",y.dropBetweenMarkerElem.style.top=("over"==y.dropTarget.direction?i.top-1:r+1)-t.top+"px",(0,tt.default)(".chickenpaint-layer-drop-target",_).removeClass("chickenpaint-layer-drop-target"),e=!1;break;case"inside":var u=(0,tt.default)(".chickenpaint-layer",_);u.each(function(t){(0,tt.default)(this).toggleClass("chickenpaint-layer-drop-target",u.length-1-t==y.dropTarget.displayIndex)}),n=!1}}n&&(0,tt.default)(".chickenpaint-layer-drop-target",_).removeClass("chickenpaint-layer-drop-target"),e&&(0,tt.default)(y.dropBetweenMarkerElem).remove(),y.frameElem.style.top=y.dragY-t.top-parseInt(y.frameElem.style.height,10)/2+"px"}else(0,tt.default)(y.dropBetweenMarkerElem).remove(),(0,tt.default)(y.frameElem).remove()}function M(t){var e=t.getImageThumbnail(),n=e.getAsCanvas(T);return n.title="Image",n.className=o+" "+a,n.style.maxWidth=n.width/n.height*25+"px",t!=X.getActiveLayer()||X.isEditingMask()||(n.className+=" active"),n}function A(t){var e,n,a=t.getMaskThumbnail(),i=a.getAsCanvas(T);return i.title="Layer mask",i.className=o+" "+s,i.style.maxWidth=i.width/i.height*25+"px",t==X.getActiveLayer()&&X.isEditingMask()&&(i.className+=" active"),t.maskVisible||(i.className+=" disabled",(n=(e=i).getContext("2d")).strokeStyle="red",n.lineWidth=3,n.moveTo(5,5),n.lineTo(e.width-5,e.height-5),n.moveTo(e.width-5,5),n.lineTo(5,e.height-5),n.stroke()),i}function R(t,e){var n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");if(n.className="chickenpaint-layer list-group-item",e==X.getActiveLayer()&&(n.className+=" "+f),a.className="chickenpaint-layer-eye",e.ancestorsAreVisible()||(a.className+=" chickenpaint-layer-eye-hidden-ancestors"),a.style.marginRight=2+c*(e.getDepth()-1)+"px",e.visible?(n.className+=" "+h,a.appendChild(ot("fa-eye"))):(n.className+=" "+p,a.appendChild(ot("fa-eye-slash"))),n.appendChild(a),i.className="chickenpaint-layer-description",e instanceof at.default){if(e.clip&&(n.className+=" chickenpaint-layer-clipped",o.appendChild(ot("fa-level-down-alt fa-flip-horizontal"))),e.lockAlpha){var u=rt("lock-alpha");u.title="Transparency locked",s.appendChild(u)}}else e instanceof nt.default&&(n.className+=" chickenpaint-layer-group",e.expanded?(n.className+=" "+m,o.appendChild(ot("fa-folder-open chickenpaint-layer-group-toggle"))):(n.className+=" "+g,o.appendChild(ot("fa-folder chickenpaint-layer-group-toggle"))));o.childNodes.length&&(o.className="chickenpaint-layer-icons",n.appendChild(o));try{e instanceof at.default&&n.appendChild(M(e)),e.mask&&n.appendChild(A(e))}catch(t){console.log("Failed to create layer thumb")}var d=e.name&&0<e.name.length?e.name:"(unnamed "+(e instanceof nt.default?"group":"layer")+")";return r.innerText=d,r.setAttribute("title",d),r.className="chickenpaint-layer-name",l.innerText=et.default.BLEND_MODE_DISPLAY_NAMES[e.blendMode]+": "+e.alpha+"%",l.className="chickenpaint-layer-blend",i.appendChild(r),i.appendChild(l),n.appendChild(i),s.className="chickenpaint-layer-status",n.appendChild(s),n.setAttribute("data-display-index",""+t),n.setAttribute("data-toggle","dropdown"),n.setAttribute("data-target","#chickenpaint-layer-pop"),n}function B(t){if(-1<t){var e=Q(t),n=O(t);e&&n&&$.show(e,n)}}function I(t){switch(y.state){case d:(0,tt.default)(y.layerElem).removeClass("chickenpaint-layer-dragging"),y.dropTarget&&("inside"==y.dropTarget.direction?Y.actionPerformed({action:"CPRelocateLayer",layer:y.layer,toGroup:y.dropTarget.layer,toIndex:y.dropTarget.layer.layers.length}):Y.actionPerformed({action:"CPRelocateLayer",layer:y.layer,toGroup:y.dropTarget.layer.parent,toIndex:y.dropTarget.layer.parent.indexOf(y.dropTarget.layer)+("over"==y.dropTarget.direction?1:0)})),y.dropTarget=null,y.state=e,L();break;default:y.state=e}x&&(clearTimeout(x),x=null),_.releasePointerCapture(t.pointerId),_.removeEventListener("pointermove",N),_.removeEventListener("pointerup",I)}function F(){y.state=d,y.frameElem=document.createElement("div"),y.frameElem.className="chickenpaint-layer-drag-frame",y.frameElem.style.width=(0,tt.default)(y.layerElem).outerWidth(!1)+"px",y.frameElem.style.height=(0,tt.default)(y.layerElem).outerHeight(!1)+"px",y.dropBetweenMarkerElem=document.createElement("div"),y.dropBetweenMarkerElem.className="chickenpaint-layer-drop-between-mark",y.layerElem.className+=" chickenpaint-layer-dragging",_.appendChild(y.frameElem)}function N(t){var e=t.clientY;switch(y.state){case u:if(!(Math.abs(e-y.dragY)>n))break;y.state=i;case i:b.scrollTop=y.initialScrollTop+y.dragY-e;break;case l:if(!(Math.abs(e-y.dragY)>n))break;F();case d:y.dragY=e,L()}}function D(t,e,n){try{n?(0,tt.default)("."+s,t).replaceWith(A(e)):(0,tt.default)("."+a,t).replaceWith(M(e))}catch(t){}}function j(){(0,tt.default)(Z).hasClass("show")&&(0,tt.default)(Z).dropdown("toggle").off("click.bs.dropdown")}this.buildLayers=function(){var t=(V=X.getLayersRoot().getLinearizedLayerList(!0)).map(function(t,e){return R(e,t)}),e=document.createDocumentFragment();(0,tt.default)(_).empty();for(var n=t.length-1;0<=n;n--)e.appendChild(t[n]);_.appendChild(e),L()},this.layerChanged=function(t){var e=J(t),n=(0,tt.default)(O(e));0===n.length||t instanceof nt.default&&(t.expanded!=(0,tt.default)(n).hasClass(m)||t.visible!=(0,tt.default)(n).hasClass(h))?this.buildLayers():n.replaceWith(R(e,t))},this.setRotation90=function(t){if(T!=t){T=t;for(var e=0;e<V.length;e++){var n=V[e],a=(0,tt.default)(O(e));0<a.length&&(D(a,n,!1),n.mask&&D(a,n,!0))}}},this.layerImageThumbChanged=function(t){var e=J(t),n=(0,tt.default)(O(e));0<n.length&&D(n,t,!1)},this.layerMaskThumbChanged=function(t){var e=J(t),n=(0,tt.default)(O(e));0<n.length&&(t.mask?D(n,t,!0):(0,tt.default)("."+s,n).remove())},this.activeLayerChanged=function(t,e){(0,tt.default)("."+f,_).removeClass(f);var n=(0,tt.default)(O(J(t)));n.addClass(f),(0,tt.default)("."+a,n).toggleClass("active",!e),(0,tt.default)("."+s,n).toggleClass("active",e)},this.resize=function(){G.dismissNotification(),this.buildLayers()},this.getElement=function(){return t},this.revealLayer=function(t){var e=O(t),n=e.getBoundingClientRect(),a=_.getBoundingClientRect();return b.scrollTop=Math.max(Math.min(Math.max(b.scrollTop,b.scrollTop+n.bottom-a.bottom),b.scrollTop+n.top-a.top),0),e},Z.id="chickenpaint-layer-pop",t.className="chickenpaint-layers-widget well",t.addEventListener("contextmenu",function(t){return t.preventDefault()},!0),w.addEventListener("click",function(t){var e=t.target.getAttribute("data-action");if(!e)return;t.preventDefault(),j(),Y.actionPerformed({action:"CPSetActiveLayer",layer:k,mask:X.isEditingMask()});for(var n={action:e,layer:k},a=t.target.attributes,i=0;i<a.length;i++){var o=a[i].name.match(/^data-action-(.+)/);o&&(n[o[1]]=JSON.parse(a[i].value))}"CPRenameLayer"===e?B(J(k)):Y.actionPerformed(n)}),_.className="list-group",_.addEventListener("dblclick",function(t){t.button===q&&0<(0,tt.default)(t.target).closest(".chickenpaint-layer-description").length&&0===(0,tt.default)(t.target).closest("input").length&&(B(S(t.target)),t.preventDefault())}),_.addEventListener("pointerdown",function(t){var e=S((0,tt.default)(t.target).closest(".chickenpaint-layer")[0]);if(-1!=e){var n=Q(e);if(t.button==q&&(0,tt.default)(t.target).closest(".chickenpaint-layer-eye").length)Y.actionPerformed({action:"CPSetLayerVisibility",layer:n,visible:!n.visible});else if(t.button==q&&n instanceof nt.default&&(0,tt.default)(t.target).closest("."+r).length)Y.actionPerformed({action:"CPExpandLayerGroup",group:n,expand:!n.expanded});else{var a,i,o=X.getActiveLayer()!=n;if(P=0<(0,tt.default)(t.target).closest("."+s).length||n instanceof nt.default&&null!==n.mask&&o,t.button==q&&t.shiftKey&&P)Y.actionPerformed({action:"CPSetMaskVisible",layer:n,visible:!n.maskVisible});else a=t.button==q||o?P:X.isEditingMask(),i=X.isEditingMask()!=a,(o||i)&&Y.actionPerformed({action:"CPSetActiveLayer",layer:n,mask:a}),a&&t.altKey?Y.actionPerformed({action:"CPToggleMaskView"}):t.button==q?("pen"===t.pointerType||"touch"===t.pointerType?(y.state=u,y.initialScrollTop=b.scrollTop,x&&clearTimeout(x),x=setTimeout(function(){y.state===u&&(F(),y.dragY=t.clientY,L())},v)):y.state=l,y.dropTarget=null,y.layer=n,y.layerElem=O(e),y.dragX=t.clientX,y.dragY=t.clientY,_.setPointerCapture(t.pointerId),_.addEventListener("pointermove",N),_.addEventListener("pointerup",I)):t.button==z&&(t.preventDefault(),function(t){var e=S(t.target);if(-1!=e){var n=X.getActiveLayer(),a=st(n);k=n,E={x:t.clientX,y:t.clientY};for(var i=0,o=["image-layer","layer-group","clipping-mask","no-clipping-mask","no-mask"];i<o.length;i++){var r=o[i];(0,tt.default)(".chickenpaint-action-require-"+r,w).toggle(a[r])}for(var s=0,l=["mask","mask-enabled","mask-disabled"];s<l.length;s++){var u=l[s];(0,tt.default)(".chickenpaint-action-require-"+u,w).toggle(P&&a[u])}(0,tt.default)("[data-action]",w).each(function(){var t=this.getAttribute("data-action");(0,tt.default)(this).parent().toggleClass("disabled","CPRenameLayer"!==t&&!Y.isActionAllowed(t))}),(0,tt.default)(O(e)).dropdown("toggle").off("click.bs.dropdown"),(0,tt.default)(document).off("click.bs.dropdown.data-api")}}(t))}}}),_.setAttribute("touch-action","none");for(var H=0,W=["ontouchstart","ontouchmove","ontouchend","ontouchcancel"];H<W.length;H++){var U=W[H];_.addEventListener(U,it)}t.appendChild(_),t.appendChild(w),(0,tt.default)(Z).on("show.bs.dropdown",function(t){var e=(0,tt.default)(t.relatedTarget)[0],n=(0,tt.default)(Z).find(".dropdown-menu"),a=e.getBoundingClientRect(),i=Z.getBoundingClientRect();n.css({left:E.x-n.outerWidth(!0)-i.left+1+"px",top:a.top-n.outerHeight(!0)/2-i.top+"px"}),(0,tt.default)(document).on("click",C)})},s=new m.default(0,100),a=document.createElement("select"),$=new function(){var n=null,a="",i=document.createElement("input"),e=this;this.hide=function(){n=null;var t=(0,tt.default)(i).parent();t&&((0,tt.default)(i).remove(),t.text(a))},this.renameAndHide=function(){n&&n.name!=i.value&&Y.actionPerformed({action:"CPSetLayerName",layer:n,name:i.value}),this.hide()},this.show=function(t,e){a=(n=t).name,i.value=a,(0,tt.default)(".chickenpaint-layer-name",e).empty().append(i),i.select()},i.type="text",i.className="chickenpaint-layer-rename form-control input-sm",i.addEventListener("keydown",function(t){t.stopPropagation()}),i.addEventListener("keypress",function(t){13==t.keyCode&&e.renameAndHide(),t.stopPropagation()}),i.addEventListener("keyup",function(t){27==t.keyCode&&e.hide(),t.stopPropagation()}),i.addEventListener("blur",function(t){n&&e.renameAndHide()})},e=document.createElement("input"),n=document.createElement("input"),l=!1;function Q(t){return V[t]}function J(t){return V.indexOf(t)}function u(){var t=X.getActiveLayer();t.getAlpha()!=s.value&&s.setValue(t.getAlpha()),function(){for(var t=X.getActiveLayer();a.lastChild;)a.removeChild(a.lastChild);for(var e=et.default.LM_FIRST;e<=et.default.LM_LAST;e++)if(e!=et.default.LM_MULTIPLY2&&(e==t.blendMode||e===et.default.LM_PASSTHROUGH&&t instanceof nt.default||e<=et.default.LM_LAST_CHIBIPAINT)){var n=document.createElement("option");n.appendChild(document.createTextNode(et.default.BLEND_MODE_DISPLAY_NAMES[e])),e!==et.default.LM_MULTIPLY||t.blendMode===e||t.useLegacyMultiply?n.value=e:n.value=et.default.LM_MULTIPLY2,a.appendChild(n)}}(),t.getBlendMode()!=parseInt(a.value,10)&&(a.value=t.getBlendMode()),t.getLockAlpha()!=n.checked&&(n.checked=t.getLockAlpha()),function(){for(var t=st(X.getActiveLayer()),e=0,n=["clipping-mask","no-clipping-mask-or-is-group"];e<n.length;e++){var a=n[e];(0,tt.default)(".chickenpaint-action-require-"+a,i).css("display",t[a]?"inline-block":"none")}(0,tt.default)("[data-action]",i).each(function(){var t=this.getAttribute("data-action");(0,tt.default)(this).toggleClass("disabled",!Y.isActionAllowed(t))})}()}function d(){X=this,r.resize(),u()}var c=this.setSize,f=this.setWidth,h=this.setHeight;this.setSize=function(t,e){c.call(this,t,e),this.dismissNotification(),s.resize()},this.setWidth=function(t){f.call(this,t),s.resize(),r.resize()},this.setHeight=function(t){h.call(this,t),r.resize()},this.setRotation90=function(t){r.setRotation90(t)},this.dismissNotification=function(){(0,tt.default)(".chickenpaint-layer[aria-describedby],.chickenpaint-slider[aria-describedby]",t).each(function(t,e){(e=(0,tt.default)(e)).data("bs.popover")&&e.popover("dispose")}),l&&(clearTimeout(l),l=!1)},this.showNotification=function(t,e,n){var a,i=J(t);a=X.getActiveLayer()==t&&"opacity"==n?s.getElement():r.revealLayer(i),o.dismissNotification(),(0,tt.default)(a).popover({html:!1,content:e,placement:"left",trigger:"manual",fallbackPlacement:[],boundary:"window",container:G.getElement()}).popover("show"),l=setTimeout(function(){l=!1,o.dismissNotification()},Math.max(Math.round(70*e.length),3e3))},a.className="form-control form-control-sm",a.title="Layer blending mode",a.addEventListener("change",function(t){Y.actionPerformed({action:"CPSetLayerBlendMode",blendMode:parseInt(a.value,10)})}),t.appendChild(a),s.title=function(t){return"Opacity: "+t+"%"},s.on("valueChange",function(t){Y.actionPerformed({action:"CPSetLayerAlpha",alpha:t})}),t.appendChild(s.getElement()),e.id="chickenpaint-chk-sample-all-layers",e.type="checkbox",e.addEventListener("click",function(t){X.setSampleAllLayers(e.checked)}),t.appendChild(g(e,"Sample all layers")),n.id="chickenpaint-chk-lock-alpha",n.type="checkbox",n.addEventListener("click",function(t){Y.actionPerformed({action:"CPSetLayerLockAlpha",lock:n.checked})}),t.appendChild(g(n,"Lock transparency")),t.appendChild(r.getElement()),i=function(){var t=[{title:"Add layer",icon:ot("fa-file"),action:"CPAddLayer"},{title:"Add group",icon:ot("fa-folder"),action:"CPAddGroup"},{title:"Add layer mask",icon:rt("mask"),action:"CPAddLayerMask"},{title:"Clip to the layer below",icon:ot("fa-level-down-alt fa-flip-horizontal"),action:"CPCreateClippingMask",require:"no-clipping-mask-or-is-group"},{title:"Unclip from the layer below",icon:ot("fa-level-down-alt fa-flip-horizontal"),action:"CPReleaseClippingMask",require:"clipping-mask"},{title:"Delete layer",icon:ot("fa-trash"),action:"CPRemoveLayer"}],n=document.createElement("ul");n.className="chickenpaint-layer-buttons list-unstyled";for(var e=function(){var t=i[a],e=document.createElement("li");e.setAttribute("data-action",t.action),e.className="chickenpaint-small-toolbar-button "+(t.require?"chickenpaint-action-require-"+t.require:""),e.title=t.title,e.appendChild(t.icon),e.addEventListener("click",function(){Y.actionPerformed({action:t.action})}),n.appendChild(e)},a=0,i=t;a<i.length;a++)e();return n}(),t.appendChild(i),X.on("changeActiveLayer",function(t,e,n){r.activeLayerChanged(e,n),u()}),X.on("changeLayer",function(t){X=this,G.dismissNotification(),r.layerChanged(t),u()}),X.on("changeStructure",d),X.on("changeLayerMaskThumb",function(t){X=this,r.layerMaskThumbChanged(t)}),X.on("changeLayerImageThumb",function(t){X=this,r.layerImageThumbChanged(t)}),Y.on("layerNotification",this.showNotification.bind(this)),d.call(X)}(i.prototype=Object.create(p.default.prototype)).constructor=i,e.exports=n.default},{"../engine/CPBlend":5,"../engine/CPImageLayer":15,"../engine/CPLayer":16,"../engine/CPLayerGroup":17,"./CPPalette":39,"./CPSlider":44,jquery:187}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var l=i(t("jquery")),u=i(t("./CPCanvas")),d=i(t("./CPPaletteManager")),c=i(t("./CPMainMenu")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var a,n=document.createElement("div"),i=new u.default(t),o=new d.default(t),r=!1,s=this;this.togglePalettes=function(){o.togglePalettes()},this.arrangePalettes=function(){setTimeout(o.arrangePalettes.bind(o),0)},this.constrainPalettes=function(){o.constrainPalettes()},this.showPalette=function(t,e){o.showPaletteByName(t,e)},this.getSwatches=function(){return o.palettes.swatches.getSwatches()},this.setSwatches=function(t){o.palettes.swatches.setSwatches(t)},this.getPaletteManager=function(){return o},this.setRotation90=function(t){i.setRotation(t*Math.PI/2),o.palettes.layers.setRotation90(t)},this.setFullScreenMode=function(t){r=t,s.resize(),s.arrangePalettes()},this.resize=function(){var t,e=(0,l.default)(window).height(),n=(0,l.default)(a.getElement()).outerHeight();t=r?e-n:Math.min(Math.max(e-n-65,500),850),i.resize(t,!1),s.constrainPalettes()},a=new c.default(t,this),e.appendChild(a.getElement()),n.className="chickenpaint-main-section",n.appendChild(i.getElement()),n.appendChild(o.getElement()),e.appendChild(n),i.on("canvasRotated90",function(t){o.palettes.layers.setRotation90(t)}),window.addEventListener("resize",this.resize.bind(this)),setTimeout(this.resize.bind(this),0)}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{"./CPCanvas":26,"./CPMainMenu":37,"./CPPaletteManager":40,jquery:187,"wolfy87-eventemitter":206}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,t){var n=(0,l.default)('<nav class="navbar navbar-expand-md navbar-light bg-light"><a class="navbar-brand" href="#">ChickenPaint</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#chickenpaint-main-menu-content" aria-controls="chickenpaint-main-menu-content" aria-expanded="false" aria-label="Toggle main menu"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="chickenpaint-main-menu-content"><ul class="navbar-nav mr-auto"></ul></div></nav>'),r=/^Mac/i.test(navigator.platform);function s(t){var e,n=t.data("action"),a=t.data("checkbox");o.isActionAllowed(n)&&(a?(t.toggleClass("selected"),e=t.hasClass("selected")):e=!1,o.actionPerformed({action:n,checkbox:a,selected:e}))}this.getElement=function(){return n[0]},e=(0,l.default)(".navbar-nav",n),a=i,e.append(a.map(function(t){var e=(0,l.default)('<li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">'+t.name+'</a><div class="dropdown-menu"></div></li>');return(0,l.default)(".dropdown-toggle",e).dropdown(),e.on("show.bs.dropdown",function(){!function(t){(0,l.default)("[data-action]",t).each(function(){var t=(0,l.default)(this),e=this.getAttribute("data-action"),n=o.isActionAllowed(e);t.toggleClass("disabled",!n).toggleClass("hidden",!n&&!0===t.data("hideIfNotAvailable"))}),(0,l.default)(".dropdown-divider",t).removeClass("hidden");for(var e=(0,l.default)(".dropdown-item:not(.hidden),.dropdown-divider:not(.hidden)",t),n=null,a=0;a<e.length;a++){var i=(0,l.default)(e[a]);i.hasClass("dropdown-divider")?0===a||n?i.addClass("hidden"):n=i:n=null}n&&n.addClass("hidden")}(e),(0,l.default)(document).one("click",function(){e.hasClass("show")&&(0,l.default)(".dropdown-toggle",e).dropdown("toggle")})}),(0,l.default)(".dropdown-menu",e).append(t.children.map(function(t){if(!t.action||o.isActionSupported(t.action)){var e;if("CPSend"!=t.action||o.isActionSupported("CPContinue")||(t.name="Post Oekaki",t.shortcut="ctrl+p"),"-"==t.name?e=(0,l.default)('<div class="dropdown-divider"></div>'):(e=(0,l.default)('<a class="dropdown-item" href="#" data-action="'+t.action+'"><span>'+t.name+"</span></a>"),t.checkbox&&(0,l.default)(e).data("checkbox",!0).toggleClass("selected",!!t.checked),t.hideIfNotAvailable&&e.data("hideIfNotAvailable",!0)),t.title&&e.attr("title",t.title),t.shortcut){var n=e,a=document.createElement("small");r&&(t.shortcut=t.shortcut.replace(/SHIFT/im,"⇧"),t.shortcut=t.shortcut.replace(/ALT/im,"⌥"),t.shortcut=t.shortcut.replace(/CTRL/im,"⌘")),a.className="chickenpaint-shortcut",a.innerHTML=(i=(i=(i=(i=(i=t.shortcut).toUpperCase()).replace(/(,.+)$/,"")).replace("ctrl+=","ctrl++")).replace("⌘+=","⌘++"),i=r?i.replace(/([^+])\+/g,"$1"):i.replace(/([^+])\+/g,"$1 ")),n.append(a),(0,u.default)(t.shortcut,function(t){return s(n),t.preventDefault(),t.stopPropagation(),!1})}return e}var i})),e})),(0,l.default)(n).on("click","a:not(.dropdown-toggle)",function(t){s((0,l.default)(this)),t.preventDefault()}),(0,l.default)(".navbar-toggler",n).click(function(t){(0,l.default)(".collapse",n).collapse("toggle"),t.preventDefault()}),t.getPaletteManager().on("paletteVisChange",function(t,e){(0,l.default)('[data-action="CPPal'+t.substring(0,1).toUpperCase()+t.substring(1)+'"]',n).toggleClass("selected",e)});var e,a};var l=a(t("jquery")),u=a(t("../../lib/keymaster"));function a(t){return t&&t.__esModule?t:{default:t}}var i=[{name:"File",mnemonic:"F",children:[{name:"Save to my computer",action:"CPSave",mnemonic:"S",shortcut:"ctrl+s"},{name:"Save Oekaki",action:"CPSend",mnemonic:"S",shortcut:"ctrl+s"}]},{name:"Edit",mnemonic:"E",children:[{name:"Undo",action:"CPUndo",mnemonic:"U",shortcut:"ctrl+z",title:"Undoes the most recent action"},{name:"Redo",action:"CPRedo",mnemonic:"R",shortcut:"shift+ctrl+z",title:"Redoes a previously undone action"},{name:"Clear history",action:"CPClearHistory",mnemonic:"H",title:"Removes all undo/redo information to regain memory"},{name:"-"},{name:"Cut",action:"CPCut",mnemonic:"T",shortcut:"ctrl+x"},{name:"Copy",action:"CPCopy",mnemonic:"C",shortcut:"ctrl+c"},{name:"Copy merged",action:"CPCopyMerged",mnemonic:"Y",shortcut:"shift+ctrl+c"},{name:"Paste",action:"CPPaste",mnemonic:"P",shortcut:"ctrl+v"},{name:"-"},{name:"Select all",action:"CPSelectAll",mnemonic:"A",shortcut:"ctrl+a"},{name:"Deselect",action:"CPDeselectAll",mnemonic:"D",shortcut:"ctrl+d"},{name:"-"},{name:"Transform",action:"CPTransform",mnemonic:"T",shortcut:"ctrl+y"}]},{name:"Layers",mnemonic:"L",children:[{name:"Duplicate",action:"CPLayerDuplicate",mnemonic:"D",shortcut:"shift+ctrl+d",title:"Creates a copy of the currently selected layer"},{name:"-"},{name:"Merge down",action:"CPLayerMergeDown",mnemonic:"E",shortcut:"ctrl+e",title:"Merges the currently selected layer with the one directly below it"},{name:"Merge group",action:"CPGroupMerge",mnemonic:"G",title:"Merges the contents of the selected group"},{name:"Merge all layers",action:"CPLayerMergeAll",mnemonic:"A",title:"Merges all the layers"},{name:"-"},{hideIfNotAvailable:!0,name:"Add layer mask",action:"CPAddLayerMask"},{hideIfNotAvailable:!0,name:"Delete layer mask",action:"CPRemoveLayerMask"},{hideIfNotAvailable:!0,name:"Apply layer mask",action:"CPApplyLayerMask"},{name:"-"},{hideIfNotAvailable:!0,name:"Clip to the layer below",action:"CPCreateClippingMask"},{hideIfNotAvailable:!0,name:"Unclip from the layer below",action:"CPReleaseClippingMask"}]},{name:"Effects",mnemonic:"E",children:[{name:"Clear",action:"CPClear",mnemonic:"D",shortcut:"del,backspace",title:"Clears the selected area"},{name:"Fill",action:"CPFill",mnemonic:"F",shortcut:"ctrl+f",title:"Fills the selected area with the current color"},{name:"Flip horizontal",action:"CPHFlip",mnemonic:"H",title:"Flips the current selected area horizontally"},{name:"Flip vertical",action:"CPVFlip",mnemonic:"V",title:"Flips the current selected area vertically"},{name:"Invert",action:"CPFXInvert",mnemonic:"I",title:"Invert the image colors"},{name:"-"},{name:"Box blur...",action:"CPFXBoxBlur",mnemonic:"B",title:"Blur effect"},{name:"-"},{name:"Monochromatic noise",action:"CPMNoise",mnemonic:"M",title:"Fills the selection with noise"},{name:"Color noise",action:"CPCNoise",mnemonic:"C",title:"Fills the selection with colored noise"}]},{name:"View",mnemonic:"V",children:[{name:"Full-screen mode",action:"CPFullScreen",mnemonic:"F",checkbox:!0,checked:!1},{name:"-"},{name:"Zoom in",action:"CPZoomIn",mnemonic:"I",shortcut:"ctrl+=",title:"Zooms in"},{name:"Zoom out",action:"CPZoomOut",mnemonic:"O",shortcut:"ctrl+-",title:"Zooms out"},{name:"Zoom 100%",action:"CPZoom100",mnemonic:"1",shortcut:"ctrl+0",title:"Resets the zoom factor to 100%"},{action:"CPLinearInterpolation",name:"-"},{name:"Smooth-out zoomed canvas",action:"CPLinearInterpolation",mnemonic:"L",title:"Linear interpolation is used to give a smoothed looked to the picture when zoomed in",checkbox:!0},{name:"-"},{name:"Show grid",action:"CPToggleGrid",mnemonic:"G",shortcut:"ctrl+g",title:"Displays a grid over the image",checkbox:!0,checked:!1},{name:"Grid options...",action:"CPGridOptions",mnemonic:"D",title:"Shows the grid options dialog box"}]},{name:"Palettes",mnemonic:"P",children:[{name:"Rearrange",action:"CPArrangePalettes",title:"Rearrange the palette windows"},{name:"Toggle palettes",action:"CPTogglePalettes",mnemonic:"P",shortcut:"tab",title:"Hides or shows all palettes"},{name:"-"},{name:"Show tool options",action:"CPPalBrush",mnemonic:"B",checkbox:!0,checked:!0},{name:"Show color",action:"CPPalColor",mnemonic:"C",checkbox:!0,checked:!0},{name:"Show layers",action:"CPPalLayers",mnemonic:"Y",checkbox:!0,checked:!0},{name:"Show misc",action:"CPPalMisc",mnemonic:"M",checkbox:!0,checked:!0},{name:"Show stroke",action:"CPPalStroke",mnemonic:"S",checkbox:!0,checked:!0},{name:"Show swatches",action:"CPPalSwatches",mnemonic:"W",checkbox:!0,checked:!0},{name:"Show textures",action:"CPPalTextures",mnemonic:"X",checkbox:!0,checked:!0},{name:"Show tools",action:"CPPalTool",mnemonic:"T",checkbox:!0,checked:!0}]},{name:"Help",mnemonic:"H",children:[{name:"Tablet support",mnemonic:"T",action:"CPTabletSupport",title:"Help with getting a drawing tablet working"},{name:"Shortcuts",mnemonic:"S",action:"CPShortcuts",title:"List of keyboard and mouse shortcuts"},{name:"-"},{name:"About",mnemonic:"A",action:"CPAbout",title:"Displays some information about ChickenPaint"}]}];e.exports=n.default},{"../../lib/keymaster":64,jquery:187}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var u=i(t("jquery")),a=i(t("./CPPalette"));function i(t){return t&&t.__esModule?t:{default:t}}function o(r){a.default.call(this,r,"misc","Misc");var s=this,l=[{className:"chickenpaint-tool-zoom-in",command:"CPZoomIn",toolTip:"Zoom in"},{className:"chickenpaint-tool-zoom-out",command:"CPZoomOut",toolTip:"Zoom out"},{className:"chickenpaint-tool-zoom-100",command:"CPZoom100",toolTip:"Zoom 100%"},{className:"chickenpaint-tool-undo",command:"CPUndo",toolTip:"Undo"},{className:"chickenpaint-tool-redo",command:"CPRedo",toolTip:"Redo"},{className:"chickenpaint-tool-send",command:"CPSend",toolTip:"Save pic"}];!function(){var t=s.getBodyElement(),e=document.createElement("ul");for(var n in e.className="chickenpaint-misc-tools list-unstyled",l){var a=l[n],i=document.createElement("li"),o=document.createElement("div");"CPSend"!=a.command||r.isActionSupported("CPContinue")||(a.toolTip="Send picture to server",a.className="chickenpaint-tool-send-and-end"),"CPSend"!=a.command||r.isActionSupported("CPContinue")||(a.toolTip="Send picture to server",a.className="chickenpaint-tool-send-and-end"),i.className="chickenpaint-toolbar-button "+a.className,i.setAttribute("data-buttonIndex",n),o.className="chickenpaint-toolbar-button-icon",i.appendChild(o),e.appendChild(i)}(0,u.default)(e).on("mousedown","li",function(t){(0,u.default)(this).addClass("selected")}).on("mouseup","li",function(t){(0,u.default)(this).removeClass("selected")}).on("click","li",function(t){var e=l[parseInt(this.getAttribute("data-buttonIndex"),10)];r.actionPerformed({action:e.command})}),t.appendChild(e)}()}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{"./CPPalette":39,jquery:187}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var E=i(t("jquery")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,a,i){this.title=n,this.name=e,this.resizeVert=a||!1,this.resizeHorz=i||!1;var o,r,s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("button"),d=document.createElement("div"),c=null,f=null,h=this;function p(t){"vertResize"==o&&h.setHeight(t.pageY-(0,E.default)(s).offset().top)}function m(t){c.releasePointerCapture(t.pointerId),o=!1}function g(t){o="vertResize",c.setPointerCapture(t.pointerId)}function v(t){"horzResize"==o&&h.setWidth(t.pageX-(0,E.default)(s).offset().left)}function y(t){f.releasePointerCapture(t.pointerId),o=!1}function _(t){o="horzResize",f.setPointerCapture(t.pointerId)}this.getElement=function(){return s},this.getBodyElement=function(){return d},this.getWidth=function(){return(0,E.default)(s).outerWidth()},this.getHeight=function(){return(0,E.default)(s).outerHeight()},this.getX=function(){return parseInt(s.style.left,10)||0},this.getY=function(){return parseInt(s.style.top,10)||0},this.setLocation=function(t,e){s.style.left=t+"px",s.style.top=e+"px"},this.setWidth=function(t){s.style.width=t+"px"},this.setHeight=function(t){s.style.height=t+"px"},this.setSize=function(t,e){this.setWidth(t),this.setHeight(e)},u.type="button",u.className="close",u.innerHTML="&times;",s.className="chickenpaint-palette chickenpaint-palette-"+e,l.className="chickenpaint-palette-head",l.setAttribute("touch-action","none");var b=document.createElement("div"),w=document.createElement("h5");b.className="modal-header",w.className="modal-title",w.appendChild(document.createTextNode(this.title)),b.appendChild(w),b.appendChild(u),l.appendChild(b),d.className="chickenpaint-palette-body",s.appendChild(l),s.appendChild(d),this.resizeVert&&((c=document.createElement("div")).className="chickenpaint-resize-handle-vert",c.addEventListener("pointerdown",g),c.addEventListener("pointermove",p),c.addEventListener("pointerup",m),s.appendChild(c)),this.resizeHorz&&((f=document.createElement("div")).className="chickenpaint-resize-handle-horz",f.addEventListener("pointerdown",_),f.addEventListener("pointermove",v),f.addEventListener("pointerup",y),s.appendChild(f)),l.addEventListener("pointerdown",function(t){0==t.button&&("BUTTON"==t.target.nodeName?h.emitEvent("paletteVisChange",[h,!1]):(l.setPointerCapture(t.pointerId),r={x:t.pageX-(0,E.default)(s).position().left,y:t.pageY-(0,E.default)(s).position().top},o="move"))}),l.addEventListener("pointermove",function(t){0!=t.buttons&&"move"==o&&h.setLocation(t.pageX-r.x,t.pageY-r.y)}),l.addEventListener("pointerup",function(t){"move"==o&&(l.releasePointerCapture(t.pointerId),o=!1)})}(o.prototype=Object.create(a.default.prototype)).constructor=a.default,e.exports=n.default},{jquery:187,"wolfy87-eventemitter":206}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var f=i(t("jquery")),a=i(t("wolfy87-eventemitter")),h=i(t("./CPToolPalette")),p=i(t("./CPMiscPalette")),m=i(t("./CPStrokePalette")),g=i(t("./CPColorPalette")),v=i(t("./CPBrushPalette")),y=i(t("./CPLayersPalette")),_=i(t("./CPTexturePalette")),b=i(t("./CPSwatchesPalette"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var o={tool:new h.default(t),misc:new p.default(t),stroke:new m.default(t),color:new g.default(t),brush:new v.default(t),layers:new y.default(t),textures:new _.default(t),swatches:new b.default(t)},e=[],n=[],r=document.createElement("div"),a=this;function i(t,e){var n=t.getElement();e?r.appendChild(n):r.removeChild(n),a.emitEvent("paletteVisChange",[t.name,e])}for(var s in this.palettes=o,this.showPaletteByName=function(t,e){var n=o[t];n&&i(n,e)},this.togglePalettes=function(){if(0==n.length)(0,f.default)("> .chickenpaint-palette",r).each(function(){a.showPaletteByName(this.getAttribute("data-paletteName"),!1),n.push(this)});else{for(var t=0;t<n.length;t++){var e=n[t];a.showPaletteByName(e.getAttribute("data-paletteName"),!0)}n=[]}},this.constrainPalettes=function(){var t=(0,f.default)(r).parents(".chickenpaint-main-section").width(),e=(0,f.default)(r).parents(".chickenpaint-main-section").height();for(var n in o){var a=o[n];a.getX()+a.getWidth()/2>t&&a.setLocation(t-a.getWidth(),a.getY()),a.getY()+a.getHeight()/2>e&&a.setLocation(a.getX(),e-a.getHeight())}var i=0<t-o.tool.getWidth()-o.misc.getWidth()-o.stroke.getWidth()-o.color.getWidth()-o.brush.getWidth()-15;o.swatches.getX()+o.swatches.getWidth()==o.brush.getX()+o.brush.getWidth()&&Math.abs(o.swatches.getY()-o.brush.getY())<20&&o.swatches.setLocation(o.brush.getX()-o.swatches.getWidth()-(i?5:1),0),o.layers.getY()+o.layers.getHeight()>e&&o.layers.setHeight(Math.max(e-o.layers.getY(),200))},this.arrangePalettes=function(){var t=(0,f.default)(r).parents(".chickenpaint-main-section").width(),e=(0,f.default)(r).parents(".chickenpaint-main-section").height(),n=0<t-o.tool.getWidth()-o.misc.getWidth()-o.stroke.getWidth()-o.color.getWidth()-o.brush.getWidth()-15;o.brush.setLocation(t-o.brush.getWidth()-15,0);var a=o.brush.getY()+o.brush.getHeight(),i=300<e-a?a+2:a;o.layers.setSize(o.brush.getWidth()+(n?30:0),e-i),o.layers.setLocation(o.brush.getX()+o.brush.getWidth()-o.layers.getWidth(),i),o.tool.setLocation(0,0),o.misc.setLocation(o.tool.getX()+o.tool.getWidth()+(n?5:1),0),n?o.stroke.setLocation(o.misc.getX()+o.misc.getWidth()+(n?5:1),0):o.stroke.setLocation(o.misc.getX(),o.misc.getY()+o.misc.getHeight()+1),o.swatches.setLocation(o.brush.getX()-o.swatches.getWidth()-(n?5:1),0),o.textures.setWidth(Math.min(o.layers.getX()-o.textures.getX(),490)),o.textures.setLocation(o.color.getX()+o.color.getWidth()+4,e-o.textures.getHeight()),o.color.setLocation(0,Math.max(o.tool.getY()+o.tool.getHeight(),e-o.color.getHeight()))},this.getElement=function(){return r},r.className="chickenpaint-palettes",o){var l=o[s],u=l.getElement();l.on("paletteVisChange",function(){i(this,!1)}),u.setAttribute("data-paletteName",s),e.push(u)}for(var d in o){var c=o[d].getElement();r.appendChild(c)}}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{"./CPBrushPalette":25,"./CPColorPalette":28,"./CPLayersPalette":35,"./CPMiscPalette":38,"./CPStrokePalette":46,"./CPSwatchesPalette":47,"./CPTexturePalette":49,"./CPToolPalette":50,jquery:187,"wolfy87-eventemitter":206}],41:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var v=i(t("jquery")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(a){var i,o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),s=0,l=1,u=0,d=1,e=10,c=!1,f=1,h=this;function p(){var t=a?(0,v.default)(o).height():(0,v.default)(o).width(),e=(u-s)/(l-s)*(t-(f=d/(l-s)*t));r.style[a?"height":"width"]=f+"px",n.style[a?"height":"width"]=f+"px",n.style[a?"top":"left"]=e+"px"}function m(t){c=!0;var e=a?(0,v.default)(o).height():(0,v.default)(o).width(),n=a?t.pageY-(0,v.default)(o).offset().top:t.pageX-(0,v.default)(o).offset().left;u+=(n-i)*(l-s)/(e-f),u=Math.min(Math.max(u,s),l),i=n,h.emitEvent("valueChanged",[u]),p(),c=!1}function g(t){t.stopPropagation(),(0,v.default)(n).removeClass("dragging"),window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",m)}this.setValues=function(t,e,n,a){u=t,d=e,s=n,l=a,p()},this.setBlockIncrement=function(t){e=t},this.setUnitIncrement=function(t){t},this.getElement=function(){return o},this.getValueIsAdjusting=function(){return c},o.className="chickenpaint-scrollbar "+(a?"chickenpaint-scrollbar-vertical":"chickenpaint-scrollbar-horizontal"),n.className="chickenpaint-scrollbar-handle",r.className="chickenpaint-scrollbar-handle-inner",n.appendChild(r),o.appendChild(n),n.addEventListener("mousedown",function(t){t.stopPropagation(),i=a?t.pageY-(0,v.default)(o).offset().top:t.pageX-(0,v.default)(o).offset().left,(0,v.default)(n).addClass("dragging"),window.addEventListener("mouseup",g),window.addEventListener("mousemove",m)}),n.addEventListener("click",function(t){t.stopPropagation()}),o.addEventListener("click",function(t){this==o&&((a?t.pageY-(0,v.default)(o).offset().top:t.pageX-(0,v.default)(o).offset().left)<parseInt(n.style[a?"top":"left"],10)?u-=e:u+=e,h.emitEvent("valueChanged",[u]),p())})}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{jquery:187,"wolfy87-eventemitter":206}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var l=i(t("jquery")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var a=(0,l.default)('<div class="modal fade chickenpaint-send-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog">\n                    <div class="modal-content" data-stage="saving">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Saving drawing...</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-saving-progress-message">Preparing your drawing to be saved, please wait...</p>\n                            <pre class="chickenpaint-saving-error-message pre-scrollable"></pre>\n                            <div class="progress">\n                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light chickenpaint-send-cancel" data-dismiss="modal">Cancel</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-not-previously-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>Your drawing has been saved, would you like to post it to the forum now?</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-dismiss="modal">Yes, post it now</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-dismiss="modal">No, keep drawing</button>\n                            <button type="button" class="btn btn-light chickenpaint-exit" data-dismiss="modal">No, quit and I\'ll finish it later</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-already-posted" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>Your drawing has been saved, would you like to view it on the forum now?</p>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary chickenpaint-post-drawing" data-dismiss="modal">Yes, view the post</button>\n                            <button type="button" class="btn btn-light chickenpaint-continue-drawing" data-dismiss="modal">No, keep drawing</button>\n                        </div>\n                    </div>\n                    <div class="modal-content" data-stage="success-redirect" style="display:none">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing saved!</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>Your drawing has been saved, redirecting you to view your new post now...</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),i=(0,l.default)(".chickenpaint-saving-progress-message",a),o=(0,l.default)(".chickenpaint-saving-error-message",a),r=(0,l.default)(".progress-bar",a),s=this;n.on("savingProgress",function(t,e){t*=100,i.text(e),(0,l.default)(r).attr("aria-valuenow",t).css("width",t+"%")}),n.on("savingComplete",function(){(0,l.default)(".modal-content[data-stage='saving']",a).hide(),t.isActionSupported("CPContinue")?t.isActionSupported("CPExit")?(0,l.default)(".modal-content[data-stage='success-not-previously-posted']",a).show():(0,l.default)(".modal-content[data-stage='success-already-posted']",a).show():(0,l.default)(".modal-content[data-stage='success-redirect']",a).show()}),n.on("savingFailure",function(t){r.addClass("progress-bar-danger");var e="Sorry, your drawing could not be saved, please try again later.";t&&(0<(t=t.replace(/^CHIBIERROR\s*/,"")).length&&(e+="<br><br>The error returned from the server was:",o.text(t).show()),i.html(e))}),(0,l.default)(".chickenpaint-post-drawing",a).click(function(){t.actionPerformed({action:"CPPost"})}),(0,l.default)(".chickenpaint-exit",a).toggle(t.isActionSupported("CPExit")).click(function(){alert("When you want to come back and finish your drawing, just click the 'new drawing' button again and you can choose to continue this drawing."),t.actionPerformed({action:"CPExit"})}),(0,l.default)(".chickenpaint-send-cancel",a).click(function(){n.cancel()}),a.on("hidden.bs.modal",function(t){a.remove()}),a.modal({show:!1}),a.on("shown.bs.modal",function(){s.emitEvent("shown")}),a.data("bs.modal").$body=(0,l.default)(e),e.appendChild(a[0]),this.show=function(){a.modal("show")}}(o.prototype=Object.create(a.default.prototype)).contructor=o,e.exports=n.default},{jquery:187,"wolfy87-eventemitter":206}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,i.default)('<div class="modal fade chickenpaint-shortcuts-dialog" tabindex="-1" role="dialog">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Shortcuts</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p>\n                                Many of the menu options and painting tools have keyboard shortcuts which are\n                                written next to them or appear when you hover.\n                            </p>\n                            <p>\n                                Here are some other shortcuts which are not as obvious!\n                            </p>\n                            <div class="chickenpaint-shortcuts-sections">\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Color swatches palette</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Use as the drawing color\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Right</span>\n                                                </dt>\n                                                <dd>\n                                                    Remove or replace a color swatch\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Line drawing mode</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Shift</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Snap line to nearest 45 degrees\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Painting tools</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">1</span> - <span class="chickenpaint-shortcut-key">9</span> , <span class="chickenpaint-shortcut-key">0</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush opacity\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">[</span> , <span class="chickenpaint-shortcut-key">]</span></span>\n                                                </dt>\n                                                <dd>\n                                                    Change brush size\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Brush palette</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Right drag</span>\n                                                </dt>\n                                                <dd>\n                                                    Adjust brush sliders more precisely\n                                                </dd>\n                                            </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Drawing canvas</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Middle</span> <span class="chickenpaint-shortcut-alternate">or</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Space</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Move the canvas around\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa fa-mouse-pointer"></span> Middle</span> <span class="chickenpaint-shortcut-alternate">or</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="chickenpaint-shortcut-key">Space</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Rotate the canvas\n                                                </dd>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Right</span> <span class="chickenpaint-shortcut-alternate">or</span> <span class="chickenpaint-shortcut"><span class="chickenpaint-shortcut-key">Alt</span> + <span class="fa fa-mouse-pointer"></span> Left</span>\n                                                </dt>\n                                                <dd>\n                                                    Sample the color under the cursor\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="chickenpaint-shortcuts-section">\n                                    <h5>Layers palette</h5>\n                                    <ul class="chickenpaint-shortcuts-list list-unstyled">\n                                        <li>\n                                            <dl>\n                                                <dt>\n                                                    <span class="chickenpaint-shortcut"><span class="fa fa-mouse-pointer"></span> Double click</span>\n                                                </dt>\n                                                <dd>\n                                                    Rename layer\n                                                </dd>\n                                             </dl>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ');e.on("hidden.bs.modal",function(t){e.remove()}),e.modal({show:!1}),e.data("bs.modal").$body=(0,i.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var a,i=(a=t("jquery"))&&a.__esModule?a:{default:a};e.exports=n.default},{jquery:187}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var b=i(t("jquery")),a=i(t("wolfy87-eventemitter"));function i(t){return t&&t.__esModule?t:{default:t}}function o(s,e,l,u){var i,o=4,d=1.5,n=0,r=1,c=2,f=document.createElement("canvas"),h=f.getContext("2d"),p=e-s,m=n,a=!1,g=this;function v(){var t=f.width,e=f.height,n="string"==typeof g.title?g.title:g.title(g.value),a=3*window.devicePixelRatio,i=.75*f.height;if(l)h.save(),h.fillStyle="white",h.fillRect(0,0,t,e),h.fillStyle="black",h.fillText(n,a,i),h.beginPath(),g.value>=p/2?h.rect(t/2,0,(g.value-p/2)*t/p,e):h.rect(g.value*t/p,0,(p/2-g.value)*t/p,e),h.fill(),h.clip(),h.fillStyle="white",h.fillText(n,a,i),h.restore();else{var o,r=(g.value-s)/p;u&&(r=Math.pow(r,1/d)),o=r*t,h.save(),h.save(),h.fillStyle="black",h.beginPath(),h.rect(0,0,o,e),h.fill(),h.clip(),h.fillStyle="white",h.fillText(n,a,i),h.restore(),h.fillStyle="white",h.beginPath(),h.rect(o,0,t,e),h.fill(),h.clip(),h.fillStyle="black",h.fillText(n,a,i),h.restore()}}function y(t){var e=(0,b.default)(f).width(),n=(0,b.default)(f).offset().left,a=(t.pageX-n)/e;u&&(a=Math.pow(Math.max(a,0),d)),g.setValue(a*p+s)}function _(t){switch(m){case r:y(t);break;case c:var e=(t.pageX-i)/o;if(0!==e){var n=g.value+e,a=0|n;g.setValue(a),i=t.pageX-(n-a)*o}}}this.value=void 0,this.title="",l=l||!1,this.setValue=function(t){t=~~Math.max(s,Math.min(e,t)),this.value!=t&&(this.value=t,this.emitEvent("valueChange",[this.value]),a?v():(a=!0,this.resize()))},this.getElement=function(){return f},this.resize=function(){f.width=(0,b.default)(f).width()||150,f.height=(0,b.default)(f).height()||20,1<window.devicePixelRatio&&(f.style.height=f.height+"px",f.width=f.width*window.devicePixelRatio,f.height=f.height*window.devicePixelRatio),h.font=.47*f.height+"pt sans-serif",v()},f.addEventListener("pointerdown",function(t){if(m===n){switch(t.button){case 0:m=r,y(t);break;case 2:m=c,i=t.pageX;break;default:return}f.setPointerCapture(t.pointerId),f.addEventListener("pointermove",_)}}),f.addEventListener("pointerup",function(t){if(m!==n){switch(m){case r:0===t.button&&(m=n);break;case c:2==t.button&&(m=n);break;default:return}m===n&&(f.releasePointerCapture(t.pointerId),f.removeEventListener("pointermove",_))}}),f.addEventListener("contextmenu",function(t){t.preventDefault()}),f.setAttribute("touch-action","none"),f.className="chickenpaint-slider","devicePixelRatio"in window||(window.devicePixelRatio=1)}(o.prototype=Object.create(a.default.prototype)).constructor=o,e.exports=n.default},{jquery:187,"wolfy87-eventemitter":206}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){for(var d,a,i,o,r=170,c=document.createElement("canvas"),f=c.getContext("2d"),s=new Image,l=new Image,h=new Image,p=new Image,u=new Image,m=new Image,g=new Image,v=[s,l,h,p,u,m,g],y=0,_=0,b="",w=14,E=n+"splash/",T=0;T<v.length;T++)v[T].onload=function(){++y==v.length&&P()};function k(t,e,n){return d||((d=document.createElement("canvas")).width=t,d.height=e,i=d.getContext("2d")),i.globalCompositeOperation="copy",i.drawImage(s,0,0),function(t,e,n){a||((a=document.createElement("canvas")).width=t,a.height=e,o=a.getContext("2d"));o.globalCompositeOperation="copy",o.drawImage(g,0,0),o.globalCompositeOperation="source-in",o.drawImage(g,0,Math.round(n*r))}(t,e,n),i.globalCompositeOperation="source-over",i.drawImage(a,0,0),i.drawImage(l,0,0),i.globalCompositeOperation="screen",i.drawImage(m,0,0),i.globalCompositeOperation="multiply",i.drawImage(u,0,0),d}function P(){var t=c.width/2,e=c.height/2;if(f.fillStyle="white",f.fillRect(0,0,c.width,c.height),y==v.length){var n=p.width,a=p.height,i=Math.round(t-n/2),o=Math.round(e-a/2);f.drawImage(p,i,o),k(n,a,_),f.globalAlpha=.88,f.drawImage(d,i,o),f.globalAlpha=1,f.drawImage(h,i,o),e=Math.round(e+a/2+2)}if(""!=b){f.fillStyle="black";for(var r=b.split("\n"),s=0;s<r.length;s++){var l=r[s],u=f.measureText(l).width;e+=2*w,f.fillText(l,t-u/2,e)}}}function x(){c.width=c.clientWidth,c.height=c.clientHeight,f.font=w+"pt sans-serif",P()}s.src=E+"cup.png",m.src=E+"highlights.png",l.src=E+"lid.png",h.src=E+"lines.png",u.src=E+"shading.png",g.src=E+"smoothie.png",p.src=E+"text.png",e.on("loadingProgress",function(t,e){_=t,b=e,P()}),e.on("loadingFailure",function(t){_=0,b=t,P()}),e.on("loadingComplete",function(){window.removeEventListener("resize",x),t.removeChild(c)}),window.addEventListener("resize",x),c.className="chickenpaint-splash-screen",t.appendChild(c),x()},e.exports=n.default},{}],46:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var l=o(t("jquery")),a=o(t("./CPPalette")),i=o(t("../engine/CPBrushInfo"));function o(t){return t&&t.__esModule?t:{default:t}}function r(o){a.default.call(this,o,"stroke","Stroke");var r=[{className:"chickenpaint-tool-freehand",command:"CPFreeHand",toolTip:"Free-hand",selected:!0},{className:"chickenpaint-tool-line",command:"CPLine",toolTip:"Straight line"},{className:"chickenpaint-tool-bezier",command:"CPBezier",toolTip:"Bezier curve"}],s=this.getBodyElement();!function(){var n=document.createElement("ul");for(var t in n.className="chickenpaint-stroke-tools list-unstyled",r){var e=r[t],a=document.createElement("li"),i=document.createElement("div");a.className="chickenpaint-toolbar-button "+e.className,a.setAttribute("data-buttonIndex",t),e.selected&&(a.className=a.className+" selected"),i.className="chickenpaint-toolbar-button-icon",a.appendChild(i),n.appendChild(a)}(0,l.default)(n).on("click","li",function(t){var e=r[parseInt(this.getAttribute("data-buttonIndex"),10)];(0,l.default)("li",n).removeClass("selected"),(0,l.default)(this).addClass("selected"),o.actionPerformed({action:e.command})}),s.appendChild(n)}(),o.on("toolChange",function(t,e){(0,l.default)(".chickenpaint-tool-freehand",s).toggleClass("selected",e.strokeMode==i.default.STROKE_MODE_FREEHAND),(0,l.default)(".chickenpaint-tool-line",s).toggleClass("selected",e.strokeMode==i.default.STROKE_MODE_LINE),(0,l.default)(".chickenpaint-tool-bezier",s).toggleClass("selected",e.strokeMode==i.default.STROKE_MODE_BEZIER)})}(r.prototype=Object.create(a.default.prototype)).constructor=r,e.exports=n.default},{"../engine/CPBrushInfo":8,"./CPPalette":39,jquery:187}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var p=a(t("jquery")),m=a(t("file-saver")),i=a(t("./CPPalette")),o=a(t("../util/CPColor")),g=a(t("../util/AdobeColorTable"));function a(t){return t&&t.__esModule?t:{default:t}}function r(s){i.default.call(this,s,"swatches","Color swatches");var l,e=[16777215,0,16711680,65280,255,16776960],u=!1,a=document.createElement("ul"),d=document.createElement("div"),c=this;function n(t){var e=document.createElement("div"),n=document.createElement("a"),a=document.createElement("ul"),i=document.createElement("a"),o=document.createElement("a"),r=this;this.getElement=function(){return e},this.setColor=function(t){n.setAttribute("data-color",t),n.style.backgroundColor="#"+function(t,e,n){for(;t.length<n;)t=e+t;return t}(""+Number(t).toString(16),"0",6)},this.setColor(t),n.href="#",n.className="chickenpaint-color-swatch dropdown-toggle",n.setAttribute("data-toggle","dropdown"),i.className="dropdown-item",i.href="#",i.innerHTML="Remove",i.addEventListener("click",function(t){t.preventDefault(),(0,p.default)(e).remove(),u=!0}),o.className="dropdown-item",o.href="#",o.innerHTML="Replace with current color",o.addEventListener("click",function(t){t.preventDefault(),r.setColor(s.getCurColor().getRgb()),u=!0}),a.className="dropdown-menu",a.appendChild(i),a.appendChild(o),e.className="chickenpaint-color-swatch-wrapper",e.appendChild(n),e.appendChild(a),(0,p.default)(e).on("show.bs.dropdown",function(){var t=(0,p.default)(this).find(".dropdown-toggle");(0,p.default)(this).find(".dropdown-menu").css({top:t.position().top+t.outerHeight(!0)+"px",left:t.position().left+"px"})})}function f(t){var e=new n(t);a.appendChild(e.getElement())}function h(t){var e=document.createElement("span");return e.className="fa fa-"+t,e}this.getSwatches=function(){for(var t=(0,p.default)(".chickenpaint-color-swatch",a),e=new Array(t.length),n=0;n<t.length;n++)e[n]=parseInt(t.get(n).getAttribute("data-color"),10);return e},this.setSwatches=function(t){!function(){for(;a.lastChild;)a.removeChild(a.lastChild)}();for(var e=0;e<t.length;e++)f(t[e]);u=!0},this.isModified=function(){return u},function(){a.className="chickenpaint-color-swatches list-unstyled";for(var t=0;t<e.length;t++)a.appendChild(new n(e[t]).getElement());a.addEventListener("click",function(t){var e=t.target;/chickenpaint-color-swatch/.test(e.className)&&0==t.button&&void 0!==e.getAttribute("data-color")&&(s.setCurColor(new o.default(parseInt(e.getAttribute("data-color"),10))),t.stopPropagation(),t.preventDefault())}),a.addEventListener("contextmenu",function(t){var n=t.target;/chickenpaint-color-swatch/.test(n.className)&&(t.preventDefault(),(0,p.default)(n).dropdown("toggle").off("click.bs.dropdown"),(0,p.default)(document).on("click",function t(e){"button"in e&&0!==e.button||((0,p.default)(n).closest(".chickenpaint-color-swatch-wrapper").hasClass("show")&&(0,p.default)(n).closest(".dropdown-toggle").dropdown("toggle"),(0,p.default)(this).off("click",t))}))})}(),this.getBodyElement().appendChild(a),function(){var n=document.createElement("button"),t=document.createElement("button"),e=document.createElement("div"),a=document.createElement("a"),i=document.createElement("a");t.type="button",t.title="Add the current brush color as a new swatch",t.className="btn chickenpaint-small-toolbar-button chickenpaint-color-swatch-add",t.appendChild(h("plus")),n.type="button",n.className="btn dropdown-toggle chickenpaint-small-toolbar-button chickenpaint-color-swatch-settings",n.setAttribute("data-toggle","dropdown"),n.appendChild(h("cog")),a.className="dropdown-item",a.href="#",a.innerHTML="Save swatches to your computer...",a.addEventListener("click",function(t){var e,n;t.preventDefault(),e=(new g.default).write(c.getSwatches()),n=new Blob([e],{type:"application/octet-stream"}),m.default.saveAs(n,"oekakiswatches.aco")}),i.className="dropdown-item",i.href="#",i.innerHTML="Load swatches from your computer...",i.addEventListener("click",function(t){t.preventDefault(),l.onchange=function(){var t=this.files;if(!(t.length<1)){var e=t[0],n=new FileReader;n.onload=function(){var t=(new g.default).read(this.result);null!=t&&0<t.length?c.setSwatches(t):alert("The swatches could not be read, did you select an .aco file?")},n.readAsArrayBuffer(e)}},l.click()}),e.className="dropdown-menu",e.appendChild(a),e.appendChild(i);var o=document.createElement("div");o.className="btn-group dropright",o.appendChild(n),o.appendChild(e),(0,p.default)(n).dropdown();var r=function t(e){"button"in e&&0!==e.button||((0,p.default)(o).hasClass("show")&&(0,p.default)(n).dropdown("toggle"),(0,p.default)(this).off("click",t))};(0,p.default)(o).on("show.bs.dropdown",function(){(0,p.default)(document).on("click",r)}),t.addEventListener("click",function(t){f(s.getCurColor().getRgb()),u=!0}),d.className="chickenpaint-color-swatches-buttons",window.File&&window.FileReader&&window.FileList&&window.Blob&&((l=document.createElement("input")).type="file",l.multiple=!1,l.style.display="none",d.appendChild(o),d.appendChild(l)),d.appendChild(t)}(),this.getBodyElement().appendChild(d)}(r.prototype=Object.create(i.default.prototype)).constructor=r,e.exports=n.default},{"../util/AdobeColorTable":51,"../util/CPColor":54,"./CPPalette":39,"file-saver":186,jquery:187}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=(0,s.default)('<div class="modal fade" tabindex="-1" role="dialog">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Drawing tablet support</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                        <div class="modal-body">\n                            <p class="chickenpaint-tablet-there-are-two-options">\n                                There are two ways you could use your tablet\'s pen pressure support with ChickenPaint.\n                            </p>\n                            <div class="chickenpaint-tablet-support chickenpaint-wacom-support">\n                                <h5>\n                                    Plugin for Wacom tablets\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-internet-explorer"></span>\n                                        IE 10, 11\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-firefox"></span>\n                                        Firefox (32-bit only)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-safari"></span>\n                                        Safari\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-opera"></span>\n                                        Opera\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-installed">\n                                    The plugin for Wacom tablets doesn\'t seem to be installed in your browser yet.\n                                </p>\n                                <p class="chickenpaint-not-installed">\n                                    Please make sure that you\'ve installed the latest drivers for your tablet from the \n                                    <a href="http://www.wacom.com/en-us/support/product-support/drivers" target="_blank">Wacom drivers page</a>,\n                                    then restart your browser.\n                                </p>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t support the Wacom tablet plugin, please \n                                    try one of the browsers listed above instead.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    The Wacom tablet plugin is installed and working.\n                                </p>\n                            </div>\n                            <div class="chickenpaint-tablet-support chickenpaint-pointerevents-support">\n                                <h5>\n                                    Built-in support for most tablets.\n                                    <small>macOS, Windows 8 or newer</small>\n                                </h5>\n                                <div class="chickenpaint-supported-browsers">\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-internet-explorer"></span>\n                                        IE (Windows 8)\n                                    </div>\n                                        <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-edge"></span>\n                                        Edge (Windows 10)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-firefox"></span>\n                                        Firefox (<a href="https://github.com/thenickdude/chickenpaint/blob/master/help/Firefox pressure support.md" target="_blank">help <i class="fa fa-external-link-alt"></i></a>)\n                                    </div>\n                                    <div class="chickenpaint-supported-browser">\n                                        <span class="fab fa-chrome"></span>\n                                        Chrome\n                                    </div>\n                                </div>\n                                <p class="chickenpaint-not-supported">\n                                    Your browser doesn\'t have built-in support for drawing tablets, please try\n                                    one of the other browsers listed above.\n                                </p>\n                                <p class="chickenpaint-supported alert alert-success">\n                                    Your browser has built-in support for drawing tablets!\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       '),n=(0,s.default)(".chickenpaint-wacom-support",e),a=(0,s.default)(".chickenpaint-pointerevents-support",e),i=(0,s.default)(".chickenpaint-tablet-there-are-two-options",e),o=l.default.getRef().isTabletPresent(),r=!!window.hasNativePointerEvents;n.toggleClass("supported",o),o?(a.hide(),i.hide()):((/Chrome/i.test(navigator.userAgent)&&!/OPR/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent))&&n.addClass("not-supported"),r&&(n.hide(),i.hide()));a.toggleClass("supported",r),a.toggleClass("not-supported",!r),e.modal({show:!1}),e.data("bs.modal").$body=(0,s.default)(t),t.appendChild(e[0]),this.show=function(){e.modal("show")}};var s=a(t("jquery")),l=a(t("../util/CPWacomTablet"));function a(t){return t&&t.__esModule?t:{default:t}}e.exports=n.default},{"../util/CPWacomTablet":62,jquery:187}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var O=a(t("jquery")),S=a(t("wolfy87-eventemitter")),L=a(t("../engine/CPGreyBmp")),M=a(t("../engine/CPLookUpTable")),A=a(t("./CPPalette")),R=a(t("./CPSlider"));function a(t){return t&&t.__esModule?t:{default:t}}function B(t,e){var n=document.createElement("div"),a=document.createElement("label");return n.className="form-check",t.className="form-check-input",a.className="form-check-label",a.setAttribute("for",t.id),a.appendChild(t),a.appendChild(document.createTextNode(e)),n.appendChild(t),n.appendChild(a),n}function i(e){A.default.call(this,e,"textures","Textures");var a,u,n,t,i,o,r,s,l,d,c,f,h=64,p=32,m=!1,g=!1,v=0,y=0,_=document.createElement("div"),b=this.getBodyElement();function w(t){for(var e=0;e<t.length;e++){var n=new C(t[e],p,p);n.on("click",function(){a=this.texture,x()}),_.appendChild(n.getElement())}}function E(t){for(var e=new L.default(t,t,8),n=1;n<t*t;n++)e.data[n]=255;return e}function T(t){for(var e=2*t,n=new L.default(e,e,8),a=0;a<e;a++)for(var i=0;i<e;i++)n.data[a+i*e]=(~~(a/t)+~~(i/t))%2==0?0:255;return n}function k(t,e){for(var n=new L.default(e,e,8),a=0;a<e*e;a++)t<=~~(a%e)&&(n.data[a]=255);return n}function P(t,e){for(var n=new L.default(e,e,8),a=0;a<e*e;a++)t<=a/e&&(n.data[a]=255);return n}function x(){if(null!=a){u=a.clone(),m&&u.mirrorHorizontally();var t=new M.default;t.loadBrightnessContrast(v,y),g&&t.invert(),u.applyLUT(t)}else u=null;e.getArtwork().setBrushTexture(u),null!=n&&n.updateTexture()}function C(t,e,n){var a=document.createElement("canvas"),i=a.getContext("2d"),o=this;this.setTexture=function(t){this.texture=t,this.paint()},this.getElement=function(){return a},this.paint=function(){null!=this.texture?i.fillStyle=i.createPattern(this.texture.getAsCanvas(),"repeat"):i.fillStyle="white",i.fillRect(0,0,a.width,a.height)},a.addEventListener("click",function(){o.emit("click")}),a.width=e,a.height=n,this.setTexture(t)}(C.prototype=Object.create(S.default.prototype)).constructor=C,n=new function(){var t,e=document.createElement("div"),a=document.createElement("input"),i=document.createElement("input"),o=new R.default(0,200,!0),r=new R.default(0,200,!0),n=new C(null,h,h),s=document.createElement("button");function l(){a.checked=g,i.checked=m,o.setValue(100*v+100),r.setValue(100*y+100)}this.updateTexture=function(){s.disabled=null==u,n.setTexture(u)},this.getElement=function(){return e},e.className="chickenpaint-texture-options",e.appendChild(n.getElement()),s.type="button",s.className="btn btn-light btn-sm",s.innerHTML="Customize",t=function(){var t=document.createElement("div");t.className="chickenpaint-texture-controls",a.id="chickenpaint-chk-texture-invert",a.type="checkbox",a.addEventListener("click",function(t){g=this.checked,x()}),t.appendChild(B(a,"Inverse")),i.id="chickenpaint-chk-texture-mirror",i.type="checkbox",i.addEventListener("click",function(t){m=this.checked,x()}),t.appendChild(B(i,"Mirror")),o.title=function(t){return"Brightness: "+(t-100)+"%"},o.on("valueChange",function(t){v=(t-100)/100,x()}),t.appendChild(o.getElement()),r.title=function(t){return"Contrast: "+(t-100)+"%"},r.on("valueChange",function(t){y=(t-100)/100,x()}),t.appendChild(r.getElement());var e=document.createElement("button"),n=document.createElement("button");return e.innerHTML="Ok",e.className="btn btn-primary btn-sm",e.type="button",e.addEventListener("click",function(t){(0,O.default)(s).popover("hide")}),t.appendChild(e),t.appendChild(document.createTextNode(" ")),n.innerHTML="Reset",n.className="btn btn-secondary btn-sm",n.type="button",n.addEventListener("click",function(t){y=v=0,g=m=!1,l(),x()}),t.appendChild(n),l(),t}(),(0,O.default)(s).popover({html:!0,content:function(){return t},trigger:"manual",container:b}).on("click",function(){(0,O.default)(this).popover("toggle")}),e.appendChild(s),this.updateTexture()},b.appendChild(n.getElement()),_.className="chickenpaint-texture-swatches",b.appendChild(_),w((t=[null],(i=new L.default(2,2,8)).data[0]=255,i.data[3]=255,t.push(i),t.push(E(2)),t.push(E(3)),t.push(E(4)),t.push(E(6)),t.push(E(8)),t.push(k(1,2)),t.push(k(2,4)),t.push(P(1,2)),t.push(P(2,4)),t.push(T(2)),t.push(T(4)),t.push(T(8)),t.push(T(16)),t)),o=e.getResourcesRoot()+"gfx/textures32.png",s=r=32,l=2,d=function(t){w(t)},c=new Image,f=[],c.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=c.width,t.height=c.height;for(var n=0;n<l;n++){e.drawImage(c,0,n*s,r,s,0,0,r,s);try{for(var a=e.getImageData(0,0,r,s),i=new L.default(r,s,8),o=0;o<r*s;o++)i.data[o]=a.data[4*o];f.push(i)}catch(t){console.log(t)}}d(f)},c.src=o}(i.prototype=Object.create(A.default.prototype)).constructor=i,e.exports=n.default},{"../engine/CPGreyBmp":14,"../engine/CPLookUpTable":18,"./CPPalette":39,"./CPSlider":44,jquery:187,"wolfy87-eventemitter":206}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var s=a(t("jquery")),l=a(t("../../lib/keymaster")),u=a(t("./CPPalette")),d=a(t("../ChickenPaint"));function a(t){return t&&t.__esModule?t:{default:t}}function i(n){u.default.call(this,n,"tool","Tools");var a=this,i=[{className:"chickenpaint-tool-rect-selection",command:"CPRectSelection",toolTip:"Marquee",shortcut:"m",mode:d.default.M_RECT_SELECTION},{className:"chickenpaint-tool-move",command:"CPMoveTool",toolTip:"Move tool",shortcut:"v",mode:d.default.M_MOVE_TOOL},{className:"chickenpaint-tool-flood-fill",command:"CPFloodFill",toolTip:"Flood fill",shortcut:"f",mode:d.default.M_FLOODFILL},{className:"chickenpaint-tool-gradient-fill",command:"CPGradientFill",toolTip:"Gradient fill",shortcut:"g",mode:d.default.M_GRADIENTFILL},{className:"chickenpaint-tool-color-picker",command:"CPColorPicker",toolTip:"Color picker",shortcut:"i",mode:d.default.M_COLOR_PICKER},{className:"chickenpaint-tool-rotate-canvas",command:"CPRotateCanvas",commandDoubleClick:"CPResetCanvasRotation",toolTip:"Rotate canvas",mode:d.default.M_ROTATE_CANVAS},{className:"chickenpaint-tool-pencil",command:"CPPencil",toolTip:"Pencil",mode:d.default.M_DRAW,tool:d.default.T_PENCIL},{className:"chickenpaint-tool-pen",command:"CPPen",toolTip:"Pen",selected:!0,mode:d.default.M_DRAW,tool:d.default.T_PEN},{className:"chickenpaint-tool-airbrush",command:"CPAirbrush",toolTip:"Airbrush",mode:d.default.M_DRAW,tool:d.default.T_AIRBRUSH},{className:"chickenpaint-tool-water",command:"CPWater",toolTip:"Waterpaint",mode:d.default.M_DRAW,tool:d.default.T_WATER},{className:"chickenpaint-tool-eraser",command:"CPEraser",toolTip:"Eraser",shortcut:"e",mode:d.default.M_DRAW,tool:d.default.T_ERASER},{className:"chickenpaint-tool-soft-eraser",command:"CPSoftEraser",toolTip:"Soft eraser",mode:d.default.M_DRAW,tool:d.default.T_SOFTERASER},{className:"chickenpaint-tool-smudge",command:"CPSmudge",toolTip:"Smudge",mode:d.default.M_DRAW,tool:d.default.T_SMUDGE},{className:"chickenpaint-tool-blender",command:"CPBlender",toolTip:"Blender",mode:d.default.M_DRAW,tool:d.default.T_BLENDER},{className:"chickenpaint-tool-dodge",command:"CPDodge",toolTip:"Dodge",shortcut:"o",mode:d.default.M_DRAW,tool:d.default.T_DODGE},{className:"chickenpaint-tool-burn",command:"CPBurn",toolTip:"Burn",shortcut:"p",mode:d.default.M_DRAW,tool:d.default.T_BURN},{className:"chickenpaint-tool-blur",command:"CPBlur",toolTip:"Blur",mode:d.default.M_DRAW,tool:d.default.T_BLUR}],o=document.createElement("ul");function r(t){if("LI"==this.nodeName){var e=i[parseInt(this.getAttribute("data-buttonIndex"),10)];n.actionPerformed({action:e.command})}}n.on("modeChange",function(t){var e=a.getBodyElement();(0,s.default)("li",e).removeClass("selected"),t==d.default.M_DRAW?(0,s.default)("li[data-tool="+n.getCurTool()+"]",e).addClass("selected"):(0,s.default)("li[data-mode="+t+"]",e).addClass("selected")}),n.on("toolChange",function(t){var e=a.getBodyElement();n.getCurMode()==d.default.M_DRAW&&((0,s.default)("li",e).removeClass("selected"),(0,s.default)("li[data-tool="+t+"]",e).addClass("selected"))}),function(){var t=a.getBodyElement();for(var e in o.className="chickenpaint-tools list-unstyled",i)!function(t){var e=i[t],n=document.createElement("li"),a=document.createElement("div");n.className="chickenpaint-toolbar-button "+e.className,n.setAttribute("data-buttonIndex",t),n.setAttribute("data-mode",e.mode),void 0!==e.tool&&n.setAttribute("data-tool",e.tool),n.title=e.toolTip,e.shortcut&&(n.title+=" ("+e.shortcut.toUpperCase()+")",(0,l.default)(e.shortcut,function(){return r.call(n),!1})),e.selected&&(n.className=n.className+" selected"),a.className="chickenpaint-toolbar-button-icon",n.appendChild(a),o.appendChild(n)}(e);(0,s.default)(o).on("click","li",r).on("dblclick","li",function(t){var e=i[parseInt(this.getAttribute("data-buttonIndex"),10)];e.commandDoubleClick&&n.actionPerformed({action:e.commandDoubleClick})}),t.appendChild(o)}()}(i.prototype=Object.create(u.default.prototype)).constructor=i,e.exports=n.default},{"../../lib/keymaster":64,"../ChickenPaint":1,"./CPPalette":39,jquery:187}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var a,l=(a=t("./ArrayDataStream"))&&a.__esModule?a:{default:a};function i(){}i.prototype.read=function(t){if(null==t)return null;var e,n=new l.default(new Uint8Array(t)),a=[];if(1!=n.readU16BE())return null;e=n.readU16BE();for(var i=0;i<e;i++){if(0==n.readU16BE()){var o=255*n.readU16BE()/65535,r=255*n.readU16BE()/65535,s=255*n.readU16BE()/65535;n.readU16BE(),a.push(o<<16|r<<8|s)}}return a},i.prototype.write=function(t){var e=new Uint8Array(4+10*t.length),n=new l.default(e);n.writeU16BE(1),n.writeU16BE(t.length);for(var a=0;a<t.length;a++){var i=t[a];n.writeU16BE(0),n.writeU16BE(257*(i>>16&255)),n.writeU16BE(257*(i>>8&255)),n.writeU16BE(257*(255&i)),n.writeU16BE(0)}return n.getAsDataArray()},e.exports=n.default},{"./ArrayDataStream":52}],52:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=a;function a(t,e,n){this.data=t,this.eof=!1,this.start=void 0===e?0:e,this.end=void 0===n?t.length:n,this.pos=this.start}a.prototype.readChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos++]):(this.eof=!0,-1)},a.prototype.readU8=a.prototype.readByte=function(){return this.pos<this.end?this.data[this.pos++]:(this.eof=!0,-1)},a.prototype.readS8=function(){return 128&(t=this.readByte())?4294967040|t:t;var t},a.prototype.unreadChar=function(t){this.pos--},a.prototype.peekChar=function(){return this.pos<this.end?String.fromCharCode(this.data[this.pos]):(this.eof=!0,-1)},a.prototype.readString=function(t){var e,n=new Array(t);for(e=0;e<t;e++)n[e]=this.readChar();return n.join("")},a.prototype.readS16=function(){var t,e=this.readByte(),n=this.readByte();return 32768&(t=e<<8|n)?4294901760|t:t},a.prototype.readU16BE=function(){return this.readByte()<<8|this.readByte()},a.prototype.readU16LE=function(){var t=this.readByte();return this.readByte()<<8|t},a.prototype.readU32BE=function(){return(this.readByte()<<24|this.readByte()<<16|this.readByte()<<8|this.readByte())>>>0},a.prototype.readU32LE=function(){var t=this.readByte(),e=this.readByte(),n=this.readByte();return(this.readByte()<<24|n<<16|e<<8|t)>>>0},a.prototype.readBytes=function(t){var e=this.data.subarray(this.pos,this.pos+t);return this.pos+=t,this.pos>this.end&&(this.eof=!0),e},a.prototype.skip=function(t){this.pos+=t,this.pos>this.end&&(this.eof=!0)},a.prototype.seek=function(t){this.pos=t},a.prototype.writeBytes=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t[e]},a.prototype.writeU8=a.prototype.writeByte=function(t){this.data[this.pos++]=t},a.prototype.writeU16LE=function(t){this.data[this.pos++]=t,this.data[this.pos++]=t>>8},a.prototype.writeU16BE=function(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t},a.prototype.writeU32BE=function(t){this.data[this.pos++]=t>>24,this.data[this.pos++]=t>>16,this.data[this.pos++]=t>>8,this.data[this.pos++]=t},a.prototype.writeU32LE=function(t){this.data[this.pos++]=t,this.data[this.pos++]=t>>8,this.data[this.pos++]=t>>16,this.data[this.pos++]=t>>24},a.prototype.writeDoubleBE=function(t){for(var e=new Uint8Array(new Float64Array([t]).buffer),n=e.length-1;0<=n;n--)this.writeByte(e[n])},a.prototype.writeFloatBE=function(t){for(var e=new Uint8Array(new Float32Array([t]).buffer),n=e.length-1;0<=n;n--)this.writeByte(e[n])},a.prototype.writeString=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t.charCodeAt(e)},a.prototype.writeUnsignedIntBE=function(t,e){switch(void 0===e&&(e=this.measureUnsignedInt(t)),e){case 5:this.writeU8(Math.floor(t/4294967296));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw"Bad UINT size "+e}},a.prototype.measureUnsignedInt=function(t){return t<256?1:t<65536?2:t<1<<24?3:t<4294967296?4:5},a.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayDataStream's pos lies beyond end of buffer"},a.prototype.EOF=-1,e.exports=n.default},{}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var p,m,g,v,y,_,b,w,E=this;this.x0=this.y0=this.x1=this.y1=this.x2=this.y2=this.x3=this.y3=0;this.compute=function(t,e,n){var a,i,o,r,s,l,u,d,c,f;s=2*(o=(i=3*(a=1/n))*a),l=6*(r=a*a*a),u=E.x0-2*E.x1+E.x2,d=E.y0-2*E.y1+E.y2,c=3*(E.x1-E.x2)-E.x0+E.x3,f=3*(E.y1-E.y2)-E.y0+E.y3,p=E.x0,y=E.y0,m=(E.x1-E.x0)*i+u*o+c*r,_=(E.y1-E.y0)*i+d*o+f*r,g=u*s+c*l,b=d*s+f*l,v=c*l,w=f*l,t[0]=p,e[0]=y;for(var h=1;h<n;h++)p+=m,y+=_,m+=g,_+=b,g+=v,b+=w,t[h]=p,e[h]=y}},e.exports=n.default},{}],54:[function(t,e,n){"use strict";function a(t){if(0==t.saturation)return t.value<<16|t.value<<8|t.value;var e=t.hue/60;e-=Math.floor(e);var n=t.saturation/255,a=~~(t.value*(1-n)),i=~~(t.value*(1-n*e)),o=~~(t.value*(1-n*(1-e)));switch(~~(t.hue/60)){case 0:return t.value<<16|o<<8|a;case 1:return i<<16|t.value<<8|a;case 2:return a<<16|t.value<<8|o;case 3:return a<<16|i<<8|t.value;case 4:return o<<16|a<<8|t.value;case 5:return t.value<<16|a<<8|i;default:return 0}}function i(t){this.rgb=0,this.hue=0,this.saturation=0,this.value=0,this.setRgb(t||0)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype.getRgb=function(){return this.rgb},i.prototype.getSaturation=function(){return this.saturation},i.prototype.getHue=function(){return this.hue},i.prototype.getValue=function(){return this.value},i.prototype.setRgbComponents=function(t,e,n){this.setRgb(t<<16|e<<8|n)},i.prototype.setRgb=function(t){!function(t,e){var n=t>>16&255,a=t>>8&255,i=255&t;e.value=Math.max(n,Math.max(a,i));var o=Math.min(n,Math.min(a,i));if(0==e.value?e.saturation=0:e.saturation=~~((e.value-o)/e.value*255),0==e.saturation)e.hue=0;else{var r=(e.value-n)/(e.value-o),s=(e.value-a)/(e.value-o),l=(e.value-i)/(e.value-o),u=0;e.value==n&&(u=l-s),e.value==a&&(u=2+r-l),e.value==i&&(u=4+s-r),(u*=60)<0&&(u+=360),e.hue=~~u}}(this.rgb=t,this)},i.prototype.setHsv=function(t,e,n){this.hue=t,this.saturation=e,this.value=n,this.rgb=a(this)},i.prototype.setHue=function(t){this.hue=t,this.rgb=a(this)},i.prototype.setSaturation=function(t){this.saturation=t,this.rgb=a(this)},i.prototype.setValue=function(t){this.value=t,this.rgb=a(this)},i.prototype.setGreyscale=function(t){this.rgb=i.greyToRGB(t),this.hue=0,this.saturation=0,this.value=t},i.prototype.clone=function(){var t=new i(0);return t.copyFrom(this),t},i.prototype.copyFrom=function(t){this.rgb=t.rgb,this.hue=t.hue,this.saturation=t.saturation,this.value=t.value},i.prototype.isEqual=function(t){return this.rgb==t.rgb&&this.hue==t.hue&&this.saturation==t.saturation&&this.value==t.value},i.greyToRGB=function(t){return t|t<<8|t<<16},e.exports=n.default},{}],55:[function(t,e,n){"use strict";function a(t,e,n){this.r=t,this.g=e,this.b=n}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).prototype.toInt=function(){return Math.max(0,Math.min(255,Math.round(255*this.r)))<<16|Math.max(0,Math.min(255,Math.round(255*this.g)))<<8|Math.max(0,Math.min(255,Math.round(255*this.b)))},a.prototype.mixWith=function(t,e){this.r=this.r*(1-e)+t.r*e,this.g=this.g*(1-e)+t.g*e,this.b=this.b*(1-e)+t.b*e},a.prototype.clone=function(){return new a(this.r,this.g,this.b)},a.createFromInt=function(t){return new a((t>>>16&255)/255,(t>>>8&255)/255,(255&t)/255)},e.exports=n.default},{}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isCanvasInterpolationSupported=function(){return!!i((0,a.createCanvas)(0,0).getContext("2d"))},n.setCanvasInterpolation=function(t,e){var n=i(t);n&&(t[n]=e)},n.isEventSupported=function(t){var e=t in window;if(!e){var n=document.createElement("div");n.setAttribute(t,"return;"),e="function"==typeof n[t]}return e},n.isCanvasSupported=function(){var t=(0,a.createCanvas)(0,0);return!(!t.getContext||!t.getContext("2d"))},n.isFlexboxSupported=function(){return("string"==typeof document.body.style.flexBasis||"string"==typeof document.body.style.msFlexDirection)&&!/Presto/.test(navigator.userAgent)};var a=t("./Canvas");function i(t){for(var e=["imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled"],n=0;n<e.length;n++)if(e[n]in t)return e[n];return null}},{"./Canvas":2}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var a;(a=t("./CPTransform"))&&a.__esModule;function i(t){this.points=t||[]}i.prototype.clone=function(){for(var t=new i(new Array(this.points.length)),e=0;e<this.points.length;e++)t.points[e]={x:this.points[e].x,y:this.points[e].y};return t},i.prototype.getTransformed=function(t){for(var e=new i(new Array(this.points.length)),n=0;n<this.points.length;n++)e.points[n]=t.getTransformedPoint(this.points[n]);return e},i.prototype.getCenter=function(){for(var t=this.points[0].x,e=this.points[0].y,n=1;n<this.points.length;n++)t+=this.points[n].x,e+=this.points[n].y;return{x:t/this.points.length,y:e/this.points.length}},i.prototype.containsPoint=function(t){var e,n,a=!1;for(e=0,n=this.points.length-1;e<this.points.length;n=e++)this.points[e].y>t.y!=this.points[n].y>t.y&&t.x<(this.points[n].x-this.points[e].x)*(t.y-this.points[e].y)/(this.points[n].y-this.points[e].y)+this.points[e].x&&(a=!a);return a},e.exports=n.default},{"./CPTransform":60}],58:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var i,o=!1;this.nextGaussian=function(){if(o)return o=!1,i;for(var t,e,n;t=2*Math.random()-1,e=2*Math.random()-1,1<=(n=t*t+e*e)||0==n;);var a=Math.sqrt(-2*Math.log(n)/n);return i=e*a,o=!0,t*a}},e.exports=n.default},{}],59:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,a){this.left=t,this.top=e,this.right=n,this.bottom=a}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=c).prototype.makeEmpty=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},c.prototype.union=function(t){this.isEmpty()?this.set(t):t.isEmpty()||(this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.right=Math.max(this.right,t.right),this.bottom=Math.max(this.bottom,t.bottom))},c.prototype.getUnion=function(t){var e=this.clone();return e.union(t),e},c.prototype.getIntersection=function(t){return new c(Math.max(this.left,t.left),Math.max(this.top,t.top),Math.min(this.right,t.right),Math.min(this.bottom,t.bottom))},c.prototype.clipTo=function(t){return this.isEmpty()||(t.isEmpty()?this.makeEmpty():(this.left=Math.min(Math.max(this.left,t.left),t.right),this.top=Math.min(Math.max(this.top,t.top),t.bottom),this.right=Math.max(Math.min(this.right,t.right),t.left),this.bottom=Math.max(Math.min(this.bottom,t.bottom),t.top))),this},c.prototype.containsPoint=function(t){return!(t.x<this.left||t.y<this.top||t.x>=this.right||t.y>=this.bottom)},c.prototype.isInside=function(t){return this.left>=t.left&&this.top>=t.top&&this.right<=t.right&&this.bottom<=t.bottom},c.prototype.clipSourceDest=function(t,e){e.right=e.left+t.getWidth(),e.bottom=e.top+t.getHeight(),this.isEmpty()||e.left>=this.right||e.top>=this.bottom||e.right<=this.left||e.bottom<=this.top?(t.makeEmpty(),e.makeEmpty()):(e.right>this.right&&(t.right-=e.right-this.right,e.right=this.right),e.bottom>this.bottom&&(t.bottom-=e.bottom-this.bottom,e.bottom=this.bottom),e.left<this.left&&(t.left+=this.left-e.left,e.left=this.left),e.top<this.top&&(t.top+=this.top-e.top,e.top=this.top))},c.prototype.getWidth=function(){return this.right-this.left},c.prototype.getHeight=function(){return this.bottom-this.top},c.prototype.getArea=function(){return this.getWidth()*this.getHeight()},c.prototype.isEmpty=function(){return this.right<=this.left||this.bottom<=this.top},c.prototype.set=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},c.prototype.clone=function(){return new c(this.left,this.top,this.right,this.bottom)},c.prototype.translate=function(t,e){return this.left+=t,this.right+=t,this.top+=e,this.bottom+=e,this},c.prototype.getTranslated=function(t,e){var n=this.clone();return n.translate(t,e),n},c.prototype.moveTo=function(t,e){this.translate(t-this.left,e-this.top)},c.prototype.equals=function(t){return this.left==t.left&&this.right==t.right&&this.top==t.top&&this.bottom==t.bottom},c.prototype.grow=function(t,e){this.left-=t,this.right+=t,this.top-=e,this.bottom+=e},c.prototype.toString=function(){return"("+this.left+","+this.top+","+this.right+","+this.bottom+")"},c.prototype.toPoints=function(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.right,y:this.bottom},{x:this.left,y:this.bottom}]},c.prototype.roundNearest=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this},c.prototype.roundContain=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this},c.createBoundingBox=function(t){if(0===t.length)return new c(0,0,0,0);for(var e=new c(t[0].x,t[0].y,t[0].x,t[0].y),n=1;n<t.length;n++)e.left=Math.min(e.left,t[n].x),e.top=Math.min(e.top,t[n].y),e.right=Math.max(e.right,t[n].x),e.bottom=Math.max(e.bottom,t[n].y);return e},c.prototype.subtract=function(t){return c.subtract(this,t)},c.subtract=function(t,e){t instanceof c&&(t=[t]),e instanceof c&&(e=[e]);for(var n=t.slice(0),a=0;a<e.length;a++)for(var i=e[a],o=n.length,r=0;r<o;r++){var s=n[r];if(s){var l=s.getIntersection(i);if(!l.isEmpty()){var u=[];if(s.top<i.top&&u.push(new c(s.left,s.top,s.right,l.top)),s.bottom>i.bottom&&u.push(new c(s.left,l.bottom,s.right,s.bottom)),s.left<i.left&&u.push(new c(s.left,l.top,l.left,l.bottom)),s.right>i.right&&u.push(new c(l.right,l.top,s.right,l.bottom)),0<(u=u.filter(function(t){return!t.isEmpty()})).length){n[r]=u[0];for(var d=1;d<u.length;d++)n.push(u[d])}else n[r]=null}}}return n.filter(function(t){return null!=t})},c.union=function(t){var e;if(t instanceof c)e=[t];else{e=t.slice(0);for(var n=0;n<e.length;n++){var a=e[n],i=e.length;if(a)for(var o=n+1;o<i;o++){var r=e[o];if(r)if(!a.getIntersection(r).isEmpty()){var s=c.subtract(r,a);e[o]=s[0];for(var l=1;l<s.length;l++)e.push(s[l])}}}}return e.filter(function(t){return t&&!t.isEmpty()})},"object"==("undefined"==typeof window?"undefined":a(window))&&(window.cpRectGarbage=new c(1.5,2.5,3.5,4.5)),e.exports=n.default},{}],60:[function(t,e,n){"use strict";function a(){this.setToIdentity()}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).prototype.setToIdentity=function(){this.m=[1,0,0,1,0,0]},a.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],r=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=r},a.prototype.preMultiply=function(t){var e=t.m[0]*this.m[0]+t.m[2]*this.m[1],n=t.m[1]*this.m[0]+t.m[3]*this.m[1],a=t.m[0]*this.m[2]+t.m[2]*this.m[3],i=t.m[1]*this.m[2]+t.m[3]*this.m[3],o=t.m[0]*this.m[4]+t.m[2]*this.m[5]+t.m[4],r=t.m[1]*this.m[4]+t.m[3]*this.m[5]+t.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=r},a.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,a=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),r=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=r},a.prototype.getInverted=function(){var t=new a;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t.invert(),t},a.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),a=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,r=this.m[1]*-n+this.m[3]*e;this.m[0]=a,this.m[1]=i,this.m[2]=o,this.m[3]=r},a.prototype.rotateAroundPoint=function(t,e,n){this.translate(e,n),this.rotate(t),this.translate(-e,-n)},a.prototype.translate=function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},a.prototype.scale=function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},a.prototype.scaleAroundPoint=function(t,e,n,a){this.translate(n,a),this.scale(t,e),this.translate(-n,-a)},a.prototype.shear=function(t,e){var n=this.m[0]+this.m[2]*e,a=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;this.m[0]=n,this.m[1]=a,this.m[2]=i,this.m[3]=o},a.prototype.getTransformedPoint=function(t){return{x:t.x*this.m[0]+t.y*this.m[2]+this.m[4],y:t.x*this.m[1]+t.y*this.m[3]+this.m[5]}},a.prototype.transformPoints=function(t){for(var e=0;e<t.length;e++)t[e]=this.getTransformedPoint(t[e])},a.prototype.getTranslateX=function(){return this.m[4]},a.prototype.getTranslateY=function(){return this.m[5]},a.prototype.clone=function(){var t=new a;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t},a.prototype.getDeterminant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},a.prototype.decompose=function(){var t=this.getDeterminant(),e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return{translate:{x:this.m[4],y:this.m[5]},rotate:Math.sign(this.m[1])*Math.acos(this.m[0]/e),scale:{x:e,y:t/e},shear:{x:Math.atan((this.m[0]*this.m[2]+this.m[1]*this.m[3])/(e*e)),y:0}}},a.prototype.toString=function(){return"["+this.m[0].toFixed(2)+" "+this.m[2].toFixed(2)+" "+this.m[4].toFixed(2)+"]\n["+this.m[1].toFixed(2)+" "+this.m[3].toFixed(2)+" "+this.m[5].toFixed(2)+"]\n[0.00 0.00 1.00]"},Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1},e.exports=n.default},{}],61:[function(t,e,n){"use strict";function a(t,e){this.x=t,this.y=e}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.normalize=function(){var t=this.getLength();return this.x/=t,this.y/=t,this},a.prototype.getDotProduct=function(t){return this.x*t.x+this.y*t.y},a.prototype.scale=function(t){return this.x*=t,this.y*=t,this},a.prototype.getScaled=function(t){var e=new a(this.x,this.y);return e.scale(t),e},a.prototype.getRounded=function(){return new a(Math.round(this.x),Math.round(this.y))},a.prototype.getTruncated=function(){return new a(~~this.x,~~this.y)},a.prototype.getPerpendicular=function(){return new a(-this.y,this.x)},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},a.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},a.prototype.getSum=function(t){return new a(this.x+t.x,this.y+t.y)},a.subtractPoints=function(t,e){return new a(t.x-e.x,t.y-e.y)},e.exports=n.default},{}],62:[function(t,e,n){"use strict";function a(){var e,n=null,a=this;this.isPen=function(){var t;return!!n&&(1==(t=n.pointerType)||3==t)},this.getPressure=function(){return n?n.pressure:1},this.pluginLoaded=function(){console.log("Wacom tablet support loaded!"),n=e.penAPI},this.isTabletPresent=function(){return!!n},this.detectTablet=function(){if(!/Chrome/i.test(navigator.userAgent)||/OPR/.test(navigator.userAgent)){if(console.log("Attempting to load Wacom tablet support..."),"classid"in(e=document.createElement("object")))e.classid="CLSID:092dfa86-5807-5a94-bf3b-5a53ba9e5308";else{var t=document.createElement("param");t.name="onload",t.value="onWacomPluginLoaded",e.appendChild(t),e.type="application/x-wacomtabletplugin"}e.style.position="absolute",e.style.visibility="hidden",e.onload="onWacomPluginLoaded",document.body.appendChild(e),setTimeout(function(){a.isTabletPresent()||console.log("Looks like the Wacom plugin isn't installed, or failed to load.")},5e3)}else console.log("Not attempting to load Wacom tablet plugin, since this is Chrome")}}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=a).getRef=function(){return null==a.instance&&(a.instance=new a),a.instance},window.onWacomPluginLoaded=function(){a.getRef().pluginLoaded()},e.exports=n.default},{}],63:[function(t,e,n){"use strict";function a(i,o,r,s){var l,u=0;return"boolean"!=typeof o&&(s=r,r=o,o=void 0),function(){var t=this,e=+new Date-u,n=arguments;function a(){u=+new Date,r.apply(t,n)}s&&!l&&a(),l&&clearTimeout(l),void 0===s&&i<e?a():!0!==o&&(l=setTimeout(s?function(){l=void 0}:a,void 0===s?i-e:i))}}Object.defineProperty(n,"__esModule",{value:!0}),n.throttle=a,n.debounce=function(t,e,n){return void 0===n?a(t,e,!1):a(t,n,!1!==e)}},{}],64:[function(t,b,e){"use strict";!function(e){var s,l={},u={16:!1,18:!1,17:!1,91:!1},n="all",d={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":function(){return"firefox"==t()?173:189},"=":function(){return"firefox"==t()?61:187},";":186,"'":222,"[":219,"]":221,"\\":220},c=function(t){var e=a[t]||t.toUpperCase().charCodeAt(0);return"function"==typeof e?e():e},f=[];for(s=1;s<20;s++)a["f"+s]=111+s;function h(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function p(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function t(){if(0<navigator.userAgent.toLowerCase().indexOf("firefox"))return"firefox"}var m={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function i(t){var e,n,a,i,o,r;if(e=t.keyCode,-1==h(f,e)&&f.push(e),93!=e&&224!=e||(e=91),e in u)for(a in u[e]=!0,d)d[a]==e&&(g[a]=!0);else if(function(t){for(s in u)u[s]=t[m[s]]}(t),g.filter.call(this,t)&&e in l)for(r=v(),i=0;i<l[e].length;i++)if((n=l[e][i]).scope==r||"all"==n.scope){for(a in o=0<n.mods.length,u)(!u[a]&&-1<h(n.mods,+a)||u[a]&&-1==h(n.mods,+a))&&(o=!1);(0!=n.mods.length||u[16]||u[18]||u[17]||u[91])&&!o||!1===n.method(t,n)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function g(t,e,n){var a,i;a=y(t),void 0===n&&(n=e,e="all");for(var o=0;o<a.length;o++)i=[],1<(t=a[o].split("+")).length&&(i=_(t),t=[t[t.length-1]]),t=t[0],(t=c(t))in l||(l[t]=[]),l[t].push({shortcut:a[o],scope:e,method:n,key:a[o],mods:i})}for(s in d)g[s]=!1;function v(){return n||"all"}function y(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function _(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=d[e[n]];return e}function o(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}o(document,"keydown",function(t){i(t)}),o(document,"keyup",function(t){var e,n=t.keyCode,a=h(f,n);if(0<=a&&f.splice(a,1),93!=n&&224!=n||(n=91),n in u)for(e in u[n]=!1,d)d[e]==n&&(g[e]=!1)}),o(window,"focus",function(){for(s in u)u[s]=!1;for(s in d)g[s]=!1});var r=e.key;e.key=g,e.key.setScope=function(t){n=t||"all"},e.key.getScope=v,e.key.deleteScope=function(t){var e,n,a;for(e in l)for(n=l[e],a=0;a<n.length;)n[a].scope===t?n.splice(a,1):a++},e.key.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},e.key.isPressed=function(t){return"string"==typeof t&&(t=c(t)),-1!=h(f,t)},e.key.getPressedKeyCodes=function(){return f.slice(0)},e.key.noConflict=function(){var t=e.key;return e.key=r,t},e.key.unbind=function(t,e){var n,a,i,o,r,s=[];for(n=y(t),o=0;o<n.length;o++){if(1<(a=n[o].split("+")).length&&(s=_(a)),t=a[a.length-1],t=c(t),void 0===e&&(e=v()),!l[t])return;for(i=0;i<l[t].length;i++)(r=l[t][i]).scope===e&&p(r.mods,s)&&(l[t][i]={})}},void 0!==b&&(b.exports=g)}({})},{}],65:[function(t,e,n){"use strict";!function(){for(var o=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),a=Math.max(0,16-(n-o)),i=window.setTimeout(function(){t(n+a)},a);return o=n+a,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},{}],66:[function(t,e,n){var a,i;a=this,i=function(t,e,n){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=a(e),c=a(n);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var o="transitionend";function s(t){var e=this,n=!1;return h.default(this).one(p.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||p.triggerTransitionEnd(e)},t),this}var p={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=h.default(t).css("transition-duration"),n=h.default(t).css("transition-delay"),a=parseFloat(e),i=parseFloat(n);return a||i?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){h.default(t).trigger(o)},supportsTransitionEnd:function(){return Boolean(o)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var i=n[a],o=e[a],r=o&&p.isElement(o)?"element":null==(s=o)?""+s:{}.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(r))throw new Error(t.toUpperCase()+': Option "'+a+'" provided type "'+r+'" but expected type "'+i+'".')}var s},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?p.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null},jQueryDetection:function(){if(void 0===h.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=h.default.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};p.jQueryDetection(),h.default.fn.emulateTransitionEnd=s,h.default.event.special[p.TRANSITION_END]={bindType:o,delegateType:o,handle:function(t){if(h.default(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var u="alert",d="bs.alert",f=h.default.fn[u],m=function(){function a(t){this._element=t}var t=a.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){h.default.removeData(this._element,d),this._element=null},t._getRootElement=function(t){var e=p.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n||(n=h.default(t).closest(".alert")[0]),n},t._triggerCloseEvent=function(t){var e=h.default.Event("close.bs.alert");return h.default(t).trigger(e),e},t._removeElement=function(e){var n=this;if(h.default(e).removeClass("show"),h.default(e).hasClass("fade")){var t=p.getTransitionDurationFromElement(e);h.default(e).one(p.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){h.default(t).detach().trigger("closed.bs.alert").remove()},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this),e=t.data(d);e||(e=new a(this),t.data(d,e)),"close"===n&&e[n](this)})},a._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},r(a,null,[{key:"VERSION",get:function(){return"4.6.0"}}]),a}();h.default(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',m._handleDismiss(new m)),h.default.fn[u]=m._jQueryInterface,h.default.fn[u].Constructor=m,h.default.fn[u].noConflict=function(){return h.default.fn[u]=f,m._jQueryInterface};var g="button",v="bs.button",y=h.default.fn[g],_="active",b='[data-toggle^="button"]',w='input:not([type="hidden"])',E=function(){function i(t){this._element=t,this.shouldAvoidTriggerChange=!1}var t=i.prototype;return t.toggle=function(){var t=!0,e=!0,n=h.default(this._element).closest('[data-toggle="buttons"]')[0];if(n){var a=this._element.querySelector(w);if(a){if("radio"===a.type)if(a.checked&&this._element.classList.contains(_))t=!1;else{var i=n.querySelector(".active");i&&h.default(i).removeClass(_)}t&&("checkbox"!==a.type&&"radio"!==a.type||(a.checked=!this._element.classList.contains(_)),this.shouldAvoidTriggerChange||h.default(a).trigger("change")),a.focus(),e=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(_)),t&&h.default(this._element).toggleClass(_))},t.dispose=function(){h.default.removeData(this._element,v),this._element=null},i._jQueryInterface=function(n,a){return this.each(function(){var t=h.default(this),e=t.data(v);e||(e=new i(this),t.data(v,e)),e.shouldAvoidTriggerChange=a,"toggle"===n&&e[n]()})},r(i,null,[{key:"VERSION",get:function(){return"4.6.0"}}]),i}();h.default(document).on("click.bs.button.data-api",b,function(t){var e=t.target,n=e;if(h.default(e).hasClass("btn")||(e=h.default(e).closest(".btn")[0]),!e||e.hasAttribute("disabled")||e.classList.contains("disabled"))t.preventDefault();else{var a=e.querySelector(w);if(a&&(a.hasAttribute("disabled")||a.classList.contains("disabled")))return void t.preventDefault();"INPUT"!==n.tagName&&"LABEL"===e.tagName||E._jQueryInterface.call(h.default(e),"toggle","INPUT"===n.tagName)}}).on("focus.bs.button.data-api blur.bs.button.data-api",b,function(t){var e=h.default(t.target).closest(".btn")[0];h.default(e).toggleClass("focus",/^focus(in)?$/.test(t.type))}),h.default(window).on("load.bs.button.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),e=0,n=t.length;e<n;e++){var a=t[e],i=a.querySelector(w);i.checked||i.hasAttribute("checked")?a.classList.add(_):a.classList.remove(_)}for(var o=0,r=(t=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;o<r;o++){var s=t[o];"true"===s.getAttribute("aria-pressed")?s.classList.add(_):s.classList.remove(_)}}),h.default.fn[g]=E._jQueryInterface,h.default.fn[g].Constructor=E,h.default.fn[g].noConflict=function(){return h.default.fn[g]=y,E._jQueryInterface};var T="carousel",k="bs.carousel",P="."+k,x=h.default.fn[T],C={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},O={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},S="next",L="prev",M="slid"+P,A="active",R=".active.carousel-item",B={TOUCH:"touch",PEN:"pen"},I=function(){function o(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=o.prototype;return t.next=function(){this._isSliding||this._slide(S)},t.nextWhenVisible=function(){var t=h.default(this._element);!document.hidden&&t.is(":visible")&&"hidden"!==t.css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(L)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(p.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(R);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)h.default(this._element).one(M,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var a=n<t?S:L;this._slide(a,this._items[t])}},t.dispose=function(){h.default(this._element).off(P),h.default.removeData(this._element,k),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},C,t),p.typeCheckConfig(T,t,O),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;(this.touchDeltaX=0)<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&h.default(this._element).on("keydown.bs.carousel",function(t){return e._keydown(t)}),"hover"===this._config.pause&&h.default(this._element).on("mouseenter.bs.carousel",function(t){return e.pause(t)}).on("mouseleave.bs.carousel",function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var n=this;if(this._touchSupported){var e=function(t){n._pointerEvent&&B[t.originalEvent.pointerType.toUpperCase()]?n.touchStartX=t.originalEvent.clientX:n._pointerEvent||(n.touchStartX=t.originalEvent.touches[0].clientX)},a=function(t){n._pointerEvent&&B[t.originalEvent.pointerType.toUpperCase()]&&(n.touchDeltaX=t.originalEvent.clientX-n.touchStartX),n._handleSwipe(),"hover"===n._config.pause&&(n.pause(),n.touchTimeout&&clearTimeout(n.touchTimeout),n.touchTimeout=setTimeout(function(t){return n.cycle(t)},500+n._config.interval))};h.default(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",function(t){return t.preventDefault()}),this._pointerEvent?(h.default(this._element).on("pointerdown.bs.carousel",function(t){return e(t)}),h.default(this._element).on("pointerup.bs.carousel",function(t){return a(t)}),this._element.classList.add("pointer-event")):(h.default(this._element).on("touchstart.bs.carousel",function(t){return e(t)}),h.default(this._element).on("touchmove.bs.carousel",function(t){var e;(e=t).originalEvent.touches&&1<e.originalEvent.touches.length?n.touchDeltaX=0:n.touchDeltaX=e.originalEvent.touches[0].clientX-n.touchStartX}),h.default(this._element).on("touchend.bs.carousel",function(t){return a(t)}))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===S,a=t===L,i=this._getItemIndex(e),o=this._items.length-1;if((a&&0===i||n&&i===o)&&!this._config.wrap)return e;var r=(i+(t===L?-1:1))%this._items.length;return-1===r?this._items[this._items.length-1]:this._items[r]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),a=this._getItemIndex(this._element.querySelector(R)),i=h.default.Event("slide.bs.carousel",{relatedTarget:t,direction:e,from:a,to:n});return h.default(this._element).trigger(i),i},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));h.default(e).removeClass(A);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&h.default(n).addClass(A)}},t._updateInterval=function(){var t=this._activeElement||this._element.querySelector(R);if(t){var e=parseInt(t.getAttribute("data-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}},t._slide=function(t,e){var n,a,i,o=this,r=this._element.querySelector(R),s=this._getItemIndex(r),l=e||r&&this._getItemByDirection(t,r),u=this._getItemIndex(l),d=Boolean(this._interval);if(t===S?(n="carousel-item-left",a="carousel-item-next",i="left"):(n="carousel-item-right",a="carousel-item-prev",i="right"),l&&h.default(l).hasClass(A))this._isSliding=!1;else if(!this._triggerSlideEvent(l,i).isDefaultPrevented()&&r&&l){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(l),this._activeElement=l;var c=h.default.Event(M,{relatedTarget:l,direction:i,from:s,to:u});if(h.default(this._element).hasClass("slide")){h.default(l).addClass(a),p.reflow(l),h.default(r).addClass(n),h.default(l).addClass(n);var f=p.getTransitionDurationFromElement(r);h.default(r).one(p.TRANSITION_END,function(){h.default(l).removeClass(n+" "+a).addClass(A),h.default(r).removeClass(A+" "+a+" "+n),o._isSliding=!1,setTimeout(function(){return h.default(o._element).trigger(c)},0)}).emulateTransitionEnd(f)}else h.default(r).removeClass(A),h.default(l).addClass(A),this._isSliding=!1,h.default(this._element).trigger(c);d&&this.cycle()}},o._jQueryInterface=function(a){return this.each(function(){var t=h.default(this).data(k),e=l({},C,h.default(this).data());"object"==typeof a&&(e=l({},e,a));var n="string"==typeof a?a:e.slide;if(t||(t=new o(this,e),h.default(this).data(k,t)),"number"==typeof a)t.to(a);else if("string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())})},o._dataApiClickHandler=function(t){var e=p.getSelectorFromElement(this);if(e){var n=h.default(e)[0];if(n&&h.default(n).hasClass("carousel")){var a=l({},h.default(n).data(),h.default(this).data()),i=this.getAttribute("data-slide-to");i&&(a.interval=!1),o._jQueryInterface.call(h.default(n),a),i&&h.default(n).data(k).to(i),t.preventDefault()}}},r(o,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return C}}]),o}();h.default(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",I._dataApiClickHandler),h.default(window).on("load.bs.carousel.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),e=0,n=t.length;e<n;e++){var a=h.default(t[e]);I._jQueryInterface.call(a,a.data())}}),h.default.fn[T]=I._jQueryInterface,h.default.fn[T].Constructor=I,h.default.fn[T].noConflict=function(){return h.default.fn[T]=x,I._jQueryInterface};var F="collapse",N="bs.collapse",D=h.default.fn[F],j={toggle:!0,parent:""},H={toggle:"boolean",parent:"(string|element)"},W="show",U="collapse",Y="collapsing",q="collapsed",z='[data-toggle="collapse"]',G=function(){function s(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(z)),a=0,i=n.length;a<i;a++){var o=n[a],r=p.getSelectorFromElement(o),s=[].slice.call(document.querySelectorAll(r)).filter(function(t){return t===e});null!==r&&0<s.length&&(this._selector=r,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=s.prototype;return t.toggle=function(){h.default(this._element).hasClass(W)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!h.default(this._element).hasClass(W)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(U)})).length&&(t=null),!(t&&(e=h.default(t).not(this._selector).data(N))&&e._isTransitioning))){var a=h.default.Event("show.bs.collapse");if(h.default(this._element).trigger(a),!a.isDefaultPrevented()){t&&(s._jQueryInterface.call(h.default(t).not(this._selector),"hide"),e||h.default(t).data(N,null));var i=this._getDimension();h.default(this._element).removeClass(U).addClass(Y),this._element.style[i]=0,this._triggerArray.length&&h.default(this._triggerArray).removeClass(q).attr("aria-expanded",!0),this.setTransitioning(!0);var o="scroll"+(i[0].toUpperCase()+i.slice(1)),r=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,function(){h.default(n._element).removeClass(Y).addClass(U+" "+W),n._element.style[i]="",n.setTransitioning(!1),h.default(n._element).trigger("shown.bs.collapse")}).emulateTransitionEnd(r),this._element.style[i]=this._element[o]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&h.default(this._element).hasClass(W)){var e=h.default.Event("hide.bs.collapse");if(h.default(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",p.reflow(this._element),h.default(this._element).addClass(Y).removeClass(U+" "+W);var a=this._triggerArray.length;if(0<a)for(var i=0;i<a;i++){var o=this._triggerArray[i],r=p.getSelectorFromElement(o);if(null!==r)h.default([].slice.call(document.querySelectorAll(r))).hasClass(W)||h.default(o).addClass(q).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var s=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,function(){t.setTransitioning(!1),h.default(t._element).removeClass(Y).addClass(U).trigger("hidden.bs.collapse")}).emulateTransitionEnd(s)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){h.default.removeData(this._element,N),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},j,t)).toggle=Boolean(t.toggle),p.typeCheckConfig(F,t,H),t},t._getDimension=function(){return h.default(this._element).hasClass("width")?"width":"height"},t._getParent=function(){var t,n=this;p.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',a=[].slice.call(t.querySelectorAll(e));return h.default(a).each(function(t,e){n._addAriaAndCollapsedClass(s._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){var n=h.default(t).hasClass(W);e.length&&h.default(e).toggleClass(q,!n).attr("aria-expanded",n)},s._getTargetFromElement=function(t){var e=p.getSelectorFromElement(t);return e?document.querySelector(e):null},s._jQueryInterface=function(a){return this.each(function(){var t=h.default(this),e=t.data(N),n=l({},j,t.data(),"object"==typeof a&&a?a:{});if(!e&&n.toggle&&"string"==typeof a&&/show|hide/.test(a)&&(n.toggle=!1),e||(e=new s(this,n),t.data(N,e)),"string"==typeof a){if(void 0===e[a])throw new TypeError('No method named "'+a+'"');e[a]()}})},r(s,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return j}}]),s}();h.default(document).on("click.bs.collapse.data-api",z,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=h.default(this),e=p.getSelectorFromElement(this),a=[].slice.call(document.querySelectorAll(e));h.default(a).each(function(){var t=h.default(this),e=t.data(N)?"toggle":n.data();G._jQueryInterface.call(t,e)})}),h.default.fn[F]=G._jQueryInterface,h.default.fn[F].Constructor=G,h.default.fn[F].noConflict=function(){return h.default.fn[F]=D,G._jQueryInterface};var X="dropdown",V="bs.dropdown",K="."+V,Z=".data-api",$=h.default.fn[X],Q=new RegExp("38|40|27"),J="hide"+K,tt="hidden"+K,et="click"+K+Z,nt="keydown"+K+Z,at="disabled",it="show",ot="dropdown-menu-right",rt='[data-toggle="dropdown"]',st=".dropdown-menu",lt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},ut={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},dt=function(){function u(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=u.prototype;return t.toggle=function(){if(!this._element.disabled&&!h.default(this._element).hasClass(at)){var t=h.default(this._menu).hasClass(it);u._clearMenus(),t||this.show(!0)}},t.show=function(t){if(void 0===t&&(t=!1),!(this._element.disabled||h.default(this._element).hasClass(at)||h.default(this._menu).hasClass(it))){var e={relatedTarget:this._element},n=h.default.Event("show.bs.dropdown",e),a=u._getParentFromElement(this._element);if(h.default(a).trigger(n),!n.isDefaultPrevented()){if(!this._inNavbar&&t){if(void 0===c.default)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var i=this._element;"parent"===this._config.reference?i=a:p.isElement(this._config.reference)&&(i=this._config.reference,void 0!==this._config.reference.jquery&&(i=this._config.reference[0])),"scrollParent"!==this._config.boundary&&h.default(a).addClass("position-static"),this._popper=new c.default(i,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===h.default(a).closest(".navbar-nav").length&&h.default(document.body).children().on("mouseover",null,h.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),h.default(this._menu).toggleClass(it),h.default(a).toggleClass(it).trigger(h.default.Event("shown.bs.dropdown",e))}}},t.hide=function(){if(!this._element.disabled&&!h.default(this._element).hasClass(at)&&h.default(this._menu).hasClass(it)){var t={relatedTarget:this._element},e=h.default.Event(J,t),n=u._getParentFromElement(this._element);h.default(n).trigger(e),e.isDefaultPrevented()||(this._popper&&this._popper.destroy(),h.default(this._menu).toggleClass(it),h.default(n).toggleClass(it).trigger(h.default.Event(tt,t)))}},t.dispose=function(){h.default.removeData(this._element,V),h.default(this._element).off(K),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;h.default(this._element).on("click.bs.dropdown",function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=l({},this.constructor.Default,h.default(this._element).data(),t),p.typeCheckConfig(X,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=u._getParentFromElement(this._element);t&&(this._menu=t.querySelector(st))}return this._menu},t._getPlacement=function(){var t=h.default(this._element.parentNode),e="bottom-start";return t.hasClass("dropup")?e=h.default(this._menu).hasClass(ot)?"top-end":"top-start":t.hasClass("dropright")?e="right-start":t.hasClass("dropleft")?e="left-start":h.default(this._menu).hasClass(ot)&&(e="bottom-end"),e},t._detectNavbar=function(){return 0<h.default(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),l({},t,this._config.popperConfig)},u._jQueryInterface=function(e){return this.each(function(){var t=h.default(this).data(V);if(t||(t=new u(this,"object"==typeof e?e:null),h.default(this).data(V,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},u._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(rt)),n=0,a=e.length;n<a;n++){var i=u._getParentFromElement(e[n]),o=h.default(e[n]).data(V),r={relatedTarget:e[n]};if(t&&"click"===t.type&&(r.clickEvent=t),o){var s=o._menu;if(h.default(i).hasClass(it)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&h.default.contains(i,t.target))){var l=h.default.Event(J,r);h.default(i).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&h.default(document.body).children().off("mouseover",null,h.default.noop),e[n].setAttribute("aria-expanded","false"),o._popper&&o._popper.destroy(),h.default(s).removeClass(it),h.default(i).removeClass(it).trigger(h.default.Event(tt,r)))}}}},u._getParentFromElement=function(t){var e,n=p.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},u._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||h.default(t.target).closest(st).length)):Q.test(t.which))&&!this.disabled&&!h.default(this).hasClass(at)){var e=u._getParentFromElement(this),n=h.default(e).hasClass(it);if(n||27!==t.which){if(t.preventDefault(),t.stopPropagation(),!n||27===t.which||32===t.which)return 27===t.which&&h.default(e.querySelector(rt)).trigger("focus"),void h.default(this).trigger("click");var a=[].slice.call(e.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(t){return h.default(t).is(":visible")});if(0!==a.length){var i=a.indexOf(t.target);38===t.which&&0<i&&i--,40===t.which&&i<a.length-1&&i++,i<0&&(i=0),a[i].focus()}}}},r(u,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return lt}},{key:"DefaultType",get:function(){return ut}}]),u}();h.default(document).on(nt,rt,dt._dataApiKeydownHandler).on(nt,st,dt._dataApiKeydownHandler).on(et+" keyup.bs.dropdown.data-api",dt._clearMenus).on(et,rt,function(t){t.preventDefault(),t.stopPropagation(),dt._jQueryInterface.call(h.default(this),"toggle")}).on(et,".dropdown form",function(t){t.stopPropagation()}),h.default.fn[X]=dt._jQueryInterface,h.default.fn[X].Constructor=dt,h.default.fn[X].noConflict=function(){return h.default.fn[X]=$,dt._jQueryInterface};var ct="modal",ft="bs.modal",ht="."+ft,pt=h.default.fn[ct],mt={backdrop:!0,keyboard:!0,focus:!0,show:!0},gt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},vt="hidden"+ht,yt="show"+ht,_t="focusin"+ht,bt="resize"+ht,wt="click.dismiss"+ht,Et="keydown.dismiss"+ht,Tt="mousedown.dismiss"+ht,kt="modal-open",Pt="fade",xt="show",Ct="modal-static",Ot=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",St=".sticky-top",Lt=function(){function i(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=i.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){h.default(this._element).hasClass(Pt)&&(this._isTransitioning=!0);var n=h.default.Event(yt,{relatedTarget:t});h.default(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),h.default(this._element).on(wt,'[data-dismiss="modal"]',function(t){return e.hide(t)}),h.default(this._dialog).on(Tt,function(){h.default(e._element).one("mouseup.dismiss.bs.modal",function(t){h.default(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=h.default.Event("hide.bs.modal");if(h.default(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var a=h.default(this._element).hasClass(Pt);if(a&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),h.default(document).off(_t),h.default(this._element).removeClass(xt),h.default(this._element).off(wt),h.default(this._dialog).off(Tt),a){var i=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(i)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return h.default(t).off(ht)}),h.default(document).off(_t),h.default.removeData(this._element,ft),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},mt,t),p.typeCheckConfig(ct,t,gt),t},t._triggerBackdropTransition=function(){var t=this,e=h.default.Event("hidePrevented.bs.modal");if(h.default(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._element.scrollHeight>document.documentElement.clientHeight;n||(this._element.style.overflowY="hidden"),this._element.classList.add(Ct);var a=p.getTransitionDurationFromElement(this._dialog);h.default(this._element).off(p.TRANSITION_END),h.default(this._element).one(p.TRANSITION_END,function(){t._element.classList.remove(Ct),n||h.default(t._element).one(p.TRANSITION_END,function(){t._element.style.overflowY=""}).emulateTransitionEnd(t._element,a)}).emulateTransitionEnd(a),this._element.focus()}},t._showElement=function(t){var e=this,n=h.default(this._element).hasClass(Pt),a=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),h.default(this._dialog).hasClass("modal-dialog-scrollable")&&a?a.scrollTop=0:this._element.scrollTop=0,n&&p.reflow(this._element),h.default(this._element).addClass(xt),this._config.focus&&this._enforceFocus();var i=h.default.Event("shown.bs.modal",{relatedTarget:t}),o=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,h.default(e._element).trigger(i)};if(n){var r=p.getTransitionDurationFromElement(this._dialog);h.default(this._dialog).one(p.TRANSITION_END,o).emulateTransitionEnd(r)}else o()},t._enforceFocus=function(){var e=this;h.default(document).off(_t).on(_t,function(t){document!==t.target&&e._element!==t.target&&0===h.default(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown?h.default(this._element).on(Et,function(t){e._config.keyboard&&27===t.which?(t.preventDefault(),e.hide()):e._config.keyboard||27!==t.which||e._triggerBackdropTransition()}):this._isShown||h.default(this._element).off(Et)},t._setResizeEvent=function(){var e=this;this._isShown?h.default(window).on(bt,function(t){return e.handleUpdate(t)}):h.default(window).off(bt)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){h.default(document.body).removeClass(kt),t._resetAdjustments(),t._resetScrollbar(),h.default(t._element).trigger(vt)})},t._removeBackdrop=function(){this._backdrop&&(h.default(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=h.default(this._element).hasClass(Pt)?Pt:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),h.default(this._backdrop).appendTo(document.body),h.default(this._element).on(wt,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._triggerBackdropTransition():e.hide())}),n&&p.reflow(this._backdrop),h.default(this._backdrop).addClass(xt),!t)return;if(!n)return void t();var a=p.getTransitionDurationFromElement(this._backdrop);h.default(this._backdrop).one(p.TRANSITION_END,t).emulateTransitionEnd(a)}else if(!this._isShown&&this._backdrop){h.default(this._backdrop).removeClass(xt);var i=function(){e._removeBackdrop(),t&&t()};if(h.default(this._element).hasClass(Pt)){var o=p.getTransitionDurationFromElement(this._backdrop);h.default(this._backdrop).one(p.TRANSITION_END,i).emulateTransitionEnd(o)}else i()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var i=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(Ot)),e=[].slice.call(document.querySelectorAll(St));h.default(t).each(function(t,e){var n=e.style.paddingRight,a=h.default(e).css("padding-right");h.default(e).data("padding-right",n).css("padding-right",parseFloat(a)+i._scrollbarWidth+"px")}),h.default(e).each(function(t,e){var n=e.style.marginRight,a=h.default(e).css("margin-right");h.default(e).data("margin-right",n).css("margin-right",parseFloat(a)-i._scrollbarWidth+"px")});var n=document.body.style.paddingRight,a=h.default(document.body).css("padding-right");h.default(document.body).data("padding-right",n).css("padding-right",parseFloat(a)+this._scrollbarWidth+"px")}h.default(document.body).addClass(kt)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(Ot));h.default(t).each(function(t,e){var n=h.default(e).data("padding-right");h.default(e).removeData("padding-right"),e.style.paddingRight=n||""});var e=[].slice.call(document.querySelectorAll(""+St));h.default(e).each(function(t,e){var n=h.default(e).data("margin-right");void 0!==n&&h.default(e).css("margin-right",n).removeData("margin-right")});var n=h.default(document.body).data("padding-right");h.default(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},i._jQueryInterface=function(n,a){return this.each(function(){var t=h.default(this).data(ft),e=l({},mt,h.default(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new i(this,e),h.default(this).data(ft,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](a)}else e.show&&t.show(a)})},r(i,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return mt}}]),i}();h.default(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e,n=this,a=p.getSelectorFromElement(this);a&&(e=document.querySelector(a));var i=h.default(e).data(ft)?"toggle":l({},h.default(e).data(),h.default(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var o=h.default(e).one(yt,function(t){t.isDefaultPrevented()||o.one(vt,function(){h.default(n).is(":visible")&&n.focus()})});Lt._jQueryInterface.call(h.default(e),i,this)}),h.default.fn[ct]=Lt._jQueryInterface,h.default.fn[ct].Constructor=Lt,h.default.fn[ct].noConflict=function(){return h.default.fn[ct]=pt,Lt._jQueryInterface};var Mt=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],At={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rt=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,Bt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function It(t,r,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),s=Object.keys(r),l=[].slice.call(n.body.querySelectorAll("*")),a=function(t,e){var n=l[t],a=n.nodeName.toLowerCase();if(-1===s.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var i=[].slice.call(n.attributes),o=[].concat(r["*"]||[],r[a]||[]);i.forEach(function(t){(function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===Mt.indexOf(n)||Boolean(t.nodeValue.match(Rt)||t.nodeValue.match(Bt));for(var a=e.filter(function(t){return t instanceof RegExp}),i=0,o=a.length;i<o;i++)if(n.match(a[i]))return!0;return!1})(t,o)||n.removeAttribute(t.nodeName)})},i=0,o=l.length;i<o;i++)a(i);return n.body.innerHTML}var Ft="tooltip",Nt="bs.tooltip",Dt="."+Nt,jt=h.default.fn[Ft],Ht="bs-tooltip",Wt=new RegExp("(^|\\s)"+Ht+"\\S+","g"),Ut=["sanitize","whiteList","sanitizeFn"],Yt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},qt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},zt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:At,popperConfig:null},Gt="show",Xt={HIDE:"hide"+Dt,HIDDEN:"hidden"+Dt,SHOW:"show"+Dt,SHOWN:"shown"+Dt,INSERTED:"inserted"+Dt,CLICK:"click"+Dt,FOCUSIN:"focusin"+Dt,FOCUSOUT:"focusout"+Dt,MOUSEENTER:"mouseenter"+Dt,MOUSELEAVE:"mouseleave"+Dt},Vt="fade",Kt="show",Zt="hover",$t=function(){function i(t,e){if(void 0===c.default)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=h.default(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),h.default(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(h.default(this.getTipElement()).hasClass(Kt))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),h.default.removeData(this.element,this.constructor.DATA_KEY),h.default(this.element).off(this.constructor.EVENT_KEY),h.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&h.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===h.default(this.element).css("display"))throw new Error("Please use show on visible elements");var t=h.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){h.default(this.element).trigger(t);var n=p.findShadowRoot(this.element),a=h.default.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!a)return;var i=this.getTipElement(),o=p.getUID(this.constructor.NAME);i.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&h.default(i).addClass(Vt);var r="function"==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,s=this._getAttachment(r);this.addAttachmentClass(s);var l=this._getContainer();h.default(i).data(this.constructor.DATA_KEY,this),h.default.contains(this.element.ownerDocument.documentElement,this.tip)||h.default(i).appendTo(l),h.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new c.default(this.element,i,this._getPopperConfig(s)),h.default(i).addClass(Kt),h.default(i).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&h.default(document.body).children().on("mouseover",null,h.default.noop);var u=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,h.default(e.element).trigger(e.constructor.Event.SHOWN),"out"===t&&e._leave(null,e)};if(h.default(this.tip).hasClass(Vt)){var d=p.getTransitionDurationFromElement(this.tip);h.default(this.tip).one(p.TRANSITION_END,u).emulateTransitionEnd(d)}else u()}},t.hide=function(t){var e=this,n=this.getTipElement(),a=h.default.Event(this.constructor.Event.HIDE),i=function(){e._hoverState!==Gt&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),h.default(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if(h.default(this.element).trigger(a),!a.isDefaultPrevented()){if(h.default(n).removeClass(Kt),"ontouchstart"in document.documentElement&&h.default(document.body).children().off("mouseover",null,h.default.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger[Zt]=!1,h.default(this.tip).hasClass(Vt)){var o=p.getTransitionDurationFromElement(n);h.default(n).one(p.TRANSITION_END,i).emulateTransitionEnd(o)}else i();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){h.default(this.getTipElement()).addClass(Ht+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||h.default(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(h.default(t.querySelectorAll(".tooltip-inner")),this.getTitle()),h.default(t).removeClass("fade show")},t.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=It(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?h.default(e).parent().is(t)||t.empty().append(e):t.text(h.default(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getPopperConfig=function(t){var e=this;return l({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},this.config.popperConfig)},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:p.isElement(this.config.container)?h.default(this.config.container):h.default(document).find(this.config.container)},t._getAttachment=function(t){return qt[t.toUpperCase()]},t._setListeners=function(){var a=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)h.default(a.element).on(a.constructor.Event.CLICK,a.config.selector,function(t){return a.toggle(t)});else if("manual"!==t){var e=t===Zt?a.constructor.Event.MOUSEENTER:a.constructor.Event.FOCUSIN,n=t===Zt?a.constructor.Event.MOUSELEAVE:a.constructor.Event.FOCUSOUT;h.default(a.element).on(e,a.config.selector,function(t){return a._enter(t)}).on(n,a.config.selector,function(t){return a._leave(t)})}}),this._hideModalHandler=function(){a.element&&a.hide()},h.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||h.default(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),h.default(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?"focus":Zt]=!0),h.default(e.getTipElement()).hasClass(Kt)||e._hoverState===Gt?e._hoverState=Gt:(clearTimeout(e._timeout),e._hoverState=Gt,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Gt&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||h.default(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),h.default(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?"focus":Zt]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){"out"===e._hoverState&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=h.default(this.element).data();return Object.keys(e).forEach(function(t){-1!==Ut.indexOf(t)&&delete e[t]}),"number"==typeof(t=l({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),p.typeCheckConfig(Ft,t,this.constructor.DefaultType),t.sanitize&&(t.template=It(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=h.default(this.getTipElement()),e=t.attr("class").match(Wt);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(h.default(t).removeClass(Vt),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(a){return this.each(function(){var t=h.default(this),e=t.data(Nt),n="object"==typeof a&&a;if((e||!/dispose|hide/.test(a))&&(e||(e=new i(this,n),t.data(Nt,e)),"string"==typeof a)){if(void 0===e[a])throw new TypeError('No method named "'+a+'"');e[a]()}})},r(i,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return zt}},{key:"NAME",get:function(){return Ft}},{key:"DATA_KEY",get:function(){return Nt}},{key:"Event",get:function(){return Xt}},{key:"EVENT_KEY",get:function(){return Dt}},{key:"DefaultType",get:function(){return Yt}}]),i}();h.default.fn[Ft]=$t._jQueryInterface,h.default.fn[Ft].Constructor=$t,h.default.fn[Ft].noConflict=function(){return h.default.fn[Ft]=jt,$t._jQueryInterface};var Qt="popover",Jt="bs.popover",te="."+Jt,ee=h.default.fn[Qt],ne="bs-popover",ae=new RegExp("(^|\\s)"+ne+"\\S+","g"),ie=l({},$t.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),oe=l({},$t.DefaultType,{content:"(string|element|function)"}),re={HIDE:"hide"+te,HIDDEN:"hidden"+te,SHOW:"show"+te,SHOWN:"shown"+te,INSERTED:"inserted"+te,CLICK:"click"+te,FOCUSIN:"focusin"+te,FOCUSOUT:"focusout"+te,MOUSEENTER:"mouseenter"+te,MOUSELEAVE:"mouseleave"+te},se=function(t){var e,n;function a(){return t.apply(this,arguments)||this}n=t,(e=a).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var i=a.prototype;return i.isWithContent=function(){return this.getTitle()||this._getContent()},i.addAttachmentClass=function(t){h.default(this.getTipElement()).addClass(ne+"-"+t)},i.getTipElement=function(){return this.tip=this.tip||h.default(this.config.template)[0],this.tip},i.setContent=function(){var t=h.default(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(".popover-body"),e),t.removeClass("fade show")},i._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},i._cleanTipClass=function(){var t=h.default(this.getTipElement()),e=t.attr("class").match(ae);null!==e&&0<e.length&&t.removeClass(e.join(""))},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this).data(Jt),e="object"==typeof n?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new a(this,e),h.default(this).data(Jt,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},r(a,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return ie}},{key:"NAME",get:function(){return Qt}},{key:"DATA_KEY",get:function(){return Jt}},{key:"Event",get:function(){return re}},{key:"EVENT_KEY",get:function(){return te}},{key:"DefaultType",get:function(){return oe}}]),a}($t);h.default.fn[Qt]=se._jQueryInterface,h.default.fn[Qt].Constructor=se,h.default.fn[Qt].noConflict=function(){return h.default.fn[Qt]=ee,se._jQueryInterface};var le="scrollspy",ue="bs.scrollspy",de="."+ue,ce=h.default.fn[le],fe={offset:10,method:"auto",target:""},he={offset:"number",method:"string",target:"(string|element)"},pe="active",me=".nav, .list-group",ge=".nav-link",ve=".list-group-item",ye=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+ge+","+this._config.target+" "+ve+","+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,h.default(this._scrollElement).on("scroll.bs.scrollspy",function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?"offset":"position",i="auto"===this._config.method?t:this._config.method,o="position"===i?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=p.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var a=e.getBoundingClientRect();if(a.width||a.height)return[h.default(e)[i]().top+o,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){h.default.removeData(this._element,ue),h.default(this._scrollElement).off(de),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},fe,"object"==typeof t&&t?t:{})).target&&p.isElement(t.target)){var e=h.default(t.target).attr("id");e||(e=p.getUID(le),h.default(t.target).attr("id",e)),t.target="#"+e}return p.typeCheckConfig(le,t,he),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var a=this._targets[this._targets.length-1];this._activeTarget!==a&&this._activate(a)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;){this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&(void 0===this._offsets[i+1]||t<this._offsets[i+1])&&this._activate(this._targets[i])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=h.default([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass(pe),n.addClass(pe)):(n.addClass(pe),n.parents(me).prev(ge+", "+ve).addClass(pe),n.parents(me).prev(".nav-item").children(ge).addClass(pe)),h.default(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(pe)}).forEach(function(t){return t.classList.remove(pe)})},n._jQueryInterface=function(e){return this.each(function(){var t=h.default(this).data(ue);if(t||(t=new n(this,"object"==typeof e&&e),h.default(this).data(ue,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},r(n,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"Default",get:function(){return fe}}]),n}();h.default(window).on("load.bs.scrollspy.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),e=t.length;e--;){var n=h.default(t[e]);ye._jQueryInterface.call(n,n.data())}}),h.default.fn[le]=ye._jQueryInterface,h.default.fn[le].Constructor=ye,h.default.fn[le].noConflict=function(){return h.default.fn[le]=ce,ye._jQueryInterface};var _e="bs.tab",be=h.default.fn.tab,we="active",Ee="> li > .active",Te=function(){function a(t){this._element=t}var t=a.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&h.default(this._element).hasClass(we)||h.default(this._element).hasClass("disabled"))){var t,a,e=h.default(this._element).closest(".nav, .list-group")[0],i=p.getSelectorFromElement(this._element);if(e){var o="UL"===e.nodeName||"OL"===e.nodeName?Ee:".active";a=(a=h.default.makeArray(h.default(e).find(o)))[a.length-1]}var r=h.default.Event("hide.bs.tab",{relatedTarget:this._element}),s=h.default.Event("show.bs.tab",{relatedTarget:a});if(a&&h.default(a).trigger(r),h.default(this._element).trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){i&&(t=document.querySelector(i)),this._activate(this._element,e);var l=function(){var t=h.default.Event("hidden.bs.tab",{relatedTarget:n._element}),e=h.default.Event("shown.bs.tab",{relatedTarget:a});h.default(a).trigger(t),h.default(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){h.default.removeData(this._element,_e),this._element=null},t._activate=function(t,e,n){var a=this,i=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?h.default(e).children(".active"):h.default(e).find(Ee))[0],o=n&&i&&h.default(i).hasClass("fade"),r=function(){return a._transitionComplete(t,i,n)};if(i&&o){var s=p.getTransitionDurationFromElement(i);h.default(i).removeClass("show").one(p.TRANSITION_END,r).emulateTransitionEnd(s)}else r()},t._transitionComplete=function(t,e,n){if(e){h.default(e).removeClass(we);var a=h.default(e.parentNode).find("> .dropdown-menu .active")[0];a&&h.default(a).removeClass(we),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(h.default(t).addClass(we),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),p.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&h.default(t.parentNode).hasClass("dropdown-menu")){var i=h.default(t).closest(".dropdown")[0];if(i){var o=[].slice.call(i.querySelectorAll(".dropdown-toggle"));h.default(o).addClass(we)}t.setAttribute("aria-expanded",!0)}n&&n()},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this),e=t.data(_e);if(e||(e=new a(this),t.data(_e,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},r(a,null,[{key:"VERSION",get:function(){return"4.6.0"}}]),a}();h.default(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),Te._jQueryInterface.call(h.default(this),"show")}),h.default.fn.tab=Te._jQueryInterface,h.default.fn.tab.Constructor=Te,h.default.fn.tab.noConflict=function(){return h.default.fn.tab=be,Te._jQueryInterface};var ke="toast",Pe="bs.toast",xe="."+Pe,Ce=h.default.fn[ke],Oe="click.dismiss"+xe,Se="show",Le={animation:"boolean",autohide:"boolean",delay:"number"},Me={animation:!0,autohide:!0,delay:500},Ae=function(){function a(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=a.prototype;return t.show=function(){var t=this,e=h.default.Event("show.bs.toast");if(h.default(this._element).trigger(e),!e.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var n=function(){t._element.classList.remove("showing"),t._element.classList.add(Se),h.default(t._element).trigger("shown.bs.toast"),t._config.autohide&&(t._timeout=setTimeout(function(){t.hide()},t._config.delay))};if(this._element.classList.remove("hide"),p.reflow(this._element),this._element.classList.add("showing"),this._config.animation){var a=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,n).emulateTransitionEnd(a)}else n()}},t.hide=function(){if(this._element.classList.contains(Se)){var t=h.default.Event("hide.bs.toast");h.default(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},t.dispose=function(){this._clearTimeout(),this._element.classList.contains(Se)&&this._element.classList.remove(Se),h.default(this._element).off(Oe),h.default.removeData(this._element,Pe),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},Me,h.default(this._element).data(),"object"==typeof t&&t?t:{}),p.typeCheckConfig(ke,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;h.default(this._element).on(Oe,'[data-dismiss="toast"]',function(){return t.hide()})},t._close=function(){var t=this,e=function(){t._element.classList.add("hide"),h.default(t._element).trigger("hidden.bs.toast")};if(this._element.classList.remove(Se),this._config.animation){var n=p.getTransitionDurationFromElement(this._element);h.default(this._element).one(p.TRANSITION_END,e).emulateTransitionEnd(n)}else e()},t._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},a._jQueryInterface=function(n){return this.each(function(){var t=h.default(this),e=t.data(Pe);if(e||(e=new a(this,"object"==typeof n&&n),t.data(Pe,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n](this)}})},r(a,null,[{key:"VERSION",get:function(){return"4.6.0"}},{key:"DefaultType",get:function(){return Le}},{key:"Default",get:function(){return Me}}]),a}();h.default.fn[ke]=Ae._jQueryInterface,h.default.fn[ke].Constructor=Ae,h.default.fn[ke].noConflict=function(){return h.default.fn[ke]=Ce,Ae._jQueryInterface},t.Alert=m,t.Button=E,t.Carousel=I,t.Collapse=G,t.Dropdown=dt,t.Modal=Lt,t.Popover=se,t.Scrollspy=ye,t.Tab=Te,t.Toast=Ae,t.Tooltip=$t,t.Util=p,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("jquery"),t("popper.js")):i((a="undefined"!=typeof globalThis?globalThis:a||self).bootstrap={},a.jQuery,a.Popper)},{jquery:187,"popper.js":205}],67:[function(t,e,n){t("../modules/es6.object.to-string"),t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.map"),e.exports=t("../modules/_core").Map},{"../modules/_core":89,"../modules/es6.map":167,"../modules/es6.object.to-string":168,"../modules/es6.string.iterator":172,"../modules/web.dom.iterable":185}],68:[function(t,e,n){t("../modules/es6.object.to-string"),t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.promise"),e.exports=t("../modules/_core").Promise},{"../modules/_core":89,"../modules/es6.object.to-string":168,"../modules/es6.promise":169,"../modules/es6.string.iterator":172,"../modules/web.dom.iterable":185}],69:[function(t,e,n){t("../modules/es6.object.to-string"),t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.set"),e.exports=t("../modules/_core").Set},{"../modules/_core":89,"../modules/es6.object.to-string":168,"../modules/es6.set":170,"../modules/es6.string.iterator":172,"../modules/web.dom.iterable":185}],70:[function(t,e,n){t("../modules/es6.symbol"),t("../modules/es6.object.to-string"),e.exports=t("../modules/_core").Symbol},{"../modules/_core":89,"../modules/es6.object.to-string":168,"../modules/es6.symbol":173}],71:[function(t,e,n){t("../modules/es6.typed.array-buffer"),t("../modules/es6.typed.data-view"),t("../modules/es6.typed.int8-array"),t("../modules/es6.typed.uint8-array"),t("../modules/es6.typed.uint8-clamped-array"),t("../modules/es6.typed.int16-array"),t("../modules/es6.typed.uint16-array"),t("../modules/es6.typed.int32-array"),t("../modules/es6.typed.uint32-array"),t("../modules/es6.typed.float32-array"),t("../modules/es6.typed.float64-array"),t("../modules/es6.object.to-string"),e.exports=t("../modules/_core")},{"../modules/_core":89,"../modules/es6.object.to-string":168,"../modules/es6.typed.array-buffer":174,"../modules/es6.typed.data-view":175,"../modules/es6.typed.float32-array":176,"../modules/es6.typed.float64-array":177,"../modules/es6.typed.int16-array":178,"../modules/es6.typed.int32-array":179,"../modules/es6.typed.int8-array":180,"../modules/es6.typed.uint16-array":181,"../modules/es6.typed.uint32-array":182,"../modules/es6.typed.uint8-array":183,"../modules/es6.typed.uint8-clamped-array":184}],72:[function(t,e,n){t("../../modules/es6.array.fill"),e.exports=t("../../modules/_core").Array.fill},{"../../modules/_core":89,"../../modules/es6.array.fill":165}],73:[function(t,e,n){t("../../modules/es6.array.iterator"),e.exports=t("../../modules/_core").Array.values},{"../../modules/_core":89,"../../modules/es6.array.iterator":166}],74:[function(t,e,n){t("../../modules/es6.string.ends-with"),e.exports=t("../../modules/_core").String.endsWith},{"../../modules/_core":89,"../../modules/es6.string.ends-with":171}],75:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],76:[function(t,e,n){var a=t("./_wks")("unscopables"),i=Array.prototype;null==i[a]&&t("./_hide")(i,a,{}),e.exports=function(t){i[a][t]=!0}},{"./_hide":103,"./_wks":163}],77:[function(t,e,n){e.exports=function(t,e,n,a){if(!(t instanceof e)||void 0!==a&&a in t)throw TypeError(n+": incorrect invocation!");return t}},{}],78:[function(t,e,n){var a=t("./_is-object");e.exports=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":111}],79:[function(t,e,n){"use strict";var u=t("./_to-object"),d=t("./_to-absolute-index"),c=t("./_to-length");e.exports=[].copyWithin||function(t,e){var n=u(this),a=c(n.length),i=d(t,a),o=d(e,a),r=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===r?a:d(r,a))-o,a-i),l=1;for(o<i&&i<o+s&&(l=-1,o+=s-1,i+=s-1);0<s--;)o in n?n[i]=n[o]:delete n[i],i+=l,o+=l;return n}},{"./_to-absolute-index":148,"./_to-length":152,"./_to-object":153}],80:[function(t,e,n){"use strict";var s=t("./_to-object"),l=t("./_to-absolute-index"),u=t("./_to-length");e.exports=function(t){for(var e=s(this),n=u(e.length),a=arguments.length,i=l(1<a?arguments[1]:void 0,n),o=2<a?arguments[2]:void 0,r=void 0===o?n:l(o,n);i<r;)e[i++]=t;return e}},{"./_to-absolute-index":148,"./_to-length":152,"./_to-object":153}],81:[function(t,e,n){var l=t("./_to-iobject"),u=t("./_to-length"),d=t("./_to-absolute-index");e.exports=function(s){return function(t,e,n){var a,i=l(t),o=u(i.length),r=d(n,o);if(s&&e!=e){for(;r<o;)if((a=i[r++])!=a)return!0}else for(;r<o;r++)if((s||r in i)&&i[r]===e)return s||r||0;return!s&&-1}}},{"./_to-absolute-index":148,"./_to-iobject":151,"./_to-length":152}],82:[function(t,e,n){var _=t("./_ctx"),b=t("./_iobject"),w=t("./_to-object"),E=t("./_to-length"),a=t("./_array-species-create");e.exports=function(c,t){var f=1==c,h=2==c,p=3==c,m=4==c,g=6==c,v=5==c||g,y=t||a;return function(t,e,n){for(var a,i,o=w(t),r=b(o),s=_(e,n,3),l=E(r.length),u=0,d=f?y(t,l):h?y(t,0):void 0;u<l;u++)if((v||u in r)&&(i=s(a=r[u],u,o),c))if(f)d[u]=i;else if(i)switch(c){case 3:return!0;case 5:return a;case 6:return u;case 2:d.push(a)}else if(m)return!1;return g?-1:p||m?m:d}}},{"./_array-species-create":84,"./_ctx":90,"./_iobject":108,"./_to-length":152,"./_to-object":153}],83:[function(t,e,n){var a=t("./_is-object"),i=t("./_is-array"),o=t("./_wks")("species");e.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),a(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},{"./_is-array":110,"./_is-object":111,"./_wks":163}],84:[function(t,e,n){var a=t("./_array-species-constructor");e.exports=function(t,e){return new(a(t))(e)}},{"./_array-species-constructor":83}],85:[function(t,e,n){var i=t("./_cof"),o=t("./_wks")("toStringTag"),r="Arguments"==i(function(){return arguments}());e.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:r?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},{"./_cof":86,"./_wks":163}],86:[function(t,e,n){var a={}.toString;e.exports=function(t){return a.call(t).slice(8,-1)}},{}],87:[function(t,e,n){"use strict";var r=t("./_object-dp").f,s=t("./_object-create"),l=t("./_redefine-all"),u=t("./_ctx"),d=t("./_an-instance"),c=t("./_for-of"),a=t("./_iter-define"),i=t("./_iter-step"),o=t("./_set-species"),f=t("./_descriptors"),h=t("./_meta").fastKey,p=t("./_validate-collection"),m=f?"_s":"size",g=function(t,e){var n,a=h(e);if("F"!==a)return t._i[a];for(n=t._f;n;n=n.n)if(n.k==e)return n};e.exports={getConstructor:function(t,o,n,a){var i=t(function(t,e){d(t,i,o,"_i"),t._t=o,t._i=s(null),t._f=void 0,t._l=void 0,t[m]=0,null!=e&&c(e,n,t[a],t)});return l(i.prototype,{clear:function(){for(var t=p(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var e=p(this,o),n=g(e,t);if(n){var a=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=a),a&&(a.p=i),e._f==n&&(e._f=a),e._l==n&&(e._l=i),e[m]--}return!!n},forEach:function(t){p(this,o);for(var e,n=u(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!g(p(this,o),t)}}),f&&r(i.prototype,"size",{get:function(){return p(this,o)[m]}}),i},def:function(t,e,n){var a,i,o=g(t,e);return o?o.v=n:(t._l=o={i:i=h(e,!0),k:e,v:n,p:a=t._l,n:void 0,r:!1},t._f||(t._f=o),a&&(a.n=o),t[m]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,n,e){a(t,n,function(t,e){this._t=p(t,n),this._k=e,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?i(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,i(1))},e?"entries":"values",!e,!0),o(n)}}},{"./_an-instance":77,"./_ctx":90,"./_descriptors":92,"./_for-of":99,"./_iter-define":115,"./_iter-step":117,"./_meta":120,"./_object-create":123,"./_object-dp":124,"./_redefine-all":137,"./_set-species":140,"./_validate-collection":160}],88:[function(t,e,n){"use strict";var v=t("./_global"),y=t("./_export"),_=t("./_redefine"),b=t("./_redefine-all"),w=t("./_meta"),E=t("./_for-of"),T=t("./_an-instance"),k=t("./_is-object"),P=t("./_fails"),x=t("./_iter-detect"),C=t("./_set-to-string-tag"),O=t("./_inherit-if-required");e.exports=function(a,t,e,n,i,o){var r=v[a],s=r,l=i?"set":"add",u=s&&s.prototype,d={},c=function(t){var n=u[t];_(u,t,"delete"==t?function(t){return!(o&&!k(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!k(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!k(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof s&&(o||u.forEach&&!P(function(){(new s).entries().next()}))){var f=new s,h=f[l](o?{}:-0,1)!=f,p=P(function(){f.has(1)}),m=x(function(t){new s(t)}),g=!o&&P(function(){for(var t=new s,e=5;e--;)t[l](e,e);return!t.has(-0)});m||(((s=t(function(t,e){T(t,s,a);var n=O(new r,t,s);return null!=e&&E(e,i,n[l],n),n})).prototype=u).constructor=s),(p||g)&&(c("delete"),c("has"),i&&c("get")),(g||h)&&c(l),o&&u.clear&&delete u.clear}else s=n.getConstructor(t,a,i,l),b(s.prototype,e),w.NEED=!0;return C(s,a),d[a]=s,y(y.G+y.W+y.F*(s!=r),d),o||n.setStrong(s,a,i),s}},{"./_an-instance":77,"./_export":96,"./_fails":98,"./_for-of":99,"./_global":101,"./_inherit-if-required":106,"./_is-object":111,"./_iter-detect":116,"./_meta":120,"./_redefine":138,"./_redefine-all":137,"./_set-to-string-tag":141}],89:[function(t,e,n){var a=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=a)},{}],90:[function(t,e,n){var o=t("./_a-function");e.exports=function(a,i,t){if(o(a),void 0===i)return a;switch(t){case 1:return function(t){return a.call(i,t)};case 2:return function(t,e){return a.call(i,t,e)};case 3:return function(t,e,n){return a.call(i,t,e,n)}}return function(){return a.apply(i,arguments)}}},{"./_a-function":75}],91:[function(t,e,n){e.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},{}],92:[function(t,e,n){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":98}],93:[function(t,e,n){var a=t("./_is-object"),i=t("./_global").document,o=a(i)&&a(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{"./_global":101,"./_is-object":111}],94:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],95:[function(t,e,n){var s=t("./_object-keys"),l=t("./_object-gops"),u=t("./_object-pie");e.exports=function(t){var e=s(t),n=l.f;if(n)for(var a,i=n(t),o=u.f,r=0;i.length>r;)o.call(t,a=i[r++])&&e.push(a);return e}},{"./_object-gops":129,"./_object-keys":132,"./_object-pie":133}],96:[function(t,e,n){var m=t("./_global"),g=t("./_core"),v=t("./_hide"),y=t("./_redefine"),_=t("./_ctx"),b="prototype",w=function(t,e,n){var a,i,o,r,s=t&w.F,l=t&w.G,u=t&w.S,d=t&w.P,c=t&w.B,f=l?m:u?m[e]||(m[e]={}):(m[e]||{})[b],h=l?g:g[e]||(g[e]={}),p=h[b]||(h[b]={});for(a in l&&(n=e),n)o=((i=!s&&f&&void 0!==f[a])?f:n)[a],r=c&&i?_(o,m):d&&"function"==typeof o?_(Function.call,o):o,f&&y(f,a,o,t&w.U),h[a]!=o&&v(h,a,r),d&&p[a]!=o&&(p[a]=o)};m.core=g,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,e.exports=w},{"./_core":89,"./_ctx":90,"./_global":101,"./_hide":103,"./_redefine":138}],97:[function(t,e,n){var a=t("./_wks")("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[a]=!1,!"/./"[e](n)}catch(t){}}return!0}},{"./_wks":163}],98:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],99:[function(t,e,n){var f=t("./_ctx"),h=t("./_iter-call"),p=t("./_is-array-iter"),m=t("./_an-object"),g=t("./_to-length"),v=t("./core.get-iterator-method"),y={},_={};(n=e.exports=function(t,e,n,a,i){var o,r,s,l,u=i?function(){return t}:v(t),d=f(n,a,e?2:1),c=0;if("function"!=typeof u)throw TypeError(t+" is not iterable!");if(p(u)){for(o=g(t.length);c<o;c++)if((l=e?d(m(r=t[c])[0],r[1]):d(t[c]))===y||l===_)return l}else for(s=u.call(t);!(r=s.next()).done;)if((l=h(s,d,r.value,e))===y||l===_)return l}).BREAK=y,n.RETURN=_},{"./_an-object":78,"./_ctx":90,"./_is-array-iter":109,"./_iter-call":113,"./_to-length":152,"./core.get-iterator-method":164}],100:[function(t,e,n){e.exports=t("./_shared")("native-function-to-string",Function.toString)},{"./_shared":143}],101:[function(t,e,n){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},{}],102:[function(t,e,n){var a={}.hasOwnProperty;e.exports=function(t,e){return a.call(t,e)}},{}],103:[function(t,e,n){var a=t("./_object-dp"),i=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,n){return a.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},{"./_descriptors":92,"./_object-dp":124,"./_property-desc":136}],104:[function(t,e,n){var a=t("./_global").document;e.exports=a&&a.documentElement},{"./_global":101}],105:[function(t,e,n){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":92,"./_dom-create":93,"./_fails":98}],106:[function(t,e,n){var o=t("./_is-object"),r=t("./_set-proto").set;e.exports=function(t,e,n){var a,i=e.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&o(a)&&r&&r(t,a),t}},{"./_is-object":111,"./_set-proto":139}],107:[function(t,e,n){e.exports=function(t,e,n){var a=void 0===n;switch(e.length){case 0:return a?t():t.call(n);case 1:return a?t(e[0]):t.call(n,e[0]);case 2:return a?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return a?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return a?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],108:[function(t,e,n){var a=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==a(t)?t.split(""):Object(t)}},{"./_cof":86}],109:[function(t,e,n){var a=t("./_iterators"),i=t("./_wks")("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(a.Array===t||o[i]===t)}},{"./_iterators":118,"./_wks":163}],110:[function(t,e,n){var a=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==a(t)}},{"./_cof":86}],111:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],112:[function(t,e,n){var a=t("./_is-object"),i=t("./_cof"),o=t("./_wks")("match");e.exports=function(t){var e;return a(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},{"./_cof":86,"./_is-object":111,"./_wks":163}],113:[function(t,e,n){var o=t("./_an-object");e.exports=function(e,t,n,a){try{return a?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},{"./_an-object":78}],114:[function(t,e,n){"use strict";var a=t("./_object-create"),i=t("./_property-desc"),o=t("./_set-to-string-tag"),r={};t("./_hide")(r,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=a(r,{next:i(1,n)}),o(t,e+" Iterator")}},{"./_hide":103,"./_object-create":123,"./_property-desc":136,"./_set-to-string-tag":141,"./_wks":163}],115:[function(t,e,n){"use strict";var _=t("./_library"),b=t("./_export"),w=t("./_redefine"),E=t("./_hide"),T=t("./_iterators"),k=t("./_iter-create"),P=t("./_set-to-string-tag"),x=t("./_object-gpo"),C=t("./_wks")("iterator"),O=!([].keys&&"next"in[].keys()),S="values",L=function(){return this};e.exports=function(t,e,n,a,i,o,r){k(n,e,a);var s,l,u,d=function(t){if(!O&&t in p)return p[t];switch(t){case"keys":case S:return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",f=i==S,h=!1,p=t.prototype,m=p[C]||p["@@iterator"]||i&&p[i],g=m||d(i),v=i?f?d("entries"):g:void 0,y="Array"==e&&p.entries||m;if(y&&(u=x(y.call(new t)))!==Object.prototype&&u.next&&(P(u,c,!0),_||"function"==typeof u[C]||E(u,C,L)),f&&m&&m.name!==S&&(h=!0,g=function(){return m.call(this)}),_&&!r||!O&&!h&&p[C]||E(p,C,g),T[e]=g,T[c]=L,i)if(s={values:f?g:d(S),keys:o?g:d("keys"),entries:v},r)for(l in s)l in p||w(p,l,s[l]);else b(b.P+b.F*(O||h),e,s);return s}},{"./_export":96,"./_hide":103,"./_iter-create":114,"./_iterators":118,"./_library":119,"./_object-gpo":130,"./_redefine":138,"./_set-to-string-tag":141,"./_wks":163}],116:[function(t,e,n){var o=t("./_wks")("iterator"),r=!1;try{var a=[7][o]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],i=a[o]();i.next=function(){return{done:n=!0}},a[o]=function(){return i},t(a)}catch(t){}return n}},{"./_wks":163}],117:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],118:[function(t,e,n){e.exports={}},{}],119:[function(t,e,n){e.exports=!1},{}],120:[function(t,e,n){var a=t("./_uid")("meta"),i=t("./_is-object"),o=t("./_has"),r=t("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!t("./_fails")(function(){return l(Object.preventExtensions({}))}),d=function(t){r(t,a,{value:{i:"O"+ ++s,w:{}}})},c=e.exports={KEY:a,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,a)){if(!l(t))return"F";if(!e)return"E";d(t)}return t[a].i},getWeak:function(t,e){if(!o(t,a)){if(!l(t))return!0;if(!e)return!1;d(t)}return t[a].w},onFreeze:function(t){return u&&c.NEED&&l(t)&&!o(t,a)&&d(t),t}}},{"./_fails":98,"./_has":102,"./_is-object":111,"./_object-dp":124,"./_uid":158}],121:[function(t,e,n){var s=t("./_global"),l=t("./_task").set,u=s.MutationObserver||s.WebKitMutationObserver,d=s.process,c=s.Promise,f="process"==t("./_cof")(d);e.exports=function(){var n,a,i,t=function(){var t,e;for(f&&(t=d.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():a=void 0,t}}a=void 0,t&&t.enter()};if(f)i=function(){d.nextTick(t)};else if(!u||s.navigator&&s.navigator.standalone)if(c&&c.resolve){var e=c.resolve(void 0);i=function(){e.then(t)}}else i=function(){l.call(s,t)};else{var o=!0,r=document.createTextNode("");new u(t).observe(r,{characterData:!0}),i=function(){r.data=o=!o}}return function(t){var e={fn:t,next:void 0};a&&(a.next=e),n||(n=e,i()),a=e}}},{"./_cof":86,"./_global":101,"./_task":147}],122:[function(t,e,n){"use strict";var i=t("./_a-function");function a(t){var n,a;this.promise=new t(function(t,e){if(void 0!==n||void 0!==a)throw TypeError("Bad Promise constructor");n=t,a=e}),this.resolve=i(n),this.reject=i(a)}e.exports.f=function(t){return new a(t)}},{"./_a-function":75}],123:[function(a,t,e){var i=a("./_an-object"),o=a("./_object-dps"),r=a("./_enum-bug-keys"),s=a("./_shared-key")("IE_PROTO"),l=function(){},u="prototype",d=function(){var t,e=a("./_dom-create")("iframe"),n=r.length;for(e.style.display="none",a("./_html").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),d=t.F;n--;)delete d[u][r[n]];return d()};t.exports=Object.create||function(t,e){var n;return null!==t?(l[u]=i(t),n=new l,l[u]=null,n[s]=t):n=d(),void 0===e?n:o(n,e)}},{"./_an-object":78,"./_dom-create":93,"./_enum-bug-keys":94,"./_html":104,"./_object-dps":125,"./_shared-key":142}],124:[function(t,e,n){var a=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),r=Object.defineProperty;n.f=t("./_descriptors")?Object.defineProperty:function(t,e,n){if(a(t),e=o(e,!0),a(n),i)try{return r(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{"./_an-object":78,"./_descriptors":92,"./_ie8-dom-define":105,"./_to-primitive":154}],125:[function(t,e,n){var r=t("./_object-dp"),s=t("./_an-object"),l=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){s(t);for(var n,a=l(e),i=a.length,o=0;o<i;)r.f(t,n=a[o++],e[n]);return t}},{"./_an-object":78,"./_descriptors":92,"./_object-dp":124,"./_object-keys":132}],126:[function(t,e,n){var a=t("./_object-pie"),i=t("./_property-desc"),o=t("./_to-iobject"),r=t("./_to-primitive"),s=t("./_has"),l=t("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=t("./_descriptors")?u:function(t,e){if(t=o(t),e=r(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return i(!a.f.call(t,e),t[e])}},{"./_descriptors":92,"./_has":102,"./_ie8-dom-define":105,"./_object-pie":133,"./_property-desc":136,"./_to-iobject":151,"./_to-primitive":154}],127:[function(t,e,n){var a=t("./_to-iobject"),i=t("./_object-gopn").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return r&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return r.slice()}}(t):i(a(t))}},{"./_object-gopn":128,"./_to-iobject":151}],128:[function(t,e,n){var a=t("./_object-keys-internal"),i=t("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},{"./_enum-bug-keys":94,"./_object-keys-internal":131}],129:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],130:[function(t,e,n){var a=t("./_has"),i=t("./_to-object"),o=t("./_shared-key")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),a(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},{"./_has":102,"./_shared-key":142,"./_to-object":153}],131:[function(t,e,n){var r=t("./_has"),s=t("./_to-iobject"),l=t("./_array-includes")(!1),u=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var n,a=s(t),i=0,o=[];for(n in a)n!=u&&r(a,n)&&o.push(n);for(;e.length>i;)r(a,n=e[i++])&&(~l(o,n)||o.push(n));return o}},{"./_array-includes":81,"./_has":102,"./_shared-key":142,"./_to-iobject":151}],132:[function(t,e,n){var a=t("./_object-keys-internal"),i=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return a(t,i)}},{"./_enum-bug-keys":94,"./_object-keys-internal":131}],133:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],134:[function(t,e,n){e.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],135:[function(t,e,n){var a=t("./_an-object"),i=t("./_is-object"),o=t("./_new-promise-capability");e.exports=function(t,e){if(a(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},{"./_an-object":78,"./_is-object":111,"./_new-promise-capability":122}],136:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],137:[function(t,e,n){var i=t("./_redefine");e.exports=function(t,e,n){for(var a in e)i(t,a,e[a],n);return t}},{"./_redefine":138}],138:[function(t,e,n){var o=t("./_global"),r=t("./_hide"),s=t("./_has"),l=t("./_uid")("src"),a=t("./_function-to-string"),u=(""+a).split("toString");t("./_core").inspectSource=function(t){return a.call(t)},(e.exports=function(t,e,n,a){var i="function"==typeof n;i&&(s(n,"name")||r(n,"name",e)),t[e]!==n&&(i&&(s(n,l)||r(n,l,t[e]?""+t[e]:u.join(String(e)))),t===o?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[l]||a.call(this)})},{"./_core":89,"./_function-to-string":100,"./_global":101,"./_has":102,"./_hide":103,"./_uid":158}],139:[function(e,t,n){var a=e("./_is-object"),i=e("./_an-object"),o=function(t,e){if(i(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,a){try{(a=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:a(t,e),t}}({},!1):void 0),check:o}},{"./_an-object":78,"./_ctx":90,"./_is-object":111,"./_object-gopd":126}],140:[function(t,e,n){"use strict";var a=t("./_global"),i=t("./_object-dp"),o=t("./_descriptors"),r=t("./_wks")("species");e.exports=function(t){var e=a[t];o&&e&&!e[r]&&i.f(e,r,{configurable:!0,get:function(){return this}})}},{"./_descriptors":92,"./_global":101,"./_object-dp":124,"./_wks":163}],141:[function(t,e,n){var a=t("./_object-dp").f,i=t("./_has"),o=t("./_wks")("toStringTag");e.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&a(t,o,{configurable:!0,value:e})}},{"./_has":102,"./_object-dp":124,"./_wks":163}],142:[function(t,e,n){var a=t("./_shared")("keys"),i=t("./_uid");e.exports=function(t){return a[t]||(a[t]=i(t))}},{"./_shared":143,"./_uid":158}],143:[function(t,e,n){var a=t("./_core"),i=t("./_global"),o="__core-js_shared__",r=i[o]||(i[o]={});(e.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:a.version,mode:t("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":89,"./_global":101,"./_library":119}],144:[function(t,e,n){var i=t("./_an-object"),o=t("./_a-function"),r=t("./_wks")("species");e.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||null==(n=i(a)[r])?e:o(n)}},{"./_a-function":75,"./_an-object":78,"./_wks":163}],145:[function(t,e,n){var l=t("./_to-integer"),u=t("./_defined");e.exports=function(s){return function(t,e){var n,a,i=String(u(t)),o=l(e),r=i.length;return o<0||r<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===r||(a=i.charCodeAt(o+1))<56320||57343<a?s?i.charAt(o):n:s?i.slice(o,o+2):a-56320+(n-55296<<10)+65536}}},{"./_defined":91,"./_to-integer":150}],146:[function(t,e,n){var a=t("./_is-regexp"),i=t("./_defined");e.exports=function(t,e,n){if(a(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},{"./_defined":91,"./_is-regexp":112}],147:[function(t,e,n){var a,i,o,r=t("./_ctx"),s=t("./_invoke"),l=t("./_html"),u=t("./_dom-create"),d=t("./_global"),c=d.process,f=d.setImmediate,h=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,g=0,v={},y="onreadystatechange",_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},b=function(t){_.call(t.data)};f&&h||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++g]=function(){s("function"==typeof t?t:Function(t),e)},a(g),g},h=function(t){delete v[t]},"process"==t("./_cof")(c)?a=function(t){c.nextTick(r(_,t,1))}:m&&m.now?a=function(t){m.now(r(_,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,a=r(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(a=function(t){d.postMessage(t+"","*")},d.addEventListener("message",b,!1)):a=y in u("script")?function(t){l.appendChild(u("script"))[y]=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(r(_,t,1),0)}),e.exports={set:f,clear:h}},{"./_cof":86,"./_ctx":90,"./_dom-create":93,"./_global":101,"./_html":104,"./_invoke":107}],148:[function(t,e,n){var a=t("./_to-integer"),i=Math.max,o=Math.min;e.exports=function(t,e){return(t=a(t))<0?i(t+e,0):o(t,e)}},{"./_to-integer":150}],149:[function(t,e,n){var a=t("./_to-integer"),i=t("./_to-length");e.exports=function(t){if(void 0===t)return 0;var e=a(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},{"./_to-integer":150,"./_to-length":152}],150:[function(t,e,n){var a=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(0<t?i:a)(t)}},{}],151:[function(t,e,n){var a=t("./_iobject"),i=t("./_defined");e.exports=function(t){return a(i(t))}},{"./_defined":91,"./_iobject":108}],152:[function(t,e,n){var a=t("./_to-integer"),i=Math.min;e.exports=function(t){return 0<t?i(a(t),9007199254740991):0}},{"./_to-integer":150}],153:[function(t,e,n){var a=t("./_defined");e.exports=function(t){return Object(a(t))}},{"./_defined":91}],154:[function(t,e,n){var i=t("./_is-object");e.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":111}],155:[function(t,e,n){"use strict";if(t("./_descriptors")){var v=t("./_library"),y=t("./_global"),_=t("./_fails"),b=t("./_export"),w=t("./_typed"),a=t("./_typed-buffer"),f=t("./_ctx"),E=t("./_an-instance"),i=t("./_property-desc"),T=t("./_hide"),o=t("./_redefine-all"),r=t("./_to-integer"),k=t("./_to-length"),P=t("./_to-index"),s=t("./_to-absolute-index"),l=t("./_to-primitive"),u=t("./_has"),x=t("./_classof"),C=t("./_is-object"),h=t("./_to-object"),p=t("./_is-array-iter"),O=t("./_object-create"),S=t("./_object-gpo"),L=t("./_object-gopn").f,m=t("./core.get-iterator-method"),d=t("./_uid"),c=t("./_wks"),g=t("./_array-methods"),M=t("./_array-includes"),A=t("./_species-constructor"),R=t("./es6.array.iterator"),B=t("./_iterators"),I=t("./_iter-detect"),F=t("./_set-species"),N=t("./_array-fill"),D=t("./_array-copy-within"),j=t("./_object-dp"),H=t("./_object-gopd"),W=j.f,U=H.f,Y=y.RangeError,q=y.TypeError,z=y.Uint8Array,G="ArrayBuffer",X="Shared"+G,V="BYTES_PER_ELEMENT",K="prototype",Z=Array[K],$=a.ArrayBuffer,Q=a.DataView,J=g(0),tt=g(2),et=g(3),nt=g(4),at=g(5),it=g(6),ot=M(!0),rt=M(!1),st=R.values,lt=R.keys,ut=R.entries,dt=Z.lastIndexOf,ct=Z.reduce,ft=Z.reduceRight,ht=Z.join,pt=Z.sort,mt=Z.slice,gt=Z.toString,vt=Z.toLocaleString,yt=c("iterator"),_t=c("toStringTag"),bt=d("typed_constructor"),wt=d("def_constructor"),Et=w.CONSTR,Tt=w.TYPED,kt=w.VIEW,Pt="Wrong length!",xt=g(1,function(t,e){return Mt(A(t,t[wt]),e)}),Ct=_(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),Ot=!!z&&!!z[K].set&&_(function(){new z(1).set({})}),St=function(t,e){var n=r(t);if(n<0||n%e)throw Y("Wrong offset!");return n},Lt=function(t){if(C(t)&&Tt in t)return t;throw q(t+" is not a typed array!")},Mt=function(t,e){if(!(C(t)&&bt in t))throw q("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Rt(A(t,t[wt]),e)},Rt=function(t,e){for(var n=0,a=e.length,i=Mt(t,a);n<a;)i[n]=e[n++];return i},Bt=function(t,e,n){W(t,e,{get:function(){return this._d[n]}})},It=function(t){var e,n,a,i,o,r,s=h(t),l=arguments.length,u=1<l?arguments[1]:void 0,d=void 0!==u,c=m(s);if(null!=c&&!p(c)){for(r=c.call(s),a=[],e=0;!(o=r.next()).done;e++)a.push(o.value);s=a}for(d&&2<l&&(u=f(u,arguments[2],2)),e=0,n=k(s.length),i=Mt(this,n);e<n;e++)i[e]=d?u(s[e],e):s[e];return i},Ft=function(){for(var t=0,e=arguments.length,n=Mt(this,e);t<e;)n[t]=arguments[t++];return n},Nt=!!z&&_(function(){vt.call(new z(1))}),Dt=function(){return vt.apply(Nt?mt.call(Lt(this)):Lt(this),arguments)},jt={copyWithin:function(t,e){return D.call(Lt(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return nt(Lt(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return N.apply(Lt(this),arguments)},filter:function(t){return At(this,tt(Lt(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return at(Lt(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(Lt(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){J(Lt(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return rt(Lt(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(Lt(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return ht.apply(Lt(this),arguments)},lastIndexOf:function(t){return dt.apply(Lt(this),arguments)},map:function(t){return xt(Lt(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return ct.apply(Lt(this),arguments)},reduceRight:function(t){return ft.apply(Lt(this),arguments)},reverse:function(){for(var t,e=Lt(this).length,n=Math.floor(e/2),a=0;a<n;)t=this[a],this[a++]=this[--e],this[e]=t;return this},some:function(t){return et(Lt(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(Lt(this),t)},subarray:function(t,e){var n=Lt(this),a=n.length,i=s(t,a);return new(A(n,n[wt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,k((void 0===e?a:s(e,a))-i))}},Ht=function(t,e){return At(this,mt.call(Lt(this),t,e))},Wt=function(t){Lt(this);var e=St(arguments[1],1),n=this.length,a=h(t),i=k(a.length),o=0;if(n<i+e)throw Y(Pt);for(;o<i;)this[e+o]=a[o++]},Ut={entries:function(){return ut.call(Lt(this))},keys:function(){return lt.call(Lt(this))},values:function(){return st.call(Lt(this))}},Yt=function(t,e){return C(t)&&t[Tt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},qt=function(t,e){return Yt(t,e=l(e,!0))?i(2,t[e]):U(t,e)},zt=function(t,e,n){return!(Yt(t,e=l(e,!0))&&C(n)&&u(n,"value"))||u(n,"get")||u(n,"set")||n.configurable||u(n,"writable")&&!n.writable||u(n,"enumerable")&&!n.enumerable?W(t,e,n):(t[e]=n.value,t)};Et||(H.f=qt,j.f=zt),b(b.S+b.F*!Et,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),_(function(){gt.call({})})&&(gt=vt=function(){return ht.call(this)});var Gt=o({},jt);o(Gt,Ut),T(Gt,yt,Ut.values),o(Gt,{slice:Ht,set:Wt,constructor:function(){},toString:gt,toLocaleString:Dt}),Bt(Gt,"buffer","b"),Bt(Gt,"byteOffset","o"),Bt(Gt,"byteLength","l"),Bt(Gt,"length","e"),W(Gt,_t,{get:function(){return this[Tt]}}),e.exports=function(t,c,e,o){var f=t+((o=!!o)?"Clamped":"")+"Array",n="get"+t,r="set"+t,h=y[f],s=h||{},a=h&&S(h),i=!h||!w.ABV,l={},u=h&&h[K],p=function(t,i){W(t,i,{get:function(){return t=i,(e=this._d).v[n](t*c+e.o,Ct);var t,e},set:function(t){return e=i,n=t,a=this._d,o&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),void a.v[r](e*c+a.o,n,Ct);var e,n,a},enumerable:!0})};i?(h=e(function(t,e,n,a){E(t,h,f,"_d");var i,o,r,s,l=0,u=0;if(C(e)){if(!(e instanceof $||(s=x(e))==G||s==X))return Tt in e?Rt(h,e):It.call(h,e);i=e,u=St(n,c);var d=e.byteLength;if(void 0===a){if(d%c)throw Y(Pt);if((o=d-u)<0)throw Y(Pt)}else if(d<(o=k(a)*c)+u)throw Y(Pt);r=o/c}else r=P(e),i=new $(o=r*c);for(T(t,"_d",{b:i,o:u,l:o,e:r,v:new Q(i)});l<r;)p(t,l++)}),u=h[K]=O(Gt),T(u,"constructor",h)):_(function(){h(1)})&&_(function(){new h(-1)})&&I(function(t){new h,new h(null),new h(1.5),new h(t)},!0)||(h=e(function(t,e,n,a){var i;return E(t,h,f),C(e)?e instanceof $||(i=x(e))==G||i==X?void 0!==a?new s(e,St(n,c),a):void 0!==n?new s(e,St(n,c)):new s(e):Tt in e?Rt(h,e):It.call(h,e):new s(P(e))}),J(a!==Function.prototype?L(s).concat(L(a)):L(s),function(t){t in h||T(h,t,s[t])}),h[K]=u,v||(u.constructor=h));var d=u[yt],m=!!d&&("values"==d.name||null==d.name),g=Ut.values;T(h,bt,!0),T(u,Tt,f),T(u,kt,!0),T(u,wt,h),(o?new h(1)[_t]==f:_t in u)||W(u,_t,{get:function(){return f}}),l[f]=h,b(b.G+b.W+b.F*(h!=s),l),b(b.S,f,{BYTES_PER_ELEMENT:c}),b(b.S+b.F*_(function(){s.of.call(h,1)}),f,{from:It,of:Ft}),V in u||T(u,V,c),b(b.P,f,jt),F(f),b(b.P+b.F*Ot,f,{set:Wt}),b(b.P+b.F*!m,f,Ut),v||u.toString==gt||(u.toString=gt),b(b.P+b.F*_(function(){new h(1).slice()}),f,{slice:Ht}),b(b.P+b.F*(_(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!_(function(){u.toLocaleString.call([1,2])})),f,{toLocaleString:Dt}),B[f]=m?d:g,v||m||T(u,yt,g)}}else e.exports=function(){}},{"./_an-instance":77,"./_array-copy-within":79,"./_array-fill":80,"./_array-includes":81,"./_array-methods":82,"./_classof":85,"./_ctx":90,"./_descriptors":92,"./_export":96,"./_fails":98,"./_global":101,"./_has":102,"./_hide":103,"./_is-array-iter":109,"./_is-object":111,"./_iter-detect":116,"./_iterators":118,"./_library":119,"./_object-create":123,"./_object-dp":124,"./_object-gopd":126,"./_object-gopn":128,"./_object-gpo":130,"./_property-desc":136,"./_redefine-all":137,"./_set-species":140,"./_species-constructor":144,"./_to-absolute-index":148,"./_to-index":149,"./_to-integer":150,"./_to-length":152,"./_to-object":153,"./_to-primitive":154,"./_typed":157,"./_typed-buffer":156,"./_uid":158,"./_wks":163,"./core.get-iterator-method":164,"./es6.array.iterator":166}],156:[function(t,e,n){"use strict";var a=t("./_global"),i=t("./_descriptors"),o=t("./_library"),r=t("./_typed"),s=t("./_hide"),l=t("./_redefine-all"),u=t("./_fails"),d=t("./_an-instance"),c=t("./_to-integer"),f=t("./_to-length"),h=t("./_to-index"),p=t("./_object-gopn").f,m=t("./_object-dp").f,g=t("./_array-fill"),v=t("./_set-to-string-tag"),y="ArrayBuffer",_="DataView",b="prototype",w="Wrong index!",E=a[y],T=a[_],k=a.Math,P=a.RangeError,x=a.Infinity,C=E,O=k.abs,S=k.pow,L=k.floor,M=k.log,A=k.LN2,R="byteLength",B="byteOffset",I=i?"_b":"buffer",F=i?"_l":R,N=i?"_o":B;function D(t,e,n){var a,i,o,r=new Array(n),s=8*n-e-1,l=(1<<s)-1,u=l>>1,d=23===e?S(2,-24)-S(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for((t=O(t))!=t||t===x?(i=t!=t?1:0,a=l):(a=L(M(t)/A),t*(o=S(2,-a))<1&&(a--,o*=2),2<=(t+=1<=a+u?d/o:d*S(2,1-u))*o&&(a++,o/=2),l<=a+u?(i=0,a=l):1<=a+u?(i=(t*o-1)*S(2,e),a+=u):(i=t*S(2,u-1)*S(2,e),a=0));8<=e;r[c++]=255&i,i/=256,e-=8);for(a=a<<e|i,s+=e;0<s;r[c++]=255&a,a/=256,s-=8);return r[--c]|=128*f,r}function j(t,e,n){var a,i=8*n-e-1,o=(1<<i)-1,r=o>>1,s=i-7,l=n-1,u=t[l--],d=127&u;for(u>>=7;0<s;d=256*d+t[l],l--,s-=8);for(a=d&(1<<-s)-1,d>>=-s,s+=e;0<s;a=256*a+t[l],l--,s-=8);if(0===d)d=1-r;else{if(d===o)return a?NaN:u?-x:x;a+=S(2,e),d-=r}return(u?-1:1)*a*S(2,d-e)}function H(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function W(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function Y(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function q(t){return D(t,52,8)}function z(t){return D(t,23,4)}function G(t,e,n){m(t[b],e,{get:function(){return this[n]}})}function X(t,e,n,a){var i=h(+n);if(i+e>t[F])throw P(w);var o=t[I]._b,r=i+t[N],s=o.slice(r,r+e);return a?s:s.reverse()}function V(t,e,n,a,i,o){var r=h(+n);if(r+e>t[F])throw P(w);for(var s=t[I]._b,l=r+t[N],u=a(+i),d=0;d<e;d++)s[l+d]=u[o?d:e-d-1]}if(r.ABV){if(!u(function(){E(1)})||!u(function(){new E(-1)})||u(function(){return new E,new E(1.5),new E(NaN),E.name!=y})){for(var K,Z=(E=function(t){return d(this,E),new C(h(t))})[b]=C[b],$=p(C),Q=0;$.length>Q;)(K=$[Q++])in E||s(E,K,C[K]);o||(Z.constructor=E)}var J=new T(new E(2)),tt=T[b].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||l(T[b],{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else E=function(t){d(this,E,y);var e=h(t);this._b=g.call(new Array(e),0),this[F]=e},T=function(t,e,n){d(this,T,_),d(t,E,_);var a=t[F],i=c(e);if(i<0||a<i)throw P("Wrong offset!");if(a<i+(n=void 0===n?a-i:f(n)))throw P("Wrong length!");this[I]=t,this[N]=i,this[F]=n},i&&(G(E,R,"_l"),G(T,"buffer","_b"),G(T,R,"_l"),G(T,B,"_o")),l(T[b],{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t){var e=X(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=X(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return H(X(this,4,t,arguments[1]))},getUint32:function(t){return H(X(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return j(X(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return j(X(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){V(this,1,t,W,e)},setUint8:function(t,e){V(this,1,t,W,e)},setInt16:function(t,e){V(this,2,t,U,e,arguments[2])},setUint16:function(t,e){V(this,2,t,U,e,arguments[2])},setInt32:function(t,e){V(this,4,t,Y,e,arguments[2])},setUint32:function(t,e){V(this,4,t,Y,e,arguments[2])},setFloat32:function(t,e){V(this,4,t,z,e,arguments[2])},setFloat64:function(t,e){V(this,8,t,q,e,arguments[2])}});v(E,y),v(T,_),s(T[b],r.VIEW,!0),n[y]=E,n[_]=T},{"./_an-instance":77,"./_array-fill":80,"./_descriptors":92,"./_fails":98,"./_global":101,"./_hide":103,"./_library":119,"./_object-dp":124,"./_object-gopn":128,"./_redefine-all":137,"./_set-to-string-tag":141,"./_to-index":149,"./_to-integer":150,"./_to-length":152,"./_typed":157}],157:[function(t,e,n){for(var a,i=t("./_global"),o=t("./_hide"),r=t("./_uid"),s=r("typed_array"),l=r("view"),u=!(!i.ArrayBuffer||!i.DataView),d=u,c=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(a=i[f[c++]])?(o(a.prototype,s,!0),o(a.prototype,l,!0)):d=!1;e.exports={ABV:u,CONSTR:d,TYPED:s,VIEW:l}},{"./_global":101,"./_hide":103,"./_uid":158}],158:[function(t,e,n){var a=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++a+i).toString(36))}},{}],159:[function(t,e,n){var a=t("./_global").navigator;e.exports=a&&a.userAgent||""},{"./_global":101}],160:[function(t,e,n){var a=t("./_is-object");e.exports=function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},{"./_is-object":111}],161:[function(t,e,n){var a=t("./_global"),i=t("./_core"),o=t("./_library"),r=t("./_wks-ext"),s=t("./_object-dp").f;e.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:a.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:r.f(t)})}},{"./_core":89,"./_global":101,"./_library":119,"./_object-dp":124,"./_wks-ext":162}],162:[function(t,e,n){n.f=t("./_wks")},{"./_wks":163}],163:[function(t,e,n){var a=t("./_shared")("wks"),i=t("./_uid"),o=t("./_global").Symbol,r="function"==typeof o;(e.exports=function(t){return a[t]||(a[t]=r&&o[t]||(r?o:i)("Symbol."+t))}).store=a},{"./_global":101,"./_shared":143,"./_uid":158}],164:[function(t,e,n){var a=t("./_classof"),i=t("./_wks")("iterator"),o=t("./_iterators");e.exports=t("./_core").getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[a(t)]}},{"./_classof":85,"./_core":89,"./_iterators":118,"./_wks":163}],165:[function(t,e,n){var a=t("./_export");a(a.P,"Array",{fill:t("./_array-fill")}),t("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":76,"./_array-fill":80,"./_export":96}],166:[function(t,e,n){"use strict";var a=t("./_add-to-unscopables"),i=t("./_iter-step"),o=t("./_iterators"),r=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},{"./_add-to-unscopables":76,"./_iter-define":115,"./_iter-step":117,"./_iterators":118,"./_to-iobject":151}],167:[function(t,e,n){"use strict";var a=t("./_collection-strong"),i=t("./_validate-collection");e.exports=t("./_collection")("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var e=a.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return a.def(i(this,"Map"),0===t?0:t,e)}},a,!0)},{"./_collection":88,"./_collection-strong":87,"./_validate-collection":160}],168:[function(t,e,n){"use strict";var a=t("./_classof"),i={};i[t("./_wks")("toStringTag")]="z",i+""!="[object z]"&&t("./_redefine")(Object.prototype,"toString",function(){return"[object "+a(this)+"]"},!0)},{"./_classof":85,"./_redefine":138,"./_wks":163}],169:[function(n,t,e){"use strict";var a,i,o,r,s=n("./_library"),l=n("./_global"),u=n("./_ctx"),d=n("./_classof"),c=n("./_export"),f=n("./_is-object"),h=n("./_a-function"),p=n("./_an-instance"),m=n("./_for-of"),g=n("./_species-constructor"),v=n("./_task").set,y=n("./_microtask")(),_=n("./_new-promise-capability"),b=n("./_perform"),w=n("./_user-agent"),E=n("./_promise-resolve"),T="Promise",k=l.TypeError,P=l.process,x=P&&P.versions,C=x&&x.v8||"",O=l[T],S="process"==d(P),L=function(){},M=i=_.f,A=!!function(){try{var t=O.resolve(1),e=(t.constructor={})[n("./_wks")("species")]=function(t){t(L,L)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),R=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},B=function(d,n){if(!d._n){d._n=!0;var a=d._c;y(function(){for(var l=d._v,u=1==d._s,t=0,e=function(t){var e,n,a,i=u?t.ok:t.fail,o=t.resolve,r=t.reject,s=t.domain;try{i?(u||(2==d._h&&N(d),d._h=1),!0===i?e=l:(s&&s.enter(),e=i(l),s&&(s.exit(),a=!0)),e===t.promise?r(k("Promise-chain cycle")):(n=R(e))?n.call(e,o,r):o(e)):r(l)}catch(t){s&&!a&&s.exit(),r(t)}};a.length>t;)e(a[t++]);d._c=[],d._n=!1,n&&!d._h&&I(d)})}},I=function(o){v.call(l,function(){var t,e,n,a=o._v,i=F(o);if(i&&(t=b(function(){S?P.emit("unhandledRejection",a,o):(e=l.onunhandledrejection)?e({promise:o,reason:a}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",a)}),o._h=S||F(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(e){v.call(l,function(){var t;S?P.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),B(e,!0))},j=function(t){var n,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===t)throw k("Promise can't be resolved itself");(n=R(t))?y(function(){var e={_w:a,_d:!1};try{n.call(t,u(j,e,1),u(D,e,1))}catch(t){D.call(e,t)}}):(a._v=t,a._s=1,B(a,!1))}catch(t){D.call({_w:a,_d:!1},t)}}};A||(O=function(t){p(this,O,T,"_h"),h(t),a.call(this);try{t(u(j,this,1),u(D,this,1))}catch(t){D.call(this,t)}},(a=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("./_redefine-all")(O.prototype,{then:function(t,e){var n=M(g(this,O));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=S?P.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&B(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new a;this.promise=t,this.resolve=u(j,t,1),this.reject=u(D,t,1)},_.f=M=function(t){return t===O||t===r?new o(t):i(t)}),c(c.G+c.W+c.F*!A,{Promise:O}),n("./_set-to-string-tag")(O,T),n("./_set-species")(T),r=n("./_core")[T],c(c.S+c.F*!A,T,{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(s||!A),T,{resolve:function(t){return E(s&&this===r?O:this,t)}}),c(c.S+c.F*!(A&&n("./_iter-detect")(function(t){O.all(t).catch(L)})),T,{all:function(t){var r=this,e=M(r),s=e.resolve,l=e.reject,n=b(function(){var a=[],i=0,o=1;m(t,!1,function(t){var e=i++,n=!1;a.push(void 0),o++,r.resolve(t).then(function(t){n||(n=!0,a[e]=t,--o||s(a))},l)}),--o||s(a)});return n.e&&l(n.v),e.promise},race:function(t){var e=this,n=M(e),a=n.reject,i=b(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,a)})});return i.e&&a(i.v),n.promise}})},{"./_a-function":75,"./_an-instance":77,"./_classof":85,"./_core":89,"./_ctx":90,"./_export":96,"./_for-of":99,"./_global":101,"./_is-object":111,"./_iter-detect":116,"./_library":119,"./_microtask":121,"./_new-promise-capability":122,"./_perform":134,"./_promise-resolve":135,"./_redefine-all":137,"./_set-species":140,"./_set-to-string-tag":141,"./_species-constructor":144,"./_task":147,"./_user-agent":159,"./_wks":163}],170:[function(t,e,n){"use strict";var a=t("./_collection-strong"),i=t("./_validate-collection");e.exports=t("./_collection")("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return a.def(i(this,"Set"),t=0===t?0:t,t)}},a)},{"./_collection":88,"./_collection-strong":87,"./_validate-collection":160}],171:[function(t,e,n){"use strict";var a=t("./_export"),r=t("./_to-length"),s=t("./_string-context"),l="endsWith",u=""[l];a(a.P+a.F*t("./_fails-is-regexp")(l),"String",{endsWith:function(t){var e=s(this,t,l),n=1<arguments.length?arguments[1]:void 0,a=r(e.length),i=void 0===n?a:Math.min(r(n),a),o=String(t);return u?u.call(e,o,i):e.slice(i-o.length,i)===o}})},{"./_export":96,"./_fails-is-regexp":97,"./_string-context":146,"./_to-length":152}],172:[function(t,e,n){"use strict";var a=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=a(e,n),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":115,"./_string-at":145}],173:[function(t,e,n){"use strict";var a=t("./_global"),r=t("./_has"),i=t("./_descriptors"),o=t("./_export"),s=t("./_redefine"),l=t("./_meta").KEY,u=t("./_fails"),d=t("./_shared"),c=t("./_set-to-string-tag"),f=t("./_uid"),h=t("./_wks"),p=t("./_wks-ext"),m=t("./_wks-define"),g=t("./_enum-keys"),v=t("./_is-array"),y=t("./_an-object"),_=t("./_is-object"),b=t("./_to-object"),w=t("./_to-iobject"),E=t("./_to-primitive"),T=t("./_property-desc"),k=t("./_object-create"),P=t("./_object-gopn-ext"),x=t("./_object-gopd"),C=t("./_object-gops"),O=t("./_object-dp"),S=t("./_object-keys"),L=x.f,M=O.f,A=P.f,R=a.Symbol,B=a.JSON,I=B&&B.stringify,F="prototype",N=h("_hidden"),D=h("toPrimitive"),j={}.propertyIsEnumerable,H=d("symbol-registry"),W=d("symbols"),U=d("op-symbols"),Y=Object[F],q="function"==typeof R&&!!C.f,z=a.QObject,G=!z||!z[F]||!z[F].findChild,X=i&&u(function(){return 7!=k(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var a=L(Y,e);a&&delete Y[e],M(t,e,n),a&&t!==Y&&M(Y,e,a)}:M,V=function(t){var e=W[t]=k(R[F]);return e._k=t,e},K=q&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},Z=function(t,e,n){return t===Y&&Z(U,e,n),y(t),e=E(e,!0),y(n),r(W,e)?(n.enumerable?(r(t,N)&&t[N][e]&&(t[N][e]=!1),n=k(n,{enumerable:T(0,!1)})):(r(t,N)||M(t,N,T(1,{})),t[N][e]=!0),X(t,e,n)):M(t,e,n)},$=function(t,e){y(t);for(var n,a=g(e=w(e)),i=0,o=a.length;i<o;)Z(t,n=a[i++],e[n]);return t},Q=function(t){var e=j.call(this,t=E(t,!0));return!(this===Y&&r(W,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(W,t)||r(this,N)&&this[N][t])||e)},J=function(t,e){if(t=w(t),e=E(e,!0),t!==Y||!r(W,e)||r(U,e)){var n=L(t,e);return!n||!r(W,e)||r(t,N)&&t[N][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=A(w(t)),a=[],i=0;n.length>i;)r(W,e=n[i++])||e==N||e==l||a.push(e);return a},et=function(t){for(var e,n=t===Y,a=A(n?U:w(t)),i=[],o=0;a.length>o;)!r(W,e=a[o++])||n&&!r(Y,e)||i.push(W[e]);return i};q||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(0<arguments.length?arguments[0]:void 0),n=function(t){this===Y&&n.call(U,t),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),X(this,e,T(1,t))};return i&&G&&X(Y,e,{configurable:!0,set:n}),V(e)})[F],"toString",function(){return this._k}),x.f=J,O.f=Z,t("./_object-gopn").f=P.f=tt,t("./_object-pie").f=Q,C.f=et,i&&!t("./_library")&&s(Y,"propertyIsEnumerable",Q,!0),p.f=function(t){return V(h(t))}),o(o.G+o.W+o.F*!q,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;nt.length>at;)h(nt[at++]);for(var it=S(h.store),ot=0;it.length>ot;)m(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return r(H,t+="")?H[t]:H[t]=R(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in H)if(H[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,e){return void 0===e?k(t):$(k(t),e)},defineProperty:Z,defineProperties:$,getOwnPropertyDescriptor:J,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var rt=u(function(){C.f(1)});o(o.S+o.F*rt,"Object",{getOwnPropertySymbols:function(t){return C.f(b(t))}}),B&&o(o.S+o.F*(!q||u(function(){var t=R();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,n,a=[t],i=1;arguments.length>i;)a.push(arguments[i++]);if(n=e=a[1],(_(e)||void 0!==t)&&!K(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),a[1]=e,I.apply(B,a)}}),R[F][D]||t("./_hide")(R[F],D,R[F].valueOf),c(R,"Symbol"),c(Math,"Math",!0),c(a.JSON,"JSON",!0)},{"./_an-object":78,"./_descriptors":92,"./_enum-keys":95,"./_export":96,"./_fails":98,"./_global":101,"./_has":102,"./_hide":103,"./_is-array":110,"./_is-object":111,"./_library":119,"./_meta":120,"./_object-create":123,"./_object-dp":124,"./_object-gopd":126,"./_object-gopn":128,"./_object-gopn-ext":127,"./_object-gops":129,"./_object-keys":132,"./_object-pie":133,"./_property-desc":136,"./_redefine":138,"./_set-to-string-tag":141,"./_shared":143,"./_to-iobject":151,"./_to-object":153,"./_to-primitive":154,"./_uid":158,"./_wks":163,"./_wks-define":161,"./_wks-ext":162}],174:[function(t,e,n){"use strict";var a=t("./_export"),i=t("./_typed"),o=t("./_typed-buffer"),u=t("./_an-object"),d=t("./_to-absolute-index"),c=t("./_to-length"),r=t("./_is-object"),s=t("./_global").ArrayBuffer,f=t("./_species-constructor"),h=o.ArrayBuffer,p=o.DataView,l=i.ABV&&s.isView,m=h.prototype.slice,g=i.VIEW,v="ArrayBuffer";a(a.G+a.W+a.F*(s!==h),{ArrayBuffer:h}),a(a.S+a.F*!i.CONSTR,v,{isView:function(t){return l&&l(t)||r(t)&&g in t}}),a(a.P+a.U+a.F*t("./_fails")(function(){return!new h(2).slice(1,void 0).byteLength}),v,{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(u(this),t);for(var n=u(this).byteLength,a=d(t,n),i=d(void 0===e?n:e,n),o=new(f(this,h))(c(i-a)),r=new p(this),s=new p(o),l=0;a<i;)s.setUint8(l++,r.getUint8(a++));return o}}),t("./_set-species")(v)},{"./_an-object":78,"./_export":96,"./_fails":98,"./_global":101,"./_is-object":111,"./_set-species":140,"./_species-constructor":144,"./_to-absolute-index":148,"./_to-length":152,"./_typed":157,"./_typed-buffer":156}],175:[function(t,e,n){var a=t("./_export");a(a.G+a.W+a.F*!t("./_typed").ABV,{DataView:t("./_typed-buffer").DataView})},{"./_export":96,"./_typed":157,"./_typed-buffer":156}],176:[function(t,e,n){t("./_typed-array")("Float32",4,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],177:[function(t,e,n){t("./_typed-array")("Float64",8,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],178:[function(t,e,n){t("./_typed-array")("Int16",2,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],179:[function(t,e,n){t("./_typed-array")("Int32",4,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],180:[function(t,e,n){t("./_typed-array")("Int8",1,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],181:[function(t,e,n){t("./_typed-array")("Uint16",2,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],182:[function(t,e,n){t("./_typed-array")("Uint32",4,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],183:[function(t,e,n){t("./_typed-array")("Uint8",1,function(a){return function(t,e,n){return a(this,t,e,n)}})},{"./_typed-array":155}],184:[function(t,e,n){t("./_typed-array")("Uint8",1,function(a){return function(t,e,n){return a(this,t,e,n)}},!0)},{"./_typed-array":155}],185:[function(t,e,n){for(var a=t("./es6.array.iterator"),i=t("./_object-keys"),o=t("./_redefine"),r=t("./_global"),s=t("./_hide"),l=t("./_iterators"),u=t("./_wks"),d=u("iterator"),c=u("toStringTag"),f=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),m=0;m<p.length;m++){var g,v=p[m],y=h[v],_=r[v],b=_&&_.prototype;if(b&&(b[d]||s(b,d,f),b[c]||s(b,c,v),l[v]=f,y))for(g in a)b[g]||o(b,g,a[g],!0)}},{"./_global":101,"./_hide":103,"./_iterators":118,"./_object-keys":132,"./_redefine":138,"./_wks":163,"./es6.array.iterator":166}],186:[function(t,a,i){(function(n){(function(){var t,e;t=this,e=function(){"use strict";function d(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){i(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&e.status<=299}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,f=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(t,e,n){var a=c.URL||c.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin===location.origin?s(i):r(i.href)?d(t,e,n):s(i,i.target="_blank")):(i.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){s(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob((i=t,void 0===(o=n)?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i),e);else if(r(t))d(t,e,n);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){s(a)})}var i,o}:function(t,e,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return d(t,e,n);var i="application/octet-stream"===t.type,o=/constructor/i.test(c.HTMLElement)||c.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||i&&o||f)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},s.readAsDataURL(t)}else{var l=c.URL||c.webkitURL,u=l.createObjectURL(t);a?a.location=u:location.href=u,a=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});c.saveAs=i.saveAs=i,void 0!==a&&(a.exports=i)},void 0!==i?e():(e(),t.FileSaver={})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],187:[function(t,n,e){!function(t,e){"use strict";"object"==typeof n&&"object"==typeof n.exports?n.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(T,t){"use strict";var e=[],a=Object.getPrototypeOf,s=e.slice,m=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},l=e.push,i=e.indexOf,n={},o=n.toString,g=n.hasOwnProperty,r=g.toString,u=r.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},k=T.document,d={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var a,i,o=(n=n||k).createElement("script");if(o.text=t,e)for(a in d)(i=e[a]||e.getAttribute&&e.getAttribute(a))&&o.setAttribute(a,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[o.call(t)]||"object":typeof t}var P=function(t,e){return new P.fn.init(t,e)};function c(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}P.fn=P.prototype={jquery:"3.6.0",constructor:P,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=P.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return P.each(this,t)},map:function(n){return this.pushStack(P.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(P.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(P.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},P.extend=P.fn.extend=function(){var t,e,n,a,i,o,r=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[s]||{},s++),"object"==typeof r||y(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)a=t[e],"__proto__"!==e&&r!==a&&(u&&a&&(P.isPlainObject(a)||(i=Array.isArray(a)))?(n=r[e],o=i&&!Array.isArray(n)?[]:i||P.isPlainObject(n)?n:{},i=!1,r[e]=P.extend(u,o,a)):void 0!==a&&(r[e]=a));return r},P.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==o.call(t))&&(!(e=a(t))||"function"==typeof(n=g.call(e,"constructor")&&e.constructor)&&r.call(n)===u)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,a=0;if(c(t))for(n=t.length;a<n&&!1!==e.call(t[a],a,t[a]);a++);else for(a in t)if(!1===e.call(t[a],a,t[a]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(c(Object(t))?P.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:i.call(e,t,n)},merge:function(t,e){for(var n=+e.length,a=0,i=t.length;a<n;a++)t[i++]=e[a];return t.length=i,t},grep:function(t,e,n){for(var a=[],i=0,o=t.length,r=!n;i<o;i++)!e(t[i],i)!==r&&a.push(t[i]);return a},map:function(t,e,n){var a,i,o=0,r=[];if(c(t))for(a=t.length;o<a;o++)null!=(i=e(t[o],o,n))&&r.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&r.push(i);return m(r)},guid:1,support:v}),"function"==typeof Symbol&&(P.fn[Symbol.iterator]=e[Symbol.iterator]),P.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var f=function(n){var t,h,b,o,i,p,c,m,w,l,u,E,T,r,k,g,s,d,v,P="sizzle"+1*new Date,f=n.document,x=0,a=0,y=lt(),_=lt(),C=lt(),O=lt(),S=function(t,e){return t===e&&(u=!0),0},L={}.hasOwnProperty,e=[],M=e.pop,A=e.push,R=e.push,B=e.slice,I=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",D="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+N+"*("+D+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+N+"*\\]",H=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",W=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),Y=new RegExp("^"+N+"*,"+N+"*"),q=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),z=new RegExp(N+"|>"),G=new RegExp(H),X=new RegExp("^"+D+"$"),V={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},at=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){E()},rt=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(e=B.call(f.childNodes),f.childNodes),e[f.childNodes.length].nodeType}catch(t){R={apply:e.length?function(t,e){A.apply(t,B.call(e))}:function(t,e){for(var n=t.length,a=0;t[n++]=e[a++];);t.length=n-1}}}function st(e,t,n,a){var i,o,r,s,l,u,d,c=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!a&&(E(t),t=t||T,k)){if(11!==f&&(l=J.exec(e)))if(i=l[1]){if(9===f){if(!(r=t.getElementById(i)))return n;if(r.id===i)return n.push(r),n}else if(c&&(r=c.getElementById(i))&&v(t,r)&&r.id===i)return n.push(r),n}else{if(l[2])return R.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&h.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(i)),n}if(h.qsa&&!O[e+" "]&&(!g||!g.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(d=e,c=t,1===f&&(z.test(e)||q.test(e))){for((c=tt.test(e)&&vt(t.parentNode)||t)===t&&h.scope||((s=t.getAttribute("id"))?s=s.replace(at,it):t.setAttribute("id",s=P)),o=(u=p(e)).length;o--;)u[o]=(s?"#"+s:":scope")+" "+_t(u[o]);d=u.join(",")}try{return R.apply(n,c.querySelectorAll(d)),n}catch(t){O(e,!0)}finally{s===P&&t.removeAttribute("id")}}}return m(e.replace(U,"$1"),t,n,a)}function lt(){var a=[];return function t(e,n){return a.push(e+" ")>b.cacheLength&&delete t[a.shift()],t[e+" "]=n}}function ut(t){return t[P]=!0,t}function dt(t){var e=T.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),a=n.length;a--;)b.attrHandle[n[a]]=e}function ft(t,e){var n=e&&t,a=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(a)return a;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function mt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&rt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function gt(r){return ut(function(o){return o=+o,ut(function(t,e){for(var n,a=r([],t.length,o),i=a.length;i--;)t[n=a[i]]&&(t[n]=!(e[n]=t[n]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in h=st.support={},i=st.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!K.test(e||n&&n.nodeName||"HTML")},E=st.setDocument=function(t){var e,n,a=t?t.ownerDocument||t:f;return a!=T&&9===a.nodeType&&a.documentElement&&(r=(T=a).documentElement,k=!i(T),f!=T&&(n=T.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ot,!1):n.attachEvent&&n.attachEvent("onunload",ot)),h.scope=dt(function(t){return r.appendChild(t).appendChild(T.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),h.attributes=dt(function(t){return t.className="i",!t.getAttribute("className")}),h.getElementsByTagName=dt(function(t){return t.appendChild(T.createComment("")),!t.getElementsByTagName("*").length}),h.getElementsByClassName=Q.test(T.getElementsByClassName),h.getById=dt(function(t){return r.appendChild(t).id=P,!T.getElementsByName||!T.getElementsByName(P).length}),h.getById?(b.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var n=e.getElementById(t);return n?[n]:[]}}):(b.filter.ID=function(t){var n=t.replace(et,nt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var n,a,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),a=0;o=i[a++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),b.find.TAG=h.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):h.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,a=[],i=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[i++];)1===n.nodeType&&a.push(n);return a},b.find.CLASS=h.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&k)return e.getElementsByClassName(t)},s=[],g=[],(h.qsa=Q.test(T.querySelectorAll))&&(dt(function(t){var e;r.appendChild(t).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+N+"*(?:value|"+F+")"),t.querySelectorAll("[id~="+P+"-]").length||g.push("~="),(e=T.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+P+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),dt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=T.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),r.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=Q.test(d=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&dt(function(t){h.disconnectedMatch=d.call(t,"*"),d.call(t,"[s!='']:x"),s.push("!=",H)}),g=g.length&&new RegExp(g.join("|")),s=s.length&&new RegExp(s.join("|")),e=Q.test(r.compareDocumentPosition),v=e||Q.test(r.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,a=e&&e.parentNode;return t===a||!(!a||1!==a.nodeType||!(n.contains?n.contains(a):t.compareDocumentPosition&&16&t.compareDocumentPosition(a)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!h.sortDetached&&e.compareDocumentPosition(t)===n?t==T||t.ownerDocument==f&&v(f,t)?-1:e==T||e.ownerDocument==f&&v(f,e)?1:l?I(l,t)-I(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,a=0,i=t.parentNode,o=e.parentNode,r=[t],s=[e];if(!i||!o)return t==T?-1:e==T?1:i?-1:o?1:l?I(l,t)-I(l,e):0;if(i===o)return ft(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;r[a]===s[a];)a++;return a?ft(r[a],s[a]):r[a]==f?-1:s[a]==f?1:0}),T},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(E(t),h.matchesSelector&&k&&!O[e+" "]&&(!s||!s.test(e))&&(!g||!g.test(e)))try{var n=d.call(t,e);if(n||h.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){O(e,!0)}return 0<st(e,T,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=T&&E(t),v(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=T&&E(t);var n=b.attrHandle[e.toLowerCase()],a=n&&L.call(b.attrHandle,e.toLowerCase())?n(t,e,!k):void 0;return void 0!==a?a:h.attributes||!k?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},st.escape=function(t){return(t+"").replace(at,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],a=0,i=0;if(u=!h.detectDuplicates,l=!h.sortStable&&t.slice(0),t.sort(S),u){for(;e=t[i++];)e===t[i]&&(a=n.push(i));for(;a--;)t.splice(n[a],1)}return l=null,t},o=st.getText=function(t){var e,n="",a=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[a++];)n+=o(e);return n},(b=st.selectors={cacheLength:50,createPseudo:ut,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=p(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=y[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&y(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,a,i){return function(t){var e=st.attr(t,n);return null==e?"!="===a:!a||(e+="","="===a?e===i:"!="===a?e!==i:"^="===a?i&&0===e.indexOf(i):"*="===a?i&&-1<e.indexOf(i):"$="===a?i&&e.slice(-i.length)===i:"~="===a?-1<(" "+e.replace(W," ")+" ").indexOf(i):"|="===a&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,t,e,m,g){var v="nth"!==p.slice(0,3),y="last"!==p.slice(-4),_="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var a,i,o,r,s,l,u=v!==y?"nextSibling":"previousSibling",d=t.parentNode,c=_&&t.nodeName.toLowerCase(),f=!n&&!_,h=!1;if(d){if(v){for(;u;){for(r=t;r=r[u];)if(_?r.nodeName.toLowerCase()===c:1===r.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[y?d.firstChild:d.lastChild],y&&f){for(h=(s=(a=(i=(o=(r=d)[P]||(r[P]={}))[r.uniqueID]||(o[r.uniqueID]={}))[p]||[])[0]===x&&a[1])&&a[2],r=s&&d.childNodes[s];r=++s&&r&&r[u]||(h=s=0)||l.pop();)if(1===r.nodeType&&++h&&r===t){i[p]=[x,s,h];break}}else if(f&&(h=s=(a=(i=(o=(r=t)[P]||(r[P]={}))[r.uniqueID]||(o[r.uniqueID]={}))[p]||[])[0]===x&&a[1]),!1===h)for(;(r=++s&&r&&r[u]||(h=s=0)||l.pop())&&((_?r.nodeName.toLowerCase()!==c:1!==r.nodeType)||!++h||(f&&((i=(o=r[P]||(r[P]={}))[r.uniqueID]||(o[r.uniqueID]={}))[p]=[x,h]),r!==t)););return(h-=g)===m||h%m==0&&0<=h/m}}},PSEUDO:function(t,o){var e,r=b.pseudos[t]||b.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[P]?r(o):1<r.length?(e=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,e){for(var n,a=r(t,o),i=a.length;i--;)t[n=I(t,a[i])]=!(e[n]=a[i])}):function(t){return r(t,0,e)}):r}},pseudos:{not:ut(function(t){var a=[],i=[],s=c(t.replace(U,"$1"));return s[P]?ut(function(t,e,n,a){for(var i,o=s(t,null,a,[]),r=t.length;r--;)(i=o[r])&&(t[r]=!(e[r]=i))}):function(t,e,n){return a[0]=t,s(a,null,n,i),a[0]=null,!i.pop()}}),has:ut(function(e){return function(t){return 0<st(e,t).length}}),contains:ut(function(e){return e=e.replace(et,nt),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:ut(function(n){return X.test(n||"")||st.error("unsupported lang: "+n),n=n.replace(et,nt).toLowerCase(),function(t){var e;do{if(e=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===r},focus:function(t){return t===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var a=n<0?n+e:e<n?e:n;0<=--a;)t.push(a);return t}),gt:gt(function(t,e,n){for(var a=n<0?n+e:n;++a<e;)t.push(a);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=pt(t);function yt(){}function _t(t){for(var e=0,n=t.length,a="";e<n;e++)a+=t[e].value;return a}function bt(s,t,e){var l=t.dir,u=t.next,d=u||l,c=e&&"parentNode"===d,f=a++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||c)return s(t,e,n);return!1}:function(t,e,n){var a,i,o,r=[x,f];if(n){for(;t=t[l];)if((1===t.nodeType||c)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||c)if(i=(o=t[P]||(t[P]={}))[t.uniqueID]||(o[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((a=i[d])&&a[0]===x&&a[1]===f)return r[2]=a[2];if((i[d]=r)[2]=s(t,e,n))return!0}return!1}}function wt(i){return 1<i.length?function(t,e,n){for(var a=i.length;a--;)if(!i[a](t,e,n))return!1;return!0}:i[0]}function Et(t,e,n,a,i){for(var o,r=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,a,i)||(r.push(o),u&&e.push(s)));return r}function Tt(h,p,m,g,v,t){return g&&!g[P]&&(g=Tt(g)),v&&!v[P]&&(v=Tt(v,t)),ut(function(t,e,n,a){var i,o,r,s=[],l=[],u=e.length,d=t||function(t,e,n){for(var a=0,i=e.length;a<i;a++)st(t,e[a],n);return n}(p||"*",n.nodeType?[n]:n,[]),c=!h||!t&&p?d:Et(d,s,h,n,a),f=m?v||(t?h:u||g)?[]:e:c;if(m&&m(c,f,n,a),g)for(i=Et(f,l),g(i,[],n,a),o=i.length;o--;)(r=i[o])&&(f[l[o]]=!(c[l[o]]=r));if(t){if(v||h){if(v){for(i=[],o=f.length;o--;)(r=f[o])&&i.push(c[o]=r);v(null,f=[],i,a)}for(o=f.length;o--;)(r=f[o])&&-1<(i=v?I(t,r):s[o])&&(t[i]=!(e[i]=r))}}else f=Et(f===e?f.splice(u,f.length):f),v?v(null,e,f,a):R.apply(e,f)})}function kt(t){for(var i,e,n,a=t.length,o=b.relative[t[0].type],r=o||b.relative[" "],s=o?1:0,l=bt(function(t){return t===i},r,!0),u=bt(function(t){return-1<I(i,t)},r,!0),d=[function(t,e,n){var a=!o&&(n||e!==w)||((i=e).nodeType?l(t,e,n):u(t,e,n));return i=null,a}];s<a;s++)if(e=b.relative[t[s].type])d=[bt(wt(d),e)];else{if((e=b.filter[t[s].type].apply(null,t[s].matches))[P]){for(n=++s;n<a&&!b.relative[t[n].type];n++);return Tt(1<s&&wt(d),1<s&&_t(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(U,"$1"),e,s<n&&kt(t.slice(s,n)),n<a&&kt(t=t.slice(n)),n<a&&_t(t))}d.push(e)}return wt(d)}return yt.prototype=b.filters=b.pseudos,b.setFilters=new yt,p=st.tokenize=function(t,e){var n,a,i,o,r,s,l,u=_[t+" "];if(u)return e?0:u.slice(0);for(r=t,s=[],l=b.preFilter;r;){for(o in n&&!(a=Y.exec(r))||(a&&(r=r.slice(a[0].length)||r),s.push(i=[])),n=!1,(a=q.exec(r))&&(n=a.shift(),i.push({value:n,type:a[0].replace(U," ")}),r=r.slice(n.length)),b.filter)!(a=V[o].exec(r))||l[o]&&!(a=l[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),r=r.slice(n.length));if(!n)break}return e?r.length:r?st.error(t):_(t,s).slice(0)},c=st.compile=function(t,e){var n,g,v,y,_,a,i=[],o=[],r=C[t+" "];if(!r){for(e||(e=p(t)),n=e.length;n--;)(r=kt(e[n]))[P]?i.push(r):o.push(r);(r=C(t,(g=o,y=0<(v=i).length,_=0<g.length,a=function(t,e,n,a,i){var o,r,s,l=0,u="0",d=t&&[],c=[],f=w,h=t||_&&b.find.TAG("*",i),p=x+=null==f?1:Math.random()||.1,m=h.length;for(i&&(w=e==T||e||i);u!==m&&null!=(o=h[u]);u++){if(_&&o){for(r=0,e||o.ownerDocument==T||(E(o),n=!k);s=g[r++];)if(s(o,e||T,n)){a.push(o);break}i&&(x=p)}y&&((o=!s&&o)&&l--,t&&d.push(o))}if(l+=u,y&&u!==l){for(r=0;s=v[r++];)s(d,c,e,n);if(t){if(0<l)for(;u--;)d[u]||c[u]||(c[u]=M.call(a));c=Et(c)}R.apply(a,c),i&&!t&&0<c.length&&1<l+v.length&&st.uniqueSort(a)}return i&&(x=p,w=f),d},y?ut(a):a))).selector=t}return r},m=st.select=function(t,e,n,a){var i,o,r,s,l,u="function"==typeof t&&t,d=!a&&p(t=u.selector||t);if(n=n||[],1===d.length){if(2<(o=d[0]=d[0].slice(0)).length&&"ID"===(r=o[0]).type&&9===e.nodeType&&k&&b.relative[o[1].type]){if(!(e=(b.find.ID(r.matches[0].replace(et,nt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=V.needsContext.test(t)?0:o.length;i--&&(r=o[i],!b.relative[s=r.type]);)if((l=b.find[s])&&(a=l(r.matches[0].replace(et,nt),tt.test(o[0].type)&&vt(e.parentNode)||e))){if(o.splice(i,1),!(t=a.length&&_t(o)))return R.apply(n,a),n;break}}return(u||c(t,d))(a,e,!k,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},h.sortStable=P.split("").sort(S).join("")===P,h.detectDuplicates=!!u,E(),h.sortDetached=dt(function(t){return 1&t.compareDocumentPosition(T.createElement("fieldset"))}),dt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),h.attributes&&dt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),dt(function(t){return null==t.getAttribute("disabled")})||ct(F,function(t,e,n){var a;if(!n)return!0===t[e]?e.toLowerCase():(a=t.getAttributeNode(e))&&a.specified?a.value:null}),st}(T);P.find=f,P.expr=f.selectors,P.expr[":"]=P.expr.pseudos,P.uniqueSort=P.unique=f.uniqueSort,P.text=f.getText,P.isXMLDoc=f.isXML,P.contains=f.contains,P.escapeSelector=f.escape;var h=function(t,e,n){for(var a=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&P(t).is(n))break;a.push(t)}return a},p=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},E=P.expr.match.needsContext;function x(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,n,a){return y(n)?P.grep(t,function(t,e){return!!n.call(t,e,t)!==a}):n.nodeType?P.grep(t,function(t){return t===n!==a}):"string"!=typeof n?P.grep(t,function(t){return-1<i.call(n,t)!==a}):P.filter(n,t,a)}P.filter=function(t,e,n){var a=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===a.nodeType?P.find.matchesSelector(a,t)?[a]:[]:P.find.matches(t,P.grep(e,function(t){return 1===t.nodeType}))},P.fn.extend({find:function(t){var e,n,a=this.length,i=this;if("string"!=typeof t)return this.pushStack(P(t).filter(function(){for(e=0;e<a;e++)if(P.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<a;e++)P.find(t,i[e],n);return 1<a?P.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&E.test(t)?P(t):t||[],!1).length}});var S,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(P.fn.init=function(t,e,n){var a,i;if(!t)return this;if(n=n||S,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(P):P.makeArray(t,this);if(!(a="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:L.exec(t))||!a[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(a[1]){if(e=e instanceof P?e[0]:e,P.merge(this,P.parseHTML(a[1],e&&e.nodeType?e.ownerDocument||e:k,!0)),C.test(a[1])&&P.isPlainObject(e))for(a in e)y(this[a])?this[a](e[a]):this.attr(a,e[a]);return this}return(i=k.getElementById(a[2]))&&(this[0]=i,this.length=1),this}).prototype=P.fn,S=P(k);var M=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}P.fn.extend({has:function(t){var e=P(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(P.contains(this,e[t]))return!0})},closest:function(t,e){var n,a=0,i=this.length,o=[],r="string"!=typeof t&&P(t);if(!E.test(t))for(;a<i;a++)for(n=this[a];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?-1<r.index(n):1===n.nodeType&&P.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?P.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?i.call(P(t),this[0]):i.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(P.uniqueSort(P.merge(this.get(),P(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),P.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return h(t,"parentNode")},parentsUntil:function(t,e,n){return h(t,"parentNode",n)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return h(t,"nextSibling")},prevAll:function(t){return h(t,"previousSibling")},nextUntil:function(t,e,n){return h(t,"nextSibling",n)},prevUntil:function(t,e,n){return h(t,"previousSibling",n)},siblings:function(t){return p((t.parentNode||{}).firstChild,t)},children:function(t){return p(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(x(t,"template")&&(t=t.content||t),P.merge([],t.childNodes))}},function(a,i){P.fn[a]=function(t,e){var n=P.map(this,i,t);return"Until"!==a.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=P.filter(e,n)),1<this.length&&(A[a]||P.uniqueSort(n),M.test(a)&&n.reverse()),this.pushStack(n)}});var B=/[^\x20\t\r\n\f]+/g;function I(t){return t}function F(t){throw t}function N(t,e,n,a){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(a))}catch(t){n.apply(void 0,[t])}}P.Callbacks=function(a){var t,n;a="string"==typeof a?(t=a,n={},P.each(t.match(B)||[],function(t,e){n[e]=!0}),n):P.extend({},a);var i,e,o,r,s=[],l=[],u=-1,d=function(){for(r=r||a.once,o=i=!0;l.length;u=-1)for(e=l.shift();++u<s.length;)!1===s[u].apply(e[0],e[1])&&a.stopOnFalse&&(u=s.length,e=!1);a.memory||(e=!1),i=!1,r&&(s=e?[]:"")},c={add:function(){return s&&(e&&!i&&(u=s.length-1,l.push(e)),function n(t){P.each(t,function(t,e){y(e)?a.unique&&c.has(e)||s.push(e):e&&e.length&&"string"!==w(e)&&n(e)})}(arguments),e&&!i&&d()),this},remove:function(){return P.each(arguments,function(t,e){for(var n;-1<(n=P.inArray(e,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<P.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return r=l=[],s=e="",this},disabled:function(){return!s},lock:function(){return r=l=[],e||i||(s=e=""),this},locked:function(){return!!r},fireWith:function(t,e){return r||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),i||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!o}};return c},P.extend({Deferred:function(t){var o=[["notify","progress",P.Callbacks("memory"),P.Callbacks("memory"),2],["resolve","done",P.Callbacks("once memory"),P.Callbacks("once memory"),0,"resolved"],["reject","fail",P.Callbacks("once memory"),P.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var i=arguments;return P.Deferred(function(a){P.each(o,function(t,e){var n=y(i[e[4]])&&i[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&y(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,a){var l=0;function u(i,o,r,s){return function(){var n=this,a=arguments,t=function(){var t,e;if(!(i<l)){if((t=r.apply(n,a))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,y(e)?s?e.call(t,u(l,o,I,s),u(l,o,F,s)):(l++,e.call(t,u(l,o,I,s),u(l,o,F,s),u(l,o,I,o.notifyWith))):(r!==I&&(n=void 0,a=[t]),(s||o.resolveWith)(n,a))}},e=s?t:function(){try{t()}catch(t){P.Deferred.exceptionHook&&P.Deferred.exceptionHook(t,e.stackTrace),l<=i+1&&(r!==F&&(n=void 0,a=[t]),o.rejectWith(n,a))}};i?e():(P.Deferred.getStackHook&&(e.stackTrace=P.Deferred.getStackHook()),T.setTimeout(e))}}return P.Deferred(function(t){o[0][3].add(u(0,t,y(a)?a:I,t.notifyWith)),o[1][3].add(u(0,t,y(e)?e:I)),o[2][3].add(u(0,t,y(n)?n:F))}).promise()},promise:function(t){return null!=t?P.extend(t,r):r}},s={};return P.each(o,function(t,e){var n=e[2],a=e[5];r[e[1]]=n.add,a&&n.add(function(){i=a},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),r.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,a=Array(e),i=s.call(arguments),o=P.Deferred(),r=function(e){return function(t){a[e]=this,i[e]=1<arguments.length?s.call(arguments):t,--n||o.resolveWith(a,i)}};if(n<=1&&(N(t,o.done(r(e)).resolve,o.reject,!n),"pending"===o.state()||y(i[e]&&i[e].then)))return o.then();for(;e--;)N(i[e],r(e),o.reject);return o.promise()}});var D=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;P.Deferred.exceptionHook=function(t,e){T.console&&T.console.warn&&t&&D.test(t.name)&&T.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},P.readyException=function(t){T.setTimeout(function(){throw t})};var j=P.Deferred();function H(){k.removeEventListener("DOMContentLoaded",H),T.removeEventListener("load",H),P.ready()}P.fn.ready=function(t){return j.then(t).catch(function(t){P.readyException(t)}),this},P.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--P.readyWait:P.isReady)||(P.isReady=!0)!==t&&0<--P.readyWait||j.resolveWith(k,[P])}}),P.ready.then=j.then,"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?T.setTimeout(P.ready):(k.addEventListener("DOMContentLoaded",H),T.addEventListener("load",H));var W=function(t,e,n,a,i,o,r){var s=0,l=t.length,u=null==n;if("object"===w(n))for(s in i=!0,n)W(t,e,s,n[s],!0,o,r);else if(void 0!==a&&(i=!0,y(a)||(r=!0),u&&(r?(e.call(t,a),e=null):(u=e,e=function(t,e,n){return u.call(P(t),n)})),e))for(;s<l;s++)e(t[s],n,r?a:a.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},U=/^-ms-/,Y=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function z(t){return t.replace(U,"ms-").replace(Y,q)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=P.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var a,i=this.cache(t);if("string"==typeof e)i[z(e)]=n;else for(a in e)i[z(a)]=e[a];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][z(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,a=t[this.expando];if(void 0!==a){if(void 0!==e){n=(e=Array.isArray(e)?e.map(z):(e=z(e))in a?[e]:e.match(B)||[]).length;for(;n--;)delete a[e[n]]}(void 0===e||P.isEmptyObject(a))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!P.isEmptyObject(e)}};var V=new X,K=new X,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/[A-Z]/g;function Q(t,e,n){var a,i;if(void 0===n&&1===t.nodeType)if(a="data-"+e.replace($,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(a))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Z.test(i)?JSON.parse(i):i)}catch(t){}K.set(t,e,n)}else n=void 0;return n}P.extend({hasData:function(t){return K.hasData(t)||V.hasData(t)},data:function(t,e,n){return K.access(t,e,n)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,n){return V.access(t,e,n)},_removeData:function(t,e){V.remove(t,e)}}),P.fn.extend({data:function(n,t){var e,a,i,o=this[0],r=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){K.set(this,n)}):W(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=K.get(o,n))?e:void 0!==(e=Q(o,n))?e:void 0;this.each(function(){K.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(i=K.get(o),1===o.nodeType&&!V.get(o,"hasDataAttrs"))){for(e=r.length;e--;)r[e]&&0===(a=r[e].name).indexOf("data-")&&(a=z(a.slice(5)),Q(o,a,i[a]));V.set(o,"hasDataAttrs",!0)}return i},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),P.extend({queue:function(t,e,n){var a;if(t)return e=(e||"fx")+"queue",a=V.get(t,e),n&&(!a||Array.isArray(n)?a=V.access(t,e,P.makeArray(n)):a.push(n)),a||[]},dequeue:function(t,e){e=e||"fx";var n=P.queue(t,e),a=n.length,i=n.shift(),o=P._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),a--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){P.dequeue(t,e)},o)),!a&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return V.get(t,n)||V.access(t,n,{empty:P.Callbacks("once memory").add(function(){V.remove(t,[e+"queue",n])})})}}),P.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?P.queue(this[0],e):void 0===n?this:this.each(function(){var t=P.queue(this,e,n);P._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&P.dequeue(this,e)})},dequeue:function(t){return this.each(function(){P.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,a=1,i=P.Deferred(),o=this,r=this.length,s=function(){--a||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=V.get(o[r],t+"queueHooks"))&&n.empty&&(a++,n.empty.add(s));return s(),i.promise(e)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],nt=k.documentElement,at=function(t){return P.contains(t.ownerDocument,t)},it={composed:!0};nt.getRootNode&&(at=function(t){return P.contains(t.ownerDocument,t)||t.getRootNode(it)===t.ownerDocument});var ot=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===P.css(t,"display")};function rt(t,e,n,a){var i,o,r=20,s=a?function(){return a.cur()}:function(){return P.css(t,e,"")},l=s(),u=n&&n[3]||(P.cssNumber[e]?"":"px"),d=t.nodeType&&(P.cssNumber[e]||"px"!==u&&+l)&&tt.exec(P.css(t,e));if(d&&d[3]!==u){for(l/=2,u=u||d[3],d=+l||1;r--;)P.style(t,e,d+u),(1-o)*(1-(o=s()/l||.5))<=0&&(r=0),d/=o;d*=2,P.style(t,e,d+u),n=n||[]}return n&&(d=+d||+l||0,i=n[1]?d+(n[1]+1)*n[2]:+n[2],a&&(a.unit=u,a.start=d,a.end=i)),i}var st={};function lt(t,e){for(var n,a,i,o,r,s,l,u=[],d=0,c=t.length;d<c;d++)(a=t[d]).style&&(n=a.style.display,e?("none"===n&&(u[d]=V.get(a,"display")||null,u[d]||(a.style.display="")),""===a.style.display&&ot(a)&&(u[d]=(l=r=o=void 0,r=(i=a).ownerDocument,s=i.nodeName,(l=st[s])||(o=r.body.appendChild(r.createElement(s)),l=P.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),st[s]=l)))):"none"!==n&&(u[d]="none",V.set(a,"display",n)));for(d=0;d<c;d++)null!=u[d]&&(t[d].style.display=u[d]);return t}P.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ot(this)?P(this).show():P(this).hide()})}});var ut,dt,ct=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ht=/^$|^module$|\/(?:java|ecma)script/i;ut=k.createDocumentFragment().appendChild(k.createElement("div")),(dt=k.createElement("input")).setAttribute("type","radio"),dt.setAttribute("checked","checked"),dt.setAttribute("name","t"),ut.appendChild(dt),v.checkClone=ut.cloneNode(!0).cloneNode(!0).lastChild.checked,ut.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ut.cloneNode(!0).lastChild.defaultValue,ut.innerHTML="<option></option>",v.option=!!ut.lastChild;var pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&x(t,e)?P.merge([t],n):n}function gt(t,e){for(var n=0,a=t.length;n<a;n++)V.set(t[n],"globalEval",!e||V.get(e[n],"globalEval"))}pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td,v.option||(pt.optgroup=pt.option=[1,"<select multiple='multiple'>","</select>"]);var vt=/<|&#?\w+;/;function yt(t,e,n,a,i){for(var o,r,s,l,u,d,c=e.createDocumentFragment(),f=[],h=0,p=t.length;h<p;h++)if((o=t[h])||0===o)if("object"===w(o))P.merge(f,o.nodeType?[o]:o);else if(vt.test(o)){for(r=r||c.appendChild(e.createElement("div")),s=(ft.exec(o)||["",""])[1].toLowerCase(),l=pt[s]||pt._default,r.innerHTML=l[1]+P.htmlPrefilter(o)+l[2],d=l[0];d--;)r=r.lastChild;P.merge(f,r.childNodes),(r=c.firstChild).textContent=""}else f.push(e.createTextNode(o));for(c.textContent="",h=0;o=f[h++];)if(a&&-1<P.inArray(o,a))i&&i.push(o);else if(u=at(o),r=mt(c.appendChild(o),"script"),u&&gt(r),n)for(d=0;o=r[d++];)ht.test(o.type||"")&&n.push(o);return c}var _t=/^([^.]*)(?:\.(.+)|)/;function bt(){return!0}function wt(){return!1}function Et(t,e){return t===function(){try{return k.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,n,a,i,o){var r,s;if("object"==typeof e){for(s in"string"!=typeof n&&(a=a||n,n=void 0),e)Tt(t,s,n,a,e[s],o);return t}if(null==a&&null==i?(i=n,a=n=void 0):null==i&&("string"==typeof n?(i=a,a=void 0):(i=a,a=n,n=void 0)),!1===i)i=wt;else if(!i)return t;return 1===o&&(r=i,(i=function(t){return P().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=P.guid++)),t.each(function(){P.event.add(this,e,i,a,n)})}function kt(t,i,o){o?(V.set(t,i,!1),P.event.add(t,i,{namespace:!1,handler:function(t){var e,n,a=V.get(this,i);if(1&t.isTrigger&&this[i]){if(a.length)(P.event.special[i]||{}).delegateType&&t.stopPropagation();else if(a=s.call(arguments),V.set(this,i,a),e=o(this,i),this[i](),a!==(n=V.get(this,i))||e?V.set(this,i,!1):n={},a!==n)return t.stopImmediatePropagation(),t.preventDefault(),n&&n.value}else a.length&&(V.set(this,i,{value:P.event.trigger(P.extend(a[0],P.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===V.get(t,i)&&P.event.add(t,i,bt)}P.event={global:{},add:function(e,t,n,a,i){var o,r,s,l,u,d,c,f,h,p,m,g=V.get(e);if(G(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&P.find.matchesSelector(nt,i),n.guid||(n.guid=P.guid++),(l=g.events)||(l=g.events=Object.create(null)),(r=g.handle)||(r=g.handle=function(t){return void 0!==P&&P.event.triggered!==t.type?P.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)h=m=(s=_t.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h&&(c=P.event.special[h]||{},h=(i?c.delegateType:c.bindType)||h,c=P.event.special[h]||{},d=P.extend({type:h,origType:m,data:a,handler:n,guid:n.guid,selector:i,needsContext:i&&P.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=l[h])||((f=l[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,a,p,r)||e.addEventListener&&e.addEventListener(h,r)),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),P.event.global[h]=!0)},remove:function(t,e,n,a,i){var o,r,s,l,u,d,c,f,h,p,m,g=V.hasData(t)&&V.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(B)||[""]).length;u--;)if(h=m=(s=_t.exec(e[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(c=P.event.special[h]||{},f=l[h=(a?c.delegateType:c.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=f.length;o--;)d=f[o],!i&&m!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||a&&a!==d.selector&&("**"!==a||!d.selector)||(f.splice(o,1),d.selector&&f.delegateCount--,c.remove&&c.remove.call(t,d));r&&!f.length&&(c.teardown&&!1!==c.teardown.call(t,p,g.handle)||P.removeEvent(t,h,g.handle),delete l[h])}else for(h in l)P.event.remove(t,h+e[u],n,a,!0);P.isEmptyObject(l)&&V.remove(t,"handle events")}},dispatch:function(t){var e,n,a,i,o,r,s=new Array(arguments.length),l=P.event.fix(t),u=(V.get(this,"events")||Object.create(null))[l.type]||[],d=P.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(r=P.event.handlers.call(this,l,u),e=0;(i=r[e++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(a=((P.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=a)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,a,i,o,r,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],r={},n=0;n<l;n++)void 0===r[i=(a=e[n]).selector+" "]&&(r[i]=a.needsContext?-1<P(i,this).index(u):P.find(i,this,null,[u]).length),r[i]&&o.push(a);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(P.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[P.expando]?t:new P.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ct.test(e.type)&&e.click&&x(e,"input")&&kt(e,"click",bt),!1},trigger:function(t){var e=this||t;return ct.test(e.type)&&e.click&&x(e,"input")&&kt(e,"click"),!0},_default:function(t){var e=t.target;return ct.test(e.type)&&e.click&&x(e,"input")&&V.get(e,"click")||x(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},P.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},P.Event=function(t,e){if(!(this instanceof P.Event))return new P.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?bt:wt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&P.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[P.expando]=!0},P.Event.prototype={constructor:P.Event,isDefaultPrevented:wt,isPropagationStopped:wt,isImmediatePropagationStopped:wt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=bt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=bt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=bt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},P.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},P.event.addProp),P.each({focus:"focusin",blur:"focusout"},function(t,e){P.event.special[t]={setup:function(){return kt(this,t,Et),!1},trigger:function(){return kt(this,t),!0},_default:function(){return!0},delegateType:e}}),P.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){P.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,a=t.handleObj;return n&&(n===this||P.contains(this,n))||(t.type=a.origType,e=a.handler.apply(this,arguments),t.type=i),e}}}),P.fn.extend({on:function(t,e,n,a){return Tt(this,t,e,n,a)},one:function(t,e,n,a){return Tt(this,t,e,n,a,1)},off:function(t,e,n){var a,i;if(t&&t.preventDefault&&t.handleObj)return a=t.handleObj,P(t.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=wt),this.each(function(){P.event.remove(this,t,n,e)});for(i in t)this.off(i,e,t[i]);return this}});var Pt=/<script|<style|<link/i,xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return x(t,"table")&&x(11!==e.nodeType?e:e.firstChild,"tr")&&P(t).children("tbody")[0]||t}function St(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var n,a,i,o,r,s;if(1===e.nodeType){if(V.hasData(t)&&(s=V.get(t).events))for(i in V.remove(e,"handle events"),s)for(n=0,a=s[i].length;n<a;n++)P.event.add(e,i,s[i][n]);K.hasData(t)&&(o=K.access(t),r=P.extend({},o),K.set(e,r))}}function At(n,a,i,o){a=m(a);var t,e,r,s,l,u,d=0,c=n.length,f=c-1,h=a[0],p=y(h);if(p||1<c&&"string"==typeof h&&!v.checkClone&&xt.test(h))return n.each(function(t){var e=n.eq(t);p&&(a[0]=h.call(this,t,e.html())),At(e,a,i,o)});if(c&&(e=(t=yt(a,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(r=P.map(mt(t,"script"),St)).length;d<c;d++)l=t,d!==f&&(l=P.clone(l,!0,!0),s&&P.merge(r,mt(l,"script"))),i.call(n[d],l,d);if(s)for(u=r[r.length-1].ownerDocument,P.map(r,Lt),d=0;d<s;d++)l=r[d],ht.test(l.type||"")&&!V.access(l,"globalEval")&&P.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?P._evalUrl&&!l.noModule&&P._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):b(l.textContent.replace(Ct,""),l,u))}return n}function Rt(t,e,n){for(var a,i=e?P.filter(e,t):t,o=0;null!=(a=i[o]);o++)n||1!==a.nodeType||P.cleanData(mt(a)),a.parentNode&&(n&&at(a)&&gt(mt(a,"script")),a.parentNode.removeChild(a));return t}P.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var a,i,o,r,s,l,u,d=t.cloneNode(!0),c=at(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||P.isXMLDoc(t)))for(r=mt(d),a=0,i=(o=mt(t)).length;a<i;a++)s=o[a],l=r[a],void 0,"input"===(u=l.nodeName.toLowerCase())&&ct.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||mt(t),r=r||mt(d),a=0,i=o.length;a<i;a++)Mt(o[a],r[a]);else Mt(t,d);return 0<(r=mt(d,"script")).length&&gt(r,!c&&mt(t,"script")),d},cleanData:function(t){for(var e,n,a,i=P.event.special,o=0;void 0!==(n=t[o]);o++)if(G(n)){if(e=n[V.expando]){if(e.events)for(a in e.events)i[a]?P.event.remove(n,a):P.removeEvent(n,a,e.handle);n[V.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),P.fn.extend({detach:function(t){return Rt(this,t,!0)},remove:function(t){return Rt(this,t)},text:function(t){return W(this,function(t){return void 0===t?P.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return At(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)})},prepend:function(){return At(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(P.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return P.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,a=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!pt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=P.htmlPrefilter(t);try{for(;n<a;n++)1===(e=this[n]||{}).nodeType&&(P.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return At(this,arguments,function(t){var e=this.parentNode;P.inArray(this,n)<0&&(P.cleanData(mt(this)),e&&e.replaceChild(t,this))},n)}}),P.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,r){P.fn[t]=function(t){for(var e,n=[],a=P(t),i=a.length-1,o=0;o<=i;o++)e=o===i?this:this.clone(!0),P(a[o])[r](e),l.apply(n,e.get());return this.pushStack(n)}});var Bt=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),It=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=T),e.getComputedStyle(t)},Ft=function(t,e,n){var a,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in a=n.call(t),e)t.style[i]=o[i];return a},Nt=new RegExp(et.join("|"),"i");function Dt(t,e,n){var a,i,o,r,s=t.style;return(n=n||It(t))&&(""!==(r=n.getPropertyValue(e)||n[e])||at(t)||(r=P.style(t,e)),!v.pixelBoxStyles()&&Bt.test(r)&&Nt.test(e)&&(a=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=a,s.minWidth=i,s.maxWidth=o)),void 0!==r?r+"":r}function jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(l).appendChild(u);var t=T.getComputedStyle(u);n="1%"!==t.top,s=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),a=36===e(t.width),u.style.position="absolute",i=12===e(u.offsetWidth/3),nt.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,a,i,o,r,s,l=k.createElement("div"),u=k.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,P.extend(v,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,e,n,a;return null==r&&(t=k.createElement("table"),e=k.createElement("tr"),n=k.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",nt.appendChild(t).appendChild(e).appendChild(n),a=T.getComputedStyle(e),r=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===e.offsetHeight,nt.removeChild(t)),r}}))}();var Ht=["Webkit","Moz","ms"],Wt=k.createElement("div").style,Ut={};function Yt(t){var e=P.cssProps[t]||Ut[t];return e||(t in Wt?t:Ut[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Ht.length;n--;)if((t=Ht[n]+e)in Wt)return t}(t)||t)}var qt=/^(none|table(?!-c[ea]).+)/,zt=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function Vt(t,e,n){var a=tt.exec(e);return a?Math.max(0,a[2]-(n||0))+(a[3]||"px"):e}function Kt(t,e,n,a,i,o){var r="width"===e?1:0,s=0,l=0;if(n===(a?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=P.css(t,n+et[r],!0,i)),a?("content"===n&&(l-=P.css(t,"padding"+et[r],!0,i)),"margin"!==n&&(l-=P.css(t,"border"+et[r]+"Width",!0,i))):(l+=P.css(t,"padding"+et[r],!0,i),"padding"!==n?l+=P.css(t,"border"+et[r]+"Width",!0,i):s+=P.css(t,"border"+et[r]+"Width",!0,i));return!a&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function Zt(t,e,n){var a=It(t),i=(!v.boxSizingReliable()||n)&&"border-box"===P.css(t,"boxSizing",!1,a),o=i,r=Dt(t,e,a),s="offset"+e[0].toUpperCase()+e.slice(1);if(Bt.test(r)){if(!n)return r;r="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&x(t,"tr")||"auto"===r||!parseFloat(r)&&"inline"===P.css(t,"display",!1,a))&&t.getClientRects().length&&(i="border-box"===P.css(t,"boxSizing",!1,a),(o=s in t)&&(r=t[s])),(r=parseFloat(r)||0)+Kt(t,e,n||(i?"border":"content"),o,a,r)+"px"}function $t(t,e,n,a,i){return new $t.prototype.init(t,e,n,a,i)}P.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Dt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,a){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,r,s=z(e),l=zt.test(e),u=t.style;if(l||(e=Yt(s)),r=P.cssHooks[e]||P.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(i=r.get(t,!1,a))?i:u[e];"string"===(o=typeof n)&&(i=tt.exec(n))&&i[1]&&(n=rt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(P.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),r&&"set"in r&&void 0===(n=r.set(t,n,a))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,a){var i,o,r,s=z(e);return zt.test(e)||(e=Yt(s)),(r=P.cssHooks[e]||P.cssHooks[s])&&"get"in r&&(i=r.get(t,!0,n)),void 0===i&&(i=Dt(t,e,a)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),P.each(["height","width"],function(t,l){P.cssHooks[l]={get:function(t,e,n){if(e)return!qt.test(P.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,l,n):Ft(t,Gt,function(){return Zt(t,l,n)})},set:function(t,e,n){var a,i=It(t),o=!v.scrollboxSize()&&"absolute"===i.position,r=(o||n)&&"border-box"===P.css(t,"boxSizing",!1,i),s=n?Kt(t,l,n,r,i):0;return r&&o&&(s-=Math.ceil(t["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(i[l])-Kt(t,l,"border",!1,i)-.5)),s&&(a=tt.exec(e))&&"px"!==(a[3]||"px")&&(t.style[l]=e,e=P.css(t,l)),Vt(0,e,s)}}}),P.cssHooks.marginLeft=jt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Dt(t,"marginLeft"))||t.getBoundingClientRect().left-Ft(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),P.each({margin:"",padding:"",border:"Width"},function(i,o){P.cssHooks[i+o]={expand:function(t){for(var e=0,n={},a="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+et[e]+o]=a[e]||a[e-2]||a[0];return n}},"margin"!==i&&(P.cssHooks[i+o].set=Vt)}),P.fn.extend({css:function(t,e){return W(this,function(t,e,n){var a,i,o={},r=0;if(Array.isArray(e)){for(a=It(t),i=e.length;r<i;r++)o[e[r]]=P.css(t,e[r],!1,a);return o}return void 0!==n?P.style(t,e,n):P.css(t,e)},t,e,1<arguments.length)}}),((P.Tween=$t).prototype={constructor:$t,init:function(t,e,n,a,i,o){this.elem=t,this.prop=n,this.easing=i||P.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=a,this.unit=o||(P.cssNumber[n]?"":"px")},cur:function(){var t=$t.propHooks[this.prop];return t&&t.get?t.get(this):$t.propHooks._default.get(this)},run:function(t){var e,n=$t.propHooks[this.prop];return this.options.duration?this.pos=e=P.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$t.propHooks._default.set(this),this}}).init.prototype=$t.prototype,($t.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=P.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){P.fx.step[t.prop]?P.fx.step[t.prop](t):1!==t.elem.nodeType||!P.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:P.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=$t.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},P.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},P.fx=$t.prototype.init,P.fx.step={};var Qt,Jt,te,ee,ne=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ie(){Jt&&(!1===k.hidden&&T.requestAnimationFrame?T.requestAnimationFrame(ie):T.setTimeout(ie,P.fx.interval),P.fx.tick())}function oe(){return T.setTimeout(function(){Qt=void 0}),Qt=Date.now()}function re(t,e){var n,a=0,i={height:t};for(e=e?1:0;a<4;a+=2-e)i["margin"+(n=et[a])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function se(t,e,n){for(var a,i=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,r=i.length;o<r;o++)if(a=i[o].call(n,e,t))return a}function le(o,t,e){var n,r,a=0,i=le.prefilters.length,s=P.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Qt||oe(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),a=0,i=u.tweens.length;a<i;a++)u.tweens[a].run(n);return s.notifyWith(o,[u,n,e]),n<1&&i?e:(i||s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:P.extend({},t),opts:P.extend(!0,{specialEasing:{},easing:P.easing._default},e),originalProperties:t,originalOptions:e,startTime:Qt||oe(),duration:e.duration,tweens:[],createTween:function(t,e){var n=P.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,t])):s.rejectWith(o,[u,t]),this}}),d=u.props;for(!function(t,e){var n,a,i,o,r;for(n in t)if(i=e[a=z(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==a&&(t[a]=o,delete t[n]),(r=P.cssHooks[a])&&"expand"in r)for(n in o=r.expand(o),delete t[a],o)n in t||(t[n]=o[n],e[n]=i);else e[a]=i}(d,u.opts.specialEasing);a<i;a++)if(n=le.prefilters[a].call(u,o,d,u.opts))return y(n.stop)&&(P._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return P.map(d,se,u),y(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),P.fx.timer(P.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u}P.Animation=P.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return rt(n.elem,t,tt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(B);for(var n,a=0,i=t.length;a<i;a++)n=t[a],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var a,i,o,r,s,l,u,d,c="width"in e||"height"in e,f=this,h={},p=t.style,m=t.nodeType&&ot(t),g=V.get(t,"fxshow");for(a in n.queue||(null==(r=P._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,f.always(function(){f.always(function(){r.unqueued--,P.queue(t,"fx").length||r.empty.fire()})})),e)if(i=e[a],ne.test(i)){if(delete e[a],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[a])continue;m=!0}h[a]=g&&g[a]||P.style(t,a)}if((l=!P.isEmptyObject(e))||!P.isEmptyObject(h))for(a in c&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=V.get(t,"display")),"none"===(d=P.css(t,"display"))&&(u?d=u:(lt([t],!0),u=t.style.display||u,d=P.css(t,"display"),lt([t]))),("inline"===d||"inline-block"===d&&null!=u)&&"none"===P.css(t,"float")&&(l||(f.done(function(){p.display=u}),null==u&&(d=p.display,u="none"===d?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,h)l||(g?"hidden"in g&&(m=g.hidden):g=V.access(t,"fxshow",{display:u}),o&&(g.hidden=!m),m&&lt([t],!0),f.done(function(){for(a in m||lt([t]),V.remove(t,"fxshow"),h)P.style(t,a,h[a])})),l=se(m?g[a]:0,a,f),a in g||(g[a]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),P.speed=function(t,e,n){var a=t&&"object"==typeof t?P.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return P.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in P.fx.speeds?a.duration=P.fx.speeds[a.duration]:a.duration=P.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){y(a.old)&&a.old.call(this),a.queue&&P.dequeue(this,a.queue)},a},P.fn.extend({fadeTo:function(t,e,n,a){return this.filter(ot).css("opacity",0).show().end().animate({opacity:e},t,n,a)},animate:function(e,t,n,a){var i=P.isEmptyObject(e),o=P.speed(t,n,a),r=function(){var t=le(this,P.extend({},e),o);(i||V.get(this,"finish"))&&t.stop(!0)};return r.finish=r,i||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(i,t,o){var r=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof i&&(o=t,t=i,i=void 0),t&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=P.timers,a=V.get(this);if(e)a[e]&&a[e].stop&&r(a[e]);else for(e in a)a[e]&&a[e].stop&&ae.test(e)&&r(a[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||P.dequeue(this,i)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var t,e=V.get(this),n=e[r+"queue"],a=e[r+"queueHooks"],i=P.timers,o=n?n.length:0;for(e.finish=!0,P.queue(this,r,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===r&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),P.each(["toggle","show","hide"],function(t,a){var i=P.fn[a];P.fn[a]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(re(a,!0),t,e,n)}}),P.each({slideDown:re("show"),slideUp:re("hide"),slideToggle:re("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,a){P.fn[t]=function(t,e,n){return this.animate(a,t,e,n)}}),P.timers=[],P.fx.tick=function(){var t,e=0,n=P.timers;for(Qt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||P.fx.stop(),Qt=void 0},P.fx.timer=function(t){P.timers.push(t),P.fx.start()},P.fx.interval=13,P.fx.start=function(){Jt||(Jt=!0,ie())},P.fx.stop=function(){Jt=null},P.fx.speeds={slow:600,fast:200,_default:400},P.fn.delay=function(a,t){return a=P.fx&&P.fx.speeds[a]||a,t=t||"fx",this.queue(t,function(t,e){var n=T.setTimeout(t,a);e.stop=function(){T.clearTimeout(n)}})},te=k.createElement("input"),ee=k.createElement("select").appendChild(k.createElement("option")),te.type="checkbox",v.checkOn=""!==te.value,v.optSelected=ee.selected,(te=k.createElement("input")).value="t",te.type="radio",v.radioValue="t"===te.value;var ue,de=P.expr.attrHandle;P.fn.extend({attr:function(t,e){return W(this,P.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){P.removeAttr(this,t)})}}),P.extend({attr:function(t,e,n){var a,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?P.prop(t,e,n):(1===o&&P.isXMLDoc(t)||(i=P.attrHooks[e.toLowerCase()]||(P.expr.match.bool.test(e)?ue:void 0)),void 0!==n?null===n?void P.removeAttr(t,e):i&&"set"in i&&void 0!==(a=i.set(t,n,e))?a:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(a=i.get(t,e))?a:null==(a=P.find.attr(t,e))?void 0:a)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&x(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,a=0,i=e&&e.match(B);if(i&&1===t.nodeType)for(;n=i[a++];)t.removeAttribute(n)}}),ue={set:function(t,e,n){return!1===e?P.removeAttr(t,n):t.setAttribute(n,n),n}},P.each(P.expr.match.bool.source.match(/\w+/g),function(t,e){var r=de[e]||P.find.attr;de[e]=function(t,e,n){var a,i,o=e.toLowerCase();return n||(i=de[o],de[o]=a,a=null!=r(t,e,n)?o:null,de[o]=i),a}});var ce=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function he(t){return(t.match(B)||[]).join(" ")}function pe(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(B)||[]}P.fn.extend({prop:function(t,e){return W(this,P.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[P.propFix[t]||t]})}}),P.extend({prop:function(t,e,n){var a,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&P.isXMLDoc(t)||(e=P.propFix[e]||e,i=P.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(a=i.set(t,n,e))?a:t[e]=n:i&&"get"in i&&null!==(a=i.get(t,e))?a:t[e]},propHooks:{tabIndex:{get:function(t){var e=P.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(P.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),P.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){P.propFix[this.toLowerCase()]=this}),P.fn.extend({addClass:function(e){var t,n,a,i,o,r,s,l=0;if(y(e))return this.each(function(t){P(this).addClass(e.call(this,t,pe(this)))});if((t=me(e)).length)for(;n=this[l++];)if(i=pe(n),a=1===n.nodeType&&" "+he(i)+" "){for(r=0;o=t[r++];)a.indexOf(" "+o+" ")<0&&(a+=o+" ");i!==(s=he(a))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,a,i,o,r,s,l=0;if(y(e))return this.each(function(t){P(this).removeClass(e.call(this,t,pe(this)))});if(!arguments.length)return this.attr("class","");if((t=me(e)).length)for(;n=this[l++];)if(i=pe(n),a=1===n.nodeType&&" "+he(i)+" "){for(r=0;o=t[r++];)for(;-1<a.indexOf(" "+o+" ");)a=a.replace(" "+o+" "," ");i!==(s=he(a))&&n.setAttribute("class",s)}return this},toggleClass:function(i,e){var o=typeof i,r="string"===o||Array.isArray(i);return"boolean"==typeof e&&r?e?this.addClass(i):this.removeClass(i):y(i)?this.each(function(t){P(this).toggleClass(i.call(this,t,pe(this),e),e)}):this.each(function(){var t,e,n,a;if(r)for(e=0,n=P(this),a=me(i);t=a[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!==o||((t=pe(this))&&V.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===i?"":V.get(this,"__className__")||""))})},hasClass:function(t){var e,n,a=0;for(e=" "+t+" ";n=this[a++];)if(1===n.nodeType&&-1<(" "+he(pe(n))+" ").indexOf(e))return!0;return!1}});var ge=/\r/g;P.fn.extend({val:function(n){var a,t,i,e=this[0];return arguments.length?(i=y(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=i?n.call(this,t,P(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=P.map(e,function(t){return null==t?"":t+""})),(a=P.valHooks[this.type]||P.valHooks[this.nodeName.toLowerCase()])&&"set"in a&&void 0!==a.set(this,e,"value")||(this.value=e))})):e?(a=P.valHooks[e.type]||P.valHooks[e.nodeName.toLowerCase()])&&"get"in a&&void 0!==(t=a.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(ge,""):null==t?"":t:void 0}}),P.extend({valHooks:{option:{get:function(t){var e=P.find.attr(t,"value");return null!=e?e:he(P.text(t))}},select:{get:function(t){var e,n,a,i=t.options,o=t.selectedIndex,r="select-one"===t.type,s=r?null:[],l=r?o+1:i.length;for(a=o<0?l:r?o:0;a<l;a++)if(((n=i[a]).selected||a===o)&&!n.disabled&&(!n.parentNode.disabled||!x(n.parentNode,"optgroup"))){if(e=P(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,a,i=t.options,o=P.makeArray(e),r=i.length;r--;)((a=i[r]).selected=-1<P.inArray(P.valHooks.option.get(a),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),P.each(["radio","checkbox"],function(){P.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<P.inArray(P(t).val(),e)}},v.checkOn||(P.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in T;var ve=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};P.extend(P.event,{trigger:function(t,e,n,a){var i,o,r,s,l,u,d,c,f=[n||k],h=g.call(t,"type")?t.type:t,p=g.call(t,"namespace")?t.namespace.split("."):[];if(o=c=r=n=n||k,3!==n.nodeType&&8!==n.nodeType&&!ve.test(h+P.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),l=h.indexOf(":")<0&&"on"+h,(t=t[P.expando]?t:new P.Event(h,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:P.makeArray(e,[t]),d=P.event.special[h]||{},a||!d.trigger||!1!==d.trigger.apply(n,e))){if(!a&&!d.noBubble&&!_(n)){for(s=d.delegateType||h,ve.test(s+h)||(o=o.parentNode);o;o=o.parentNode)f.push(o),r=o;r===(n.ownerDocument||k)&&f.push(r.defaultView||r.parentWindow||T)}for(i=0;(o=f[i++])&&!t.isPropagationStopped();)c=o,t.type=1<i?s:d.bindType||h,(u=(V.get(o,"events")||Object.create(null))[t.type]&&V.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&G(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=h,a||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!G(n)||l&&y(n[h])&&!_(n)&&((r=n[l])&&(n[l]=null),P.event.triggered=h,t.isPropagationStopped()&&c.addEventListener(h,ye),n[h](),t.isPropagationStopped()&&c.removeEventListener(h,ye),P.event.triggered=void 0,r&&(n[l]=r)),t.result}},simulate:function(t,e,n){var a=P.extend(new P.Event,n,{type:t,isSimulated:!0});P.event.trigger(a,null,e)}}),P.fn.extend({trigger:function(t,e){return this.each(function(){P.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return P.event.trigger(t,e,n,!0)}}),v.focusin||P.each({focus:"focusin",blur:"focusout"},function(n,a){var i=function(t){P.event.simulate(a,t.target,P.event.fix(t))};P.event.special[a]={setup:function(){var t=this.ownerDocument||this.document||this,e=V.access(t,a);e||t.addEventListener(n,i,!0),V.access(t,a,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=V.access(t,a)-1;e?V.access(t,a,e):(t.removeEventListener(n,i,!0),V.remove(t,a))}}});var _e=T.location,be={guid:Date.now()},we=/\?/;P.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new T.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||P.error("Invalid XML: "+(n?P.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Ee=/\[\]$/,Te=/\r?\n/g,ke=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;function xe(n,t,a,i){var e;if(Array.isArray(t))P.each(t,function(t,e){a||Ee.test(n)?i(n,e):xe(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,a,i)});else if(a||"object"!==w(t))i(n,t);else for(e in t)xe(n+"["+e+"]",t[e],a,i)}P.param=function(t,e){var n,a=[],i=function(t,e){var n=y(e)?e():e;a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!P.isPlainObject(t))P.each(t,function(){i(this.name,this.value)});else for(n in t)xe(n,t[n],e,i);return a.join("&")},P.fn.extend({serialize:function(){return P.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=P.prop(this,"elements");return t?P.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!P(this).is(":disabled")&&Pe.test(this.nodeName)&&!ke.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var n=P(this).val();return null==n?null:Array.isArray(n)?P.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}});var Ce=/%20/g,Oe=/#.*$/,Se=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,Ae=/^\/\//,Re={},Be={},Ie="*/".concat("*"),Fe=k.createElement("a");function Ne(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,a=0,i=t.toLowerCase().match(B)||[];if(y(e))for(;n=i[a++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function De(e,i,o,r){var s={},l=e===Be;function u(t){var a;return s[t]=!0,P.each(e[t]||[],function(t,e){var n=e(i,o,r);return"string"!=typeof n||l||s[n]?l?!(a=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),a}return u(i.dataTypes[0])||!s["*"]&&u("*")}function je(t,e){var n,a,i=P.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:a||(a={}))[n]=e[n]);return a&&P.extend(!0,t,a),t}Fe.href=_e.href,P.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_e.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":P.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,P.ajaxSettings),e):je(P.ajaxSettings,t)},ajaxPrefilter:Ne(Re),ajaxTransport:Ne(Be),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var d,c,f,n,h,a,p,m,i,o,g=P.ajaxSetup({},e),v=g.context||g,y=g.context&&(v.nodeType||v.jquery)?P(v):P.event,_=P.Deferred(),b=P.Callbacks("once memory"),w=g.statusCode||{},r={},s={},l="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=Le.exec(f);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?f:null},setRequestHeader:function(t,e){return null==p&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,r[t]=e),this},overrideMimeType:function(t){return null==p&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)E.always(t[E.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||l;return d&&d.abort(e),u(0,e),this}};if(_.promise(E),g.url=((t||g.url||_e.href)+"").replace(Ae,_e.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(B)||[""],null==g.crossDomain){a=k.createElement("a");try{a.href=g.url,a.href=a.href,g.crossDomain=Fe.protocol+"//"+Fe.host!=a.protocol+"//"+a.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=P.param(g.data,g.traditional)),De(Re,g,e,E),p)return E;for(i in(m=P.event&&g.global)&&0==P.active++&&P.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Me.test(g.type),c=g.url.replace(Oe,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Ce,"+")):(o=g.url.slice(c.length),g.data&&(g.processData||"string"==typeof g.data)&&(c+=(we.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(c=c.replace(Se,"$1"),o=(we.test(c)?"&":"?")+"_="+be.guid+++o),g.url=c+o),g.ifModified&&(P.lastModified[c]&&E.setRequestHeader("If-Modified-Since",P.lastModified[c]),P.etag[c]&&E.setRequestHeader("If-None-Match",P.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&E.setRequestHeader("Content-Type",g.contentType),E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ie+"; q=0.01":""):g.accepts["*"]),g.headers)E.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(v,E,g)||p))return E.abort();if(l="abort",b.add(g.complete),E.done(g.success),E.fail(g.error),d=De(Be,g,e,E)){if(E.readyState=1,m&&y.trigger("ajaxSend",[E,g]),p)return E;g.async&&0<g.timeout&&(h=T.setTimeout(function(){E.abort("timeout")},g.timeout));try{p=!1,d.send(r,u)}catch(t){if(p)throw t;u(-1,t)}}else u(-1,"No Transport");function u(t,e,n,a){var i,o,r,s,l,u=e;p||(p=!0,h&&T.clearTimeout(h),d=void 0,f=a||"",E.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var a,i,o,r,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=t.mimeType||e.getResponseHeader("Content-Type"));if(a)for(i in s)if(s[i]&&s[i].test(a)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}r||(r=i)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,E,n)),!i&&-1<P.inArray("script",g.dataTypes)&&P.inArray("json",g.dataTypes)<0&&(g.converters["text script"]=function(){}),s=function(t,e,n,a){var i,o,r,s,l,u={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)u[r.toLowerCase()]=t.converters[r];for(o=d.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&a&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(r=u[l+" "+s[0]]||u["* "+s[0]])){!0===r?r=u[i]:!0!==u[i]&&(o=s[0],d.unshift(s[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(g,s,E,i),i?(g.ifModified&&((l=E.getResponseHeader("Last-Modified"))&&(P.lastModified[c]=l),(l=E.getResponseHeader("etag"))&&(P.etag[c]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=s.state,o=s.data,i=!(r=s.error))):(r=u,!t&&u||(u="error",t<0&&(t=0))),E.status=t,E.statusText=(e||u)+"",i?_.resolveWith(v,[o,u,E]):_.rejectWith(v,[E,u,r]),E.statusCode(w),w=void 0,m&&y.trigger(i?"ajaxSuccess":"ajaxError",[E,g,i?o:r]),b.fireWith(v,[E,u]),m&&(y.trigger("ajaxComplete",[E,g]),--P.active||P.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return P.get(t,e,n,"json")},getScript:function(t,e){return P.get(t,void 0,e,"script")}}),P.each(["get","post"],function(t,i){P[i]=function(t,e,n,a){return y(e)&&(a=a||n,n=e,e=void 0),P.ajax(P.extend({url:t,type:i,dataType:a,data:e,success:n},P.isPlainObject(t)&&t))}}),P.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),P._evalUrl=function(t,e,n){return P.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){P.globalEval(t,e,n)}})},P.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=P(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return y(n)?this.each(function(t){P(this).wrapInner(n.call(this,t))}):this.each(function(){var t=P(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=y(e);return this.each(function(t){P(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){P(this).replaceWith(this.childNodes)}),this}}),P.expr.pseudos.hidden=function(t){return!P.expr.pseudos.visible(t)},P.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},P.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},We=P.ajaxSettings.xhr();v.cors=!!We&&"withCredentials"in We,v.ajax=We=!!We,P.ajaxTransport(function(i){var o,r;if(v.cors||We&&!i.crossDomain)return{send:function(t,e){var n,a=i.xhr();if(a.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)a[n]=i.xhrFields[n];for(n in i.mimeType&&a.overrideMimeType&&a.overrideMimeType(i.mimeType),i.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)a.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?e(0,"error"):e(a.status,a.statusText):e(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=o(),r=a.onerror=a.ontimeout=o("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&T.setTimeout(function(){o&&r()})},o=o("abort");try{a.send(i.hasContent&&i.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),P.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),P.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return P.globalEval(t),t}}}),P.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),P.ajaxTransport("script",function(n){var a,i;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){a=P("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){a.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),k.head.appendChild(a[0])},abort:function(){i&&i()}}});var Ue,Ye=[],qe=/(=)\?(?=&|$)|\?\?/;P.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||P.expando+"_"+be.guid++;return this[t]=!0,t}}),P.ajaxPrefilter("json jsonp",function(t,e,n){var a,i,o,r=!1!==t.jsonp&&(qe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qe.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(qe,"$1"+a):!1!==t.jsonp&&(t.url+=(we.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||P.error(a+" was not called"),o[0]},t.dataTypes[0]="json",i=T[a],T[a]=function(){o=arguments},n.always(function(){void 0===i?P(T).removeProp(a):T[a]=i,t[a]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(a)),o&&y(i)&&i(o[0]),o=i=void 0}),"script"}),v.createHTMLDocument=((Ue=k.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ue.childNodes.length),P.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((a=(e=k.implementation.createHTMLDocument("")).createElement("base")).href=k.location.href,e.head.appendChild(a)):e=k),o=!n&&[],(i=C.exec(t))?[e.createElement(i[1])]:(i=yt([t],e,o),o&&o.length&&P(o).remove(),P.merge([],i.childNodes)));var a,i,o},P.fn.load=function(t,e,n){var a,i,o,r=this,s=t.indexOf(" ");return-1<s&&(a=he(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<r.length&&P.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,r.html(a?P("<div>").append(P.parseHTML(t)).find(a):t)}).always(n&&function(t,e){r.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},P.expr.pseudos.animated=function(e){return P.grep(P.timers,function(t){return e===t.elem}).length},P.offset={setOffset:function(t,e,n){var a,i,o,r,s,l,u=P.css(t,"position"),d=P(t),c={};"static"===u&&(t.style.position="relative"),s=d.offset(),o=P.css(t,"top"),l=P.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(r=(a=d.position()).top,i=a.left):(r=parseFloat(o)||0,i=parseFloat(l)||0),y(e)&&(e=e.call(t,n,P.extend({},s))),null!=e.top&&(c.top=e.top-s.top+r),null!=e.left&&(c.left=e.left-s.left+i),"using"in e?e.using.call(t,c):d.css(c)}},P.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){P.offset.setOffset(this,e,t)});var t,n,a=this[0];return a?a.getClientRects().length?(t=a.getBoundingClientRect(),n=a.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,a=this[0],i={top:0,left:0};if("fixed"===P.css(a,"position"))e=a.getBoundingClientRect();else{for(e=this.offset(),n=a.ownerDocument,t=a.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===P.css(t,"position");)t=t.parentNode;t&&t!==a&&1===t.nodeType&&((i=P(t).offset()).top+=P.css(t,"borderTopWidth",!0),i.left+=P.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-P.css(a,"marginTop",!0),left:e.left-i.left-P.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===P.css(t,"position");)t=t.offsetParent;return t||nt})}}),P.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var o="pageYOffset"===i;P.fn[e]=function(t){return W(this,function(t,e,n){var a;if(_(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===n)return a?a[i]:t[e];a?a.scrollTo(o?a.pageXOffset:n,o?n:a.pageYOffset):t[e]=n},e,t,arguments.length)}}),P.each(["top","left"],function(t,n){P.cssHooks[n]=jt(v.pixelPosition,function(t,e){if(e)return e=Dt(t,n),Bt.test(e)?P(t).position()[n]+"px":e})}),P.each({Height:"height",Width:"width"},function(r,s){P.each({padding:"inner"+r,content:s,"":"outer"+r},function(a,o){P.fn[o]=function(t,e){var n=arguments.length&&(a||"boolean"!=typeof t),i=a||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,n){var a;return _(t)?0===o.indexOf("outer")?t["inner"+r]:t.document.documentElement["client"+r]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+r],a["scroll"+r],t.body["offset"+r],a["offset"+r],a["client"+r])):void 0===n?P.css(t,e,i):P.style(t,e,n,i)},s,n?t:void 0,n)}})}),P.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){P.fn[e]=function(t){return this.on(e,t)}}),P.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,a){return this.on(e,t,n,a)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),P.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){P.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}});var ze=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;P.proxy=function(t,e){var n,a,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return a=s.call(arguments,2),(i=function(){return t.apply(e||this,a.concat(s.call(arguments)))}).guid=t.guid=t.guid||P.guid++,i},P.holdReady=function(t){t?P.readyWait++:P.ready(!0)},P.isArray=Array.isArray,P.parseJSON=JSON.parse,P.nodeName=x,P.isFunction=y,P.isWindow=_,P.camelCase=z,P.type=w,P.now=Date.now,P.isNumeric=function(t){var e=P.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},P.trim=function(t){return null==t?"":(t+"").replace(ze,"")};var Ge=T.jQuery,Xe=T.$;return P.noConflict=function(t){return T.$===P&&(T.$=Xe),t&&T.jQuery===P&&(T.jQuery=Ge),P},void 0===t&&(T.jQuery=T.$=P),P})},{}],188:[function(t,e,n){"use strict";var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=a},{"./lib/deflate":189,"./lib/inflate":190,"./lib/utils/common":191,"./lib/zlib/constants":194}],189:[function(t,e,n){"use strict";var r=t("./zlib/deflate"),s=t("./utils/common"),l=t("./utils/strings"),i=t("./zlib/messages"),o=t("./zlib/zstream"),u=Object.prototype.toString,d=0,c=-1,f=0,h=8;function p(t){if(!(this instanceof p))return new p(t);this.options=s.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==d)throw new Error(i[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var a;if(a="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,a))!==d)throw new Error(i[n]);this._dict_set=!0}}function a(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||i[n.err];return n.result}p.prototype.push=function(t,e){var n,a,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=l.string2buf(t):"[object ArrayBuffer]"===u.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=r.deflate(i,a))&&n!==d)return this.onEnd(n),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(l.buf2binstring(s.shrinkBuf(i.output,i.next_out))):this.onData(s.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==a||(this.onEnd(d),!(i.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=p,n.deflate=a,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,a(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,a(t,e)}},{"./utils/common":191,"./utils/strings":192,"./zlib/deflate":196,"./zlib/messages":201,"./zlib/zstream":203}],190:[function(t,e,n){"use strict";var c=t("./zlib/inflate"),f=t("./utils/common"),h=t("./utils/strings"),p=t("./zlib/constants"),a=t("./zlib/messages"),i=t("./zlib/zstream"),o=t("./zlib/gzheader"),m=Object.prototype.toString;function r(t){if(!(this instanceof r))return new r(t);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var n=c.inflateInit2(this.strm,e.windowBits);if(n!==p.Z_OK)throw new Error(a[n]);if(this.header=new o,c.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=h.string2buf(e.dictionary):"[object ArrayBuffer]"===m.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=c.inflateSetDictionary(this.strm,e.dictionary))!==p.Z_OK))throw new Error(a[n])}function s(t,e){var n=new r(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}r.prototype.push=function(t,e){var n,a,i,o,r,s=this.strm,l=this.options.chunkSize,u=this.options.dictionary,d=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?p.Z_FINISH:p.Z_NO_FLUSH,"string"==typeof t?s.input=h.binstring2buf(t):"[object ArrayBuffer]"===m.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new f.Buf8(l),s.next_out=0,s.avail_out=l),(n=c.inflate(s,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&u&&(n=c.inflateSetDictionary(this.strm,u)),n===p.Z_BUF_ERROR&&!0===d&&(n=p.Z_OK,d=!1),n!==p.Z_STREAM_END&&n!==p.Z_OK)return this.onEnd(n),!(this.ended=!0);s.next_out&&(0!==s.avail_out&&n!==p.Z_STREAM_END&&(0!==s.avail_in||a!==p.Z_FINISH&&a!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(i=h.utf8border(s.output,s.next_out),o=s.next_out-i,r=h.buf2string(s.output,i),s.next_out=o,s.avail_out=l-o,o&&f.arraySet(s.output,s.output,i,o,0),this.onData(r)):this.onData(f.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(d=!0)}while((0<s.avail_in||0===s.avail_out)&&n!==p.Z_STREAM_END);return n===p.Z_STREAM_END&&(a=p.Z_FINISH),a===p.Z_FINISH?(n=c.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p.Z_OK):a!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(s.avail_out=0))},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){t===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=r,n.inflate=s,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,s(t,e)},n.ungzip=s},{"./utils/common":191,"./utils/strings":192,"./zlib/constants":194,"./zlib/gzheader":197,"./zlib/inflate":199,"./zlib/messages":201,"./zlib/zstream":203}],191:[function(t,e,n){"use strict";var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e,n,a=Array.prototype.slice.call(arguments,1);a.length;){var i=a.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var o in i)e=i,n=o,Object.prototype.hasOwnProperty.call(e,n)&&(t[o]=i[o])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,a,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+a),i);else for(var o=0;o<a;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,a,i,o,r;for(e=a=0,n=t.length;e<n;e++)a+=t[e].length;for(r=new Uint8Array(a),e=i=0,n=t.length;e<n;e++)o=t[e],r.set(o,i),i+=o.length;return r}},o={arraySet:function(t,e,n,a,i){for(var o=0;o<a;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(a)},{}],192:[function(t,e,n){"use strict";var l=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var u=new l.Buf8(256),a=0;a<256;a++)u[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function d(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}u[254]=u[254]=1,n.string2buf=function(t){var e,n,a,i,o,r=t.length,s=0;for(i=0;i<r;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<r&&56320==(64512&(a=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new l.Buf8(s),i=o=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<r&&56320==(64512&(a=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e},n.buf2binstring=function(t){return d(t,t.length)},n.binstring2buf=function(t){for(var e=new l.Buf8(t.length),n=0,a=e.length;n<a;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,a,i,o,r=e||t.length,s=new Array(2*r);for(n=a=0;n<r;)if((i=t[n++])<128)s[a++]=i;else if(4<(o=u[i]))s[a++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<r;)i=i<<6|63&t[n++],o--;1<o?s[a++]=65533:i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|1023&i)}return d(s,a)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+u[t[n]]>e?n:e}},{"./common":191}],193:[function(t,e,n){"use strict";e.exports=function(t,e,n,a){for(var i=65535&t|0,o=t>>>16&65535|0,r=0;0!==n;){for(n-=r=2e3<n?2e3:n;o=o+(i=i+e[a++]|0)|0,--r;);i%=65521,o%=65521}return i|o<<16|0}},{}],194:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],195:[function(t,e,n){"use strict";var s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,a){var i=s,o=a+n;t^=-1;for(var r=a;r<o;r++)t=t>>>8^i[255&(t^e[r])];return-1^t}},{}],196:[function(t,e,n){"use strict";var l,f=t("../utils/common"),u=t("./trees"),h=t("./adler32"),p=t("./crc32"),a=t("./messages"),d=0,c=4,m=0,g=-2,v=-1,y=4,i=2,_=8,b=9,o=286,r=30,s=19,w=2*o+1,E=15,T=3,k=258,P=k+T+1,x=42,C=113,O=1,S=2,L=3,M=4;function A(t,e){return t.msg=a[e],e}function R(t){return(t<<1)-(4<t?9:0)}function B(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(f.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function F(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function N(t,e){t.pending_buf[t.pending++]=e}function D(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function j(t,e){var n,a,i=t.max_chain_length,o=t.strstart,r=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-P?t.strstart-(t.w_size-P):0,u=t.window,d=t.w_mask,c=t.prev,f=t.strstart+k,h=u[o+r-1],p=u[o+r];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+r]===p&&u[n+r-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(a=k-(f-o),o=f-k,r<a){if(t.match_start=e,s<=(r=a))break;h=u[o+r-1],p=u[o+r]}}}while((e=c[e&d])>l&&0!=--i);return r<=t.lookahead?r:t.lookahead}function H(t){var e,n,a,i,o,r,s,l,u,d,c=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=c+(c-P)){for(f.arraySet(t.window,t.window,c,c,0),t.match_start-=c,t.strstart-=c,t.block_start-=c,e=n=t.hash_size;a=t.head[--e],t.head[e]=c<=a?a-c:0,--n;);for(e=n=c;a=t.prev[--e],t.prev[e]=c<=a?a-c:0,--n;);i+=c}if(0===t.strm.avail_in)break;if(r=t.strm,s=t.window,l=t.strstart+t.lookahead,u=i,d=void 0,d=r.avail_in,u<d&&(d=u),n=0===d?0:(r.avail_in-=d,f.arraySet(s,r.input,r.next_in,d,l),1===r.state.wrap?r.adler=h(r.adler,s,d,l):2===r.state.wrap&&(r.adler=p(r.adler,s,d,l)),r.next_in+=d,r.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=T)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+T-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<T)););}while(t.lookahead<P&&0!==t.strm.avail_in)}function W(t,e){for(var n,a;;){if(t.lookahead<P){if(H(t),t.lookahead<P&&e===d)return O;if(0===t.lookahead)break}if(n=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-P&&(t.match_length=j(t,n)),t.match_length>=T)if(a=u._tr_tally(t,t.strstart-t.match_start,t.match_length-T),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=T){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(F(t,!1),0===t.strm.avail_out))return O}return t.insert=t.strstart<T-1?t.strstart:T-1,e===c?(F(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?O:S}function U(t,e){for(var n,a,i;;){if(t.lookahead<P){if(H(t),t.lookahead<P&&e===d)return O;if(0===t.lookahead)break}if(n=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=T-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-P&&(t.match_length=j(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===T&&4096<t.strstart-t.match_start)&&(t.match_length=T-1)),t.prev_length>=T&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-T,a=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-T),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=T-1,t.strstart++,a&&(F(t,!1),0===t.strm.avail_out))return O}else if(t.match_available){if((a=u._tr_tally(t,0,t.window[t.strstart-1]))&&F(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return O}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<T-1?t.strstart:T-1,e===c?(F(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?O:S}function Y(t,e,n,a,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=a,this.func=i}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*w),this.dyn_dtree=new f.Buf16(2*(2*r+1)),this.bl_tree=new f.Buf16(2*(2*s+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(E+1),this.heap=new f.Buf16(2*o+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*o+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=i,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?x:C,t.adler=2===e.wrap?0:1,e.last_flush=d,u._tr_init(e),m):A(t,g)}function G(t){var e,n=z(t);return n===m&&((e=t.state).window_size=2*e.w_size,B(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=T-1,e.match_available=0,e.ins_h=0),n}function X(t,e,n,a,i,o){if(!t)return g;var r=1;if(e===v&&(e=6),a<0?(r=0,a=-a):15<a&&(r=2,a-=16),i<1||b<i||n!==_||a<8||15<a||e<0||9<e||o<0||y<o)return A(t,g);8===a&&(a=9);var s=new q;return(t.state=s).strm=t,s.wrap=r,s.gzhead=null,s.w_bits=a,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+T-1)/T),s.window=new f.Buf8(2*s.w_size),s.head=new f.Buf16(s.hash_size),s.prev=new f.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new f.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,G(t)}l=[new Y(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return O;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+n;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,F(t,!1),0===t.strm.avail_out))return O;if(t.strstart-t.block_start>=t.w_size-P&&(F(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===c?(F(t,!0),0===t.strm.avail_out?L:M):(t.strstart>t.block_start&&(F(t,!1),t.strm.avail_out),O)}),new Y(4,4,8,4,W),new Y(4,5,16,8,W),new Y(4,6,32,32,W),new Y(4,4,16,16,U),new Y(8,16,32,32,U),new Y(8,16,128,128,U),new Y(8,32,128,256,U),new Y(32,128,258,1024,U),new Y(32,258,258,4096,U)],n.deflateInit=function(t,e){return X(t,e,_,15,8,0)},n.deflateInit2=X,n.deflateReset=G,n.deflateResetKeep=z,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,m):g},n.deflate=function(t,e){var n,a,i,o;if(!t||!t.state||5<e||e<0)return t?A(t,g):g;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||666===a.status&&e!==c)return A(t,0===t.avail_out?-5:g);if(a.strm=t,n=a.last_flush,a.last_flush=e,a.status===x)if(2===a.wrap)t.adler=0,N(a,31),N(a,139),N(a,8),a.gzhead?(N(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),N(a,255&a.gzhead.time),N(a,a.gzhead.time>>8&255),N(a,a.gzhead.time>>16&255),N(a,a.gzhead.time>>24&255),N(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),N(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(N(a,255&a.gzhead.extra.length),N(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=p(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(N(a,0),N(a,0),N(a,0),N(a,0),N(a,0),N(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),N(a,3),a.status=C);else{var r=_+(a.w_bits-8<<4)<<8;r|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(r|=32),r+=31-r%31,a.status=C,D(a,r),0!==a.strstart&&(D(a,t.adler>>>16),D(a,65535&t.adler)),t.adler=1}if(69===a.status)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),I(t),i=a.pending,a.pending!==a.pending_buf_size));)N(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),I(t),i=a.pending,a.pending===a.pending_buf_size)){o=1;break}N(a,o=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0)}while(0!==o);a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),0===o&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),I(t),i=a.pending,a.pending===a.pending_buf_size)){o=1;break}N(a,o=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0)}while(0!==o);a.gzhead.hcrc&&a.pending>i&&(t.adler=p(t.adler,a.pending_buf,a.pending-i,i)),0===o&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&I(t),a.pending+2<=a.pending_buf_size&&(N(a,255&t.adler),N(a,t.adler>>8&255),t.adler=0,a.status=C)):a.status=C),0!==a.pending){if(I(t),0===t.avail_out)return a.last_flush=-1,m}else if(0===t.avail_in&&R(e)<=R(n)&&e!==c)return A(t,-5);if(666===a.status&&0!==t.avail_in)return A(t,-5);if(0!==t.avail_in||0!==a.lookahead||e!==d&&666!==a.status){var s=2===a.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return O;break}if(t.match_length=0,n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(F(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===c?(F(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?O:S}(a,e):3===a.strategy?function(t,e){for(var n,a,i,o,r=t.window;;){if(t.lookahead<=k){if(H(t),t.lookahead<=k&&e===d)return O;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=T&&0<t.strstart&&(a=r[i=t.strstart-1])===r[++i]&&a===r[++i]&&a===r[++i]){o=t.strstart+k;do{}while(a===r[++i]&&a===r[++i]&&a===r[++i]&&a===r[++i]&&a===r[++i]&&a===r[++i]&&a===r[++i]&&a===r[++i]&&i<o);t.match_length=k-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=T?(n=u._tr_tally(t,1,t.match_length-T),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(F(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===c?(F(t,!0),0===t.strm.avail_out?L:M):t.last_lit&&(F(t,!1),0===t.strm.avail_out)?O:S}(a,e):l[a.level].func(a,e);if(s!==L&&s!==M||(a.status=666),s===O||s===L)return 0===t.avail_out&&(a.last_flush=-1),m;if(s===S&&(1===e?u._tr_align(a):5!==e&&(u._tr_stored_block(a,0,0,!1),3===e&&(B(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),I(t),0===t.avail_out))return a.last_flush=-1,m}return e!==c?m:a.wrap<=0?1:(2===a.wrap?(N(a,255&t.adler),N(a,t.adler>>8&255),N(a,t.adler>>16&255),N(a,t.adler>>24&255),N(a,255&t.total_in),N(a,t.total_in>>8&255),N(a,t.total_in>>16&255),N(a,t.total_in>>24&255)):(D(a,t.adler>>>16),D(a,65535&t.adler)),I(t),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?m:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==x&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?A(t,g):(t.state=null,e===C?A(t,-3):m):g},n.deflateSetDictionary=function(t,e){var n,a,i,o,r,s,l,u,d=e.length;if(!t||!t.state)return g;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==x||n.lookahead)return g;for(1===o&&(t.adler=h(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===o&&(B(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new f.Buf8(n.w_size),f.arraySet(u,e,d-n.w_size,n.w_size,0),e=u,d=n.w_size),r=t.avail_in,s=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(n);n.lookahead>=T;){for(a=n.strstart,i=n.lookahead-(T-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+T-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++,--i;);n.strstart=a,n.lookahead=T-1,H(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=T-1,n.match_available=0,t.next_in=s,t.input=l,t.avail_in=r,n.wrap=o,m},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":191,"./adler32":193,"./crc32":195,"./messages":201,"./trees":202}],197:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],198:[function(t,e,n){"use strict";e.exports=function(t,e){var n,a,i,o,r,s,l,u,d,c,f,h,p,m,g,v,y,_,b,w,E,T,k,P,x;n=t.state,a=t.next_in,P=t.input,i=a+(t.avail_in-5),o=t.next_out,x=t.output,r=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,u=n.wsize,d=n.whave,c=n.wnext,f=n.window,h=n.hold,p=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(h+=P[a++]<<p,p+=8,h+=P[a++]<<p,p+=8),_=m[h&v];e:for(;;){if(h>>>=b=_>>>24,p-=b,0===(b=_>>>16&255))x[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=m[(65535&_)+(h&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&_,(b&=15)&&(p<b&&(h+=P[a++]<<p,p+=8),w+=h&(1<<b)-1,h>>>=b,p-=b),p<15&&(h+=P[a++]<<p,p+=8,h+=P[a++]<<p,p+=8),_=g[h&y];n:for(;;){if(h>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=g[(65535&_)+(h&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(E=65535&_,p<(b&=15)&&(h+=P[a++]<<p,(p+=8)<b&&(h+=P[a++]<<p,p+=8)),l<(E+=h&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=b,p-=b,(b=o-r)<E){if(d<(b=E-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=f,(T=0)===c){if(T+=u-b,b<w){for(w-=b;x[o++]=f[T++],--b;);T=o-E,k=x}}else if(c<b){if(T+=u+c-b,(b-=c)<w){for(w-=b;x[o++]=f[T++],--b;);if(T=0,c<w){for(w-=b=c;x[o++]=f[T++],--b;);T=o-E,k=x}}}else if(T+=c-b,b<w){for(w-=b;x[o++]=f[T++],--b;);T=o-E,k=x}for(;2<w;)x[o++]=k[T++],x[o++]=k[T++],x[o++]=k[T++],w-=3;w&&(x[o++]=k[T++],1<w&&(x[o++]=k[T++]))}else{for(T=o-E;x[o++]=x[T++],x[o++]=x[T++],x[o++]=x[T++],2<(w-=3););w&&(x[o++]=x[T++],1<w&&(x[o++]=x[T++]))}break}}break}}while(a<i&&o<s);a-=w=p>>3,h&=(1<<(p-=w<<3))-1,t.next_in=a,t.next_out=o,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=p}},{}],199:[function(t,e,n){"use strict";var S=t("../utils/common"),L=t("./adler32"),M=t("./crc32"),A=t("./inffast"),R=t("./inftrees"),B=1,I=2,F=0,N=-2,D=1,a=852,i=592;function j(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new S.Buf16(320),this.work=new S.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new S.Buf32(a),e.distcode=e.distdyn=new S.Buf32(i),e.sane=1,e.back=-1,F):N}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,r(t)):N}function l(t,e){var n,a;return t&&t.state?(a=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?N:(null!==a.window&&a.wbits!==e&&(a.window=null),a.wrap=n,a.wbits=e,s(t))):N}function u(t,e){var n,a;return t?(a=new o,(t.state=a).window=null,(n=l(t,e))!==F&&(t.state=null),n):N}var d,c,f=!0;function H(t){if(f){var e;for(d=new S.Buf32(512),c=new S.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(R(B,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;R(I,t.lens,0,32,c,0,t.work,{bits:5}),f=!1}t.lencode=d,t.lenbits=9,t.distcode=c,t.distbits=5}function W(t,e,n,a){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new S.Buf8(o.wsize)),a>=o.wsize?(S.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(a<(i=o.wsize-o.wnext)&&(i=a),S.arraySet(o.window,e,n-a,i,o.wnext),(a-=i)?(S.arraySet(o.window,e,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}n.inflateReset=s,n.inflateReset2=l,n.inflateResetKeep=r,n.inflateInit=function(t){return u(t,15)},n.inflateInit2=u,n.inflate=function(t,e){var n,a,i,o,r,s,l,u,d,c,f,h,p,m,g,v,y,_,b,w,E,T,k,P,x=0,C=new S.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return N;12===(n=t.state).mode&&(n.mode=13),r=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,a=t.input,s=t.avail_in,u=n.hold,d=n.bits,c=s,f=l,T=F;t:for(;;)switch(n.mode){case D:if(0===n.wrap){n.mode=13;break}for(;d<16;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(2&n.wrap&&35615===u){C[n.check=0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0),d=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){t.msg="unknown compression method",n.mode=30;break}if(d-=4,E=8+(15&(u>>>=4)),0===n.wbits)n.wbits=E;else if(E>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<E,t.adler=n.check=1,n.mode=512&u?10:12,d=u=0;break;case 2:for(;d<16;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(n.flags=u,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0)),d=u=0,n.mode=3;case 3:for(;d<32;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}n.head&&(n.head.time=u),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,n.check=M(n.check,C,4,0)),d=u=0,n.mode=4;case 4:for(;d<16;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0)),d=u=0,n.mode=5;case 5:if(1024&n.flags){for(;d<16;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=M(n.check,C,2,0)),d=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(s<(h=n.length)&&(h=s),h&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),S.arraySet(n.head.extra,a,o,h,E)),512&n.flags&&(n.check=M(n.check,a,h,o)),s-=h,o+=h,n.length-=h),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;for(h=0;E=a[o+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E)),E&&h<s;);if(512&n.flags&&(n.check=M(n.check,a,h,o)),s-=h,o+=h,E)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;for(h=0;E=a[o+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E)),E&&h<s;);if(512&n.flags&&(n.check=M(n.check,a,h,o)),s-=h,o+=h,E)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;d<16;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}d=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;d<32;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}t.adler=n.check=j(u),d=u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=r,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=d,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){u>>>=7&d,d-=7&d,n.mode=27;break}for(;d<3;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}switch(n.last=1&u,d-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(H(n),n.mode=20,6!==e)break;u>>>=2,d-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}u>>>=2,d-=2;break;case 14:for(u>>>=7&d,d-=7&d;d<32;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,d=u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(h=n.length){if(s<h&&(h=s),l<h&&(h=l),0===h)break t;S.arraySet(i,a,o,h,r),s-=h,o+=h,l-=h,r+=h,n.length-=h;break}n.mode=12;break;case 17:for(;d<14;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(n.nlen=257+(31&u),u>>>=5,d-=5,n.ndist=1+(31&u),u>>>=5,d-=5,n.ncode=4+(15&u),u>>>=4,d-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}n.lens[O[n.have++]]=7&u,u>>>=3,d-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},T=R(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,T){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(x=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&x,!((g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(y<16)u>>>=g,d-=g,n.lens[n.have++]=y;else{if(16===y){for(P=g+2;d<P;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(u>>>=g,d-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}E=n.lens[n.have-1],h=3+(3&u),u>>>=2,d-=2}else if(17===y){for(P=g+3;d<P;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}d-=g,E=0,h=3+(7&(u>>>=g)),u>>>=3,d-=3}else{for(P=g+7;d<P;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}d-=g,E=0,h=11+(127&(u>>>=g)),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;h--;)n.lens[n.have++]=E}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,k={bits:n.lenbits},T=R(B,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,T){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},T=R(I,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,T){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=s&&258<=l){t.next_out=r,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=d,A(t,f),r=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,a=t.input,s=t.avail_in,u=n.hold,d=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;v=(x=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&x,!((g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(v&&0==(240&v)){for(_=g,b=v,w=y;v=(x=n.lencode[w+((u&(1<<_+b)-1)>>_)])>>>16&255,y=65535&x,!(_+(g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}u>>>=_,d-=_,n.back+=_}if(u>>>=g,d-=g,n.back+=g,n.length=y,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(P=n.extra;d<P;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(x=n.distcode[u&(1<<n.distbits)-1])>>>16&255,y=65535&x,!((g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(0==(240&v)){for(_=g,b=v,w=y;v=(x=n.distcode[w+((u&(1<<_+b)-1)>>_)])>>>16&255,y=65535&x,!(_+(g=x>>>24)<=d);){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}u>>>=_,d-=_,n.back+=_}if(u>>>=g,d-=g,n.back+=g,64&v){t.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(P=n.extra;d<P;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(h=f-l,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=i,p=r-n.offset,h=n.length;for(l<h&&(h=l),l-=h,n.length-=h;i[r++]=m[p++],--h;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;i[r++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;d<32;){if(0===s)break t;s--,u|=a[o++]<<d,d+=8}if(f-=l,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?M(n.check,i,f,r-f):L(n.check,i,f,r-f)),f=l,(n.flags?u:j(u))!==n.check){t.msg="incorrect data check",n.mode=30;break}d=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break t;s--,u+=a[o++]<<d,d+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}d=u=0}n.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return N}return t.next_out=r,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=d,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&W(t,t.output,t.next_out,f-t.avail_out)?(n.mode=31,-4):(c-=t.avail_in,f-=t.avail_out,t.total_in+=c,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?M(n.check,i,f,t.next_out-f):L(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===f||4===e)&&T===F&&(T=-5),T)},n.inflateEnd=function(t){if(!t||!t.state)return N;var e=t.state;return e.window&&(e.window=null),t.state=null,F},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?N:((n.head=e).done=!1,F):N},n.inflateSetDictionary=function(t,e){var n,a=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?N:11===n.mode&&L(1,e,a,0)!==n.check?-3:W(t,e,a,a)?(n.mode=31,-4):(n.havedict=1,F):N},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":191,"./adler32":193,"./crc32":195,"./inffast":198,"./inftrees":200}],200:[function(t,e,n){"use strict";var B=t("../utils/common"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],F=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,a,i,o,r,s){var l,u,d,c,f,h,p,m,g,v=s.bits,y=0,_=0,b=0,w=0,E=0,T=0,k=0,P=0,x=0,C=0,O=null,S=0,L=new B.Buf16(16),M=new B.Buf16(16),A=null,R=0;for(y=0;y<=15;y++)L[y]=0;for(_=0;_<a;_++)L[e[n+_]]++;for(E=v,w=15;1<=w&&0===L[w];w--);if(w<E&&(E=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<w&&0===L[b];b++);for(E<b&&(E=b),y=P=1;y<=15;y++)if(P<<=1,(P-=L[y])<0)return-1;if(0<P&&(0===t||1!==w))return-1;for(M[1]=0,y=1;y<15;y++)M[y+1]=M[y]+L[y];for(_=0;_<a;_++)0!==e[n+_]&&(r[M[e[n+_]]++]=_);if(0===t?(O=A=r,h=19):1===t?(O=I,S-=257,A=F,R-=257,h=256):(O=N,A=D,h=-1),y=b,f=o,k=_=C=0,d=-1,c=(x=1<<(T=E))-1,1===t&&852<x||2===t&&592<x)return 1;for(;;){for(p=y-k,r[_]<h?(m=0,g=r[_]):r[_]>h?(m=A[R+r[_]],g=O[S+r[_]]):(m=96,g=0),l=1<<y-k,b=u=1<<T;i[f+(C>>k)+(u-=l)]=p<<24|m<<16|g|0,0!==u;);for(l=1<<y-1;C&l;)l>>=1;if(0!==l?(C&=l-1,C+=l):C=0,_++,0==--L[y]){if(y===w)break;y=e[n+r[_]]}if(E<y&&(C&c)!==d){for(0===k&&(k=E),f+=b,P=1<<(T=y-k);T+k<w&&!((P-=L[T+k])<=0);)T++,P<<=1;if(x+=1<<T,1===t&&852<x||2===t&&592<x)return 1;i[d=C&c]=E<<24|T<<16|f-o|0}}return 0!==C&&(i[f+C]=y-k<<24|64<<16|0),s.bits=E,0}},{"../utils/common":191}],201:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],202:[function(t,e,n){"use strict";var l=t("../utils/common"),s=0,u=1;function a(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,r=29,c=256,f=c+1+r,h=30,p=19,g=2*f+1,v=15,i=16,m=7,y=256,_=16,b=17,w=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(f+2));a(x);var C=new Array(2*h);a(C);var O=new Array(512);a(O);var S=new Array(256);a(S);var L=new Array(r);a(L);var M,A,R,B=new Array(h);function I(t,e,n,a,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=a,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function F(t){return t<256?O[t]:O[256+(t>>>7)]}function N(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function D(t,e,n){t.bi_valid>i-n?(t.bi_buf|=e<<t.bi_valid&65535,N(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=n-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function j(t,e,n){D(t,n[2*e],n[2*e+1])}function H(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function W(t,e,n){var a,i,o=new Array(v+1),r=0;for(a=1;a<=v;a++)o[a]=r=r+n[a-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=H(o[s]++,s))}}function U(t){var e;for(e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<p;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Y(t){8<t.bi_valid?N(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function q(t,e,n,a){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&a[e]<=a[n]}function z(t,e,n){for(var a=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&q(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!q(e,a,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=a}function G(t,e,n){var a,i,o,r,s=0;if(0!==t.last_lit)for(;a=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===a?j(t,i,e):(j(t,(o=S[i])+c+1,e),0!==(r=E[o])&&D(t,i-=L[o],r),j(t,o=F(--a),n),0!==(r=T[o])&&D(t,a-=B[o],r)),s<t.last_lit;);j(t,y,e)}function X(t,e){var n,a,i,o=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=g,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=r[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)z(t,o,n);for(i=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],z(t,o,1),a=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=a,o[2*i]=o[2*n]+o[2*a],t.depth[i]=(t.depth[n]>=t.depth[a]?t.depth[n]:t.depth[a])+1,o[2*n+1]=o[2*a+1]=i,t.heap[1]=i++,z(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,a,i,o,r,s,l=e.dyn_tree,u=e.max_code,d=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=v;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<g;n++)p<(o=l[2*l[2*(a=t.heap[n])+1]+1]+1)&&(o=p,m++),l[2*a+1]=o,u<a||(t.bl_count[o]++,r=0,h<=a&&(r=f[a-h]),s=l[2*a],t.opt_len+=s*(o+r),c&&(t.static_len+=s*(d[2*a+1]+r)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(o=p;0!==o;o--)for(a=t.bl_count[o];0!==a;)u<(i=t.heap[--n])||(l[2*i+1]!==o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),a--)}}(t,e),W(o,u,t.bl_count)}function V(t,e,n){var a,i,o=-1,r=e[1],s=0,l=7,u=4;for(0===r&&(l=138,u=3),e[2*(n+1)+1]=65535,a=0;a<=n;a++)i=r,r=e[2*(a+1)+1],++s<l&&i===r||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*_]++):s<=10?t.bl_tree[2*b]++:t.bl_tree[2*w]++,o=i,(s=0)===r?(l=138,u=3):i===r?(l=6,u=3):(l=7,u=4))}function K(t,e,n){var a,i,o=-1,r=e[1],s=0,l=7,u=4;for(0===r&&(l=138,u=3),a=0;a<=n;a++)if(i=r,r=e[2*(a+1)+1],!(++s<l&&i===r)){if(s<u)for(;j(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(j(t,i,t.bl_tree),s--),j(t,_,t.bl_tree),D(t,s-3,2)):s<=10?(j(t,b,t.bl_tree),D(t,s-3,3)):(j(t,w,t.bl_tree),D(t,s-11,7));o=i,(s=0)===r?(l=138,u=3):i===r?(l=6,u=3):(l=7,u=4)}}a(B);var Z=!1;function $(t,e,n,a){var i,o,r,s;D(t,(d<<1)+(a?1:0),3),o=e,r=n,s=!0,Y(i=t),s&&(N(i,r),N(i,~r)),l.arraySet(i.pending_buf,i.window,o,r,i.pending),i.pending+=r}n._tr_init=function(t){Z||(function(){var t,e,n,a,i,o=new Array(v+1);for(a=n=0;a<r-1;a++)for(L[a]=n,t=0;t<1<<E[a];t++)S[n++]=a;for(S[n-1]=a,a=i=0;a<16;a++)for(B[a]=i,t=0;t<1<<T[a];t++)O[i++]=a;for(i>>=7;a<h;a++)for(B[a]=i<<7,t=0;t<1<<T[a]-7;t++)O[256+i++]=a;for(e=0;e<=v;e++)o[e]=0;for(t=0;t<=143;)x[2*t+1]=8,t++,o[8]++;for(;t<=255;)x[2*t+1]=9,t++,o[9]++;for(;t<=279;)x[2*t+1]=7,t++,o[7]++;for(;t<=287;)x[2*t+1]=8,t++,o[8]++;for(W(x,f+1,o),t=0;t<h;t++)C[2*t+1]=5,C[2*t]=H(t,5);M=new I(x,E,c+1,f,v),A=new I(C,T,0,h,v),R=new I(new Array(0),k,0,p,m)}(),Z=!0),t.l_desc=new o(t.dyn_ltree,M),t.d_desc=new o(t.dyn_dtree,A),t.bl_desc=new o(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,U(t)},n._tr_stored_block=$,n._tr_flush_block=function(t,e,n,a){var i,o,r=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return u;for(e=32;e<c;e++)if(0!==t.dyn_ltree[2*e])return u;return s}(t)),X(t,t.l_desc),X(t,t.d_desc),r=function(t){var e;for(V(t,t.dyn_ltree,t.l_desc.max_code),V(t,t.dyn_dtree,t.d_desc.max_code),X(t,t.bl_desc),e=p-1;3<=e&&0===t.bl_tree[2*P[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?$(t,e,n,a):4===t.strategy||o===i?(D(t,2+(a?1:0),3),G(t,x,C)):(D(t,4+(a?1:0),3),function(t,e,n,a){var i;for(D(t,e-257,5),D(t,n-1,5),D(t,a-4,4),i=0;i<a;i++)D(t,t.bl_tree[2*P[i]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,r+1),G(t,t.dyn_ltree,t.dyn_dtree)),U(t),a&&Y(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(S[n]+c+1)]++,t.dyn_dtree[2*F(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){var e;D(t,2,3),j(t,y,x),16===(e=t).bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":191}],203:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],204:[function(t,e,n){var a,i;a=this,i=function(){"use strict";var r=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],s=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function i(t,e){e=e||Object.create(null);var n=document.createEvent("Event");n.initEvent(t,e.bubbles||!1,e.cancelable||!1);for(var a,i=2;i<r.length;i++)n[a=r[i]]=e[a]||s[i];n.buttons=e.buttons||0;var o=0;return o=e.pressure&&n.buttons?e.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=e.pointerId||0,n.width=e.width||0,n.height=e.height||0,n.pressure=o,n.tiltX=e.tiltX||0,n.tiltY=e.tiltY||0,n.twist=e.twist||0,n.tangentialPressure=e.tangentialPressure||0,n.pointerType=e.pointerType||"",n.hwTimestamp=e.hwTimestamp||0,n.isPrimary=e.isPrimary||!1,n}var t=window.Map&&window.Map.prototype.forEach?Map:e;function e(){this.array=[],this.size=0}var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],l=[!(e.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(n,a){return this.array.forEach(function(t,e){n.call(a,t,e,this)},this)}}),!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],n={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!=typeof SVGElementInstance,d={pointermap:new t,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,a=n.events;a&&(a.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,a=0;a<n&&(e=this.eventSourceList[a]);a++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,a=0;a<n&&(e=this.eventSourceList[a]);a++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(e,t){t.forEach(function(t){this.addEvent(e,t)},this)},unlisten:function(e,t){t.forEach(function(t){this.removeEvent(e,t)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=new i(t,e);return e.preventDefault&&(n.preventDefault=e.preventDefault),n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),a=0;a<o.length;a++)n[e=o[a]]=t[e]||l[a],!u||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in n?void 0:e:t._target},propagate:function(e,n,t){for(var a=e.target,i=[];a!==document&&!a.contains(e.relatedTarget);)if(i.push(a),!(a=a.parentNode))return;t&&i.reverse(),i.forEach(function(t){e.target=t,n.call(this,e)},this)},setCapture:function(t,e,n){this.captureInfo[t]&&this.releaseCapture(t,n),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,n),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var a=new i("gotpointercapture");a.pointerId=t,a._target=e,n||this.asyncDispatchEvent(a)},releaseCapture:function(t,e){var n=this.captureInfo[t];if(n){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var a=new i("lostpointercapture");a.pointerId=t,a._target=n,e||this.asyncDispatchEvent(a)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};d.boundHandler=d.eventHandler.bind(d);var a={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var a,i,o=t.elementFromPoint(e,n);for(i=this.targetingShadow(o);i;){if(a=i.elementFromPoint(e,n)){var r=this.targetingShadow(a);return this.searchRoot(r,e,n)||a}i=this.olderShadow(i)}return o}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,a=this.owner(t.target);return a.elementFromPoint(e,n)||(a=document),this.searchRoot(a,e,n)}},c=Array.prototype.forEach.call.bind(Array.prototype.forEach),f=Array.prototype.map.call.bind(Array.prototype.map),h=Array.prototype.slice.call.bind(Array.prototype.slice),p=Array.prototype.filter.call.bind(Array.prototype.filter),m=window.MutationObserver||window.WebKitMutationObserver,g={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function v(t,e,n,a){this.addCallback=t.bind(a),this.removeCallback=e.bind(a),this.changedCallback=n.bind(a),m&&(this.observer=new m(this.mutationWatcher.bind(this)))}function y(t){return"body /shadow-deep/ "+_(t)}function _(t){return'[touch-action="'+t+'"]'}function b(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}v.prototype={watchSubtree:function(t){this.observer&&a.canTarget(t)&&this.observer.observe(t,g)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){c(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(h(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=f(t,this.findElements,this);return e.push(p(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var w=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",T=window.PointerEvent||window.MSPointerEvent,k=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;var P=d.pointermap,x=[1,4,2,8,16],C=!1;try{C=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var O,S={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){d.listen(t,this.events)},unregister:function(t){d.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,a=t.clientX,i=t.clientY,o=0,r=n.length;o<r&&(e=n[o]);o++){var s=Math.abs(a-e.x),l=Math.abs(i-e.y);if(s<=25&&l<=25)return!0}},prepareEvent:function(t){var e=d.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var n=P.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);C||(n.buttons=x[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),P.set(this.POINTER_ID,t),e&&0!==e.buttons?d.move(n):d.down(n)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),d.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);if(!C){var a=x[n.button];n.buttons=e?e.buttons&~a:0,t.buttons=n.buttons}P.set(this.POINTER_ID,t),n.buttons&=~x[n.button],0===n.buttons?d.up(n):d.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),d.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);C||this.prepareButtonsForMove(e,t),e.button=-1,d.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);d.cancel(e),this.deactivateMouse()},deactivateMouse:function(){P.delete(this.POINTER_ID)}},L=d.captureInfo,M=a.findTarget.bind(a),A=a.allShadows.bind(a),R=d.pointermap,B="touch-action",I={events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){O.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(B),n=this.touchActionToScrollType(e);n&&(t._scrollType=n,d.listen(t,this.events),A(t).forEach(function(t){t._scrollType=n,d.listen(t,this.events)},this))},elementRemoved:function(t){t._scrollType=void 0,d.unlisten(t,this.events),A(t).forEach(function(t){t._scrollType=void 0,d.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute(B),a=this.touchActionToScrollType(n),i=this.touchActionToScrollType(e);a&&i?(t._scrollType=a,A(t).forEach(function(t){t._scrollType=a},this)):i?this.elementRemoved(t):a&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return"none"===e?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":n.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===R.size||1===R.size&&R.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=d.cloneEvent(t),a=n.pointerId=t.identifier+2;n.target=L[a]||M(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=t.force||t.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var i=this;return n.preventDefault=function(){i.scrolling=!1,i.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var a,i=0;i<n.length;i++)a=n[i],e.call(this,this.touchToPointer(a))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if("none"===n)e=!1;else if("XY"===n)e=!0;else{var a=t.changedTouches[0],i=n,o="Y"===n?"X":"Y",r=Math.abs(a["client"+i]-this.firstXY[i]);e=Math.abs(a["client"+o]-this.firstXY[o])<=r}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,a=0,i=t.length;a<i&&(n=t[a]);a++)if(n.identifier===e)return!0},vacuumTouches:function(t){var a=t.touches;if(R.size>=a.length){var i=[];R.forEach(function(t,e){if(1!==e&&!this.findTouch(a,e-2)){var n=t.out;i.push(n)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){R.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),d.enterOver(t),d.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=R.get(e.pointerId);if(n){var a=n.out,i=n.outTarget;d.move(e),a&&i!==e.target&&(a.relatedTarget=e.target,e.relatedTarget=i,a.target=i,e.target?(d.leaveOut(a),d.enterOver(e)):(e.target=i,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(d.up(t),d.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){d.cancel(t),d.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){R.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=S.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var a={x:n.clientX,y:n.clientY};e.push(a);var i=function(t,e){var n=t.indexOf(e);-1<n&&t.splice(n,1)}.bind(null,e,a);setTimeout(i,2500)}}};O=new v(I.elementAdded,I.elementRemoved,I.elementChanged,I);var F,N,D,j=d.pointermap,H=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,W={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){d.listen(t,this.events)},unregister:function(t){d.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return H&&((e=d.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){j.delete(t)},MSPointerDown:function(t){j.set(t.pointerId,t);var e=this.prepareEvent(t);d.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);d.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);d.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);d.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);d.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);d.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=d.makeEvent("lostpointercapture",t);d.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=d.makeEvent("gotpointercapture",t);d.dispatchEvent(e)}};function U(t){if(!d.pointermap.has(t)){var e=new Error("InvalidPointerId");throw e.name="InvalidPointerId",e}}function Y(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function q(t){return 0!==d.pointermap.get(t).buttons}return window.navigator.msPointerEnabled?(F=function(t){U(t),Y(this),q(t)&&(d.setCapture(t,this,!0),this.msSetPointerCapture(t))},N=function(t){U(t),d.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(F=function(t){U(t),Y(this),q(t)&&d.setCapture(t,this)},N=function(t){U(t),d.releaseCapture(t)}),D=function(t){return!!d.captureInfo[t]},function(){if(T){w.forEach(function(t){String(t)===t?(E+=_(t)+b(t)+"\n",k&&(E+=y(t)+b(t)+"\n")):(E+=t.selectors.map(_)+b(t.rule)+"\n",k&&(E+=t.selectors.map(y)+b(t.rule)+"\n"))});var t=document.createElement("style");t.textContent=E,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=i,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),d.registerSource("ms",W)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),d.registerSource("mouse",S),void 0!==window.ontouchstart&&d.registerSource("touch",I);d.register(document)}}(),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:F},releasePointerCapture:{value:N},hasPointerCapture:{value:D}}),{dispatcher:d,Installer:v,PointerEvent:i,PointerMap:t,targetFinding:a}},"object"==typeof n&&void 0!==e?e.exports=i():a.PointerEventsPolyfill=i()},{}],205:[function(t,n,a){(function($){(function(){var t,e;t=this,e=function(){"use strict";var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,a=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(n&&0<=navigator.userAgent.indexOf(t[e]))return 1;return 0}();var r=n&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},a))}};function s(t){return t&&"[object Function]"==={}.toString.call(t)}function b(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function h(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function p(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=b(t),n=e.overflow,a=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+a)?t:p(h(t))}function m(t){return t&&t.referenceNode?t.referenceNode:t}var e=n&&!(!window.MSInputMethodContext||!document.documentMode),i=n&&/MSIE 10/.test(navigator.userAgent);function g(t){return 11===t?e:10===t?i:e||i}function R(t){if(!t)return document.documentElement;for(var e=g(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var a=n&&n.nodeName;return a&&"BODY"!==a&&"HTML"!==a?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===b(n,"position")?R(n):n:t?t.ownerDocument.documentElement:document.documentElement}function d(t){return null!==t.parentNode?d(t.parentNode):t}function v(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,a=n?t:e,i=n?e:t,o=document.createRange();o.setStart(a,0),o.setEnd(i,0);var r,s,l=o.commonAncestorContainer;if(t!==l&&e!==l||a.contains(i))return"BODY"===(s=(r=l).nodeName)||"HTML"!==s&&R(r.firstElementChild)!==r?R(l):l;var u=d(t);return u.host?v(u.host,e):v(t,d(e).host)}function y(t){var e="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"!==n&&"HTML"!==n)return t[e];var a=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||a)[e]}function c(t,e){var n="x"===e?"Left":"Top",a="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+a+"Width"])}function o(t,e,n,a){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],g(10)?parseInt(n["offset"+t])+parseInt(a["margin"+("Height"===t?"Top":"Left")])+parseInt(a["margin"+("Height"===t?"Bottom":"Right")]):0)}function _(t){var e=t.body,n=t.documentElement,a=g(10)&&getComputedStyle(n);return{height:o("Height",e,n,a),width:o("Width",e,n,a)}}var t=function(){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}(),w=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};function E(t){return B({},t,{right:t.left+t.width,bottom:t.top+t.height})}function I(t){var e={};try{if(g(10)){e=t.getBoundingClientRect();var n=y(t,"top"),a=y(t,"left");e.top+=n,e.left+=a,e.bottom+=n,e.right+=a}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?_(t.ownerDocument):{},r=o.width||t.clientWidth||i.width,s=o.height||t.clientHeight||i.height,l=t.offsetWidth-r,u=t.offsetHeight-s;if(l||u){var d=b(t);l-=c(d,"x"),u-=c(d,"y"),i.width-=l,i.height-=u}return E(i)}function T(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=g(10),i="HTML"===e.nodeName,o=I(t),r=I(e),s=p(t),l=b(e),u=parseFloat(l.borderTopWidth),d=parseFloat(l.borderLeftWidth);n&&i&&(r.top=Math.max(r.top,0),r.left=Math.max(r.left,0));var c=E({top:o.top-r.top-u,left:o.left-r.left-d,width:o.width,height:o.height});if(c.marginTop=0,c.marginLeft=0,!a&&i){var f=parseFloat(l.marginTop),h=parseFloat(l.marginLeft);c.top-=u-f,c.bottom-=u-f,c.left-=d-h,c.right-=d-h,c.marginTop=f,c.marginLeft=h}return(a&&!n?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(c=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=y(e,"top"),i=y(e,"left"),o=n?-1:1;return t.top+=a*o,t.bottom+=a*o,t.left+=i*o,t.right+=i*o,t}(c,e)),c}function k(t){if(!t||!t.parentElement||g())return document.documentElement;for(var e=t.parentElement;e&&"none"===b(e,"transform");)e=e.parentElement;return e||document.documentElement}function f(t,e,n,a){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},r=i?k(t):v(t,m(e));if("viewport"===a)o=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,a=T(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),r=e?0:y(n),s=e?0:y(n,"left");return E({top:r-a.top+a.marginTop,left:s-a.left+a.marginLeft,width:i,height:o})}(r,i);else{var s=void 0;"scrollParent"===a?"BODY"===(s=p(h(e))).nodeName&&(s=t.ownerDocument.documentElement):s="window"===a?t.ownerDocument.documentElement:a;var l=T(s,r,i);if("HTML"!==s.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===b(e,"position"))return!0;var a=h(e);return!!a&&t(a)}(r))o=l;else{var u=_(t.ownerDocument),d=u.height,c=u.width;o.top+=l.top-l.marginTop,o.bottom=d+l.top,o.left+=l.left-l.marginLeft,o.right=c+l.left}}var f="number"==typeof(n=n||0);return o.left+=f?n:n.left||0,o.top+=f?n:n.top||0,o.right-=f?n:n.right||0,o.bottom-=f?n:n.bottom||0,o}function l(t,e,a,n,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var r=f(a,n,o,i),s={top:{width:r.width,height:e.top-r.top},right:{width:r.right-e.right,height:r.height},bottom:{width:r.width,height:r.bottom-e.bottom},left:{width:e.left-r.left,height:r.height}},l=Object.keys(s).map(function(t){return B({key:t},s[t],{area:(e=s[t],e.width*e.height)});var e}).sort(function(t,e){return e.area-t.area}),u=l.filter(function(t){var e=t.width,n=t.height;return e>=a.clientWidth&&n>=a.clientHeight}),d=0<u.length?u[0].key:l[0].key,c=t.split("-")[1];return d+(c?"-"+c:"")}function u(t,e,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return T(n,a?k(e):v(e,m(n)),a)}function P(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),a=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+a,height:t.offsetHeight+n}}function x(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function C(t,e,n){n=n.split("-")[0];var a=P(t),i={width:a.width,height:a.height},o=-1!==["right","left"].indexOf(n),r=o?"top":"left",s=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return i[r]=e[r]+e[l]/2-a[l]/2,i[s]=n===s?e[s]-a[u]:e[x(s)],i}function F(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function O(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var a=F(t,function(t){return t[e]===n});return t.indexOf(a)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&s(e)&&(n.offsets.popper=E(n.offsets.popper),n.offsets.reference=E(n.offsets.reference),n=e(n,t))}),n}function S(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function N(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),a=0;a<e.length;a++){var i=e[a],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function L(t){var e=t.ownerDocument;return e?e.defaultView:window}function M(t,e,n,a){n.updateBound=a,L(t).addEventListener("resize",n.updateBound,{passive:!0});var i=p(t);return function t(e,n,a,i){var o="BODY"===e.nodeName,r=o?e.ownerDocument.defaultView:e;r.addEventListener(n,a,{passive:!0}),o||t(p(r.parentNode),n,a,i),i.push(r)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function A(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,L(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function D(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function j(n,a){Object.keys(a).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&D(a[t])&&(e="px"),n.style[t]=a[t]+e})}var H=n&&/Firefox/i.test(navigator.userAgent);function W(t,e,n){var a=F(t,function(t){return t.name===e}),i=!!a&&t.some(function(t){return t.name===n&&t.enabled&&t.order<a.order});if(!i){var o="`"+e+"`",r="`"+n+"`";console.warn(r+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var U=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Y=U.slice(3);function q(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Y.indexOf(t),a=Y.slice(n+1).concat(Y.slice(0,n));return e?a.reverse():a}var z="flip",G="clockwise",X="counterclockwise";function V(t,i,o,e){var r=[0,0],s=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),a=n.indexOf(F(n,function(t){return-1!==t.search(/,|\s/)}));n[a]&&-1===n[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==a?[n.slice(0,a).concat([n[a].split(l)[0]]),[n[a].split(l)[1]].concat(n.slice(a+1))]:[n];return(u=u.map(function(t,e){var n=(1===e?!s:s)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,a){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],r=i[2];if(!o)return t;if(0!==r.indexOf("%"))return"vh"!==r&&"vw"!==r?o:("vh"===r?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;var s=void 0;switch(r){case"%p":s=n;break;case"%":case"%r":default:s=a}return E(s)[e]/100*o}(t,n,i,o)})})).forEach(function(n,a){n.forEach(function(t,e){D(t)&&(r[a]+=t*("-"===n[e-1]?-1:1))})}),r}var K={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],a=e.split("-")[1];if(a){var i=t.offsets,o=i.reference,r=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",d={start:w({},l,o[l]),end:w({},l,o[l]+o[u]-r[u])};t.offsets.popper=B({},r,d[a])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,a=t.placement,i=t.offsets,o=i.popper,r=i.reference,s=a.split("-")[0],l=void 0;return l=D(+n)?[+n,0]:V(n,o,r,s),"left"===s?(o.top+=l[0],o.left-=l[1]):"right"===s?(o.top+=l[0],o.left+=l[1]):"top"===s?(o.left+=l[0],o.top-=l[1]):"bottom"===s&&(o.left+=l[0],o.top+=l[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,a){var e=a.boundariesElement||R(t.instance.popper);t.instance.reference===e&&(e=R(e));var n=N("transform"),i=t.instance.popper.style,o=i.top,r=i.left,s=i[n];i.top="",i.left="",i[n]="";var l=f(t.instance.popper,t.instance.reference,a.padding,e,t.positionFixed);i.top=o,i.left=r,i[n]=s,a.boundaries=l;var u=a.priority,d=t.offsets.popper,c={primary:function(t){var e=d[t];return d[t]<l[t]&&!a.escapeWithReference&&(e=Math.max(d[t],l[t])),w({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=d[e];return d[t]>l[t]&&!a.escapeWithReference&&(n=Math.min(d[e],l[t]-("right"===t?d.width:d.height))),w({},e,n)}};return u.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";d=B({},d,c[e](t))}),t.offsets.popper=d,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,a=e.reference,i=t.placement.split("-")[0],o=Math.floor,r=-1!==["top","bottom"].indexOf(i),s=r?"right":"bottom",l=r?"left":"top",u=r?"width":"height";return n[s]<o(a[l])&&(t.offsets.popper[l]=o(a[l])-n[u]),n[l]>o(a[s])&&(t.offsets.popper[l]=o(a[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!W(t.instance.modifiers,"arrow","keepTogether"))return t;var a=e.element;if("string"==typeof a){if(!(a=t.instance.popper.querySelector(a)))return t}else if(!t.instance.popper.contains(a))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,r=o.popper,s=o.reference,l=-1!==["left","right"].indexOf(i),u=l?"height":"width",d=l?"Top":"Left",c=d.toLowerCase(),f=l?"left":"top",h=l?"bottom":"right",p=P(a)[u];s[h]-p<r[c]&&(t.offsets.popper[c]-=r[c]-(s[h]-p)),s[c]+p>r[h]&&(t.offsets.popper[c]+=s[c]+p-r[h]),t.offsets.popper=E(t.offsets.popper);var m=s[c]+s[u]/2-p/2,g=b(t.instance.popper),v=parseFloat(g["margin"+d]),y=parseFloat(g["border"+d+"Width"]),_=m-t.offsets.popper[c]-v-y;return _=Math.max(Math.min(r[u]-p,_),0),t.arrowElement=a,t.offsets.arrow=(w(n={},c,Math.round(_)),w(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(g,v){if(S(g.instance.modifiers,"inner"))return g;if(g.flipped&&g.placement===g.originalPlacement)return g;var y=f(g.instance.popper,g.instance.reference,v.padding,v.boundariesElement,g.positionFixed),_=g.placement.split("-")[0],b=x(_),w=g.placement.split("-")[1]||"",E=[];switch(v.behavior){case z:E=[_,b];break;case G:E=q(_);break;case X:E=q(_,!0);break;default:E=v.behavior}return E.forEach(function(t,e){if(_!==t||E.length===e+1)return g;_=g.placement.split("-")[0],b=x(_);var n,a=g.offsets.popper,i=g.offsets.reference,o=Math.floor,r="left"===_&&o(a.right)>o(i.left)||"right"===_&&o(a.left)<o(i.right)||"top"===_&&o(a.bottom)>o(i.top)||"bottom"===_&&o(a.top)<o(i.bottom),s=o(a.left)<o(y.left),l=o(a.right)>o(y.right),u=o(a.top)<o(y.top),d=o(a.bottom)>o(y.bottom),c="left"===_&&s||"right"===_&&l||"top"===_&&u||"bottom"===_&&d,f=-1!==["top","bottom"].indexOf(_),h=!!v.flipVariations&&(f&&"start"===w&&s||f&&"end"===w&&l||!f&&"start"===w&&u||!f&&"end"===w&&d),p=!!v.flipVariationsByContent&&(f&&"start"===w&&l||f&&"end"===w&&s||!f&&"start"===w&&d||!f&&"end"===w&&u),m=h||p;(r||c||m)&&(g.flipped=!0,(r||c)&&(_=E[e+1]),m&&(w="end"===(n=w)?"start":"start"===n?"end":n),g.placement=_+(w?"-"+w:""),g.offsets.popper=B({},g.offsets.popper,C(g.instance.popper,g.offsets.reference,g.placement)),g=O(g.instance.modifiers,g,"flip"))}),g},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],a=t.offsets,i=a.popper,o=a.reference,r=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[r?"left":"top"]=o[n]-(s?i[r?"width":"height"]:0),t.placement=x(e),t.offsets.popper=E(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!W(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=F(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,a=e.y,i=t.offsets.popper,o=F(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var r,s,l,u,d,c,f,h,p,m,g,v,y,_,b=void 0!==o?o:e.gpuAcceleration,w=R(t.instance.popper),E=I(w),T={position:i.position},k=(r=t,s=window.devicePixelRatio<2||!H,l=r.offsets,u=l.popper,d=l.reference,c=Math.round,f=Math.floor,h=function(t){return t},p=c(d.width),m=c(u.width),g=-1!==["left","right"].indexOf(r.placement),v=-1!==r.placement.indexOf("-"),_=s?c:h,{left:(y=s?g||v||p%2==m%2?c:f:h)(p%2==1&&m%2==1&&!v&&s?u.left-1:u.left),top:_(u.top),bottom:_(u.bottom),right:y(u.right)}),P="bottom"===n?"top":"bottom",x="right"===a?"left":"right",C=N("transform"),O=void 0,S=void 0;if(S="bottom"===P?"HTML"===w.nodeName?-w.clientHeight+k.bottom:-E.height+k.bottom:k.top,O="right"===x?"HTML"===w.nodeName?-w.clientWidth+k.right:-E.width+k.right:k.left,b&&C)T[C]="translate3d("+O+"px, "+S+"px, 0)",T[P]=0,T[x]=0,T.willChange="transform";else{var L="bottom"===P?-1:1,M="right"===x?-1:1;T[P]=S*L,T[x]=O*M,T.willChange=P+", "+x}var A={"x-placement":t.placement};return t.attributes=B({},A,t.attributes),t.styles=B({},T,t.styles),t.arrowStyles=B({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return j(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&j(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,a,i){var o=u(i,e,t,n.positionFixed),r=l(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",r),j(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Z=function(){function o(t,e){var n=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=r(this.update.bind(this)),this.options=B({},o.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(B({},o.Defaults.modifiers,a.modifiers)).forEach(function(t){n.options.modifiers[t]=B({},o.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return B({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&s(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return t(o,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=u(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=l(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=C(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=O(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=M(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return A.call(this)}}]),o}();return Z.Utils=("undefined"!=typeof window?window:$).PopperUtils,Z.placements=U,Z.Defaults=K,Z},"object"==typeof a&&void 0!==n?n.exports=e():t.Popper=e()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],206:[function(t,r,e){!function(t){"use strict";function e(){}var n=e.prototype,a=t.EventEmitter;function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}n.getListeners=function(t){var e,n,a=this._getEvents();if(t instanceof RegExp)for(n in e={},a)a.hasOwnProperty(n)&&t.test(n)&&(e[n]=a[n]);else e=a[t]||(a[t]=[]);return e},n.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},n.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},n.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,a=this.getListenersAsObject(t),i="object"==typeof e;for(n in a)a.hasOwnProperty(n)&&-1===o(a[n],e)&&a[n].push(i?e:{listener:e,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,e){var n,a,i=this.getListenersAsObject(t);for(a in i)i.hasOwnProperty(a)&&-1!==(n=o(i[a],e))&&i[a].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,n){var a,i,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(a=n.length;a--;)o.call(this,e,n[a]);else for(a in e)e.hasOwnProperty(a)&&(i=e[a])&&("function"==typeof i?o.call(this,a,i):r.call(this,a,i));return this},n.removeEvent=function(t){var e,n=typeof t,a=this._getEvents();if("string"===n)delete a[t];else if(t instanceof RegExp)for(e in a)a.hasOwnProperty(e)&&t.test(e)&&delete a[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var n,a,i,o,r=this.getListenersAsObject(t);for(o in r)if(r.hasOwnProperty(o))for(n=r[o].slice(0),i=0;i<n.length;i++)!0===(a=n[i]).once&&this.removeListener(t,a.listener),a.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,a.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=a,e},"object"==typeof r&&r.exports?r.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:this||{})},{}]},{},[1])(1)});
//# sourceMappingURL=chickenpaint.min.js.map